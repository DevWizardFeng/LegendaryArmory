<h1 _ngcontent-wmb-c119="" class="doc-title ng-star-inserted" title="绑定手势事件"> 绑定手势事件 </h1>

<div _ngcontent-wmb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ArkUI开发框架在NDK接口主要提供点击手势、滑动手势、快滑手势、长按手势、捏合手势和旋转手势，通过给指定的组件绑定不同的手势并设置相应的回调，实现期望的手势交互能力。</p>    <p>下面通过一个简单的示例来介绍如何实现手势绑定。</p>    <ol>     <li>      <p>创建一个Column节点，用于绑定手势。</p>      <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建Column节点</span></li><li><span class="hljs-variable">auto</span> <span class="hljs-variable">column</span> = <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_COLUMN</span>);</li><li><span class="hljs-comment">// 设置背景色</span></li><li><span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">value</span>[] = {{.<span class="hljs-variable">u32</span> = <span class="hljs-number">0xff112233</span>}};</li><li><span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">item</span> = {<span class="hljs-variable">value</span>, <span class="hljs-number">1</span>};</li><li><span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_BACKGROUND_COLOR</span>, &amp;<span class="hljs-title class_">item</span>);</li><li><span class="hljs-comment">// 设置宽度</span></li><li><span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">widthValue</span>[] = {{<span class="hljs-number">400</span>}};</li><li><span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">width</span> = {<span class="hljs-variable">widthValue</span>, <span class="hljs-number">1</span>};</li><li><span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">width</span>);</li><li><span class="hljs-comment">// 设置高度</span></li><li><span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">heightValue</span>[] = {{<span class="hljs-number">400</span>}};</li><li><span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">height</span> = {<span class="hljs-variable">heightValue</span>, <span class="hljs-number">1</span>};</li><li><span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_HEIGHT</span>, &amp;<span class="hljs-title class_">height</span>);</li></ol></pre></div></div></li>     <li>      <p>创建一个单指长按1秒并持续响应的长按手势。</p>      <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取手势Native接口集合</span></li><li><span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>            <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li><span class="hljs-comment">// 创建长按手势</span></li><li><span class="hljs-variable">auto</span> <span class="hljs-variable">longPressGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createLongPressGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">1000</span>);</li></ol></pre></div></div></li>     <li>      <p>将创建的手势和步骤一中创建的Column节点绑定。</p>      <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 设置回调</span></li><li><span class="hljs-variable">auto</span> <span class="hljs-variable">onActionCallBack</span> = [](<span class="hljs-variable">ArkUI_GestureEvent</span> *<span class="hljs-variable">event</span>, <span class="hljs-variable">void</span> *<span class="hljs-variable">extraParam</span>) {</li><li>    <span class="hljs-comment">// 回调内容</span></li><li>};</li><li>
</li><li><span class="hljs-comment">// 将手势设置到组件上</span></li><li><span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">setGestureEventTarget</span>(<span class="hljs-title class_">longPressGesture</span>, <span class="hljs-title class_">GESTURE_EVENT_ACTION_ACCEPT</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_UPDATE</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_END</span>, <span class="hljs-title class_">column</span>, <span class="hljs-title class_">onActionCallBack</span>);</li><li>
</li><li><span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addGestureToNode</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">longPressGesture</span>, <span class="hljs-title class_">PARALLEL</span>, <span class="hljs-title class_">NORMAL_GESTURE_MASK</span>);</li></ol></pre></div></div></li>    </ol>    <div class="tiledSection">     <h2 id="单一手势">单一手势<i class="anchor-icon anchor-icon-link" anchorid="单一手势" tips="复制节点链接"></i></h2>          <p>通过上文的示例已经了解了如何将手势绑定在节点上，接下来将分别介绍不同手势的创建方法。</p>     <ul>      <li>       <p>点击手势</p>       <p>通过给组件绑定点击手势可在组件被点击时触发此回调，可指定触发回调需要的点击次数和手指个数。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-comment">// 获取手势Native接口集合</span></li><li> <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>             <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li> <span class="hljs-comment">// 创建点击手势</span></li><li> <span class="hljs-variable">auto</span> <span class="hljs-variable">tapGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createTapGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);</li></ol></pre></div></div></li>      <li>       <p>滑动手势</p>       <p>通过给组件绑定滑动手势可在用户滑动组件时触发回调，可指定触发回调需要的手指个数、滑动方向、滑动距离。单位为px。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">// 获取手势Native接口集合</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>      <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>  <span class="hljs-comment">// 创建滑动手势</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">panGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createPanGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">GESTURE_DIRECTION_ALL</span>, <span class="hljs-number">1</span>);</li></ol></pre></div></div></li>      <li>       <p>长按手势</p>       <p>通过给组件绑定长按手势可在用户长按组件时触发回调，可指定触发回调需要的手指个数、长按时间（单位毫秒）、是否连续触发。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">// 获取手势Native接口集合</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>      <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>  <span class="hljs-comment">// 创建长按手势</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">longPressGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createLongPressGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">1000</span>);</li></ol></pre></div></div></li>      <li>       <p>捏合手势</p>       <p>通过给组件绑定捏合手势可在用户捏合组件时触发回调，可指定触发回调需要的手指个数（最小为2）、捏合距离（单位px）。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">// 获取手势Native接口集合</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>      <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>  <span class="hljs-comment">// 创建捏合手势</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">pinchGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createPinchGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);</li></ol></pre></div></div></li>      <li>       <p>旋转手势</p>       <p>通过给组件绑定旋转手势可在用户旋转组件时触发回调，可指定触发回调需要的手指个数（最小为2）、旋转角度。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">// 获取手势Native接口集合</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>      <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>  <span class="hljs-comment">// 创建旋转手势</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">rotationGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createRotationGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);</li></ol></pre></div></div></li>      <li>       <p>快滑手势</p>       <p>通过给组件绑定快滑手势可在用户快速滑动组件时触发回调，可指定触发回调需要的手指个数（最小为1）、滑动方向、滑动速度（单位px/s）。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">// 获取手势Native接口集合</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>      <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>  <span class="hljs-comment">// 创建快滑手势</span></li><li>  <span class="hljs-variable">auto</span> <span class="hljs-variable">swipeGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createSwipeGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">GESTURE_DIRECTION_ALL</span>, <span class="hljs-number">50</span>);</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="组合手势">组合手势<i class="anchor-icon anchor-icon-link" anchorid="组合手势" tips="复制节点链接"></i></h2>          <p>可以将多个不同类型的手势组合在一起，形成一个手势组，这个手势组可以作为一个识别整体，达到对用户多个不同类型手势序列的识别目的。</p>     <p>通过设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-gesture-h#arkui_groupgesturemode" target="_blank">ArkUI_GroupGestureMode</a>来指定这个手势组的识别模式，即组内的手势之间的关系，包含顺序识别SEQUENTIAL_GROUP，并行识别PARALLEL_GROUP，互斥识别EXCLUSIVE_GROUP。</p>    </div>    <div class="tiledSection">     <h3 id="顺序识别" class="firsth2">顺序识别<i class="anchor-icon anchor-icon-link" anchorid="顺序识别" tips="复制节点链接"></i></h3>          <p>顺序识别组合手势对应的ArkUI_GroupGestureMode为SEQUENTIAL_GROUP。顺序识别组合手势将按照手势的注册顺序识别手势，直到所有的手势识别成功。当顺序识别组合手势中有一个手势识别失败时，后续手势识别均失败。顺序识别手势组仅有最后一个手势可以响应<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-gesture-h#arkui_gestureeventactiontype" target="_blank">GESTURE_EVENT_ACTION_END</a>。</p>     <p>以顺序识别长按和滑动手势为例：</p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>#<span class="hljs-variable">include</span> <span class="hljs-string">"napi/native_api.h"</span></li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_animate</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_gesture</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_interface</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_node_napi</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">hilog</span>/<span class="hljs-title class_">log</span>.<span class="hljs-title class_">h</span>&gt;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">unsigned</span> <span class="hljs-variable">int</span> <span class="hljs-variable">LOG_PRINT_DOMAIN</span> = <span class="hljs-number">0xFF00</span>;</li><li>
</li><li><span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-title function_">testGestureExample</span>() {</li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">column</span> = <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_COLUMN</span>);</li><li>
</li><li>    <span class="hljs-comment">// 创建节点</span></li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">value</span>[] = {{.<span class="hljs-variable">u32</span> = <span class="hljs-number">0xff112233</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">item</span> = {<span class="hljs-variable">value</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_BACKGROUND_COLOR</span>, &amp;<span class="hljs-title class_">item</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">widthValue</span>[] = {{<span class="hljs-number">200</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">width</span> = {<span class="hljs-variable">widthValue</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">width</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">heightValue</span>[] = {{<span class="hljs-number">200</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">height</span> = {<span class="hljs-variable">heightValue</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_HEIGHT</span>, &amp;<span class="hljs-title class_">height</span>);</li><li>
</li><li>    <span class="hljs-comment">// 判断是否支持创建手势</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>        <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createGroupGesture</span>) {</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, createGroupGesture api exist"</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, createGroupGesture api not exist"</span>);</li><li>    }</li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">groupGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createGroupGesture</span>(<span class="hljs-variable">ArkUI_GroupGestureMode</span>::<span class="hljs-title class_">SEQUENTIAL_GROUP</span>);</li><li>
</li><li>    <span class="hljs-comment">// 创建长按手势</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">longPressGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createLongPressGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">500</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureRecognizerType</span> <span class="hljs-keyword">type</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>(<span class="hljs-title class_">longPressGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog longPressGesture,ArkUI_GestureRecognizerType%{public}d"</span>, <span class="hljs-keyword">type</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 给长按手势定回调</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">onActionCallBackPanLongPress</span> = [](<span class="hljs-variable">ArkUI_GestureEvent</span> *<span class="hljs-variable">event</span>, <span class="hljs-variable">void</span> *<span class="hljs-variable">extraParam</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureEventActionType</span> <span class="hljs-variable">actionType</span> = <span class="hljs-title function_">OH_ArkUI_GestureEvent_GetActionType</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocity</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">offsetX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">offsetY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">scale</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetScale</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">centerX</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">centerY</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angle</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">VelocityS</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angleR</span> = <span class="hljs-title function_">OH_ArkUI_RotationGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">repeat</span> = <span class="hljs-title function_">OH_ArkUI_LongPress_GetRepeatCount</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(</li><li>            <span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>            <span class="hljs-string">"GestureSampleLog,longPressGesturecallback actionType:%{public}d,velocity%{public}f,velocityX"</span></li><li>            <span class="hljs-string">"%{public}f;"</span></li><li>            <span class="hljs-string">"velocityY%{public}f,offsetX%{public}f,offsetY%{public}f,scale%{public}fcenterX"</span></li><li>            <span class="hljs-string">"%{public}fcenterY"</span></li><li>            <span class="hljs-string">"%{public}fangle%{public}fVelocityS%{public}fangleR%{public}frepeat%{public}f"</span>,</li><li>            <span class="hljs-variable">actionType</span>, <span class="hljs-variable">velocity</span>, <span class="hljs-variable">velocityX</span>, <span class="hljs-variable">velocityY</span>, <span class="hljs-variable">offsetX</span>, <span class="hljs-variable">offsetY</span>, <span class="hljs-variable">scale</span>, <span class="hljs-variable">centerX</span>, <span class="hljs-variable">centerY</span>, <span class="hljs-variable">angle</span>, <span class="hljs-variable">VelocityS</span>,</li><li>            <span class="hljs-variable">angleR</span>, <span class="hljs-variable">repeat</span>);</li><li>    };</li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">setGestureEventTarget</span>(<span class="hljs-title class_">longPressGesture</span>,</li><li>                                      <span class="hljs-title class_">GESTURE_EVENT_ACTION_ACCEPT</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_UPDATE</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_CANCEL</span>,</li><li>                                      <span class="hljs-title class_">column</span>, <span class="hljs-title class_">onActionCallBackPanLongPress</span>);</li><li>
</li><li>    <span class="hljs-comment">// 将长按手势添加到手势组</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>) {</li><li>        <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>(<span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">longPressGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>, <span class="hljs-string">"GestureSampleLog, addChildGesture longPressGesture"</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 创建快滑手势 swipe</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">swipeGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createSwipeGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">GESTURE_DIRECTION_ALL</span>, <span class="hljs-number">100</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureRecognizerType</span> <span class="hljs-keyword">type</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>(<span class="hljs-title class_">swipeGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, ArkUI_GestureRecognizerType %{public}d"</span>, <span class="hljs-keyword">type</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 给快滑手势绑定回调</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">onActionCallBack</span> = [](<span class="hljs-variable">ArkUI_GestureEvent</span> *<span class="hljs-variable">event</span>, <span class="hljs-variable">void</span> *<span class="hljs-variable">extraParam</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureEventActionType</span> <span class="hljs-variable">actionType</span> = <span class="hljs-title function_">OH_ArkUI_GestureEvent_GetActionType</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocity</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">offsetX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">offsetY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">scale</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetScale</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">centerX</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">centerY</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angle</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">VelocityS</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angleR</span> = <span class="hljs-title function_">OH_ArkUI_RotationGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">repeat</span> = <span class="hljs-title function_">OH_ArkUI_LongPress_GetRepeatCount</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>
</li><li>        <span class="hljs-comment">// 通过日志查看</span></li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, swipeGesture callback actionType: %{public}d, velocity "</span></li><li>                     <span class="hljs-string">"%{public}f,velocityX "</span></li><li>                     <span class="hljs-string">"%{public}f; "</span></li><li>                     <span class="hljs-string">"velocityY %{public}f, offsetX %{public}f, offsetY %{public}f, scale %{public}fcenterX "</span></li><li>                     <span class="hljs-string">"%{public}f centerY"</span></li><li>                     <span class="hljs-string">" %{public}f angle %{public}f VelocityS %{public}f angleR %{public}f repeat %{public}f"</span>,</li><li>                     <span class="hljs-variable">actionType</span>, <span class="hljs-variable">velocity</span>, <span class="hljs-variable">velocityX</span>, <span class="hljs-variable">velocityY</span>, <span class="hljs-variable">offsetX</span>, <span class="hljs-variable">offsetY</span>, <span class="hljs-variable">scale</span>, <span class="hljs-variable">centerX</span>, <span class="hljs-variable">centerY</span>, <span class="hljs-variable">angle</span>,</li><li>                     <span class="hljs-variable">VelocityS</span>, <span class="hljs-variable">angleR</span>, <span class="hljs-variable">repeat</span>);</li><li>
</li><li>        <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">value</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-variable">angleR</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}};</li><li>        <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">item</span> = {<span class="hljs-variable">value</span>, <span class="hljs-number">5</span>};</li><li>        <span class="hljs-variable">auto</span> <span class="hljs-variable">column</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NodeHandle</span>&gt;(<span class="hljs-variable">extraParam</span>);</li><li>        <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_ROTATE</span>, &amp;<span class="hljs-title class_">item</span>);</li><li>    };</li><li>
</li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">setGestureEventTarget</span>(</li><li>        <span class="hljs-title class_">swipeGesture</span>, <span class="hljs-title class_">GESTURE_EVENT_ACTION_ACCEPT</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_UPDATE</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_END</span>, <span class="hljs-title class_">column</span>,</li><li>        <span class="hljs-title class_">onActionCallBack</span>);</li><li>
</li><li>    <span class="hljs-comment">// 将快滑手势添加到手势组</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>) {</li><li>        <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>(<span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">swipeGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, addChildGesture swipeGesture"</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 将手势组设置到组件上</span></li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addGestureToNode</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">PRIORITY</span>, <span class="hljs-title class_">NORMAL_GESTURE_MASK</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable">column</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="并行识别">并行识别<i class="anchor-icon anchor-icon-link" anchorid="并行识别" tips="复制节点链接"></i></h3>          <p>并行识别组合手势对应的ArkUI_GroupGestureMode为PARALLEL_GROUP。并行识别组合手势中注册的手势将同时进行识别，直到所有手势识别结束。并行识别手势组合中的手势进行识别时互不影响。</p>     <p>以并行识别长按和快滑手势为例：</p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>#<span class="hljs-variable">include</span> <span class="hljs-string">"napi/native_api.h"</span></li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_animate</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_gesture</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_interface</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_node_napi</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">hilog</span>/<span class="hljs-title class_">log</span>.<span class="hljs-title class_">h</span>&gt;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">unsigned</span> <span class="hljs-variable">int</span> <span class="hljs-variable">LOG_PRINT_DOMAIN</span> = <span class="hljs-number">0xFF00</span>;</li><li>
</li><li><span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-title function_">testGestureExample</span>() {</li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">column</span> = <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_COLUMN</span>);</li><li>
</li><li>    <span class="hljs-comment">// 创建节点</span></li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">value</span>[] = {{.<span class="hljs-variable">u32</span> = <span class="hljs-number">0xff112233</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">item</span> = {<span class="hljs-variable">value</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_BACKGROUND_COLOR</span>, &amp;<span class="hljs-title class_">item</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">widthValue</span>[] = {{<span class="hljs-number">200</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">width</span> = {<span class="hljs-variable">widthValue</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">width</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">heightValue</span>[] = {{<span class="hljs-number">200</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">height</span> = {<span class="hljs-variable">heightValue</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_HEIGHT</span>, &amp;<span class="hljs-title class_">height</span>);</li><li>
</li><li>    <span class="hljs-comment">// 判断是否支持创建手势</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>        <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createGroupGesture</span>) {</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, createGroupGesture api exist"</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, createGroupGesture api not exist"</span>);</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 创建手势组</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">groupGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createGroupGesture</span>(<span class="hljs-variable">ArkUI_GroupGestureMode</span>::<span class="hljs-title class_">PARALLEL_GROUP</span>);</li><li>
</li><li>    <span class="hljs-comment">// 创建长按手势</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">longPressGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createLongPressGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">500</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureRecognizerType</span> <span class="hljs-keyword">type</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>(<span class="hljs-title class_">longPressGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog,ArkUI_GestureRecognizerType%{public}d"</span>, <span class="hljs-keyword">type</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 给长按手势定回调</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">onActionCallBackPanLongPress</span> = [](<span class="hljs-variable">ArkUI_GestureEvent</span> *<span class="hljs-variable">event</span>, <span class="hljs-variable">void</span> *<span class="hljs-variable">extraParam</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureEventActionType</span> <span class="hljs-variable">actionType</span> = <span class="hljs-title function_">OH_ArkUI_GestureEvent_GetActionType</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocity</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">scale</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetScale</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterX</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterY</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angle</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">VelocityS</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angleR</span> = <span class="hljs-title function_">OH_ArkUI_RotationGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">repeat</span> = <span class="hljs-title function_">OH_ArkUI_LongPress_GetRepeatCount</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(</li><li>            <span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>            <span class="hljs-string">"GestureSampleLog,longPressGesturecallback actionType:%{public}d,velocity%{public}f,velocityX"</span></li><li>            <span class="hljs-string">"%{public}f;"</span></li><li>            <span class="hljs-string">"velocityY%{public}f,OffsetX%{public}f,OffsetY%{public}f,scale%{public}fCenterX"</span></li><li>            <span class="hljs-string">"%{public}fCenterY"</span></li><li>            <span class="hljs-string">"%{public}fangle%{public}fVelocityS%{public}fangleR%{public}frepeat%{public}f"</span>,</li><li>            <span class="hljs-variable">actionType</span>, <span class="hljs-variable">velocity</span>, <span class="hljs-variable">velocityX</span>, <span class="hljs-variable">velocityY</span>, <span class="hljs-variable">OffsetX</span>, <span class="hljs-variable">OffsetY</span>, <span class="hljs-variable">scale</span>, <span class="hljs-variable">CenterX</span>, <span class="hljs-variable">CenterY</span>, <span class="hljs-variable">angle</span>, <span class="hljs-variable">VelocityS</span>,</li><li>            <span class="hljs-variable">angleR</span>, <span class="hljs-variable">repeat</span>);</li><li>    };</li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">setGestureEventTarget</span>(<span class="hljs-title class_">longPressGesture</span>,</li><li>                                      <span class="hljs-title class_">GESTURE_EVENT_ACTION_ACCEPT</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_UPDATE</span> |</li><li>                                            <span class="hljs-title class_">GESTURE_EVENT_ACTION_CANCEL</span>,</li><li>                                      <span class="hljs-title class_">column</span>, <span class="hljs-title class_">onActionCallBackPanLongPress</span>);</li><li>
</li><li>    <span class="hljs-comment">// 将长按手势添加到手势组</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>) {</li><li>        <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>(<span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">longPressGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>, <span class="hljs-string">"GestureSampleLog, addChildGesture longPressGesture"</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 创建快滑手势 swipe</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">swipeGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createSwipeGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">GESTURE_DIRECTION_ALL</span>, <span class="hljs-number">100</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureRecognizerType</span> <span class="hljs-keyword">type</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>(<span class="hljs-title class_">swipeGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, ArkUI_GestureRecognizerType %{public}d"</span>, <span class="hljs-keyword">type</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 给快滑手势绑定回调</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">onActionCallBack</span> = [](<span class="hljs-variable">ArkUI_GestureEvent</span> *<span class="hljs-variable">event</span>, <span class="hljs-variable">void</span> *<span class="hljs-variable">extraParam</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureEventActionType</span> <span class="hljs-variable">actionType</span> = <span class="hljs-title function_">OH_ArkUI_GestureEvent_GetActionType</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocity</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">scale</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetScale</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterX</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterY</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angle</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">VelocityS</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angleR</span> = <span class="hljs-title function_">OH_ArkUI_RotationGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">repeat</span> = <span class="hljs-title function_">OH_ArkUI_LongPress_GetRepeatCount</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>
</li><li>        <span class="hljs-comment">// 通过日志查看</span></li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, swipeGesture callback actionType: %{public}d, velocity "</span></li><li>                     <span class="hljs-string">"%{public}f,velocityX "</span></li><li>                     <span class="hljs-string">"%{public}f; "</span></li><li>                     <span class="hljs-string">"velocityY %{public}f, OffsetX %{public}f, OffsetY %{public}f, scale %{public}fCenterX "</span></li><li>                     <span class="hljs-string">"%{public}f CenterY"</span></li><li>                     <span class="hljs-string">" %{public}f angle %{public}f VelocityS %{public}f angleR %{public}f repeat %{public}f"</span>,</li><li>                     <span class="hljs-variable">actionType</span>, <span class="hljs-variable">velocity</span>, <span class="hljs-variable">velocityX</span>, <span class="hljs-variable">velocityY</span>, <span class="hljs-variable">OffsetX</span>, <span class="hljs-variable">OffsetY</span>, <span class="hljs-variable">scale</span>, <span class="hljs-variable">CenterX</span>, <span class="hljs-variable">CenterY</span>, <span class="hljs-variable">angle</span>,</li><li>                     <span class="hljs-variable">VelocityS</span>, <span class="hljs-variable">angleR</span>, <span class="hljs-variable">repeat</span>);</li><li>
</li><li>        <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">value</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-variable">angleR</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-number">0</span>}};</li><li>        <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">item</span> = {<span class="hljs-variable">value</span>, <span class="hljs-number">5</span>};</li><li>        <span class="hljs-variable">auto</span> <span class="hljs-variable">column</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NodeHandle</span>&gt;(<span class="hljs-variable">extraParam</span>);</li><li>        <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_ROTATE</span>, &amp;<span class="hljs-title class_">item</span>);</li><li>    };</li><li>
</li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">setGestureEventTarget</span>(</li><li>        <span class="hljs-title class_">swipeGesture</span>, <span class="hljs-title class_">GESTURE_EVENT_ACTION_ACCEPT</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_UPDATE</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_END</span>, <span class="hljs-title class_">column</span>,</li><li>        <span class="hljs-title class_">onActionCallBack</span>);</li><li>
</li><li>    <span class="hljs-comment">// 将快滑手势添加到手势组</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>) {</li><li>        <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>(<span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">swipeGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, addChildGesture swipeGesture"</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 将手势组设置到组件上</span></li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addGestureToNode</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">PRIORITY</span>, <span class="hljs-title class_">NORMAL_GESTURE_MASK</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable">column</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="互斥识别">互斥识别<i class="anchor-icon anchor-icon-link" anchorid="互斥识别" tips="复制节点链接"></i></h3>          <p>互斥识别组合手势对应的ArkUI_GroupGestureMode为EXCLUSIVE_GROUP。互斥识别组合手势中注册的手势将同时进行识别，若有一个手势识别成功，则结束手势识别，其他所有手势识别失败。</p>     <p>以互斥识别滑动手势和捏合手势为例：</p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>#<span class="hljs-variable">include</span> <span class="hljs-string">"napi/native_api.h"</span></li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_animate</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_gesture</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_interface</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">arkui</span>/<span class="hljs-title class_">native_node_napi</span>.<span class="hljs-title class_">h</span>&gt;</li><li>#<span class="hljs-variable">include</span> &lt;<span class="hljs-title class_">hilog</span>/<span class="hljs-title class_">log</span>.<span class="hljs-title class_">h</span>&gt;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">unsigned</span> <span class="hljs-variable">int</span> <span class="hljs-variable">LOG_PRINT_DOMAIN</span> = <span class="hljs-number">0xFF00</span>;</li><li><span class="hljs-keyword">static</span> <span class="hljs-variable">ArkUI_NativeNodeAPI_1</span> *<span class="hljs-variable">nodeAPI</span> = <span class="hljs-variable">nullptr</span>;</li><li>
</li><li><span class="hljs-variable">ArkUI_NodeHandle</span> <span class="hljs-title function_">testGestureExample</span>() {</li><li>    <span class="hljs-title function_">OH_ArkUI_GetModuleInterface</span>(<span class="hljs-variable">ARKUI_NATIVE_NODE</span>, <span class="hljs-variable">ArkUI_NativeNodeAPI_1</span>, <span class="hljs-variable">nodeAPI</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">nodeAPI</span> == <span class="hljs-variable">nullptr</span>) {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-variable">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">column</span> = <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">createNode</span>(<span class="hljs-title class_">ARKUI_NODE_COLUMN</span>);</li><li>
</li><li>    <span class="hljs-comment">// 创建节点</span></li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">value</span>[] = {{.<span class="hljs-variable">u32</span> = <span class="hljs-number">0xff112233</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">item</span> = {<span class="hljs-variable">value</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_BACKGROUND_COLOR</span>, &amp;<span class="hljs-title class_">item</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">widthValue</span>[] = {{<span class="hljs-number">200</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">width</span> = {<span class="hljs-variable">widthValue</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_WIDTH</span>, &amp;<span class="hljs-title class_">width</span>);</li><li>    <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">heightValue</span>[] = {{<span class="hljs-number">200</span>}};</li><li>    <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">height</span> = {<span class="hljs-variable">heightValue</span>, <span class="hljs-number">1</span>};</li><li>    <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_HEIGHT</span>, &amp;<span class="hljs-title class_">height</span>);</li><li>
</li><li>    <span class="hljs-comment">// 判断是否支持创建手势</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">gestureApi</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NativeGestureAPI_1</span> *&gt;(</li><li>        <span class="hljs-title function_">OH_ArkUI_QueryModuleInterfaceByName</span>(<span class="hljs-variable">ARKUI_NATIVE_GESTURE</span>, <span class="hljs-string">"ArkUI_NativeGestureAPI_1"</span>));</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createGroupGesture</span>) {</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, createGroupGesture api exist"</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog, createGroupGesture api not exist"</span>);</li><li>    }</li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">groupGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createGroupGesture</span>(<span class="hljs-variable">ArkUI_GroupGestureMode</span>::<span class="hljs-title class_">EXCLUSIVE_GROUP</span>);</li><li>
</li><li>    <span class="hljs-comment">// 创建滑动手势</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">panGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createPanGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">GESTURE_DIRECTION_VERTICAL</span>, <span class="hljs-number">5</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureRecognizerType</span> <span class="hljs-keyword">type</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>(<span class="hljs-title class_">panGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog panGesture, ArkUI_GestureRecognizerType %{public}d"</span>, <span class="hljs-keyword">type</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 给滑动手势绑定回调</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">onActionCallBackPan</span> = [](<span class="hljs-variable">ArkUI_GestureEvent</span> *<span class="hljs-variable">event</span>, <span class="hljs-variable">void</span> *<span class="hljs-variable">extraParam</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureEventActionType</span> <span class="hljs-variable">actionType</span> = <span class="hljs-title function_">OH_ArkUI_GestureEvent_GetActionType</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocity</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">scale</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetScale</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterX</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterY</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angle</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">VelocityS</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angleR</span> = <span class="hljs-title function_">OH_ArkUI_RotationGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">repeat</span> = <span class="hljs-title function_">OH_ArkUI_LongPress_GetRepeatCount</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-comment">// 通过日志查看</span></li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(</li><li>            <span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>            <span class="hljs-string">"GestureSampleLog, panGesture callback actionType: %{public}d, velocity %{public}f,velocityX "</span></li><li>            <span class="hljs-string">"%{public}f; "</span></li><li>            <span class="hljs-string">"velocityY %{public}f, OffsetX %{public}f, OffsetY %{public}f, scale %{public}fCenterX "</span></li><li>            <span class="hljs-string">"%{public}f CenterY"</span></li><li>            <span class="hljs-string">" %{public}f angle %{public}f VelocityS %{public}f angleR %{public}f repeat %{public}f"</span>,</li><li>            <span class="hljs-variable">actionType</span>, <span class="hljs-variable">velocity</span>, <span class="hljs-variable">velocityX</span>, <span class="hljs-variable">velocityY</span>, <span class="hljs-variable">OffsetX</span>, <span class="hljs-variable">OffsetY</span>, <span class="hljs-variable">scale</span>, <span class="hljs-variable">CenterX</span>, <span class="hljs-variable">CenterY</span>, <span class="hljs-variable">angle</span>, <span class="hljs-variable">VelocityS</span>,</li><li>            <span class="hljs-variable">angleR</span>, <span class="hljs-variable">repeat</span>);</li><li>    };</li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">setGestureEventTarget</span>(<span class="hljs-title class_">panGesture</span>,</li><li>                                      <span class="hljs-title class_">GESTURE_EVENT_ACTION_ACCEPT</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_UPDATE</span> |</li><li>                                          <span class="hljs-title class_">GESTURE_EVENT_ACTION_END</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_CANCEL</span>,</li><li>                                      <span class="hljs-title class_">column</span>, <span class="hljs-title class_">onActionCallBackPan</span>);</li><li>    <span class="hljs-comment">// 将滑动手势添加到手势组</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>) {</li><li>        <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>(<span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">panGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>, <span class="hljs-string">"GestureSampleLog, addChildGesture panGesture"</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 创建捏合手势</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">pinchGesture</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">createPinchGesture</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureRecognizerType</span> <span class="hljs-keyword">type</span> = <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">getGestureType</span>(<span class="hljs-title class_">pinchGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>                     <span class="hljs-string">"GestureSampleLog pinchGesture, ArkUI_GestureRecognizerType %{public}d"</span>, <span class="hljs-keyword">type</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 给捏合手势绑定回调</span></li><li>    <span class="hljs-variable">auto</span> <span class="hljs-variable">onActionCallBack</span> = [](<span class="hljs-variable">ArkUI_GestureEvent</span> *<span class="hljs-variable">event</span>, <span class="hljs-variable">void</span> *<span class="hljs-variable">extraParam</span>) {</li><li>        <span class="hljs-variable">ArkUI_GestureEventActionType</span> <span class="hljs-variable">actionType</span> = <span class="hljs-title function_">OH_ArkUI_GestureEvent_GetActionType</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocity</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">velocityY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetVelocityY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetX</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">OffsetY</span> = <span class="hljs-title function_">OH_ArkUI_PanGesture_GetOffsetY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">scale</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetScale</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterX</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterX</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">CenterY</span> = <span class="hljs-title function_">OH_ArkUI_PinchGesture_GetCenterY</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angle</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">VelocityS</span> = <span class="hljs-title function_">OH_ArkUI_SwipeGesture_GetVelocity</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">angleR</span> = <span class="hljs-title function_">OH_ArkUI_RotationGesture_GetAngle</span>(<span class="hljs-variable">event</span>);</li><li>        <span class="hljs-variable">float</span> <span class="hljs-variable">repeat</span> = <span class="hljs-title function_">OH_ArkUI_LongPress_GetRepeatCount</span>(<span class="hljs-variable">event</span>);</li><li>
</li><li>
</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(</li><li>            <span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>,</li><li>            <span class="hljs-string">"GestureSampleLog, pinchGesture callback actionType: %{public}d, velocity %{public}f,velocityX "</span></li><li>            <span class="hljs-string">"%{public}f; "</span></li><li>            <span class="hljs-string">"velocityY %{public}f, OffsetX %{public}f, OffsetY %{public}f, scale %{public}fCenterX "</span></li><li>            <span class="hljs-string">"%{public}f CenterY"</span></li><li>            <span class="hljs-string">" %{public}f angle %{public}f VelocityS %{public}f angleR %{public}f repeat %{public}f"</span>,</li><li>            <span class="hljs-variable">actionType</span>, <span class="hljs-variable">velocity</span>, <span class="hljs-variable">velocityX</span>, <span class="hljs-variable">velocityY</span>, <span class="hljs-variable">OffsetX</span>, <span class="hljs-variable">OffsetY</span>, <span class="hljs-variable">scale</span>, <span class="hljs-variable">CenterX</span>, <span class="hljs-variable">CenterY</span>, <span class="hljs-variable">angle</span>, <span class="hljs-variable">VelocityS</span>,</li><li>            <span class="hljs-variable">angleR</span>, <span class="hljs-variable">repeat</span>);</li><li>
</li><li>
</li><li>        <span class="hljs-variable">ArkUI_NumberValue</span> <span class="hljs-variable">value</span>[] = {{.<span class="hljs-variable">f32</span> = <span class="hljs-variable">scale</span>}, {.<span class="hljs-variable">f32</span> = <span class="hljs-variable">scale</span>}};</li><li>        <span class="hljs-variable">ArkUI_AttributeItem</span> <span class="hljs-variable">item</span> = {<span class="hljs-variable">value</span>, <span class="hljs-number">2</span>};</li><li>        <span class="hljs-variable">auto</span> <span class="hljs-variable">column</span> = <span class="hljs-title class_">reinterpret_cast</span>&lt;<span class="hljs-title class_">ArkUI_NodeHandle</span>&gt;(<span class="hljs-variable">extraParam</span>);</li><li>        <span class="hljs-variable">nodeAPI</span>-&gt;<span class="hljs-title class_">setAttribute</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">NODE_SCALE</span>, &amp;<span class="hljs-title class_">item</span>);</li><li>    };</li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">setGestureEventTarget</span>(<span class="hljs-title class_">pinchGesture</span>,</li><li>                                      <span class="hljs-title class_">GESTURE_EVENT_ACTION_ACCEPT</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_UPDATE</span> |</li><li>                                          <span class="hljs-title class_">GESTURE_EVENT_ACTION_END</span> | <span class="hljs-title class_">GESTURE_EVENT_ACTION_CANCEL</span>,</li><li>                                      <span class="hljs-title class_">column</span>, <span class="hljs-title class_">onActionCallBack</span>);</li><li>    <span class="hljs-comment">// 将捏合手势添加到手势组</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>) {</li><li>        <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addChildGesture</span>(<span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">pinchGesture</span>);</li><li>        <span class="hljs-title function_">OH_LOG_Print</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-variable">LOG_INFO</span>, <span class="hljs-variable">LOG_PRINT_DOMAIN</span>, <span class="hljs-string">"Manager"</span>, <span class="hljs-string">"GestureSampleLog, addChildGesture pinchGesture"</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 将手势组设置到组件上</span></li><li>    <span class="hljs-variable">gestureApi</span>-&gt;<span class="hljs-title class_">addGestureToNode</span>(<span class="hljs-title class_">column</span>, <span class="hljs-title class_">groupGesture</span>, <span class="hljs-title class_">PRIORITY</span>, <span class="hljs-title class_">NORMAL_GESTURE_MASK</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable">column</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="自定义手势判定">自定义手势判定<i class="anchor-icon anchor-icon-link" anchorid="自定义手势判定" tips="复制节点链接"></i></h3>          <p>当用户的操作符合某个手势识别器，该识别器即将触发成功时，可通过自定义手势判定能力来动态决策，是否希望该识别器被系统认定为识别成功。通过setGestureInterrupterToNode接口，绑定一个回调在该组件上，但组件上的某个手势即将识别成功时，通过返回CONTINUE或REJECT来决定是否将成功机会让给其它手势识别器。</p>     <p>在上文绑定手势事件的示例中按照如下方式进行调整即可实现自定义手势判定。</p>     <ol>      <li>       <p>创建自定义手势判定回调。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">auto</span> onInterruptCallback = [](ArkUI_GestureInterruptInfo *info) -&gt; ArkUI_GestureInterruptResult {</li><li>    <span class="hljs-comment">// 获取是否系统手势</span></li><li>    <span class="hljs-keyword">auto</span> systag = <span class="hljs-built_in">OH_ArkUI_GestureInterruptInfo_GetSystemFlag</span>(info);</li><li>    <span class="hljs-comment">// 获取拦截的手势指针</span></li><li>    <span class="hljs-keyword">auto</span> recognizer = <span class="hljs-built_in">OH_ArkUI_GestureInterruptInfo_GetRecognizer</span>(info);</li><li>    <span class="hljs-comment">// 获取系统手势类型</span></li><li>    <span class="hljs-keyword">auto</span> systemRecognizerType = <span class="hljs-built_in">OH_ArkUI_GestureInterruptInfo_GetSystemRecognizerType</span>(info);</li><li>    <span class="hljs-comment">// 获取手势事件</span></li><li>    <span class="hljs-keyword">auto</span> gestureEvent = <span class="hljs-built_in">OH_ArkUI_GestureInterruptInfo_GetGestureEvent</span>(info);</li><li>    <span class="hljs-keyword">auto</span> inputevent = <span class="hljs-built_in">OH_ArkUI_GestureEvent_GetRawInputEvent</span>(gestureEvent);</li><li>
</li><li>    <span class="hljs-keyword">if</span> (systag) {</li><li>        <span class="hljs-comment">// 如果是系统手势则不拦截</span></li><li>        <span class="hljs-keyword">return</span> GESTURE_INTERRUPT_RESULT_CONTINUE;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 不是系统手势则拒绝</span></li><li>        <span class="hljs-keyword">return</span> GESTURE_INTERRUPT_RESULT_REJECT;</li><li>    }</li><li>};</li></ol></pre></div></div></li>      <li>       <p>绑定手势判定和节点。</p>       <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>gestureApi-&gt;<span class="hljs-built_in">setGestureInterrupterToNode</span>(column, onInterruptCallback);</li></ol></pre></div></div></li>     </ol>     <p>经过上述修改，将原本可以生效的长按手势做了拦截，即，此时再对Column节点长按将不会触发长按的手势回调。</p>    </div>    <div class="tiledSection">     <h2 id="获取事件信息">获取事件信息<i class="anchor-icon anchor-icon-link" anchorid="获取事件信息" tips="复制节点链接"></i></h2>          <p>绑定手势事件已详细说明如何将手势绑定到节点上。在回调执行时，ArkUI框架提供了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-gesture-h#oh_arkui_gestureevent_getrawinputevent" target="_blank">OH_ArkUI_GestureEvent_GetRawInputEvent()</a>接口，可从手势事件中获取基础事件对象。之后，可通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ui-input-event-h#oh_arkui_pointerevent_getdisplayx" target="_blank">OH_ArkUI_PointerEvent_GetDisplayX()</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ui-input-event-h#oh_arkui_pointerevent_getdisplayxbyindex" target="_blank">OH_ArkUI_PointerEvent_GetDisplayXByIndex()</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ui-input-event-h#oh_arkui_uiinputevent_getaction" target="_blank">OH_ArkUI_UIInputEvent_GetAction()</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ui-input-event-h#oh_arkui_uiinputevent_geteventtime" target="_blank">OH_ArkUI_UIInputEvent_GetEventTime()</a>等接口，从基础事件中获取更多信息。应用依据获取的信息，在手势事件执行过程中实现差异化交互逻辑。</p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 设置回调，在触发手势事件时执行回调处理手势事件</span></li><li><span class="hljs-keyword">auto</span> onActionCallback = [](ArkUI_GestureEvent *event, <span class="hljs-type">void</span> *extraParams) {</li><li>    <span class="hljs-comment">// 从手势事件获取基础事件对象</span></li><li>    <span class="hljs-keyword">auto</span> *inputEvent = <span class="hljs-built_in">OH_ArkUI_GestureEvent_GetRawInputEvent</span>(event);</li><li>    <span class="hljs-comment">// 从基础事件获取事件信息</span></li><li>    <span class="hljs-keyword">auto</span> x = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetX</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> y = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetY</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> displayX = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetDisplayX</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> displayY = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetDisplayY</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> windowX = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetWindowX</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> windowY = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetWindowY</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> pointerCount = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetPointerCount</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> xByIndex = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetXByIndex</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> yByIndex = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetYByIndex</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> displayXByIndex = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetDisplayXByIndex</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> displayYByIndex = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetDisplayYByIndex</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> windowXByIndex = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetWindowXByIndex</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> windowYByIndex = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetWindowYByIndex</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> pointerId = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetPointerId</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> pressure = <span class="hljs-built_in">OH_ArkUI_PointerEvent_GetPressure</span>(inputEvent, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">auto</span> action = <span class="hljs-built_in">OH_ArkUI_UIInputEvent_GetAction</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> eventTime = <span class="hljs-built_in">OH_ArkUI_UIInputEvent_GetEventTime</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> sourceType = <span class="hljs-built_in">OH_ArkUI_UIInputEvent_GetSourceType</span>(inputEvent);</li><li>    <span class="hljs-keyword">auto</span> type = <span class="hljs-built_in">OH_ArkUI_UIInputEvent_GetType</span>(inputEvent);</li><li>    std::string eventInfo =</li><li>        <span class="hljs-string">"x: "</span> + std::<span class="hljs-built_in">to_string</span>(x) + <span class="hljs-string">", y: "</span> + std::<span class="hljs-built_in">to_string</span>(y) +</li><li>        <span class="hljs-string">", displayX: "</span> + std::<span class="hljs-built_in">to_string</span>(displayX) + <span class="hljs-string">", displayY: "</span> + std::<span class="hljs-built_in">to_string</span>(displayY) +</li><li>        <span class="hljs-string">", windowX: "</span> + std::<span class="hljs-built_in">to_string</span>(windowX) + <span class="hljs-string">", windowY: "</span> + std::<span class="hljs-built_in">to_string</span>(windowY) + <span class="hljs-string">"\n"</span> +</li><li>        <span class="hljs-string">", pointerCount: "</span> + std::<span class="hljs-built_in">to_string</span>(pointerCount) + <span class="hljs-string">", xByIndex: "</span> + std::<span class="hljs-built_in">to_string</span>(xByIndex) +</li><li>        <span class="hljs-string">", yByIndex: "</span> + std::<span class="hljs-built_in">to_string</span>(yByIndex) +</li><li>        <span class="hljs-string">", displayXByIndex: "</span> + std::<span class="hljs-built_in">to_string</span>(displayXByIndex) +</li><li>        <span class="hljs-string">", displayYByIndex: "</span> + std::<span class="hljs-built_in">to_string</span>(displayYByIndex) +</li><li>        <span class="hljs-string">", windowXByIndex: "</span> + std::<span class="hljs-built_in">to_string</span>(windowXByIndex) +</li><li>        <span class="hljs-string">", windowYByIndex: "</span> + std::<span class="hljs-built_in">to_string</span>(windowYByIndex) + <span class="hljs-string">"\n"</span> +</li><li>        <span class="hljs-string">", pointerId: "</span> + std::<span class="hljs-built_in">to_string</span>(pointerId) + <span class="hljs-string">", pressure: "</span> + std::<span class="hljs-built_in">to_string</span>(pressure) +</li><li>        <span class="hljs-string">", action: "</span> + std::<span class="hljs-built_in">to_string</span>(action) + <span class="hljs-string">", eventTime: "</span> + std::<span class="hljs-built_in">to_string</span>(eventTime) +</li><li>        <span class="hljs-string">", sourceType: "</span> + std::<span class="hljs-built_in">to_string</span>(sourceType) + <span class="hljs-string">", type: "</span> + std::<span class="hljs-built_in">to_string</span>(type);</li><li>    <span class="hljs-built_in">OH_LOG_Print</span>(LOG_APP, LOG_INFO, LOG_PRINT_DOMAIN, <span class="hljs-string">"eventInfoOfCommonEvent"</span>, <span class="hljs-string">"eventInfo = %{public}s"</span>,</li><li>                    eventInfo.<span class="hljs-built_in">c_str</span>());</li><li>};</li><li><span class="hljs-comment">// 创建一个单指点击手势</span></li><li><span class="hljs-keyword">auto</span> TapGesture = gestureApi-&gt;<span class="hljs-built_in">createTapGesture</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);</li><li><span class="hljs-comment">// 将事件回调绑定到TapGesture上，触发手势后，通过回调函数处理手势事件</span></li><li>gestureApi-&gt;<span class="hljs-built_in">setGestureEventTarget</span>(TapGesture,</li><li>                                    GESTURE_EVENT_ACTION_ACCEPT | GESTURE_EVENT_ACTION_UPDATE |</li><li>                                        GESTURE_EVENT_ACTION_END | GESTURE_EVENT_ACTION_CANCEL,</li><li>                                    column, onActionCallback);</li><li><span class="hljs-comment">// 将手势添加到column组件上，使column组件可以触发单指点击手势</span></li><li>gestureApi-&gt;<span class="hljs-built_in">addGestureToNode</span>(column, TapGesture, ArkUI_GesturePriority::PARALLEL,</li><li>                                        ArkUI_GestureMask::NORMAL_GESTURE_MASK);</li></ol></pre></div></div>    </div>   </div>   <div></div></div>