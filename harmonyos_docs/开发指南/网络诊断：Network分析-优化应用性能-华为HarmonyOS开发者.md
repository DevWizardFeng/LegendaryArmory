<h1 _ngcontent-xwq-c119="" class="doc-title ng-star-inserted" title="网络诊断：Network分析"> 网络诊断：Network分析 </h1>

<div _ngcontent-xwq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001956238392"><p id="ZH-CN_TOPIC_0000002510174331__p46136318415">DevEco Profiler提供Network模板，帮助用户在应用运行过程中查看http协议栈网络信息和网络流量信息，http协议栈包括请求分段耗时以及请求具体内容，方便对网络问题进行调优。请求耗时按照以下五种阶段进行划分：DNS 解析、TCP连接、TLS连接、请求等待、接收响应，分别展示在各阶段的耗时，可以针对性的优化时延问题。同时，详情信息将展示每个请求中携带的信息，包含request、response侧及其携带的header、body、cookie信息，方便网络问题定位。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002510174331__ul1516292932813"><li id="li916242962811">当前Network模板任务仅支持对Network kit接口中request 类型接口进行录制和调优。</li><li id="li616212297286">由于隐私安全政策，已上架应用市场的应用不支持录制Network分析模板。</li></ul> </div></div></div> <div class="tiledSection"><h2 id="section192101816576">查看网络流量消耗信息<i class="anchor-icon anchor-icon-link" anchorid="section192101816576" tips="复制节点链接"></i></h2></div> <ol id="ZH-CN_TOPIC_0000002510174331__ol1133101518562"><li id="li205971644067"><span>点击Network Traffic泳道，可在下方数据区查看录制过程中发生的网络流量消耗情况。Summary区域可以查看按照网络接口(Network Interfaces)维度统计每个类型的流量消耗，展示信息包含平均下行流量、下行总流量、下行数据包数、平均上行流量、上行总流量、上行数据包数。<span><img height="375.23350000000005" originheight="627" originwidth="1546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104925.24039529498832800055391023404240:50001231000000:2800:F66C0A63797F624D69879D89B6F4F3D4F079B59A654B8C489CA575FF144FA231.png" title="点击放大" width="920"></span></span></li><li id="li813318159561"><span>Details区域将展示按时间戳排序的周期上报的网络数据，每个网络数据包含上报时间戳、持续时间、下行流量、下行流量包数、网络数据类型、上行流量、上行流量包数。<span><img height="379.4195" originheight="632" originwidth="1541" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104925.42340853162604424084087019450838:50001231000000:2800:DC3AD0FE8300CA6C3354DE2597C3639C82B4821F330566D67AECB3535636F08A.png" title="点击放大" width="920"></span></span></li></ol> <div class="tiledSection"><h2 id="section1656333019213">查看网络请求各阶段耗时<i class="anchor-icon anchor-icon-link" anchorid="section1656333019213" tips="复制节点链接"></i></h2></div> <ol id="ZH-CN_TOPIC_0000002510174331__ol159731820144513"><li id="li6973112013459"><span>创建Network模板任务并录制相关数据，操作方法可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/deep-recording">性能问题定位：深度录制</a>，或在会话区选择<strong>Open File</strong>，导入历史数据。</span></li><li id="li3187141912814"><span>录制结束等待处理数据完成。点击Network Request泳道，可在下方数据区查看录制过程中发生的网络请求数量变化。Summary区域可查看按照域名(Domain)维度统计展示网络请求耗时，展示信息包含Domain、线程名称、数量、平均耗时、最大耗时、DNS解析/TCP连接/TLS连接/等待响应/接收数据平均耗时、DNS解析/TCP连接/TLS连接/等待响应/接收数据最大耗时。</span><p></p><p id="ZH-CN_TOPIC_0000002510174331__p62322911264"><span><img height="363.9635" originheight="608" originwidth="1546" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104925.28114304287402123693599831684521:50001231000000:2800:6C891E9A6290D927CA3A22EAF397102023FA3C584508EF7AFC188593ACB9274A.png" title="点击放大" width="920"></span></p> <p></p></li><li id="li1832411282084"><span>选择任意Domain，Details区域将展示请求该Domain的所有网络请求耗时，展示信息包含请求ID、线程名称、请求url、重定向url、IP 地址、总耗时、DNS 解析耗时、TCP连接耗时、TLS连接耗时、请求等待耗时、接收响应耗时、请求类型、状态码、使用的版本。</span><p></p><p id="ZH-CN_TOPIC_0000002510174331__p1944951132620"><span><img height="394.87550000000005" originheight="658" originwidth="1541" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104925.49918506748666900183359214570883:50001231000000:2800:79A049C57DA8F1C7882DEBE1BEC01D93FEEC010D9D52E26FCA83115D14785CF4.png" title="点击放大" width="920"></span></p> <p></p></li><li id="li3412095187"><span>选择Details中某条数据，泳道区域将以虚线框选展示其耗时方块。同时，右侧More区域展示该请求的Request Headers、Response Headers、Response Body。</span><p></p><p id="ZH-CN_TOPIC_0000002510174331__p98291470254"><span><img height="401.166" originheight="669" originwidth="1542" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104925.52411410048864668552592409177566:50001231000000:2800:42A27A7B909655F4C332CA68B025EA1F635A6394CF6AF472B379F970038B9C02.png" title="点击放大" width="920"></span></p> <p></p></li><li id="li1118111310228"><span>定位到可能造成网络卡顿的网络请求，点选其耗时方块，可以看见该请求各阶段耗时。</span><p></p><p id="ZH-CN_TOPIC_0000002510174331__p13583153711596"><span><img height="376.1995" originheight="627" originwidth="1542" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104925.30083767321432972093658217317503:50001231000000:2800:26D280D78ACF0CA2310C13751112E43EAA46ED664965C10B4FDC6163F32F98CD.png" title="点击放大" width="920"></span></p> <p></p></li></ol> <div class="tiledSection"><h2 id="section10193926161814">分析启动过程网络问题<i class="anchor-icon anchor-icon-link" anchorid="section10193926161814" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174331__p8060118">DevEco Profiler的Network分析任务，提供了启动过程网络问题分析能力，协助开发者解决启动过程的网络问题。</p> <div class="p" id="ZH-CN_TOPIC_0000002510174331__p198131050134119">针对调测应用的当前运行情况，DevEco Profiler对其做如下处理：<ul id="ZH-CN_TOPIC_0000002510174331__ul1972255718427"><li id="li1672225712428">如选择的是已安装但未启动的应用，在启动该分析任务时，会自动拉起应用，进行数据录制，结束录制后可正常进入解析阶段。</li><li id="li275135184616">如选择的是正在运行的应用，在启动该分析任务时，会先将应用关停，再自动拉起应用，进行数据录制，结束录制后可正常进入解析阶段。</li></ul> </div> <p id="ZH-CN_TOPIC_0000002510174331__p9563243194215">具体操作方法为：在任务列表中单击Network任务后的<span><img height="19.7638" originheight="17" originwidth="15" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104925.26561044978146642858605976673359:50001231000000:2800:B5A736F03311C3AFBB39F8F4BC5D34F2332138CA2E3FA607859D4DF3EF395049.png" width="18.0481" class="IconPic notEnlarge"></span>按钮。</p> <p id="ZH-CN_TOPIC_0000002510174331__p1037673216288">在分析结束后，呈现出的数据类型以及相应的处理方法，与非启动过程的分析相同。</p> </div> </div></div>