<h1 _ngcontent-edy-c119="" class="doc-title ng-star-inserted" title="能力说明"> 能力说明 </h1>

<div _ngcontent-edy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001759228286"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p17913135071214">在编译构建时，Hvigor会生成BuildProfile类，开发者可以通过该类在运行时获取编译构建参数，也可以在build-profile.json5中通过buildProfileFields增加自定义字段，从而在运行时获取自定义的参数。</p> <div class="tiledSection"><h2 id="section162941261126">使用说明<i class="anchor-icon anchor-icon-link" anchorid="section162941261126" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334518__p1381572919213">buildProfileFields的优先级：模块级target &gt; 模块级buildOptionSet &gt; 模块级buildOption &gt; 工程级product &gt; 工程级buildModeSet</p> </div> <div class="tiledSection"><h2 id="section1557774913552">HAP/HSP运行时获取编译构建参数<i class="anchor-icon anchor-icon-link" anchorid="section1557774913552" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section16792943572" class="firsth2">生成BuildProfile类文件<i class="anchor-icon anchor-icon-link" anchorid="section16792943572" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p136495391346">当前有以下几种方式可以生成BuildProfile类文件：</p> <ul id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_ul436934484317"><li id="zh-cn_topic_0000001653139922_li136914416438">选中需要编译的模块，在菜单栏选择“Build &gt; Generate Build Profile ${moduleName}”。</li><li id="zh-cn_topic_0000001653139922_li161901016184413">在菜单栏选择“Build &gt; Build Hap(s)/APP(s) &gt; Build Hap(s)”或“Build &gt; Build Hap(s)/APP(s) &gt; Build APP(s)”。</li><li id="zh-cn_topic_0000001653139922_li106628258592">在Terminal中执行如下命令：<div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen566022535914" data-highlighted="yes"><ol class="linenums"><li>hvigorw GenerateBuildProfile</li></ol></pre></div></div> </li></ul> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p15745942492">执行完上述操作后，将在<span class="parmvalue" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_parmvalue159739541609">“${moduleName} / build / ${productName} / generated / profile / ${targetName} ”</span>目录下生成BuildProfile.ets文件。示例如下所示：</p> <p id="ZH-CN_TOPIC_0000002478334518__p81641054201813"><span><img originheight="574" originwidth="1241" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104917.81577687693405095271644567436394:50001231000000:2800:9B3CFF72C96D48BA9DE7C9652417EE0B5116E08EDA5B5B4BAA19A9AB69746597.png" width="920" height="425.5278001611603"></span></p> </div> <div class="tiledSection"><h3 id="section195881502412">在代码中获取构建参数<i class="anchor-icon anchor-icon-link" anchorid="section195881502412" tips="复制节点链接"></i></h3><div class="p" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1087819461247">生成BuildProfile类文件后，在代码中可以通过如下方式引入该文件，其中packageName是模块级oh-package.json5文件中name字段对应的值。<div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334518__screen1728618595" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">BuildProfile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'${packageName}/BuildProfile'</span>;</li></ol></pre></div></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334518__p1735013841214">在HSP中使用import BuildProfile from 'BuildProfile'在跨包集成HSP的时候可能会产生编译错误，推荐使用import BuildProfile from '${packageName}/BuildProfile'。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p7787195684">通过如下方式获取到构建参数：</p> <div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen159492172820" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">@State</span> <span class="hljs-attribute">message</span>: string = BuildProfile.BUNDLE_NAME;</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section791213610540">默认参数<i class="anchor-icon anchor-icon-link" anchorid="section791213610540" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p134145569398">生成BuildProfile类文件时，Hvigor会根据当前工程构建的配置信息生成一部分默认参数，开发者可以在代码中直接使用。</p>  <div class="tablenoborder"><div class="tbBox"><table id="zh-cn_topic_0000001653139922_table95051216162416" class="layoutFixed idpTab"><caption><b>表1 </b>默认参数说明</caption><thead><tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row115061816172413"><th align="left" class="cellrowborder" id="mcps1.3.6.3.2.4.1.1" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p18506151620243">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.2.4.1.2" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1506161632413">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.2.4.1.3" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p17506191612415">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row1550631615248"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p155068164244">BUNDLE_NAME</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p15506111672420">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p155061916172420">应用的Bundle名称。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row55064162249"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p3506116162415">BUNDLE_TYPE</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p550601610248">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p14506111662417">应用的Bundle类型。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row55061616172418"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p18506181692416">VERSION_CODE</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1050613162248">number</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p85061016162417">应用的版本号。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row3506181602418"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p13506116132412">VERSION_NAME</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p75061016142419">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1950614164249">应用版本号的文字描述。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row550611602417"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p14506141672413">TARGET_NAME</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1250619165249">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1850618164246">Target名称。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row05061916142416"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p150611162240">PRODUCT_NAME</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p35068169244">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p16506151615245">Product名称。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row18506161642413"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p950681612415">BUILD_MODE_NAME</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p17506316102414">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1750611611240">编译模式。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row19507131622416"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p05076164240">DEBUG</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p050716163240">boolean</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1650712165247">应用是否可调试。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section863683255419">自定义参数<i class="anchor-icon anchor-icon-link" anchorid="section863683255419" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p3565184416549">开发者可以在模块级的build-profile.json5文件中增加自定义参数，在生成BuildProfile类文件后，在代码中使用自定义参数。</p> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p2571181814163">自定义参数可以在buildOption、buildOptionSet、targets节点下的arkOptions子节点中通过增加buildProfileFields字段实现，自定义参数通过key-value键值对的方式配置，其中value取值仅支持number、string、boolean类型。</p> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p2476131218277">配置示例如下所示：</p> <div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen8888453113618" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"apiType"</span>: <span class="hljs-string">"stageMode"</span>,</li><li>  <span class="hljs-string">"buildOption"</span>: {</li><li>    <span class="hljs-string">"arkOptions"</span>: {</li><li>      <span class="hljs-string">"buildProfileFields"</span>: {</li><li>        <span class="hljs-string">"data"</span>: <span class="hljs-string">"Data"</span>,</li><li>      }</li><li>    }</li><li>  },</li><li>  <span class="hljs-string">"buildOptionSet"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"release"</span>,</li><li>      <span class="hljs-string">"arkOptions"</span>: {</li><li>        <span class="hljs-string">"buildProfileFields"</span>: {</li><li>          <span class="hljs-string">"buildOptionSetData"</span>: <span class="hljs-string">"BuildOptionSetDataRelease"</span>,</li><li>          <span class="hljs-string">"data"</span>: <span class="hljs-string">"DataRelease"</span></li><li>        }</li><li>      }</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"debug"</span>,</li><li>      <span class="hljs-string">"arkOptions"</span>: {</li><li>        <span class="hljs-string">"buildProfileFields"</span>: {</li><li>          <span class="hljs-string">"buildOptionSetData"</span>: <span class="hljs-string">"BuildOptionSetDataDebug"</span>,</li><li>          <span class="hljs-string">"data"</span>: <span class="hljs-string">"DataDebug"</span></li><li>        }</li><li>      }</li><li>    }</li><li>  ],</li><li>  <span class="hljs-string">"targets"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"default"</span>,</li><li>      <span class="hljs-string">"config"</span>: {</li><li>        <span class="hljs-string">"buildOption"</span>: {</li><li>          <span class="hljs-string">"arkOptions"</span>: {</li><li>            <span class="hljs-string">"buildProfileFields"</span>: {</li><li>              <span class="hljs-string">"targetData"</span>: <span class="hljs-string">"TargetData"</span>,</li><li>              <span class="hljs-string">"data"</span>: <span class="hljs-string">"DataTargetDefault"</span></li><li>            }</li><li>          }</li><li>        }</li><li>      }</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"default1"</span>,</li><li>      <span class="hljs-string">"config"</span>: {</li><li>        <span class="hljs-string">"buildOption"</span>: {</li><li>          <span class="hljs-string">"arkOptions"</span>: {</li><li>            <span class="hljs-string">"buildProfileFields"</span>: {</li><li>              <span class="hljs-string">"targetData"</span>: <span class="hljs-string">"TargetData1"</span>,</li><li>              <span class="hljs-string">"data"</span>: <span class="hljs-string">"DataTargetDefault1"</span></li><li>            }</li><li>          }</li><li>        }</li><li>      }</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohosTest"</span>,</li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section68146594553">HAR运行时获取编译构建参数<i class="anchor-icon anchor-icon-link" anchorid="section68146594553" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section8279154125918" class="firsth2">生成BuildProfile类文件<i class="anchor-icon anchor-icon-link" anchorid="section8279154125918" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1327914416594">当前有以下几种方式可以生成BuildProfile类文件：</p> <ul id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_ul132796435910"><li id="zh-cn_topic_0000001653139922_li122791745597">选中需要编译的模块，在菜单栏选择“Build &gt; Generate Build Profile ${moduleName}”。</li><li id="zh-cn_topic_0000001653139922_li1345717346547">选中需要编译的模块，在菜单栏选择“Build &gt; Make Module ${moduleName}”。</li><li id="zh-cn_topic_0000001653139922_li1727913495918">在Terminal中执行如下命令：<div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-undefined" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen1227924195919" data-highlighted="yes"><ol class="linenums"><li>hvigorw GenerateBuildProfile</li></ol></pre></div></div> </li></ul> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p027915419595">执行完上述操作后，将在模块根目录下生成BuildProfile.ets文件（该文件可放置在.gitignore文件中进行忽略）。示例如下所示：</p> <p id="ZH-CN_TOPIC_0000002478334518__p676812154256"><span><img originheight="409" originwidth="1243" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104917.61504129876767107059060075820598:50001231000000:2800:1DD9180F5092AD751ED10510858E9268D52239BC0B7D445DA1ED315EA9233AE9.png" width="920" height="302.7192276749799"></span></p> </div> <div class="tiledSection"><h3 id="section09749376598">在代码中获取构建参数<i class="anchor-icon anchor-icon-link" anchorid="section09749376598" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p0119204517918">生成BuildProfile类文件后，在代码中可以通过相对路径引入该文件，如在HAR模块的Index.ets文件中使用该文件：</p> <div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen1511912453918" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">BuildProfile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./BuildProfile'</span>;</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1611914453918">通过如下方式获取到构建参数：</p> <div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen5950174712149" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class=""><span class="hljs-variable">HAR_VERSION</span></span><span class="">: </span><span class=""><span class="hljs-title class_">string</span> </span><span class="">= </span><span class=""><span class="hljs-variable">BuildProfile</span></span><span class="">.</span><span class=""><span class="hljs-variable">HAR_VERSION</span></span><span class="">;</span></li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p121274316349"><span><img originheight="200" originwidth="928" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104917.11564724542754772852065482741395:50001231000000:2800:9260ED9106189DED3D663AEC7EF8E89EC772AAE30CF02641A329CBCEA0F554D2.png" width="920" height="198.27586206896552"></span></p> <div class="tiledSection"><h3 id="section143377453594">默认参数<i class="anchor-icon anchor-icon-link" anchorid="section143377453594" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1650016151305">生成BuildProfile类文件时，Hvigor会根据当前工程构建的配置信息生成一部分默认参数，开发者可以在代码中直接使用。</p>  <div class="tablenoborder"><div class="tbBox"><table id="zh-cn_topic_0000001653139922_table145009155019" class="layoutFixed idpTab"><caption><b>表2 </b>默认参数说明</caption><thead><tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row1750031511019"><th align="left" class="cellrowborder" id="mcps1.3.12.3.2.4.1.1" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p125004152008">参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.3.2.4.1.2" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p3500101519019">类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.3.2.4.1.3" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1450119154010">说明</p> </th> </tr> </thead> <tbody><tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row85011115306"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p35015151301">HAR_VERSION</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p650112157016">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p10501151516015">HAR版本号。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row10501131515011"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p13501191515014">BUILD_MODE_NAME</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p950115151309">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1450111515018">编译模式。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_row55016159015"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p550112151805">DEBUG</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p1950115151206">boolean</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p150241510020">应用是否可调试。</p> </td> </tr> <tr id="ZH-CN_TOPIC_0000002478334518__row18366152817324"><td class="cellrowborder" valign="top" width="20.580000000000002%"><p id="ZH-CN_TOPIC_0000002478334518__p936619287328">TARGET_NAME</p> </td> <td class="cellrowborder" valign="top" width="15.09%"><p id="ZH-CN_TOPIC_0000002478334518__p1366028143214">string</p> </td> <td class="cellrowborder" valign="top" width="64.33%"><p id="ZH-CN_TOPIC_0000002478334518__p16366182883212">目标名称。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section139617502595">自定义参数<i class="anchor-icon anchor-icon-link" anchorid="section139617502595" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p148193612181">开发者可以在模块级的build-profile.json5文件中增加自定义参数，在生成BuildProfile类文件后，在代码中使用自定义参数。</p> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p18193615182">自定义参数可以在buildOption、buildOptionSet节点下的arkOptions子节点中通过增加buildProfileFields字段实现，自定义参数通过key-value键值对的方式配置，其中value取值仅支持number、string、boolean类型。</p> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p148133611817">配置示例如下所示：</p> <div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen14939180121811" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"apiType"</span>: <span class="hljs-string">"stageMode"</span>,</li><li>  <span class="hljs-string">"buildOption"</span>: {</li><li>    <span class="hljs-string">"arkOptions"</span>: {</li><li>      <span class="hljs-string">"buildProfileFields"</span>: {</li><li>        <span class="hljs-string">"data"</span>: <span class="hljs-string">"Data"</span>,</li><li>      }</li><li>    }</li><li>  },</li><li>  <span class="hljs-string">"buildOptionSet"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"release"</span>,</li><li>      <span class="hljs-string">"arkOptions"</span>: {</li><li>        <span class="hljs-string">"buildProfileFields"</span>: {</li><li>          <span class="hljs-string">"buildOptionSetData"</span>: <span class="hljs-string">"BuildOptionSetDataRelease"</span>,</li><li>          <span class="hljs-string">"data"</span>: <span class="hljs-string">"DataRelease"</span></li><li>        }</li><li>      }</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"debug"</span>,</li><li>      <span class="hljs-string">"arkOptions"</span>: {</li><li>        <span class="hljs-string">"buildProfileFields"</span>: {</li><li>          <span class="hljs-string">"buildOptionSetData"</span>: <span class="hljs-string">"BuildOptionSetDataDebug"</span>,</li><li>          <span class="hljs-string">"data"</span>: <span class="hljs-string">"DataDebug"</span></li><li>        }</li><li>      }</li><li>    }</li><li>  ],</li><li>  <span class="hljs-string">"targets"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"default"</span>,</li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section63421512324">工程级配置自定义构建参数<i class="anchor-icon anchor-icon-link" anchorid="section63421512324" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p188901533645">开发者可以在工程级的build-profile.json5文件中增加自定义参数，该自定义参数会生成到所有模块的BuildProfile类文件，在代码中使用自定义参数。</p> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p118901733843">自定义参数可以在工程级products、buildModeSet中的buildOption节点下的arkOptions子节点中通过增加buildProfileFields字段实现，自定义参数通过key-value键值对的方式配置，其中value取值仅支持number、string、boolean类型。</p> <p id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_p188902033042">配置示例如下所示：</p> <div _ngcontent-edy-c106="" class="highlight-div"><div _ngcontent-edy-c106="" class="highlight-div-header"><div _ngcontent-edy-c106="" class="highlight-div-header-left"><div _ngcontent-edy-c106="" class="handle-button expand-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-edy-c106="" class="highlight-div-header-right"><div _ngcontent-edy-c106="" class="handle-button ai-button"></div><div _ngcontent-edy-c106="" class="handle-button line-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-edy-c106="" class="handle-button theme-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-edy-c106="" class="handle-button copy-button"><div _ngcontent-edy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-edy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334518__zh-cn_topic_0000001653139922_screen37361211094" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class=""><span class="hljs-string">"app"</span></span>: {</li><li>    <span class=""><span class="hljs-string">"signingConfigs"</span></span>: [],</li><li>    <span class=""><span class="hljs-string">"products"</span></span>: [</li><li>      {</li><li>        <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"default"</span></span>,</li><li>        <span class=""><span class="hljs-string">"signingConfig"</span></span>: <span class=""><span class="hljs-string">"default"</span></span>,</li><li>        <span class=""><span class="hljs-string">"compatibleSdkVersion"</span></span>: <span class=""><span class="hljs-string">"6.0.1(21)"</span></span>,</li><li>        <span class=""><span class="hljs-string">"runtimeOS"</span></span>: <span class=""><span class="hljs-string">"HarmonyOS"</span></span>,</li><li>        <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>          <span class=""><span class="hljs-string">"arkOptions"</span></span>: {</li><li>            <span class=""><span class="hljs-string">"buildProfileFields"</span></span>: {</li><li>              <span class=""><span class="hljs-string">"productValue"</span></span>: <span class=""><span class="hljs-string">"defaultValue"</span></span></li><li>            }</li><li>          }</li><li>        }</li><li>      }</li><li>    ],</li><li>    <span class=""><span class="hljs-string">"buildModeSet"</span></span>: [</li><li>      {</li><li>        <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"debug"</span></span>,</li><li>        <span class=""><span class="hljs-string">"buildOption"</span></span>: {</li><li>          <span class=""><span class="hljs-string">"arkOptions"</span></span>: {</li><li>            <span class=""><span class="hljs-string">"buildProfileFields"</span></span>: {</li><li>              <span class=""><span class="hljs-string">"productBuildModeValue"</span></span>: <span class=""><span class="hljs-string">"debugValue"</span></span></li><li>            }</li><li>          }</li><li>        }</li><li>      },</li><li>      {</li><li>        <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"release"</span></span></li><li>      }</li><li>    ]</li><li>  },</li><li>  <span class=""><span class="hljs-string">"modules"</span></span>: [</li><li>    {</li><li>      <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"entry"</span></span>,</li><li>      <span class=""><span class="hljs-string">"srcPath"</span></span>: <span class=""><span class="hljs-string">"./entry"</span></span>,</li><li>      <span class=""><span class="hljs-string">"targets"</span></span>: [</li><li>        {</li><li>          <span class=""><span class="hljs-string">"name"</span></span>: <span class=""><span class="hljs-string">"default"</span></span>,</li><li>          <span class=""><span class="hljs-string">"applyToProducts"</span></span>: [</li><li>            <span class=""><span class="hljs-string">"default"</span></span></li><li>          ]</li><li>        }</li><li>      ]</li><li>    }</li><li>  ]</li><li>}</li><li>
</li></ol></pre></div></div> </div> </div> <div></div></div>