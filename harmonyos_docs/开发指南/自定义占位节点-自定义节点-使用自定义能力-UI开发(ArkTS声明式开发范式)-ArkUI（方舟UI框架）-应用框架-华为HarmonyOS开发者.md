<h1 _ngcontent-vxq-c119="" class="doc-title ng-star-inserted" title="自定义占位节点"> 自定义占位节点 </h1>

<div _ngcontent-vxq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ArkUI提供了系统组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-nodecontainer" target="_blank">NodeContainer</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-contentslot" target="_blank">ContentSlot</a>作为自定义节点的占位节点。主要用于自定义节点以及自定义节点树的显示。</p>    <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-nodecontainer" target="_blank">NodeContainer</a>作为容器节点存在，具备通用属性，是UI节点。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-contentslot">ContentSlot</a>只是一个语法节点，无通用属性，不参与布局和渲染。支持混合模式开发，当容器是ArkTS组件，子组件在Native侧创建时，推荐使用ContentSlot占位组件。具体使用参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-contentslot" target="_blank">ContentSlot</a>的接口文档说明。</p>    <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-nodecontainer" target="_blank">NodeContainer</a>是用来占位的系统组件，主要用于自定义节点以及自定义节点树的显示，支持组件的通用属性，对通用属性的处理请参考默认左上角对齐的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-stack" target="_blank">Stack</a>组件。</p>    <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-nodecontroller" target="_blank">NodeController</a>提供了一系列生命周期回调，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-nodecontroller#makenode" target="_blank">makeNode</a>回调返回一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode" target="_blank">FrameNode</a>节点树的根节点。将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode" target="_blank">FrameNode</a>节点树挂载到对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-nodecontainer" target="_blank">NodeContainer</a>下。同时提供了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#abouttoappear" target="_blank">aboutToAppear</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#abouttodisappear" target="_blank">aboutToDisappear</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-nodecontroller#abouttoresize" target="_blank">aboutToResize</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-nodecontroller#ontouchevent" target="_blank">onTouchEvent</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-nodecontroller#rebuild" target="_blank">rebuild</a>五个回调方法用于监听对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-nodecontainer" target="_blank">NodeContainer</a>的状态。</p>    <p>每个生命周期的回调的具体含义参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-nodecontroller" target="_blank">NodeController</a>的接口文档说明。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>NodeContainer下仅支持挂载自定义的FrameNode节点以及BuilderNode创建的组件树的根节点。</p></li>       <li>        <p>从API Version 12开始支持的接口，可以通过FrameNode的查询接口返回系统组件的代理节点，代理节点可以作为makeNode的返回值进行返回，但代理节点无法成功挂载在组件树上，最终的显示结果为代理节点挂载失败。</p></li>       <li>        <p>需要保证一个节点只能作为一个父节点的子节点去使用，否则可能存在显示异常或者功能异常，尤其是页面路由场景或者动效场景。例如，如果通过NodeController将同一个节点挂载在多个NodeContainer上，仅一个占位容器下会显示节点，且多个NodeContainer的可见性、透明度等影响子组件状态的属性更新均会影响被挂载的子节点。</p></li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="基本概念">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>自定义节点：使用ArkUI提供的接口，以命令式创建的节点。包括自定义组件节点（FrameNode）、自定义渲染节点（RenderNode）、自定义声明式节点（BuilderNode）、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-componentcontent" target="_blank">ComponentContent</a>等。</p></li>      <li>       <p>自定义节点树：根节点为自定义节点的节点树。</p></li>      <li>       <p>声明式节点树：根节点为声明式节点的节点树。</p></li>      <li>       <p>节点树：一种常见的数据结构，用于表示节点的层级关系。</p></li>      <li>       <p>占位节点：用于在声明式节点树上为自定义节点树预留位置的节点，主要包括NodeContainer和ContentSlot。鉴于页面的主树采用声明式节点树，因此，唯有借助占位节点，才能将命令式构建的自定义节点成功挂载至声明式节点树上。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="使用nodecontainer挂载自定义节点">使用NodeContainer挂载自定义节点<i class="anchor-icon anchor-icon-link" anchorid="使用nodecontainer挂载自定义节点" tips="复制节点链接"></i></h2>          <p>通过NodeController在NodeContainer下挂载自定义节点。</p>     <div _ngcontent-vxq-c106="" class="highlight-div"><div _ngcontent-vxq-c106="" class="highlight-div-header"><div _ngcontent-vxq-c106="" class="highlight-div-header-left"><div _ngcontent-vxq-c106="" class="handle-button expand-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vxq-c106="" class="highlight-div-header-right"><div _ngcontent-vxq-c106="" class="handle-button ai-button"></div><div _ngcontent-vxq-c106="" class="handle-button line-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vxq-c106="" class="handle-button theme-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vxq-c106="" class="handle-button copy-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vxq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// common.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BuilderNode</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"this is a text"</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">buttonNode</span>: <span class="hljs-title class_">BuilderNode</span>&lt;[<span class="hljs-title class_">Params</span>]&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buttonBuilder</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Button</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">12</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">8</span>)</li><li>      .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">2</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createNode</span>(<span class="hljs-params">uiContext: UIContext</span>) {</li><li>  buttonNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuilderNode</span>&lt;[<span class="hljs-title class_">Params</span>]&gt;(uiContext);</li><li>  buttonNode.<span class="hljs-title function_">build</span>(<span class="hljs-title function_">wrapBuilder</span>(buttonBuilder), { <span class="hljs-attr">text</span>: <span class="hljs-string">"This is a Button"</span> });</li><li>  <span class="hljs-keyword">return</span> buttonNode;</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getOrCreateNode</span>(<span class="hljs-params">uiContext: UIContext</span>): <span class="hljs-title class_">BuilderNode</span>&lt;[<span class="hljs-title class_">Params</span>]&gt; | <span class="hljs-literal">null</span> {</li><li>  <span class="hljs-keyword">if</span> (buttonNode?.<span class="hljs-title function_">getFrameNode</span>() &amp;&amp; buttonNode?.<span class="hljs-title function_">getFrameNode</span>()?.<span class="hljs-title function_">getUniqueId</span>() != -<span class="hljs-number">1</span>) {</li><li>    <span class="hljs-keyword">return</span> buttonNode;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">createNode</span>(uiContext);</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-vxq-c106="" class="highlight-div"><div _ngcontent-vxq-c106="" class="highlight-div-header"><div _ngcontent-vxq-c106="" class="highlight-div-header-left"><div _ngcontent-vxq-c106="" class="handle-button expand-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vxq-c106="" class="highlight-div-header-right"><div _ngcontent-vxq-c106="" class="handle-button ai-button"></div><div _ngcontent-vxq-c106="" class="handle-button line-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vxq-c106="" class="handle-button theme-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vxq-c106="" class="handle-button copy-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vxq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">Size</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { getOrCreateNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"./common"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"NodeContainer"</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOMAIN</span> = <span class="hljs-number">0xF811</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">isShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">isShow: <span class="hljs-built_in">boolean</span></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span> = isShow;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> frameNode = <span class="hljs-title function_">getOrCreateNode</span>(uiContext)?.<span class="hljs-title function_">getFrameNode</span>();</li><li>    <span class="hljs-keyword">return</span> frameNode ? frameNode : <span class="hljs-literal">null</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToResize</span>(<span class="hljs-params">size: Size</span>) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">TAG</span>,<span class="hljs-string">' aboutToResize width : '</span> + size.<span class="hljs-property">width</span> + <span class="hljs-string">' height : '</span> + size.<span class="hljs-property">height</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">TAG</span>,<span class="hljs-string">' aboutToAppear'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">TAG</span>,<span class="hljs-string">' aboutToDisappear'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onTouchEvent</span>(<span class="hljs-params">event: TouchEvent</span>) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">TAG</span>,<span class="hljs-string">' onTouchEvent'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toShow</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span> = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rebuild</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toHide</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span> = <span class="hljs-literal">false</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rebuild</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">myNodeController1</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">myNodeController2</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>(<span class="hljs-literal">false</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController1</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"40%"</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Brown</span>)</li><li>      <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController2</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"40%"</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Change the place of button"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 先在原始占位节点中下树</span></li><li>          <span class="hljs-comment">// 后在新的占位节点中上树</span></li><li>          <span class="hljs-comment">// 保证自定义节点仅作为一个节点的子节点存在</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController1</span>.<span class="hljs-title function_">toHide</span>();</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController2</span>.<span class="hljs-title function_">toShow</span>();</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">35</span> })</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="nodecontainer和contentslot添加子节点布局差异">NodeContainer和ContentSlot添加子节点布局差异<i class="anchor-icon anchor-icon-link" anchorid="nodecontainer和contentslot添加子节点布局差异" tips="复制节点链接"></i></h2>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-nodecontainer" target="_blank">NodeContainer</a>是一个容器节点，布局参考左上角对齐的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-stack" target="_blank">Stack</a>组件，不会按照父容器的布局规则进行布局。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-components-contentslot" target="_blank">ContentSlot</a>只是一个语法节点，不参与布局，添加的子节点会按照父容器的布局规则进行布局。</p>     <div _ngcontent-vxq-c106="" class="highlight-div"><div _ngcontent-vxq-c106="" class="highlight-div-header"><div _ngcontent-vxq-c106="" class="highlight-div-header-left"><div _ngcontent-vxq-c106="" class="handle-button expand-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vxq-c106="" class="highlight-div-header-right"><div _ngcontent-vxq-c106="" class="handle-button ai-button"></div><div _ngcontent-vxq-c106="" class="handle-button line-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vxq-c106="" class="handle-button theme-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vxq-c106="" class="handle-button copy-button"><div _ngcontent-vxq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vxq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">NodeContent</span>, <span class="hljs-title class_">NodeController</span>, typeNode, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeContentCtrl</span> {</li><li>  <span class="hljs-attr">content</span>: <span class="hljs-title class_">NodeContent</span></li><li>  <span class="hljs-attr">textNode</span>: <span class="hljs-title class_">Array</span>&lt;typeNode.<span class="hljs-property">Text</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span></li><li>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span></li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">uiContext: UIContext</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeContent</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span> = uiContext;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = <span class="hljs-title class_">Infinity</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">AddNode</span>() {</li><li>    <span class="hljs-keyword">let</span> node = typeNode.<span class="hljs-title function_">createNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>, <span class="hljs-string">"Text"</span>);</li><li>    node.<span class="hljs-title function_">initialize</span>(<span class="hljs-string">"ContentText:"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-title function_">push</span>(node);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-title function_">addFrameNode</span>(node);</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">RemoveNode</span>() {</li><li>    <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-title function_">pop</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-title function_">removeFrameNode</span>(node);</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">RemoveFront</span>() {</li><li>    <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-title function_">shift</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-title function_">removeFrameNode</span>(node);</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">GetContent</span>(): <span class="hljs-title class_">NodeContent</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-attr">textNode</span>: <span class="hljs-title class_">Array</span>&lt;typeNode.<span class="hljs-property">Text</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(uiContext);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">AddNode</span>(<span class="hljs-attr">frameNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span>, <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>) {</li><li>    <span class="hljs-keyword">let</span> node = typeNode.<span class="hljs-title function_">createNode</span>(uiContext, <span class="hljs-string">"Text"</span>);</li><li>    node.<span class="hljs-title function_">initialize</span>(<span class="hljs-string">"ControllerText:"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-title function_">push</span>(node);</li><li>    frameNode?.<span class="hljs-title function_">appendChild</span>(node);</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">RemoveNode</span>(<span class="hljs-attr">frameNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-title function_">pop</span>();</li><li>    frameNode?.<span class="hljs-title function_">removeChild</span>(node);</li><li>  }</li><li>
</li><li>  <span class="hljs-title class_">RemoveFront</span>(<span class="hljs-attr">frameNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">textNode</span>.<span class="hljs-title function_">shift</span>();</li><li>    frameNode?.<span class="hljs-title function_">removeChild</span>(node);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeContentCtrl</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>());</li><li>  myNodeController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">ContentSlot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title class_">GetContent</span>())</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"AddToSlot"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title class_">AddNode</span>();</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"RemoveBack"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title class_">RemoveNode</span>();</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"RemoveFront"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title class_">RemoveFront</span>();</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'50%'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"AddToNodeContainer"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-title class_">AddNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-property">rootNode</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>());</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"RemoveBack"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-title class_">RemoveNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-property">rootNode</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"RemoveFront"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-title class_">RemoveFront</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-property">rootNode</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'50%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="518" originwidth="699" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114915.27224209382665362717403688061379:50001231000000:2800:E06558673A7333716E5585CE2A7CD3B05C3386D87B8AFE891101147ADBE95BEC.gif" width="699" height="518"></span></p>    </div>   </div>   <div></div></div>