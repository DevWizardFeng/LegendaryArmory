<h1 _ngcontent-kaj-c119="" class="doc-title ng-star-inserted" title="自定义布局下的适配建议"> 自定义布局下的适配建议 </h1>

<div _ngcontent-kaj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section6684852185113">登录<i class="anchor-icon anchor-icon-link" anchorid="section6684852185113" tips="复制节点链接"></i></h2><p>应用在设置“登录”页面时，需要“用户名/账号名”、“密码”在同一个界面，具体可参照<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-save-acc-password#section13679181143915">账号密码保存-登录</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-autofill-acc-password#section8767438719">账号密码填充-登录</a>中的介绍。</p> </div> <div class="tiledSection"><h2 id="section12481163316526">注册<i class="anchor-icon anchor-icon-link" anchorid="section12481163316526" tips="复制节点链接"></i></h2><p>应用在设置“注册”页面时，需要“用户名/账号名”、“新密码”在同一个界面，具体可参照<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-save-acc-password#section1460672643910">账号密码保存-注册</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-autofill-strong-password#section176891288111">强密码填充-注册</a>中的介绍。</p> </div> <div class="tiledSection"><h2 id="section9787144165320">修改密码<i class="anchor-icon anchor-icon-link" anchorid="section9787144165320" tips="复制节点链接"></i></h2><p>应用在设置“修改密码”页面时，需要“用户名/账号名”、“旧密码”、“新密码”在同一个界面，具体可参照<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-update-acc-password#section1660711384473">账号密码更新-修改账号密码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-autofill-acc-password#section7236636819">账号密码填充-修改密码</a>中的介绍。</p> </div> <div class="tiledSection"><h2 id="section21491511449">登录、注册失败<i class="anchor-icon anchor-icon-link" anchorid="section21491511449" tips="复制节点链接"></i></h2><p>当应用成功登录或注册后，应将账号密码保存至密码保险箱。若登录或注册未成功，通过页面路由（router）跳转返回时，建议应用将enableAutofill属性设置为false，以避免保存错误信息。</p> <p>示例代码如下：</p> <div _ngcontent-kaj-c106="" class="highlight-div"><div _ngcontent-kaj-c106="" class="highlight-div-header"><div _ngcontent-kaj-c106="" class="highlight-div-header-left"><div _ngcontent-kaj-c106="" class="handle-button expand-button"><div _ngcontent-kaj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kaj-c106="" class="highlight-div-header-right"><div _ngcontent-kaj-c106="" class="handle-button ai-button"></div><div _ngcontent-kaj-c106="" class="handle-button line-button"><div _ngcontent-kaj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kaj-c106="" class="handle-button theme-button"><div _ngcontent-kaj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kaj-c106="" class="handle-button copy-button"><div _ngcontent-kaj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kaj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">LoginExample</span> {</li><li>  <span class="hljs-attr">pathInfos</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">ReserveAccount</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">ReservePassword</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-comment">// 保存填充功能初始值：true</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enAbleAutoFill</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>
</li><li>  <span class="hljs-title function_">onBackPress</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 当非成功登录、返回等页面跳转时，将enAbleAutoFill设置为false，密码保险箱将不启用自动填充功能</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">enAbleAutoFill</span> = <span class="hljs-literal">false</span>;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageMap</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'home_page'</span>) {</li><li>      <span class="hljs-title class_">HomePage</span>()</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pathInfos</span>) {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">16</span> }) {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"账户登录"</span>)</li><li>          .<span class="hljs-title function_">commonTitleStyles</span>()</li><li>
</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'账号'</span> })</li><li>          .<span class="hljs-title function_">commonInputStyles</span>()</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">InputType</span>.<span class="hljs-property">USER_NAME</span>)<span class="hljs-comment">// 账号框使用USER_NAME属性</span></li><li>          .<span class="hljs-title function_">enableAutoFill</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">enAbleAutoFill</span>)<span class="hljs-comment">// 保存填充功能属性</span></li><li>          .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ReserveAccount</span> = value;</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'密码'</span> })</li><li>          .<span class="hljs-title function_">commonInputStyles</span>()</li><li>          .<span class="hljs-title function_">showPasswordIcon</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">InputType</span>.<span class="hljs-property">Password</span>)<span class="hljs-comment">// 密码框使用Password属性</span></li><li>          .<span class="hljs-title function_">enableAutoFill</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">enAbleAutoFill</span>)<span class="hljs-comment">// 保存填充功能属性</span></li><li>          .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ReservePassword</span> = value;</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'登录'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>, <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">false</span> })</li><li>          .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">enabled</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">ReserveAccount</span> !== <span class="hljs-string">''</span>) &amp;&amp; (<span class="hljs-variable language_">this</span>.<span class="hljs-property">ReservePassword</span> !== <span class="hljs-string">''</span>))</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-comment">// 成功登录时页面跳转将enAbleAutoFill设置为true，密码保险箱使能</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">enAbleAutoFill</span> = <span class="hljs-literal">true</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathInfos</span>.<span class="hljs-title function_">pushPathByName</span>(<span class="hljs-string">'home_page'</span>, <span class="hljs-literal">null</span>)</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">16</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageMap</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HomePage</span> {</li><li>  <span class="hljs-attr">pathInfos</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Home Page"</span>).<span class="hljs-title function_">commonTitleStyles</span>()</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">"Home Page"</span>)</li><li>    .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">(<span class="hljs-params">context: NavDestinationContext</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathInfos</span> = context.<span class="hljs-property">pathStack</span>;</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Extend</span>(<span class="hljs-title class_">Text</span>)</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">commonTitleStyles</span>(<span class="hljs-params"></span>) {</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>  .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#000000'</span>)</li><li>  .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>  .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">18</span> })</li><li>}</li><li>
</li><li><span class="hljs-meta">@Extend</span>(<span class="hljs-title class_">TextInput</span>)</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">commonInputStyles</span>(<span class="hljs-params"></span>) {</li><li>  .<span class="hljs-title function_">placeholderColor</span>(<span class="hljs-number">0x182431</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.6</span>)</li><li>  .<span class="hljs-title function_">placeholderFont</span>({ <span class="hljs-attr">size</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">weight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Regular</span> })</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1583581424218">将导致功能受限的布局<i class="anchor-icon anchor-icon-link" anchorid="section1583581424218" tips="复制节点链接"></i></h2><p>除上述典型场景外，以下界面布局对密码保险箱功能的使用存在限制：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.1" valign="top" width="13.758624137586239%"><p>实现场景</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.2" valign="top" width="29.477052294770516%"><p>布局情况</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.3" valign="top" width="19.1980801919808%"><p>账号密码填充</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.4" valign="top" width="18.628137186281368%"><p>强密码填充</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.5" valign="top" width="18.93810618938106%"><p>自动保存</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="13.758624137586239%"><p>登录</p> </td> <td class="cellrowborder" valign="top" width="29.477052294770516%"><p>用户名、密码不在同一界面</p> </td> <td class="cellrowborder" valign="top" width="19.1980801919808%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="18.628137186281368%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="18.93810618938106%"><p>不支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>验证码登录</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="13.758624137586239%"><p>注册</p> </td> <td class="cellrowborder" valign="top" width="29.477052294770516%"><p>用户名、密码不在同一界面</p> </td> <td class="cellrowborder" valign="top" width="19.1980801919808%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="18.628137186281368%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="18.93810618938106%"><p>不支持</p> </td> </tr> <tr><td class="cellrowborder" rowspan="3" valign="top" width="13.758624137586239%"><p>修改密码</p> </td> <td class="cellrowborder" valign="top" width="29.477052294770516%"><p>界面只有用户名、新密码</p> </td> <td class="cellrowborder" valign="top" width="19.1980801919808%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="18.628137186281368%"><p>支持</p> </td> <td class="cellrowborder" valign="top" width="18.93810618938106%"><p>支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>界面只有旧密码、新密码</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>界面只有新密码</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> <td class="cellrowborder" valign="top"><p>不支持</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>