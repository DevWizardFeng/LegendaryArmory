<h1 _ngcontent-nrp-c119="" class="doc-title ng-star-inserted" title="自定义意图相关信息定义规范"> 自定义意图相关信息定义规范 </h1>

<div _ngcontent-nrp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>Intents Kit支持开发者自定义意图，开发者可通过在其代码上添加自然语言装饰器接入，装饰器中相关信息建议参考以下规范，以便于大模型更好的理解和分发调用。</p> <ol><li><strong>意图名称</strong><p>意图名称应当遵循动词+名词的结构，命名风格通常使用大写字母开头的驼峰式命名法。命名应精准反映意图的核心功能，不宜过长（最大长度：64）或模糊。</p> <ul><li>形式：动词+名词，采用驼峰命名，如CancelAlarm、CheckWeather、CreateReminder等。</li><li>逻辑：意图名应直接描述该意图的操作行为，看到意图名称即可推测出意图功能，且避免使用模棱两可的词汇。例如，SwitchRoute本意是切换导航路线，但SwitchRoute也有切换路由的意思，可以改为SwitchNavigationRoute。</li></ul> </li><li><strong>意图描述</strong><ul><li>准确全面性：确保描述涵盖意图的全部功能，避免遗漏可能的功能点。例如，SendEmail意图的描述应明确指出其能发送邮件的能力，包括发送文本和附件功能。</li><li>边界性（功能解耦）：意图必须有清晰的功能边界，避免与其他意图功能重叠或模糊，比如 ShareFile不能通过邮件分享。</li><li>独立性：一个意图应只做一件事，如果功能可以拆解，应拆分为多个意图，每个意图各司其职。这样有助于保持结构简洁，功能独立，便于大语言模型的正确理解与使用。</li></ul> <p>备注：意图描述中可以增加使用示例，举例说明使用者可以如何使用，更有利于大模型理解和分发调用。</p> </li><li><strong>参数命名</strong><p>参数命名应简洁且语义明确，采用小驼峰命名法，确保参数名能够直观反映其功能。</p> <ul><li>语义明确：可简洁明了的看出参数用途。</li></ul> </li><li><strong>参数定义</strong><p>参数定义包含参数的功能描述、参数类型（type）、必须参数（required）。</p> <ul><li>功能描述：需详细描述每个参数的含义及其对意图功能的影响，每个参数应仅负责一个功能，避免单一参数混合多种用途。例如，modifyAttribute参数，不能同时具有修改属性和属性值的含义。</li><li>参数类型（type）：定义参数的类型，如string、int、array等。</li><li>必须参数（required）：定位意图的必须参数，使用某一意图时必须指定的参数。</li></ul> </li></ol> <p>以购买电影票为例，使用基于Link的装饰器来进行意图声明，实现的功能为通过deepLink的方式来拉起电影票购买页面，包含影院，影片名，时间三个自定义参数。</p> <div _ngcontent-nrp-c106="" class="highlight-div"><div _ngcontent-nrp-c106="" class="highlight-div-header"><div _ngcontent-nrp-c106="" class="highlight-div-header-left"><div _ngcontent-nrp-c106="" class="handle-button expand-button"><div _ngcontent-nrp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nrp-c106="" class="highlight-div-header-right"><div _ngcontent-nrp-c106="" class="handle-button ai-button"></div><div _ngcontent-nrp-c106="" class="handle-button line-button"><div _ngcontent-nrp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nrp-c106="" class="handle-button theme-button"><div _ngcontent-nrp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nrp-c106="" class="handle-button copy-button"><div _ngcontent-nrp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nrp-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li>import <span class="hljs-punctuation">{</span> InsightIntentLink<span class="hljs-punctuation">,</span> LinkParamCategory <span class="hljs-punctuation">}</span> from <span class="hljs-string">"@ohos.app.ability.InsightIntentDecorator"</span>;</li><li>import <span class="hljs-punctuation">{</span> url <span class="hljs-punctuation">}</span> from <span class="hljs-string">"@kit.ArkTS"</span>;</li><li>
</li><li>@InsightIntentLink(<span class="hljs-punctuation">{</span></li><li>  intentName<span class="hljs-punctuation">:</span> 'PurchaseMovieTickets'<span class="hljs-punctuation">,</span></li><li>  domain<span class="hljs-punctuation">:</span> 'PurchaseTickets'<span class="hljs-punctuation">,</span></li><li>  intentVersion<span class="hljs-punctuation">:</span> '<span class="hljs-number">1.0</span><span class="hljs-number">.1</span>'<span class="hljs-punctuation">,</span></li><li>  displayName<span class="hljs-punctuation">:</span> '购买电影票'<span class="hljs-punctuation">,</span></li><li>  llmDescription<span class="hljs-punctuation">:</span> '用于在线购买电影票，允许用户选择指定影院、电影和场次时间进行购票。在用户明确表达购票需求，且已提供所有必要信息（cinema<span class="hljs-punctuation">,</span> film<span class="hljs-punctuation">,</span> time）时使用。如果信息不全或者用户只是查询电影信息、放映时间或票价，不应调用此工具。'<span class="hljs-punctuation">,</span></li><li>  uri<span class="hljs-punctuation">:</span> 'decorator<span class="hljs-punctuation">:</span><span class="hljs-comment">//ability.entry/main',</span></li><li>  parameters<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"cinema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"目标影院名称，仅支持平台合作的影院"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"film"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"目标电影名称，需为当前上映或即将上映且在影院排片列表中的电影"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"time"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"放映时间，必须为未来的场次，且需为影院当天有效排片时间；时间格式应为'YYYY-MM-DD HH:MM'（例如'2025-07-01 19:30'）"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"cinema"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"film"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"time"</span><span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  paramMappings<span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      paramName<span class="hljs-punctuation">:</span> 'cinema'<span class="hljs-punctuation">,</span></li><li>      paramMappingName<span class="hljs-punctuation">:</span> 'location'<span class="hljs-punctuation">,</span></li><li>      paramCategory<span class="hljs-punctuation">:</span> LinkParamCategory.LINK</li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      paramName<span class="hljs-punctuation">:</span> 'film'<span class="hljs-punctuation">,</span></li><li>      paramMappingName<span class="hljs-punctuation">:</span> 'title'<span class="hljs-punctuation">,</span></li><li>      paramCategory<span class="hljs-punctuation">:</span> LinkParamCategory.LINK</li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      paramName<span class="hljs-punctuation">:</span> 'time'<span class="hljs-punctuation">,</span></li><li>      paramMappingName<span class="hljs-punctuation">:</span> 'time'<span class="hljs-punctuation">,</span></li><li>      paramCategory<span class="hljs-punctuation">:</span> LinkParamCategory.LINK</li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span>)</li><li><strong><span class="">export class </span></strong><span class="">PurchaseMovieTicketsLinkIntent </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>   <strong><span class="">private </span></strong><span class="">purchaseMovieTickets</span><span class="">(</span><span class="">uri</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">string</span><span class="">)</span><span class=""><span class="hljs-punctuation">:</span> </span><span class="">void </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>     <em><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">从want中获取传入的链接信息。</span></span></em></li><li><em>     <span class="hljs-comment">// 如传入的url为：decorator://ability.entry/main?location=XXX影城&amp;title=XXX&amp;time=2025.06.01</span></em></li><li><em>     </em><strong><span class="">let </span></strong><span class="">urlObject </span><span class="">= </span><span class="">url</span><span class="">.</span><span class="">URL</span><span class="">.</span><span class="">parseURL</span><span class="">(</span><span class="">uri</span><span class="">)</span><span class="">;</span></li><li>     <strong style="color: rgb(181,106,1);">let </strong><span class="">location </span><span class="">= </span><span class="">urlObject</span><span class="">.</span><span class="">params</span><span class="">.</span><span class="">get</span><span class="">(</span><span class="">'location'</span><span class="">)</span><span class="">;</span></li><li>     <strong style="color: rgb(181,106,1);">if </strong><span class="">(</span><span class="">location </span><span class="">=== </span><span class=""><span class="hljs-string">"XXX</span></span><span class=""><span class="hljs-string">影城"</span></span><span class="">) </span><span class=""><span class="hljs-punctuation">{</span></span></li><li>       <em><span class="hljs-comment">// ...</span></em></li><li><em>     </em><span class=""><span class="hljs-punctuation">}</span></span></li><li><span class="">   <span class="hljs-punctuation">}</span></span></li><li><span class=""> <span class="hljs-punctuation">}</span></span></li></ol></pre></div></div> </div> <div></div></div>