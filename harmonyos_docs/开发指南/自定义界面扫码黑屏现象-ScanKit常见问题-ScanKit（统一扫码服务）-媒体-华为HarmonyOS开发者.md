<h1 _ngcontent-wpi-c119="" class="doc-title ng-star-inserted" title="自定义界面扫码黑屏现象"> 自定义界面扫码黑屏现象 </h1>

<div _ngcontent-wpi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p><strong>问题现象</strong></p>    <p>自定义启动相机却显示黑屏现象。</p>    <p><strong>解决措施</strong></p>    <ul>     <li>权限校验错误码：201，没有申请相机权限，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/request-user-authorization" target="_blank">向用户申请授权</a>。</li>     <li>参考ArkTS API错误码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code#section13010304159" target="_blank">1000500001</a>：      <ol>       <li>没有初始化customScan.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-customscan-api#section447114223245" target="_blank">init</a>。</li>       <li>自定义扫码customScan.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-customscan-api#section8604949165313" target="_blank">ViewControl</a>宽高比不符合相机流比率，常见相机流比例有：1:1、4:3、16:9。</li>       <li>前后台相互切换逻辑错误：        <p>切换至后台时，在页面生命周期onPageHide中先暂停并释放相机流（customScan.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-customscan-api#section6949611114915" target="_blank">stop</a>、customScan.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-customscan-api#section1109456134917" target="_blank">release</a>）。重新切换到前台后，在页面生命周期onPageShow中再重启相机流（customScan.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-customscan-api#section747366165913" target="_blank">start</a>）。</p></li>      </ol></li>    </ul>   </div>   <div></div></div>