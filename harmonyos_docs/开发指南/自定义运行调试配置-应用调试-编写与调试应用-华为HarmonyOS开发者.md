<h1 _ngcontent-fkp-c119="" class="doc-title ng-star-inserted" title="自定义运行/调试配置"> 自定义运行/调试配置 </h1>

<div _ngcontent-fkp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001760344518">    <div class="tiledSection">     <h2 id="section78351257132917">配置应用可调试<i class="anchor-icon anchor-icon-link" anchorid="section78351257132917" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334512__p164211533010">应用是否支持调试，根据app.json5的debug字段和build-profile.json5的debuggable字段综合判断，app.json5的优先级高于build-profile.json5。</p>     <ol id="ZH-CN_TOPIC_0000002478334512__ol3647163595319">      <li id="li1664719353530">在app.json5中配置debug字段：       <ul id="ZH-CN_TOPIC_0000002478334512__ul267214514370">        <li id="li11331235370">true：应用支持调试。</li>        <li id="li3181172011373">false：应用不支持调试。</li>       </ul></li>      <li id="li36041528183710">如果没有配置debug字段，则根据build-profile.json5的debuggable字段判断应用是否支持调试。       <ul id="ZH-CN_TOPIC_0000002478334512__ul1479991255820">        <li id="li13799131213580">true：应用支持调试。当<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-compilation-options-customizing-guide#section192461528194916">编译模式</a>不是release时，debuggable的缺省值是true，即支持调试。</li>        <li id="li1447045125811">false：应用不支持调试。当编译模式为release时，debuggable的缺省值是false，即不支持调试。</li>       </ul></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section1170735241213">设置调试代码类型<i class="anchor-icon anchor-icon-link" anchorid="section1170735241213" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334512__p7521125817437">点击<strong>Run &gt; Edit Configurations &gt; Debugger</strong>，选择相应模块，设置Debug type即可。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p1074335216128"><span><img originheight="670" originwidth="880" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104811.16842168578527558203298154192564:50001231000000:2800:F3F5978662BEDF3CE82236A8851A8A036E96CE2AD688351B44F0881ECC90816B.png" width="880" height="670"></span></p>     <div class="p" id="ZH-CN_TOPIC_0000002478334512__p1215125511168">      工程调试类型默认为<strong>Detect Automatically</strong>，关于各调试类型的说明如下表所示：       <div class="tablenoborder">       <div class="tbBox"><table id="table18745155221213" class="layoutFixed idpTab">        <caption>         <b>表1 </b>调试类型配置项        </caption>        <thead>         <tr id="ZH-CN_TOPIC_0000002478334512__row8743155214127">          <th align="left" class="cellrowborder" id="mcps1.3.2.4.2.2.3.1.1" valign="top" width="36.24%">           <p id="ZH-CN_TOPIC_0000002478334512__p10743175281211">调试类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.2.4.2.2.3.1.2" valign="top" width="63.75999999999999%">           <p id="ZH-CN_TOPIC_0000002478334512__p11743125251214">调试代码</p></th>         </tr>        </thead>                 <tbody><tr id="ZH-CN_TOPIC_0000002478334512__row162578592282">          <td class="cellrowborder" valign="top" width="36.24%">           <p id="ZH-CN_TOPIC_0000002478334512__p88061549297"><strong>Detect Automatically</strong></p></td>          <td class="cellrowborder" valign="top" width="63.75999999999999%">           <p id="ZH-CN_TOPIC_0000002478334512__p3806164172914">新建工程默认调试器选项。根据工程模块及其依赖的模块涉及的编程语言，自动启动对应的调试器。</p></td>         </tr>         <tr id="ZH-CN_TOPIC_0000002478334512__row6744115218125">          <td class="cellrowborder" valign="top" width="36.24%">           <p id="ZH-CN_TOPIC_0000002478334512__p147441252121217"><strong>ArkTS/JS</strong></p></td>          <td class="cellrowborder" valign="top" width="63.75999999999999%">           <ul id="ZH-CN_TOPIC_0000002478334512__ul114691325202917">            <li id="li1146917251295">调试ArkTS代码</li>            <li id="li54691525182912">调试JS代码</li>           </ul></td>         </tr>         <tr id="ZH-CN_TOPIC_0000002478334512__row674435216122">          <td class="cellrowborder" valign="top" width="36.24%">           <p id="ZH-CN_TOPIC_0000002478334512__p5744155218129"><strong>Native</strong></p></td>          <td class="cellrowborder" valign="top" width="63.75999999999999%">           <p id="ZH-CN_TOPIC_0000002478334512__p17744952161220">仅调试C/C++代码</p></td>         </tr>         <tr id="ZH-CN_TOPIC_0000002478334512__row1781210206913">          <td class="cellrowborder" valign="top" width="36.24%">           <p id="ZH-CN_TOPIC_0000002478334512__p1683221999"><strong>Dual(ArkTS/JS + Native)</strong></p></td>          <td class="cellrowborder" valign="top" width="63.75999999999999%">           <p id="ZH-CN_TOPIC_0000002478334512__p19814227913">调试C/C++工程的ArkTS/JS和C/C++代码</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p id="ZH-CN_TOPIC_0000002478334512__p1646419892620"></p>    </div>    <div class="tiledSection">     <h2 id="section531811771410">设置HAP安装方式<i class="anchor-icon anchor-icon-link" anchorid="section531811771410" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334512__p1269163161418">在调试阶段，HAP在设备上的安装方式有2种，可以根据实际需要进行设置。</p>     <ul id="ZH-CN_TOPIC_0000002478334512__ul120623216158">      <li id="li5941848153614">安装方式一：先卸载应用/元服务后，再重新安装，该方式会清除设备上的所有应用/元服务缓存数据。       <p id="ZH-CN_TOPIC_0000002478334512__p74101549113616">从DevEco Studio 4.1 Canary2版本开始，支持当代码无变化时，不进行推包安装。即根据模块有无变化来判断是否重新推送安装模块包，在运行调试时仅将有变化的模块及依赖它的模块重新推送安装至设备上。如entry依赖了HSP模块，当HSP模块有变化，运行调试时将同时推送安装HSP模块和entry模块。</p></li>      <li id="li172219583167">安装方式二：采用覆盖安装方式，不卸载应用/元服务，该方式会保留应用/元服务的缓存数据。</li>     </ul>     <p id="ZH-CN_TOPIC_0000002478334512__p1149719434190">设置方法如下：</p>     <p id="ZH-CN_TOPIC_0000002478334512__p1750395279">单击<strong>Run &gt; Edit Configurations</strong>，设置指定模块的HAP安装方式，勾选<strong>Keep Application Data</strong>，则表示采用覆盖安装方式，保留应用/元服务缓存数据。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p id="ZH-CN_TOPIC_0000002478334512__p239113201149">从DevEco Studio NEXT Developer Beta1开始，默认勾选“Keep Application Data”。</p>      </div></div></div>     <p id="ZH-CN_TOPIC_0000002478334512__p124641486488"><span><img originheight="390" originwidth="862" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104811.69437120821568917070254403215349:50001231000000:2800:955A830C38EC0220131A2FE60264FFD365DC815ECD7749D27179DBE99968635B.png" width="862" height="390"></span></p>     <p id="ZH-CN_TOPIC_0000002478334512__p104114229820"></p>    </div>    <div class="tiledSection">     <h3 id="section21619254511" class="firsth2">配置自定义调试参数<i class="anchor-icon anchor-icon-link" anchorid="section21619254511" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334512__p6151428453">如果未进行自定义，将按默认配置安装和运行应用。如果开发者需要对应用安装、运行等流程增加参数配置，可在“Installation Options”和“Launch Options”下进行配置。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p8161625453"><span><img originheight="268" originwidth="638" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104811.12935609574086032504463829879420:50001231000000:2800:B851F2BDE72DC27999998D3450DFD1ABE02CF53A42BE1D772144E07343B41289.png" width="638" height="268"></span></p>     <ul id="ZH-CN_TOPIC_0000002478334512__ul71662184518">      <li id="li1832416582308">Installation Options       <ul id="ZH-CN_TOPIC_0000002478334512__ul1955314332318">        <li id="li127141254182020">DebugLine Support：勾选Enable DebugLine表示在build产物中系统组件增加debugline属性，用于开启<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-arkui-inspector#section1226015494335">ArkUI Inspector源码跳转</a>功能。</li>        <li id="li1111094103115">Install Flags：输入bm install命令相关的选项，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/bm-tool#安装命令install" target="_blank">bm install 参数</a>。如可以设置“-w 360”，表示将超时等待时间设置为360秒。</li>       </ul></li>      <li id="li86181512163110">Launch Options       <ul id="ZH-CN_TOPIC_0000002478334512__ul736453513110">        <li id="li1239982020373">Launch：指定在安装应用后启动的Ability。         <div class="p" id="ZH-CN_TOPIC_0000002478334512__p101341925113715">          <span><img originheight="106" originwidth="221" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104811.98025518336094640438847367701517:50001231000000:2800:CD5D79C0ADD1C1789914B18F3289A68F9CE9FC68E62355A7218E7F22EBB9F7D4.png" class="notEnlarge" width="221" height="106"></span>          <ul id="ZH-CN_TOPIC_0000002478334512__ul13218153683413">           <li id="li9860216183611">Nothing：只安装不启动任何Ability。</li>           <li id="li7953103319345">Default Ability：默认的EntryAbility。            <ul id="ZH-CN_TOPIC_0000002478334512__ul1856615318267">             <li id="li37741843276">Stage模型：module.json5文件中配置了“skills”属性的第一个ability；若无配置“skills”属性的ability，则取“mainElement”指定的ability（该ability需存在于“abilities”数组内）；若“mainElement”未指定，则取“abilities”数组内的第一个ability。              <p id="ZH-CN_TOPIC_0000002478334512__p1041003193219"><span><img height="641.53614" originheight="1127" originwidth="674" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104811.25746628776760184089362268149300:50001231000000:2800:D0931DD180B9B0580C560A1B2FB79201DA3C6C11967D7F0A51A78104A71A088D.png" title="点击放大" width="385.035"></span></p></li>             <li id="li3225600197">FA模型：config.json文件中配置了“skills”属性的第一个ability；若无配置“skills”属性的ability，则取“mainAbility”指定的ability（该ability需存在于“abilities”数组内）；若“mainAbility”未指定，则取“abilities”数组内的第一个ability。</li>            </ul></li>           <li id="li4177123414358">Specified Ability：工程中的UIAbility或ExtensionAbility。            <p id="ZH-CN_TOPIC_0000002478334512__p1819313410811">您可以在工程中添加UIAbility或ExtensionAbility，详细请查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability" target="_blank">UIAbility开发指导</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/extensionability-overview" target="_blank">ExtensionAbility开发指导</a>。</p>            <p id="ZH-CN_TOPIC_0000002478334512__p119232102418"></p>            <p id="ZH-CN_TOPIC_0000002478334512__p178361801503"><span><img originheight="141" originwidth="687" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104811.70327209533835855484501904342271:50001231000000:2800:C8B977FCA07081594FC87C2940354DB4E6E331F1FB5DF62F81870896D3958AD6.png" width="687" height="141"></span></p></li>          </ul>         </div></li>        <li id="li517582919314">Launch Flags：输入aa start命令相关的选项，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/aa-tool" target="_blank">aa start 参数</a>。</li>       </ul></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section9413113717532">配置环境变量<i class="anchor-icon anchor-icon-link" anchorid="section9413113717532" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334512__p18452184925413">如果开发者需要配置和管理应用开发环境，以及控制应用程序的行为，可在“Environment Variables”下配置环境变量。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p323219016016"><span><img originheight="152" originwidth="691" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104811.24716566150279778035137819387411:50001231000000:2800:2FC5342461D25F8AADB0C87325A0632F74AE55C04CD0EDCBD44181A94A218CB5.png" width="691" height="152"></span></p>     <p id="ZH-CN_TOPIC_0000002478334512__p1145336105716">点击<span><img originheight="15" originwidth="16" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.80292327499790987152870815730954:50001231000000:2800:50F35E12A6977B49F163BA9F5461841E0C4E364D5E6096264144266D20090EB7.png" class="IconPic notEnlarge" width="16" height="15"></span>按钮，新增一行配置项。当前支持以下配置项：</p>    </div>    <ul id="ZH-CN_TOPIC_0000002478334512__ul933611114211">     <li id="li15336141112120">ASAN_OPTIONS：在运行时配置ASan的行为，包括设置检测级别、输出格式、内存错误报告的详细程度等，具体可配置的value请参见<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-asan-detection#section1496994494018" target="_blank">配置参数</a>。若开发者未配置log_exe_name、abort_on_error，DevEco Studio将自动填充。ASAN_OPTIONS是应用级别的，只在entry和feature模块中配置生效，HAR/HSP模块配置不生效。</li>    </ul>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p id="ZH-CN_TOPIC_0000002478334512__p17411115817168">当配置Environment Variables后，“Keep Application Data”覆盖安装不生效。</p>     </div></div></div>    <p id="ZH-CN_TOPIC_0000002478334512__p1236325782015">环境变量配置完成后，需确保环境变量已勾选，勾选后点击<strong>Apply</strong>才可生效。</p>    <p id="ZH-CN_TOPIC_0000002478334512__p47706514208"><span><img originheight="155" originwidth="691" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.05270768594270126571475391671615:50001231000000:2800:F9001B7E37A7A85D689E09633B0BA2B2FEC168A16AF4CAFD413B57DE48B5C274.png" width="691" height="155"></span></p>    <div class="tiledSection">     <h2 id="section48387420516">自动映射WebView调试链接<i class="anchor-icon anchor-icon-link" anchorid="section48387420516" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334512__p1883814425115">当应用中含有需要调试的WebView组件页面时，可以通过浏览器的DevTools工具进行页面调试，具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-debugging-with-devtools" target="_blank">使用DevTools工具调试前端页面</a>。调试WebView组件需要执行转发端口等繁琐的命令行操作，因此可以在DevEco Studio中勾选<strong>Auto WebView Debug</strong>，该操作会在应用启动后两分钟内自动监听可调试的WebView进程并完成端口转发。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p198381749518">该功能从DevEco Studio 5.0.5 Release版本开始支持。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p4838134135111">设置方法如下：</p>     <p id="ZH-CN_TOPIC_0000002478334512__p483815425115">单击<strong>Run</strong><strong> &gt; </strong><strong>Edit Configurations</strong>，在<strong>General</strong>中，勾选<strong>Auto WebView Debug</strong>。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p38387413513"><span><img height="579.0022" originheight="675" originwidth="870" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.73901790305742726295017292269407:50001231000000:2800:712B2245F0489E44C24C9634F143BD08AEEE60F03FCC1458C3013587F8933A67.png" title="点击放大" width="744.8000000000001"></span></p>     <p id="ZH-CN_TOPIC_0000002478334512__p2083894155120">开启后，当检测到设备上有可调试的WebView组件进程时，会在Run面板中打印转发成功的端口，通过浏览器的Devtools工具连接该端口即可进行WebView调试。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p783834175114"><span><img originheight="265" originwidth="1123" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.61766691068614256613679201732600:50001231000000:2800:B7403E6FEECE21D930F718F0BA0C593CA4E01F0620E156AD3212D73C1E2920C9.png" width="920" height="217.09706144256455"></span></p>    </div>    <div class="tiledSection">     <h2 id="section393005432811">多模块调试<i class="anchor-icon anchor-icon-link" anchorid="section393005432811" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section711735724014" class="firsth2">安装多个模块<i class="anchor-icon anchor-icon-link" anchorid="section711735724014" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334512__p251683254217">如果一个工程中同一个设备存在多个模块（如存在entry和feature模块），且存在模块间的调用时，在调试阶段需要同时安装多个模块的Hap包到设备中。此时，需要在<strong>Deploy Multi Hap</strong><strong>/Hsp</strong>中选择多个模块，启动调试时，DevEco Studio会将所有的模块都安装到设备上。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p12657994540">设置方法如下：</p>     <p id="ZH-CN_TOPIC_0000002478334512__p147191423118">单击<strong>Run &gt; Edit Configurations</strong>，在<strong>Deploy Multi Hap</strong><strong>/Hsp</strong>中，勾选<strong>Deploy Multi Hap/Hsp Packages</strong>，选择多个模块。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p107776201414"><span><img originheight="217" originwidth="869" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.47623058252771227322212214141973:50001231000000:2800:C72C4CC864B8859372BA67D9CF9B3CE064AE7872AB43F1368944F04B9831AA53.png" width="869" height="217"></span></p>    </div>    <div class="tiledSection">     <h3 id="section18910152417412">自动安装依赖<i class="anchor-icon anchor-icon-link" anchorid="section18910152417412" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334512__p19157230446">如果一个工程中entry/feature/HSP模块直接依赖其他HAR/HSP模块（如entry模块依赖HSP模块）及间接依赖其他模块（如entry模块依赖HAR模块，HAR又依赖HSP模块）时，在调试阶段需要同时安装模块包及其所有依赖模块的包到设备中。此时，可以设置<strong>Auto Dependencies</strong>，启动调试时会自动将所有依赖的模块都安装到设备上。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p154446309814">设置方法如下：</p>     <p id="ZH-CN_TOPIC_0000002478334512__p36541346174410">单击<strong>Run &gt; Edit Configurations</strong>，在<strong>General</strong>中，勾选<strong>Auto Dependencies。</strong></p>     <p id="ZH-CN_TOPIC_0000002478334512__p822115541498"><span><img originheight="393" originwidth="861" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.67903088232619529407195343025829:50001231000000:2800:35556410FF87AB8D2D5D06DF30102685311DEB5B6839D9E5AF5D9CF57F466273.png" width="861" height="393"></span></p>     <p id="ZH-CN_TOPIC_0000002478334512__p17101145123511"></p>     <p id="ZH-CN_TOPIC_0000002478334512__p144721532134313">在Before launch窗格中，您可以点击<span><img originheight="19" originwidth="19" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.04902871740031306785361720290058:50001231000000:2800:58B1C6BE49F33ADBAB044EE0D4A446F4CD189174BA442C2A0A4D3D8005401C5E.png" class="IconPic notEnlarge" width="19" height="19"></span>添加应用启动前的任务。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p14314531910"></p>     <p id="ZH-CN_TOPIC_0000002478334512__p1921992924515"><span><img originheight="170" originwidth="450" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.25498493332589099577929589430551:50001231000000:2800:73339D43D3AD638BD5D28BCEC40EDB0375F4498E532629E95B586E233A18CE82.png" width="450" height="170"></span></p>     <p id="ZH-CN_TOPIC_0000002478334512__p628513508913">也可以点击<span><img originheight="18" originwidth="21" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.19306322247780335209195117603089:50001231000000:2800:FB22C34D95C42088A00307D47E37D771B62CBE508C275E808770079AA2DA6300.png" class="IconPic notEnlarge" width="21" height="18"></span>移除任务。</p>     <p id="ZH-CN_TOPIC_0000002478334512__p117418482418"><span><img originheight="144" originwidth="756" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104812.46571602445874367991101555385346:50001231000000:2800:D535022272B4FEC669238E8607291958DC864232F80B2D84F063315D77D516D9.png" width="756" height="144"></span></p>     <p id="ZH-CN_TOPIC_0000002478334512__p285684614411"></p>    </div>    <p id="ZH-CN_TOPIC_0000002478334512__p98121347104418">在勾选<strong>Auto Dependencies</strong>后，可以同时勾选<strong>Deploy Multi Hap Packages</strong>，从而达到推送所有包的效果。</p>   </div>   <div></div></div>