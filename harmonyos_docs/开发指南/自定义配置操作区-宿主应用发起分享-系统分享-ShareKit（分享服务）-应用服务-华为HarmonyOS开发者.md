<h1 _ngcontent-scc-c119="" class="doc-title ng-star-inserted" title="自定义配置操作区"> 自定义配置操作区 </h1>

<div _ngcontent-scc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section128331193261">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section128331193261" tips="复制节点链接"></i></h2>          <p>系统操作区提供了复制、保存、另存为、打印、复制到中转站等系统级快捷操作。宿主应用可以根据自己的业务体验需要判断是否给用户提供相关操作。</p>     <p>比如，分享的图片不需要被打印出来，本次分享将打印按钮从操作区移除。</p>    </div>    <div class="tiledSection">     <h2 id="section1185023837">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section1185023837" tips="复制节点链接"></i></h2>          <ol>      <li>导入相关模块。       <div _ngcontent-scc-c106="" class="highlight-div"><div _ngcontent-scc-c106="" class="highlight-div-header"><div _ngcontent-scc-c106="" class="highlight-div-header-left"><div _ngcontent-scc-c106="" class="handle-button expand-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-scc-c106="" class="highlight-div-header-right"><div _ngcontent-scc-c106="" class="handle-button ai-button"></div><div _ngcontent-scc-c106="" class="handle-button line-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-scc-c106="" class="handle-button theme-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-scc-c106="" class="handle-button copy-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-scc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { systemShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor <span class="hljs-keyword">as</span> utd } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li></ol></pre></div></div></li>      <li>构造分享数据，可添加多条分享记录。       <div _ngcontent-scc-c106="" class="highlight-div"><div _ngcontent-scc-c106="" class="highlight-div-header"><div _ngcontent-scc-c106="" class="highlight-div-header-left"><div _ngcontent-scc-c106="" class="handle-button expand-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-scc-c106="" class="highlight-div-header-right"><div _ngcontent-scc-c106="" class="handle-button ai-button"></div><div _ngcontent-scc-c106="" class="handle-button line-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-scc-c106="" class="handle-button theme-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-scc-c106="" class="handle-button copy-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-scc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 构造ShareData，需配置一条有效数据信息</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: systemShare.<span class="hljs-property">SharedData</span> = <span class="hljs-keyword">new</span> systemShare.<span class="hljs-title class_">SharedData</span>({</li><li>  <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>,</li><li>  <span class="hljs-attr">content</span>: <span class="hljs-string">'Hello HarmonyOS'</span></li><li>});</li><li><span class="hljs-comment">// 通过addRecord方法可添加多条记录 通过设置selectionMode实现一条或批量分享</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">contextFaker</span>: <span class="hljs-title class_">Context</span> = uiContext.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Context</span>;</li><li><span class="hljs-keyword">let</span> filePath = contextFaker.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'/exampleImage.jpg'</span>; <span class="hljs-comment">// 仅为示例 请替换正确的文件路径</span></li><li>data.<span class="hljs-title function_">addRecord</span>({</li><li>  <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PNG</span>,</li><li>  <span class="hljs-attr">uri</span>: fileUri.<span class="hljs-title function_">getUriFromPath</span>(filePath)</li><li>});</li></ol></pre></div></div></li>      <li>启动分享面板，并配置不显示打印快捷操作。如需屏蔽其他系统级快捷操作，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-system-share#section205631342153016" target="_blank">ShareAbilityType</a>介绍。       <div _ngcontent-scc-c106="" class="highlight-div"><div _ngcontent-scc-c106="" class="highlight-div-header"><div _ngcontent-scc-c106="" class="highlight-div-header-left"><div _ngcontent-scc-c106="" class="handle-button expand-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-scc-c106="" class="highlight-div-header-right"><div _ngcontent-scc-c106="" class="handle-button ai-button"></div><div _ngcontent-scc-c106="" class="handle-button line-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-scc-c106="" class="handle-button theme-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-scc-c106="" class="handle-button copy-button"><div _ngcontent-scc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-scc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 构建ShareController</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>: systemShare.<span class="hljs-property">ShareController</span> = <span class="hljs-keyword">new</span> systemShare.<span class="hljs-title class_">ShareController</span>(data);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span> = uiContext.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-comment">// 注册分享面板关闭监听</span></li><li>controller.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dismiss'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Share panel closed'</span>);</li><li>  <span class="hljs-comment">// 分享结束，可处理其他业务。</span></li><li>});</li><li><span class="hljs-comment">// 进行分享面板显示</span></li><li>controller.<span class="hljs-title function_">show</span>(context, {</li><li>  <span class="hljs-attr">previewMode</span>: systemShare.<span class="hljs-property">SharePreviewMode</span>.<span class="hljs-property">DETAIL</span>,</li><li>  <span class="hljs-attr">selectionMode</span>: systemShare.<span class="hljs-property">SelectionMode</span>.<span class="hljs-property">SINGLE</span>,</li><li>  <span class="hljs-attr">excludedAbilities</span>: [systemShare.<span class="hljs-property">ShareAbilityType</span>.<span class="hljs-property">PRINT</span>]</li><li>})</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>