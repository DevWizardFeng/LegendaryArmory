<h1 _ngcontent-frq-c119="" class="doc-title ng-star-inserted" title="获取收货地址"> 获取收货地址 </h1>

<div _ngcontent-frq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section7996184715557">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section7996184715557" tips="复制节点链接"></i></h2>          <p>当应用需要获取用户收货地址时，可使用Account Kit提供的获取收货地址的能力，引导用户添加或选择已有的收货地址，并最终获取用户的收货地址。以下对Account Kit提供的获取收货地址能力进行介绍，获取收货地址功能还可使用场景化控件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/scenario-fusion-button-ship-to" target="_blank">选择收货地址Button</a>进行实现。</p>     <p><span><img height="532.0993510000001" originheight="1592" originwidth="770" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114605.74507344291256059979788011510780:50001231000000:2800:2B08F9649AD4AABD92CFD708897980CD3784F9750C131ECC3AFC33B89E1C9DE8.png" title="点击放大" width="257.355"></span></p>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section18299248153118">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section18299248153118" tips="复制节点链接"></i></h2>          <ol>      <li>收货地址中的手机号信息仅支持输入中国境内（不包含中国香港、中国澳门、中国台湾）手机号、地址信息只支持填写中国境内（不包含中国香港、中国澳门、中国台湾）。</li>      <li>Wearable、TV设备暂不支持使用获取收货地址功能。</li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section32601655463">业务流程<i class="anchor-icon anchor-icon-link" anchorid="section32601655463" tips="复制节点链接"></i></h2>          <p><span><img originheight="331" originwidth="553" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114605.32256543309830654784986066623032:50001231000000:2800:8C92BD712C363D873FC350DA2D7F498DB98CD0CBF7202DE7EF6B7F7A41C43A40.png" width="553" height="331"></span></p>     <p>流程说明：</p>     <ol>      <li>用户需要使用收货地址时，应用程序调用选择收货地址API，打开华为账号收货地址管理页面。</li>      <li>用户可以在收货地址管理页面添加新的收货地址或者选择已有收货地址，点击确认后可将选择的收货地址返回给应用。</li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section209019268716">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section209019268716" tips="复制节点链接"></i></h2>          <p>获取收货地址关键接口如下表所示，具体API说明详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-choose-address" target="_blank">API参考</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.1" valign="top" width="57.010000000000005%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.2" valign="top" width="42.99%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="57.010000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-choose-address#section0668846105912" target="_blank">chooseAddress</a>(context: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#context" target="_blank">common.Context</a>): Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-choose-address#section9615740103819" target="_blank">AddressInfo</a>&gt;</p></td>         <td class="cellrowborder" valign="top" width="42.99%">          <p>拉起收货地址管理页面并返回用户所选择的收货地址。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>上述接口需在页面或自定义组件生命周期内调用。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section1061219267293">开发前提<i class="anchor-icon anchor-icon-link" anchorid="section1061219267293" tips="复制节点链接"></i></h2>          <p>在进行代码开发前，请先确认以下准备工作是否完成：</p>     <p>1、是否完成<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-config-permissions">申请账号权限</a>，未申请通过调用获取收货地址API，将返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section515972151510" target="_blank">1008100005 应用未申请对应permissions权限</a>错误码，无法获取收货地址。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>如果在权限申请前已完成“配置签名和指纹”，则需要重新<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-debug-profile-0000002248181278" target="_blank">申请调试Profile</a>，并重新<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-signing#section297715173233" target="_blank">手动配置签名信息</a>。</p>      </div></div></div>     <p>2、是否完成<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-sign-fingerprints">配置签名和指纹</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-client-id">配置Client ID</a>，未配置调用获取收货地址API，将返回 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section1415952110158" target="_blank">1008100004 应用指纹证书校验失败</a>错误码，无法获取收货地址。</p>    </div>    <div class="tiledSection">     <h2 id="section1853815201981">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section1853815201981" tips="复制节点链接"></i></h2>          <ol>      <li>导入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-choose-address" target="_blank">shippingAddress</a>模块及相关公共模块。       <div _ngcontent-frq-c106="" class="highlight-div"><div _ngcontent-frq-c106="" class="highlight-div-header"><div _ngcontent-frq-c106="" class="highlight-div-header-left"><div _ngcontent-frq-c106="" class="handle-button expand-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-frq-c106="" class="highlight-div-header-right"><div _ngcontent-frq-c106="" class="handle-button ai-button"></div><div _ngcontent-frq-c106="" class="handle-button line-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-frq-c106="" class="handle-button theme-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-frq-c106="" class="handle-button copy-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-frq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { shippingAddress } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div></li>      <li>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-choose-address#section0668846105912" target="_blank">chooseAddress</a>方法打开收货地址管理页面，引导用户添加或选择收货地址后，应用即可获取用户收货地址。       <div _ngcontent-frq-c106="" class="highlight-div"><div _ngcontent-frq-c106="" class="highlight-div-header"><div _ngcontent-frq-c106="" class="highlight-div-header-left"><div _ngcontent-frq-c106="" class="handle-button expand-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-frq-c106="" class="highlight-div-header-right"><div _ngcontent-frq-c106="" class="handle-button ai-button"></div><div _ngcontent-frq-c106="" class="handle-button line-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-frq-c106="" class="handle-button theme-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-frq-c106="" class="handle-button copy-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-frq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 执行请求</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 此示例为代码片段，实际需在自定义组件实例中使用，以获取UIContext对象作为函数入参</span></li><li>  shippingAddress.<span class="hljs-title function_">chooseAddress</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: shippingAddress.AddressInfo</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in choosing address.'</span>);</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">userName</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">userName</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">mobileNumber</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">mobileNumber</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">countryCode</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">countryCode</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">provinceName</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">provinceName</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">cityName</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">cityName</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">districtName</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">districtName</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">streetName</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">streetName</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">detailedAddress</span>: <span class="hljs-built_in">string</span> = data.<span class="hljs-property">detailedAddress</span>;</li><li>    <span class="hljs-comment">// 开发者处理获取的收货地址信息</span></li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-title function_">dealAllError</span>(error);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-title function_">dealAllError</span>(error);</li><li>}</li></ol></pre></div></div>       <p></p>       <div _ngcontent-frq-c106="" class="highlight-div"><div _ngcontent-frq-c106="" class="highlight-div-header"><div _ngcontent-frq-c106="" class="highlight-div-header-left"><div _ngcontent-frq-c106="" class="handle-button expand-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-frq-c106="" class="highlight-div-header-right"><div _ngcontent-frq-c106="" class="handle-button ai-button"></div><div _ngcontent-frq-c106="" class="handle-button line-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-frq-c106="" class="handle-button theme-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-frq-c106="" class="handle-button copy-button"><div _ngcontent-frq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-frq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 错误处理</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">dealAllError</span>(<span class="hljs-params">error: BusinessError</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to chooseAddress. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>