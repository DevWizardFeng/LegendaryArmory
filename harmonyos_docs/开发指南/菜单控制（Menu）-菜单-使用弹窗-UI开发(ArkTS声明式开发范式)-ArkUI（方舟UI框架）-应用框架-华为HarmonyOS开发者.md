<h1 _ngcontent-mdv-c119="" class="doc-title ng-star-inserted" title="菜单控制（Menu）"> 菜单控制（Menu） </h1>

<div _ngcontent-mdv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Menu是菜单接口，一般用于鼠标右键弹窗、点击弹窗等。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu" target="_blank">菜单控制</a>。</p>    <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindcontextmenu12" target="_blank">bindContextMenu</a>并设置预览图，菜单弹出时有蒙层，此时为模态。</p>    <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#bindmenu11" target="_blank">bindMenu</a>或bindContextMenu未设置预览图时，菜单弹出无蒙层，此时为非模态。</p>    <div class="tiledSection">     <h2 id="生命周期">生命周期<i class="anchor-icon anchor-icon-link" anchorid="生命周期" tips="复制节点链接"></i></h2>          <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" valign="top" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" valign="top" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" valign="top" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">aboutToAppear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">菜单显示动效前的事件回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onAppear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">菜单弹出后的事件回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">aboutToDisappear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">菜单退出动效前的事件回调。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">onDisappear</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">() =&gt; void</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">菜单消失后的事件回调。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="创建默认样式的菜单">创建默认样式的菜单<i class="anchor-icon anchor-icon-link" anchorid="创建默认样式的菜单" tips="复制节点链接"></i></h2>          <p>菜单需要调用bindMenu接口来实现。bindMenu响应绑定组件的点击事件，绑定组件后手势点击对应组件后即可弹出。</p>     <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'click for Menu'</span>)</li><li>  .<span class="hljs-title function_">bindMenu</span>([</li><li>    {</li><li>      <span class="hljs-attr">value</span>: <span class="hljs-string">'Menu1'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'handle Menu1 select'</span>);</li><li>      }</li><li>    }</li><li>  ])</li></ol></pre></div></div>     <p><span><img originheight="208" originwidth="360" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.59278168694309704198177760175455:50001231000000:2800:CC6BAC7FA0A81193233295E79877E90F7552A1366CCF3D12F4BD3B7858FE4B04.png" width="360" height="208"></span></p>    </div>    <div class="tiledSection">     <h2 id="创建自定义样式的菜单">创建自定义样式的菜单<i class="anchor-icon anchor-icon-link" anchorid="创建自定义样式的菜单" tips="复制节点链接"></i></h2>          <p>当默认样式不满足开发需求时，可使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder">@Builder</a>自定义菜单内容，通过bindMenu接口进行菜单的自定义。</p>    </div>    <div class="tiledSection">     <h3 id="使用builder自定义菜单内容" class="firsth2">使用@Builder自定义菜单内容<i class="anchor-icon anchor-icon-link" anchorid="使用builder自定义菜单内容" tips="复制节点链接"></i></h3>          <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span> {</li><li>  <span class="hljs-comment">// $r('app.media.xxx')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-attr">iconStr2</span>: <span class="hljs-title class_">ResourceStr</span> = $r(<span class="hljs-string">"app.media.view_list_filled"</span>);</li><li>
</li><li>  <span class="hljs-title function_">set</span>(<span class="hljs-params">val: Resource</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr2</span> = val;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct menuExample {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">select</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">iconStr</span>: <span class="hljs-title class_">ResourceStr</span> = $r(<span class="hljs-string">"app.media.view_list_filled"</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">iconStr2</span>: <span class="hljs-title class_">ResourceStr</span> = $r(<span class="hljs-string">"app.media.view_list_filled"</span>);</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">SubMenu</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"复制"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+C"</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"粘贴"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">"Ctrl+V"</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyMenu</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">"app.media.icon"</span>), <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">"app.media.icon"</span>), <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span> }).<span class="hljs-title function_">enabled</span>(<span class="hljs-literal">false</span>)</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>,</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span>,</li><li>        <span class="hljs-attr">endIcon</span>: $r(<span class="hljs-string">"app.media.arrow_right_filled"</span>),</li><li>        <span class="hljs-comment">// 当builder参数进行配置时，表示与menuItem项绑定了子菜单。鼠标hover在该菜单项时，会显示子菜单。</span></li><li>        <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">SubMenu</span></li><li>      })</li><li>      <span class="hljs-title class_">MenuItemGroup</span>({ <span class="hljs-attr">header</span>: <span class="hljs-string">'小标题'</span> }) {</li><li>        <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span> })</li><li>          .<span class="hljs-title function_">selectIcon</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">selected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">select</span>)</li><li>          .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">selected</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"menuItem select"</span> + selected);</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-title class_">Str</span>: <span class="hljs-title class_">Tmp</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tmp</span>();</li><li>            <span class="hljs-title class_">Str</span>.<span class="hljs-title function_">set</span>($r(<span class="hljs-string">"app.media.icon"</span>));</li><li>          })</li><li>        <span class="hljs-title class_">MenuItem</span>({</li><li>          <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">"app.media.view_list_filled"</span>),</li><li>          <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span>,</li><li>          <span class="hljs-attr">endIcon</span>: $r(<span class="hljs-string">"app.media.arrow_right_filled"</span>),</li><li>          <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">SubMenu</span></li><li>        })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">MenuItem</span>({</li><li>        <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr2</span>,</li><li>        <span class="hljs-attr">content</span>: <span class="hljs-string">"菜单选项"</span>,</li><li>        <span class="hljs-attr">endIcon</span>: $r(<span class="hljs-string">"app.media.arrow_right_filled"</span>)</li><li>      })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="使用bindmenu属性绑定组件">使用bindMenu属性绑定组件<i class="anchor-icon anchor-icon-link" anchorid="使用bindmenu属性绑定组件" tips="复制节点链接"></i></h3>          <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'click for Menu'</span>)</li><li>  .<span class="hljs-title function_">bindMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenu</span>)</li></ol></pre></div></div>     <p><span><img originheight="527" originwidth="483" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.16179274500669475321534683888306:50001231000000:2800:AB79F5C84B9970A1DFCBEEBFD2FB482567AFAC450AB401129BB2F2831CBBA6BC.png" width="483" height="527"></span></p>    </div>    <div class="tiledSection">     <h2 id="创建支持右键或长按的菜单">创建支持右键或长按的菜单<i class="anchor-icon anchor-icon-link" anchorid="创建支持右键或长按的菜单" tips="复制节点链接"></i></h2>          <p>通过bindContextMenu接口自定义菜单，设置菜单弹出的触发方式，触发方式为右键或长按。使用bindContextMenu弹出的菜单项是在独立子窗口内的，可显示在应用窗口外部。</p>     <ul>      <li>       <p>使用@Builder自定义菜单内容，与上文写法相同。</p></li>      <li>       <p>确认菜单的弹出方式，并使用bindContextMenu属性绑定组件。示例中为右键弹出菜单。</p>       <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Button</span>(<span class="hljs-string">'Right-click for Menu'</span>)</li><li>  .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenu</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">RightClick</span>)</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="菜单弹出时振动效果">菜单弹出时振动效果<i class="anchor-icon anchor-icon-link" anchorid="菜单弹出时振动效果" tips="复制节点链接"></i></h2>          <p>菜单从API version 18开始支持振动效果。菜单弹出时，默认不振动。若希望菜单弹出时有振动效果，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#contextmenuoptions10" target="_blank">ContextMenuOptions</a>的hapticFeedbackMode属性，设置菜单弹出时的振动模式。</p>     <ul>      <li>       <p>只有一级菜单可配置弹出时振动效果。</p></li>      <li>       <p>仅当应用具备ohos.permission.VIBRATE权限，且用户启用了触感反馈时才会生效。开启触控反馈时，需要在工程的module.json5中配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions">声明权限</a>的requestPermissions字段开启振动权限，配置如下：</p>       <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">"requestPermissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.permission.VIBRATE"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">]</span></li></ol></pre></div></div></li>     </ul>     <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-title class_">Button</span>(<span class="hljs-string">'click for Menu'</span>)</li><li>    .<span class="hljs-title function_">bindMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyMenu</span>, { <span class="hljs-attr">hapticFeedbackMode</span>: <span class="hljs-title class_">HapticFeedbackMode</span>.<span class="hljs-property">ENABLED</span> })</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="菜单支持避让中轴">菜单支持避让中轴<i class="anchor-icon anchor-icon-link" anchorid="菜单支持避让中轴" tips="复制节点链接"></i></h2>          <p>从API version 18起，菜单支持中轴避让功能。从API version 20开始，在2in1设备上默认启用（仅在窗口处于瀑布模式时产生避让）。开发者可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#contextmenuoptions10" target="_blank">ContextMenuOptions</a>中的enableHoverMode属性，控制菜单是否启用中轴避让。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>如果菜单的点击位置在中轴区域，则菜单不会避让。</li>        <li>2in1设备上需同时满足窗口处于瀑布模式才会产生避让。</li>       </ul>      </div></div></div>     <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  <span class="hljs-comment">// $r('app.media.startIcon')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">iconStr</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.startIcon'</span>);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arrayStr</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'上半屏'</span>, <span class="hljs-string">'中轴'</span>, <span class="hljs-string">'下半屏'</span>];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enableHoverMode</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">showInSubwindow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">placement</span>: <span class="hljs-title class_">Placement</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyMenu1</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'菜单选项'</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'菜单选项'</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'菜单选项'</span> })</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconStr</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'菜单选项'</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'区域:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">arrayStr</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>])</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> &lt; <span class="hljs-number">2</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>++</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> = <span class="hljs-number">0</span></li><li>            }</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'hoverMode开启:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> == <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> = <span class="hljs-literal">true</span></li><li>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> == <span class="hljs-literal">true</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> = <span class="hljs-literal">false</span></li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span> = <span class="hljs-literal">undefined</span></li><li>            }</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'MenuPlacement:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">placement</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">placement</span> == <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">placement</span> = <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Bottom</span></li><li>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">placement</span> == <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Bottom</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">placement</span> = <span class="hljs-title class_">Placement</span>.<span class="hljs-property">Top</span></li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">placement</span> = <span class="hljs-literal">undefined</span></li><li>            }</li><li>          })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Menu'</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>          .<span class="hljs-title function_">bindMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title class_">MyMenu1</span>(), {</li><li>            <span class="hljs-attr">enableHoverMode</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">enableHoverMode</span>,</li><li>            <span class="hljs-attr">showInSubWindow</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">showInSubwindow</span>,</li><li>            <span class="hljs-attr">placement</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">placement</span></li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Select</span>([{ <span class="hljs-attr">value</span>: <span class="hljs-string">'text1'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text2'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text3'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text4'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text5'</span> },</li><li>          { <span class="hljs-attr">value</span>: <span class="hljs-string">'text6'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text7'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text8'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text9'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text10'</span> }, { <span class="hljs-attr">value</span>: <span class="hljs-string">'text11'</span> },</li><li>          { <span class="hljs-attr">value</span>: <span class="hljs-string">'text12'</span> }])</li><li>          .<span class="hljs-title function_">value</span>(<span class="hljs-string">"Select"</span>)</li><li>
</li><li>      }</li><li>      .<span class="hljs-title function_">alignRules</span>({</li><li>        <span class="hljs-attr">center</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span> },</li><li>        <span class="hljs-attr">middle</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span> }</li><li>      })</li><li>      .<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">top</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> == <span class="hljs-number">2</span> ? <span class="hljs-number">330</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> == <span class="hljs-number">1</span> ? <span class="hljs-number">50</span> : <span class="hljs-number">0</span>,</li><li>        <span class="hljs-attr">bottom</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> == <span class="hljs-number">0</span> ? <span class="hljs-number">330</span> : <span class="hljs-number">0</span></li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="控制子窗菜单的事件透传">控制子窗菜单的事件透传<i class="anchor-icon anchor-icon-link" anchorid="控制子窗菜单的事件透传" tips="复制节点链接"></i></h2>          <p>当菜单在子窗口中弹出时，默认情况下，菜单周围的事件会传递至所在窗口。从API version 20开始，开发者可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#contextmenuoptions10" target="_blank">ContextMenuOptions</a>的modalMode属性设置子菜单弹出时的模态模式，以控制菜单周围事件是否传递。将modalMode设置为ModalMode.TARGET_WINDOW时，菜单周围的事件将不再传递，菜单下方的控件也不会响应事件。</p>     <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index2</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>    }</li><li>    .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contextMenuBuilder</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">RightClick</span>, {</li><li>      <span class="hljs-attr">modalMode</span>: <span class="hljs-title class_">ModalMode</span>.<span class="hljs-property">TARGET_WINDOW</span></li><li>    })</li><li>    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({</li><li>        <span class="hljs-attr">message</span>: <span class="hljs-string">'Clicked!'</span></li><li>      })</li><li>    })</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">bindMenuBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">'bindMenu item'</span> }) {</li><li>
</li><li>      }</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">contextMenuBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">'contextMenu item'</span> }) {</li><li>
</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="基于绑定组件指定位置弹出菜单">基于绑定组件指定位置弹出菜单<i class="anchor-icon anchor-icon-link" anchorid="基于绑定组件指定位置弹出菜单" tips="复制节点链接"></i></h2>          <p>菜单从API version 20开始支持基于绑定组件在指定位置弹出。通过设置水平与垂直偏移量，控制菜单相对于绑定组件左上角的弹出位置。与单独使用offset接口不同，此方法可使菜单覆盖显示在绑定组件上。需要指定弹出位置时，可使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#contextmenuoptions10" target="_blank">ContextMenuOptions</a>的anchorPosition属性进行设置。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>当菜单处于预览状态时，设定的定位偏移量将无法生效。</li>        <li>预设的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#contextmenuoptions10" target="_blank">placement</a>对齐参数将不再生效。</li>        <li>叠加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-menu#contextmenuoptions10" target="_blank">offset</a>参数的偏移量，最终确定菜单的精确显示位置。</li>        <li>当水平与垂直偏移量均设为负值时，菜单以绑定组件左下角为基准点进行显示。</li>        <li>当水平或垂直偏移量存在负值时，组件将以绑定组件的左上角为定位基准点，通过叠加偏移量参数实现反向偏移。</li>       </ul>      </div></div></div>     <div _ngcontent-mdv-c106="" class="highlight-div"><div _ngcontent-mdv-c106="" class="highlight-div-header"><div _ngcontent-mdv-c106="" class="highlight-div-header-left"><div _ngcontent-mdv-c106="" class="handle-button expand-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mdv-c106="" class="highlight-div-header-right"><div _ngcontent-mdv-c106="" class="handle-button ai-button"></div><div _ngcontent-mdv-c106="" class="handle-button line-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mdv-c106="" class="handle-button theme-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mdv-c106="" class="handle-button copy-button"><div _ngcontent-mdv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mdv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">DirectiveMenuExample</span> {</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MenuBuilder</span>() {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Menu</span>() {</li><li>        <span class="hljs-title class_">MenuItemGroup</span>() {</li><li>          <span class="hljs-comment">// $r('app.media.app_icon')需要替换为开发者所需的图像资源文件。</span></li><li>          <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">'app.media.app_icon'</span>), <span class="hljs-attr">content</span>: <span class="hljs-string">"Select Mixed Menu 1"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">""</span> })</li><li>          <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">'app.media.app_icon'</span>), <span class="hljs-attr">content</span>: <span class="hljs-string">"Select Mixed Menu 2"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">""</span> })</li><li>          <span class="hljs-title class_">MenuItem</span>({ <span class="hljs-attr">startIcon</span>: $r(<span class="hljs-string">'app.media.app_icon'</span>), <span class="hljs-attr">content</span>: <span class="hljs-string">"Select Mixed Menu 3"</span>, <span class="hljs-attr">labelInfo</span>: <span class="hljs-string">""</span> })</li><li>        }</li><li>      }</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>()</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>        .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>        .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">125</span> })</li><li>        .<span class="hljs-title function_">bindContextMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MenuBuilder</span>, <span class="hljs-title class_">ResponseType</span>.<span class="hljs-property">RightClick</span>, {</li><li>          <span class="hljs-attr">anchorPosition</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">45</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> },</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F5F5F5'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="258" originwidth="328" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114912.88944468301073228075623554582755:50001231000000:2800:8BF7FFAF5FC23FD73179036CDEFBF5F79A6D05EF6B70B43A138E1B82B0225250.gif" width="328" height="258"></span></p>    </div>   </div>   <div></div></div>