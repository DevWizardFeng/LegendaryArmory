<h1 _ngcontent-qgf-c119="" class="doc-title ng-star-inserted" title="视频播放 (Video)"> 视频播放 (Video) </h1>

<div _ngcontent-qgf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>Video组件用于播放视频文件并控制其播放状态，常用于短视频和应用内部视频的列表页面。当视频完整出现时会自动播放，用户点击视频区域则会暂停播放，同时显示播放进度条，通过拖动播放进度条指定视频播放到具体位置。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-media-components-video" target="_blank">Video</a>。</p>    <div class="tiledSection">     <h2 id="创建视频组件">创建视频组件<i class="anchor-icon anchor-icon-link" anchorid="创建视频组件" tips="复制节点链接"></i></h2>          <p>Video通过调用接口来创建，接口调用形式如下：</p>     <p>Video(value: VideoOptions)</p>    </div>    <div class="tiledSection">     <h2 id="加载视频资源">加载视频资源<i class="anchor-icon anchor-icon-link" anchorid="加载视频资源" tips="复制节点链接"></i></h2>          <p>Video组件支持加载本地视频和网络视频。具体的数据源配置请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-media-components-video#videooptions对象说明" target="_blank">VideoOptions对象说明</a>。</p>    </div>    <div class="tiledSection">     <h3 id="加载本地视频" class="firsth2">加载本地视频<i class="anchor-icon anchor-icon-link" anchorid="加载本地视频" tips="复制节点链接"></i></h3>          <ul>      <li>       <p>普通本地视频。</p>       <p>加载本地视频时，首先在本地rawfile目录指定对应的文件，如下图所示。</p>       <p><span><img originheight="84" originwidth="263" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114812.27063294451081732732395481303998:50001231000000:2800:29AA77814C6FF19FC186B8B7B100C2DF7EDE0DB383789EFF39E24EC2AB3D38B1.png" class="notEnlarge" width="263" height="84"></span></p>       <p>再使用资源访问符$rawfile()引用视频资源。</p>       <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">VideoPlayer</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">VideoController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>()</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">previewUris</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.preview'</span>)</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">innerResource</span>: <span class="hljs-title class_">Resource</span> = $rawfile(<span class="hljs-string">'videoTest.mp4'</span>)</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Video</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerResource</span>,  <span class="hljs-comment">// 设置视频源</span></li><li>        <span class="hljs-attr">previewUri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">previewUris</span>, <span class="hljs-comment">// 设置预览图</span></li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> <span class="hljs-comment">//设置视频控制器，可以控制视频的播放状态</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataability-overview">Data Ability</a>提供的视频路径带有dataability://前缀，使用时确保对应视频资源存在。</p>       <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">VideoPlayer</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">VideoController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>()</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">previewUris</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.preview'</span>)</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">videoSrc</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'dataability://device_id/com.domainname.dataability.videodata/video/10'</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Video</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoSrc</span>,</li><li>        <span class="hljs-attr">previewUri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">previewUris</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="加载沙箱路径视频">加载沙箱路径视频<i class="anchor-icon anchor-icon-link" anchorid="加载沙箱路径视频" tips="复制节点链接"></i></h3>          <p>支持file://路径前缀的字符串，用于读取应用沙箱路径内的资源，需要确保应用沙箱目录路径下的文件存在并且有可读权限。</p>     <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">VideoPlayer</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">VideoController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>()</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">videoSrc</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'file:///data/storage/el2/base/haps/entry/files/show.mp4'</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Video</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoSrc</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="加载网络视频">加载网络视频<i class="anchor-icon anchor-icon-link" anchorid="加载网络视频" tips="复制节点链接"></i></h3>          <p>加载网络视频时，需要申请ohos.permission.INTERNET权限，具体申请方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions">声明权限</a>。此时，Video的src属性为网络视频的链接。</p>     <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">VideoPlayer</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">VideoController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>()</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">previewUris</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.preview'</span>)</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">videoSrc</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'https://www.example.com/example.mp4'</span> <span class="hljs-comment">// 使用时请替换为实际视频加载网址</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Video</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoSrc</span>,</li><li>        <span class="hljs-attr">previewUri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">previewUris</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="添加属性">添加属性<i class="anchor-icon anchor-icon-link" anchorid="添加属性" tips="复制节点链接"></i></h2>          <p>Video组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-media-components-video#属性" target="_blank">属性</a>主要用于设置视频的播放形式。例如设置视频播放是否静音、播放是否显示控制条等。</p>     <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">VideoPlayer</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">VideoController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>()</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Video</span>({</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>        .<span class="hljs-title function_">muted</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// 设置是否静音</span></li><li>        .<span class="hljs-title function_">controls</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// 设置是否显示默认控制条</span></li><li>        .<span class="hljs-title function_">autoPlay</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// 设置是否自动播放</span></li><li>        .<span class="hljs-title function_">loop</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// 设置是否循环播放</span></li><li>        .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>) <span class="hljs-comment">// 设置视频填充模式</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="事件调用">事件调用<i class="anchor-icon anchor-icon-link" anchorid="事件调用" tips="复制节点链接"></i></h2>          <p>Video组件回调事件主要包括播放开始、播放暂停、播放结束、播放失败、播放停止、视频准备和操作进度条等事件，除此之外，Video组件也支持通用事件的调用，如点击、触摸等事件的调用。详细事件请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-media-components-video#事件" target="_blank">事件说明</a>。</p>     <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">VideoPlayer</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">VideoController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>()</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">previewUris</span>: <span class="hljs-title class_">Resource</span> = $r(<span class="hljs-string">'app.media.preview'</span>)</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">innerResource</span>: <span class="hljs-title class_">Resource</span> = $rawfile(<span class="hljs-string">'videoTest.mp4'</span>)</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Video</span>({</li><li>        <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerResource</span>,</li><li>        <span class="hljs-attr">previewUri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">previewUris</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>        .<span class="hljs-title function_">onUpdate</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> { <span class="hljs-comment">// 更新事件回调</span></li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Video update."</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onPrepared</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> { <span class="hljs-comment">// 准备事件回调</span></li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Video prepared."</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onError</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">// 失败事件回调</span></li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Video error."</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onStop</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">// 停止事件回调</span></li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Video stopped."</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="video控制器使用">Video控制器使用<i class="anchor-icon anchor-icon-link" anchorid="video控制器使用" tips="复制节点链接"></i></h2>          <p>Video控制器主要用于控制视频的状态，包括播放、暂停、停止以及设置进度等，详细使用请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-media-components-video#videocontroller" target="_blank">VideoController使用说明</a>。</p>     <ul>      <li>       <p>默认控制器</p>       <p>默认的控制器支持视频的开始、暂停、进度调整、全屏显示四项基本功能。</p>       <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">VideoGuide</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">videoSrc</span>: <span class="hljs-title class_">Resource</span> = $rawfile(<span class="hljs-string">'videoTest.mp4'</span>)</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">previewUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'common/videoIcon.png'</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">curRate</span>: <span class="hljs-title class_">PlaybackSpeed</span> = <span class="hljs-title class_">PlaybackSpeed</span>.<span class="hljs-property">Speed_Forward_1_00_X</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Video</span>({</li><li>          <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoSrc</span>,</li><li>          <span class="hljs-attr">previewUri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">previewUri</span>,</li><li>          <span class="hljs-attr">currentProgressRate</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">curRate</span> <span class="hljs-comment">// 设置视频播放倍速</span></li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>自定义控制器</p>       <p>使用自定义的控制器，先关闭默认控制器，然后使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-button" target="_blank">Button</a>以及<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-slider" target="_blank">Slider</a>等组件进行自定义的控制与显示，适合自定义较强的场景下使用。</p>       <div _ngcontent-qgf-c106="" class="highlight-div"><div _ngcontent-qgf-c106="" class="highlight-div-header"><div _ngcontent-qgf-c106="" class="highlight-div-header-left"><div _ngcontent-qgf-c106="" class="handle-button expand-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgf-c106="" class="highlight-div-header-right"><div _ngcontent-qgf-c106="" class="handle-button ai-button"></div><div _ngcontent-qgf-c106="" class="handle-button line-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgf-c106="" class="handle-button theme-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgf-c106="" class="handle-button copy-button"><div _ngcontent-qgf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">VideoGuide</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">videoSrc</span>: <span class="hljs-title class_">Resource</span> = $rawfile(<span class="hljs-string">'videoTest.mp4'</span>)</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">previewUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'common/videoIcon.png'</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">curRate</span>: <span class="hljs-title class_">PlaybackSpeed</span> = <span class="hljs-title class_">PlaybackSpeed</span>.<span class="hljs-property">Speed_Forward_1_00_X</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">durationTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">VideoController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoController</span>()</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Video</span>({</li><li>          <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoSrc</span>,</li><li>          <span class="hljs-attr">previewUri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">previewUri</span>,</li><li>          <span class="hljs-attr">currentProgressRate</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">curRate</span>,</li><li>          <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>        })</li><li>          .<span class="hljs-title function_">controls</span>(<span class="hljs-literal">false</span>)</li><li>          .<span class="hljs-title function_">autoPlay</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onPrepared</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">durationTime</span> = event.<span class="hljs-property">duration</span></li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">onUpdate</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTime</span> = event.<span class="hljs-property">time</span></li><li>            }</li><li>          })</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTime</span>) + <span class="hljs-string">'s'</span>)</li><li>          <span class="hljs-title class_">Slider</span>({</li><li>            <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTime</span>,</li><li>            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,</li><li>            <span class="hljs-attr">max</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">durationTime</span></li><li>          })</li><li>            .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span>, mode: SliderChangeMode</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setCurrentTime</span>(value); <span class="hljs-comment">// 设置视频播放的进度跳转到value处</span></li><li>            })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">"90%"</span>)</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">durationTime</span>) + <span class="hljs-string">'s'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.8</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'40%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="其他说明">其他说明<i class="anchor-icon anchor-icon-link" anchorid="其他说明" tips="复制节点链接"></i></h2>          <p>Video组件已经封装好了视频播放的基础能力，开发者无需进行视频实例的创建，视频信息的设置获取，只需要设置数据源以及基础信息即可播放视频，相对扩展能力较弱。如果开发者想自定义视频播放，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-playback">视频播放</a>。</p>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitcode.com/harmonyos_samples/video-show" target="_blank">媒体库视频</a></li>     </ul>    </div>   </div>   <div></div></div>