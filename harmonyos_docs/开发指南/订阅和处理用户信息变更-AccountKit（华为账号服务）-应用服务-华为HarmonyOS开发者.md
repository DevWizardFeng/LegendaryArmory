<h1 _ngcontent-tnt-c119="" class="doc-title ng-star-inserted" title="订阅和处理用户信息变更"> 订阅和处理用户信息变更 </h1>

<div _ngcontent-tnt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section571732918268">概述<i class="anchor-icon anchor-icon-link" anchorid="section571732918268" tips="复制节点链接"></i></h2><p>通过订阅用户信息变更，您可以接收有关用户及其账户的重要更新。当用户取消应用的授权信息、注销华为账号时，华为账号服务器会发送通知到应用服务端，应用服务端可以根据通知消息进行自身业务处理。</p> </div> <div class="tiledSection"><h2 id="section824594942618">用户信息变更事件介绍<i class="anchor-icon anchor-icon-link" anchorid="section824594942618" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.2.1.3.1.1" valign="top" width="59.660000000000004%"><p>事件类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.2.1.3.1.2" valign="top" width="40.339999999999996%"><p>事件描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="59.660000000000004%"><p>https://schemas.openid.net/secevent/oauth/event-type/tokens-revoked</p> </td> <td class="cellrowborder" valign="top" width="40.339999999999996%"><p>用户取消应用的授权信息</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="59.660000000000004%"><p>https://schemas.openid.net/secevent/risc/event-type/account-purged</p> </td> <td class="cellrowborder" valign="top" width="40.339999999999996%"><p>用户注销华为账号</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="59.660000000000004%"><p>https://schemas.openid.net/secevent/oauth/event-type/phone-modified</p> </td> <td class="cellrowborder" valign="top" width="40.339999999999996%"><p>用户授权手机号变更</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1430414972716">订阅用户信息变更<i class="anchor-icon anchor-icon-link" anchorid="section1430414972716" tips="复制节点链接"></i></h2><div class="p">订阅步骤如下：<ol><li>登录<a href="https://developer.huawei.com/consumer/cn/" target="_blank">华为开发者联盟</a>，选择“管理中心  &gt; API服务 &gt; API库”。</li><li>在App Services找到RISC。<p><span><img height="234.41250000000002" originheight="842" originwidth="1879" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114522.82406770424976487189812628758170:50001231000000:2800:5036480BF3A8DD6DED6A2F96AECEF1E96532A3C500BF3F03432E041BF621D337.png" title="点击放大" width="523.6875"></span></p> </li><li>点击启用按钮（未选择项目时，需先选择项目，再点击启用按钮）。<p><span><img height="171.57000000000002" originheight="618" originwidth="1878" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114522.17448839405129468529956542891883:50001231000000:2800:93564A90AEAE99D868B11F1D8950E52C30164364D80FA108108B6B3C47E3070F.png" title="点击放大" width="523.6875"></span></p> </li><li>点击订阅通知按钮，在弹窗中配置回调地址及订阅范围。<p><span><img height="269.930549" originheight="676" originwidth="1304" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114522.49071160428320816843596868998135:50001231000000:2800:A3E26183FE8E9F88057E3D7C5C9A2AD475212BD5F366C4D2686F6AAD093D73E2.png" title="点击放大" width="520.695"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>回调地址：在开启订阅通知后，若华为用户信息存在变更，会发送通知消息到该地址。</p> <p>订阅范围：订阅的用户信息变更事件，详见<a href="/consumer/cn/doc/harmonyos-guides/subscribe-process-userinfo-change#section824594942618">用户信息变更事件介绍</a>。</p> </div></div></div> </li></ol> </div> </div> <div class="tiledSection"><h2 id="section1485212198479">处理通知消息<i class="anchor-icon anchor-icon-link" anchorid="section1485212198479" tips="复制节点链接"></i></h2><p>华为账号服务器向开发者应用服务端投递消息。开发者应用服务端接收到消息后需要先对消息头中的令牌进行验签，确保消息的完整有效性后解析并获取用户信息变更事件详情。具体步骤如下：</p> <ol><li><span><strong>验证消息头中的令牌签名</strong><strong>。</strong></span><p></p><p>您可通过任何JWT库（例如：<a href="https://jwt.io/introduction/" target="_blank">jwt.io</a>）对其进行解析与验证。</p> <p>无论使用哪种库，您均需完成如下操作：</p> <ol><li>调用接口（https://risc.cloud.huawei.com/v1beta/public/risc/.well-known/risc-configuration），获取发行者标识（issuer）与签名密钥证书URI（jwks_uri）。</li><li>通过依赖的JWT库，对消息头中的令牌进行解析，获取签名的KeyId。</li><li>通过签名的KeyId，从签名密钥证书URI中获取到JWT签名的公钥。</li><li>校验JWT签名中的aud与<a href="/consumer/cn/doc/harmonyos-guides/subscribe-process-userinfo-change#section1430414972716">订阅用户信息变更</a>中提供的Client ID一致。</li><li>校验JWT签名中的issuer与发行者标识（issuer）一致。</li></ol> <p>具体验签逻辑，请参考如下示例代码：</p> <div class="p">Maven依赖配置<div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="xml prettyprint linenums hljs language-xml" hw-language="xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class=""><span class="hljs-comment">&lt;</span></span><span class=""><span class="hljs-comment">!--</span></span><span class=""><span class="hljs-comment">此处替换为您项目需要的版本</span></span><span class=""><span class="hljs-comment">--</span></span><span class=""><span class="hljs-comment">&gt;</span></span></li><li>   <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   </li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.auth0<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span> </li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jwks-rsa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.21.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class=""><span class="hljs-comment">&lt;</span></span><span class=""><span class="hljs-comment">!--</span></span><span class=""><span class="hljs-comment">此处替换为您项目需要的版本</span></span><span class=""><span class="hljs-comment">--</span></span><span class=""><span class="hljs-comment">&gt;</span></span></li><li>   <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-impl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class=""><span class="hljs-comment">&lt;</span></span><span class=""><span class="hljs-comment">!--</span></span><span class=""><span class="hljs-comment">此处替换为您项目需要的版本</span></span><span class=""><span class="hljs-comment">--</span></span><span class=""><span class="hljs-comment">&gt;</span></span></li><li>   <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-jackson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class=""><span class="hljs-comment">&lt;</span></span><span class=""><span class="hljs-comment">!--</span></span><span class=""><span class="hljs-comment">此处替换为您项目需要的版本</span></span><span class=""><span class="hljs-comment">--</span></span><span class=""><span class="hljs-comment">&gt;</span></span></li><li>   <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></li></ol></pre></div></div> </div> <p>Java验签代码示例</p> <div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" hw-language="java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> com.auth0.jwk.JwkProvider;</li><li><span class="hljs-keyword">import</span> com.auth0.jwk.UrlJwkProvider;</li><li><span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.CacheLoader;</li><li><span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Caffeine;</li><li><span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.LoadingCache;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.Claims;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.Header;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.IncorrectClaimException;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.JwsHeader;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.Jwt;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.JwtParser;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.Jwts;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.SigningKeyResolver;</li><li><span class="hljs-keyword">import</span> io.jsonwebtoken.security.SignatureException;</li><li><span class="hljs-keyword">import</span> org.checkerframework.checker.nullness.qual.NonNull;</li><li><span class="hljs-keyword">import</span> org.checkerframework.checker.nullness.qual.Nullable;</li><li><span class="hljs-keyword">import</span> java.net.MalformedURLException;</li><li><span class="hljs-keyword">import</span> java.net.URL;</li><li><span class="hljs-keyword">import</span> java.security.Key;</li><li><span class="hljs-keyword">import</span> java.security.PublicKey;</li><li><span class="hljs-keyword">import</span> java.util.Objects;</li><li><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;</li><li>
</li><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RiscDemo</span> {</li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {</li><li>        <span class="hljs-comment">// 消息请求头中Authorization: Bearer &lt;token&gt;中的&lt;token&gt;</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;token&gt;</span></span></div></i><span class="hljs-string">"</span>;</li><li>        <span class="hljs-comment">// Client ID</span></li><li>        <span class="hljs-type">String</span> <span class="hljs-variable">clientId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"</span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">&lt;Client ID&gt;</span></span></div></i><span class="hljs-string">"</span>;</li><li>        Jwt&lt;?, Object&gt; jwt = validateSecurityEventToken(token, clientId);</li><li>        <span class="hljs-keyword">if</span> (Objects.isNull(jwt)) {</li><li>            <span class="hljs-comment">// 验签失败，进行自己逻辑处理</span></li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-comment">// 验签成功，进行自己逻辑处理</span></li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * 对Authorization头域中的token进行验签</span></li><li><span class="hljs-comment">     *</span></li><li><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> token 消息请求头中Authorization: Bearer &lt;token&gt;中的&lt;token&gt;</span></li><li><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> clientId Client ID</span></li><li><span class="hljs-comment">     *</span></li><li><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 返回为null，则表示验签失败，否则表示验证成功</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;H <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Header</span>&lt;H&gt;, B&gt; Jwt&lt;H, B&gt; <span class="hljs-title function_">validateSecurityEventToken</span><span class="hljs-params">(String token, String clientId)</span> {</li><li>        Jwt&lt;H, B&gt; jwt = <span class="hljs-literal">null</span>;</li><li>        <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">             * 公开配置信息地址：https://risc.cloud.huawei.com/v1beta/public/risc/.well-known/risc-configuration</span></li><li><span class="hljs-comment">             * 公开配置信息中的issuer值</span></li><li><span class="hljs-comment">             */</span></li><li>            <span class="hljs-type">String</span> <span class="hljs-variable">issuer</span> <span class="hljs-operator">=</span> <span class="hljs-string">"id.cloud.huawei.com"</span>;</li><li>            <span class="hljs-comment">// 公开配置信息中的jwks_uri值</span></li><li>            <span class="hljs-type">String</span> <span class="hljs-variable">jwksUri</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://risc.cloud.huawei.com/v1beta/public/risc/certs"</span>;</li><li>            <span class="hljs-comment">// 获取公钥信息</span></li><li>            <span class="hljs-type">JwkProvider</span> <span class="hljs-variable">huaweiCerts</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlJwkProvider</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(jwksUri), <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);</li><li>            LoadingCache&lt;String, PublicKey&gt; cache = Caffeine.newBuilder()</li><li>                    .expireAfterWrite(<span class="hljs-number">1</span>, TimeUnit.DAYS)</li><li>                    .build(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheLoader</span>&lt;String, PublicKey&gt;() {</li><li>                        <span class="hljs-meta">@Override</span></li><li>                        <span class="hljs-keyword">public</span> <span class="hljs-meta">@Nullable</span> PublicKey <span class="hljs-title function_">load</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> String key)</span> <span class="hljs-keyword">throws</span> Exception {</li><li>                            <span class="hljs-keyword">return</span> huaweiCerts.get(key).getPublicKey();</li><li>                        }</li><li>                    });</li><li>            <span class="hljs-type">SigningKeyResolver</span> <span class="hljs-variable">signingKeyResolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SigningKeyResolver</span>() {</li><li>                <span class="hljs-keyword">private</span> PublicKey <span class="hljs-title function_">getPublicKey</span><span class="hljs-params">(JwsHeader&lt;?&gt; jwsHeader)</span> {</li><li>                    <span class="hljs-keyword">try</span> {</li><li>                        <span class="hljs-keyword">return</span> cache.get(jwsHeader.getKeyId());</li><li>                    } <span class="hljs-keyword">catch</span> (Exception e) {</li><li>                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);</li><li>                    }</li><li>                }</li><li>                <span class="hljs-meta">@Override</span></li><li>                <span class="hljs-keyword">public</span> Key <span class="hljs-title function_">resolveSigningKey</span><span class="hljs-params">(JwsHeader jwsHeader, Claims claims)</span> {</li><li>                    <span class="hljs-keyword">return</span> getPublicKey(jwsHeader);</li><li>                }</li><li>                <span class="hljs-meta">@Override</span></li><li>                <span class="hljs-keyword">public</span> Key <span class="hljs-title function_">resolveSigningKey</span><span class="hljs-params">(JwsHeader jwsHeader, String s)</span> {</li><li>                    <span class="hljs-keyword">return</span> getPublicKey(jwsHeader);</li><li>                }</li><li>            };</li><li>            <span class="hljs-comment">// 验证并解析消息内容</span></li><li>            <span class="hljs-type">JwtParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> Jwts.parserBuilder()</li><li>                    .requireIssuer(issuer)</li><li>                    .requireAudience(clientId)</li><li>                    .setAllowedClockSkewSeconds(<span class="hljs-number">60</span>)</li><li>                    .setSigningKeyResolver(signingKeyResolver)</li><li>                    .build();</li><li>            jwt = parser.parse(token);</li><li>        } <span class="hljs-keyword">catch</span> (IncorrectClaimException e) {</li><li>            <span class="hljs-comment">// 消息的claim无效，针对异常进行处理（如：日志记录）</span></li><li>            e.printStackTrace();</li><li>        } <span class="hljs-keyword">catch</span> (SignatureException e) {</li><li>            <span class="hljs-comment">// 验签失败，针对异常进行处理（如：日志记录）</span></li><li>            e.printStackTrace();</li><li>        } <span class="hljs-keyword">catch</span> (MalformedURLException e) {</li><li>            <span class="hljs-comment">// 无效的jwksUri，检查传入的jwksUri是否与https://risc.cloud.huawei.com/v1beta/public/risc/.well-known/risc-configuration返回jwks_uri一致</span></li><li>            e.printStackTrace();</li><li>        } <span class="hljs-keyword">catch</span> (Exception e) {</li><li>            <span class="hljs-comment">// 其他异常，业务自行处理</span></li><li>            e.printStackTrace();</li><li>        }</li><li>        <span class="hljs-keyword">return</span> jwt;</li><li>    }</li><li>}</li></ol></pre></div></div> <p></p></li><li><span><strong>处理消息体</strong><strong>。</strong></span><p></p><p>JSON对象格式消息体：</p> <div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-punctuation">{</span></span></li><li><span class="">  <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></span></li><li>  <span class=""><span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span><span class="hljs-punctuation">,</span></span></li><li><span class="">  <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1727619834</span><span class="hljs-punctuation">,</span></span></li><li><span class="">  <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6672ed7d5c5e4c3c92f343ecac40f326"</span><span class="hljs-punctuation">,</span></span></li><li><span class="">  <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></span></li><li><span class="">    <span class="hljs-attr">"https://schemas.openid.net/secevent/risc/event-type/account-purged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></span></li><li><span class="">      <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></span></li><li>        <span class=""><span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span><span class="hljs-punctuation">,</span></span></li><li>        <span class=""><span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></span></li><li>        <span class=""><span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span><span class="hljs-punctuation">,</span></span></li><li>        <span class=""><span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></span></li><li><span class="">      <span class="hljs-punctuation">}</span></span></li><li><span class="">    <span class="hljs-punctuation">}</span></span></li><li><span class="">  <span class="hljs-punctuation">}</span></span></li><li><span class=""><span class="hljs-punctuation">}</span></span></li></ol></pre></div></div> <div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"a</span><span class=""><span class="hljs-attr">ud"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span><span class="hljs-punctuation">,</span></span></li><li>  <span class=""><span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750403661</span><span class="hljs-punctuation">,</span></span></li><li><span class="">  <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"97af1abdbbcd4f00a6d8b74c9b1bbb56"</span><span class="hljs-punctuation">,</span></span></li><li><span class="">  <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></span></li><li><span class="">    <span class="hljs-attr">"https://schemas.openid.net/secevent/oauth/event-type/tokens-revoked"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></span></li><li><span class="">      <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></span></li><li>        <span class=""><span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>        <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>        <span class=""><span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>        <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>        <span class="hljs-string">"phone"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-string">"userConsent"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-string">"openid"</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-string">"email"</span></li><li>      <span class="hljs-punctuation">]</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> <div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>  <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750385669</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"c27c197ba5c94081aa32b8dbc52389f3"</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"https://schemas.openid.net/secevent/oauth/event-type/phone-modified"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class=""><span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span><span class="hljs-punctuation">,</span></span></li><li>        <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>        <span class=""><span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>        <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> <div class="p">JSON数组格式消息体：<div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">[</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>    <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750385669</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6672ed7d5c5e4c3c92f343ecac40f326"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"https://schemas.openid.net/secevent/risc/event-type/account-purged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>          <span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-attr">"</span><span class=""><span class="hljs-attr">sub"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>        <span class="hljs-punctuation">}</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>    <span class=""><span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>    <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750385669</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6672ed7d5c5e4c3c92f343ecac40f325"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"https://schemas.openid.net/secevent/risc/event-type/account-purged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>          <span class=""><span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>          <span class=""><span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>        <span class="hljs-punctuation">}</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">]</span></li></ol></pre></div></div> </div> <div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">[</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"</span><span class=""><span class="hljs-attr">aud"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>    <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750403661</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"97af1abdbbcd4f00a6d8b74c9b1bbb56"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"https://schemas.openid.net/secevent/oauth/event-type/tokens-revoked"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>          <span class=""><span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>          <span class=""><span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>          <span class="hljs-string">"phone"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-string">"userConsent"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-string">"openid"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-string">"email"</span></li><li>        <span class="hljs-punctuation">]</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>    <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750403661</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"97af1abdbbcd4f00a6d8b74c9b1bbb57"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"https://schemas.openid.net/secevent/oauth/event-type/tokens-revoked"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>          <span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>          <span class="hljs-string">"phone"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-string">"userConsent"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-string">"openid"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-string">"email"</span></li><li>        <span class="hljs-punctuation">]</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">]</span></li></ol></pre></div></div> <div _ngcontent-tnt-c106="" class="highlight-div"><div _ngcontent-tnt-c106="" class="highlight-div-header"><div _ngcontent-tnt-c106="" class="highlight-div-header-left"><div _ngcontent-tnt-c106="" class="handle-button expand-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tnt-c106="" class="highlight-div-header-right"><div _ngcontent-tnt-c106="" class="handle-button ai-button"></div><div _ngcontent-tnt-c106="" class="handle-button line-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tnt-c106="" class="handle-button theme-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tnt-c106="" class="handle-button copy-button"><div _ngcontent-tnt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tnt-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">[</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>    <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750385669</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"c27c197ba5c94081aa32b8dbc52389f3"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"https://schemas.openid.net/secevent/oauth/event-type/phone-modified"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>          <span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>          <span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> <span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>        <span class="hljs-punctuation">}</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>    <span class=""><span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">开发者Client ID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>    <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1750385669</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"jti"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"c27c197ba5c94081aa32b8dbc52389f4"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"https://schemas.openid.net/secevent/oauth/event-type/phone-modified"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>          <span class=""><span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的OpenID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id.cloud.huawei.com"</span><span class="hljs-punctuation">,</span></li><li>          <span class=""><span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> </span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-string">&lt;</span></span><i><div class="varname_wrapper"><span class="varname"><span class="hljs-string">触发事件用户的UnionID</span></span></div></i><span class=""><span class="hljs-string">&gt;</span></span><span class=""><span class="hljs-string">"</span></span><span class=""><span class="hljs-punctuation">,</span></span></li><li>          <span class="hljs-attr">"subject_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iss_sub"</span></li><li>        <span class="hljs-punctuation">}</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">]</span></li></ol></pre></div></div> <p>其中，各字段含义如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.3.2.2.9.1.3.1.1" valign="top" width="21.790000000000003%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.3.2.2.9.1.3.1.2" valign="top" width="78.21000000000001%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="21.790000000000003%"><p><span style="color: rgb(55,71,79);">aud</span></p> </td> <td class="cellrowborder" valign="top" width="78.21000000000001%"><p>开发者Client ID（与<a href="/consumer/cn/doc/harmonyos-guides/subscribe-process-userinfo-change#section1430414972716">订阅用户信息变更</a>中提供的Client ID一致）。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="21.790000000000003%"><p><span style="color: rgb(55,71,79);">iss</span></p> </td> <td class="cellrowborder" valign="top" width="78.21000000000001%"><p>消息投递者标识，固定值“id.cloud.huawei.com”。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="21.790000000000003%"><p><span style="color: rgb(55,71,79);">iat</span></p> </td> <td class="cellrowborder" valign="top" width="78.21000000000001%"><p>生成该事件的UTC时间戳（秒级）。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="21.790000000000003%"><p><span style="color: rgb(55,71,79);">jti</span></p> </td> <td class="cellrowborder" valign="top" width="78.21000000000001%"><p>唯一随机字符串，用于标识此消息体，开发者可根据此字段来识别重投消息体。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="21.790000000000003%"><p><span style="color: rgb(55,71,79);">events</span></p> </td> <td class="cellrowborder" valign="top" width="78.21000000000001%"><p>用户信息变更事件与事件消息体，格式为json。key是用户信息变更事件类型，value为其对应事件消息信息。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="21.790000000000003%"><p><span style="color: rgb(55,71,79);">subject</span></p> </td> <td class="cellrowborder" valign="top" width="78.21000000000001%"><p>用户信息变更事件对应的消息体，格式为json，包含字段说明如下：</p> <ul><li>sub：触发事件用户的UnionID（用户在同一个开发者下的所有应用中，此值唯一）。具体格式要求请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-faq-9">OpenID和UnionID的格式说明</a>。</li><li>subject_type：固定为“iss_sub”。</li><li>extra：触发事件用户的OpenID（用户在同一个应用中，此值唯一）。具体格式要求请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/account-faq-9">OpenID和UnionID的格式说明</a>。</li><li><span style="color: rgb(55,71,79);">iss</span>：标识消息投递者，固定为“<span style="color: rgb(55,71,79);">id.cloud.huawei.com</span>”。</li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="21.790000000000003%"><p>scopes</p> </td> <td class="cellrowborder" valign="top" width="78.21000000000001%"><p>取消授权的scope列表，格式为json数组。在事件类型为【https://schemas.openid.net/secevent/oauth/event-type/tokens-revoked】时才存在此字段。</p> </td> </tr>  </tbody></table></div> </div> <p></p></li></ol> </div> </div> <div></div></div>