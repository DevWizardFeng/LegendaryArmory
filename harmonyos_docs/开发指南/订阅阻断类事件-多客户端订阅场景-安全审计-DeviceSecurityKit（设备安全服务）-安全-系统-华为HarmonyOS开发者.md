<h1 _ngcontent-btu-c119="" class="doc-title ng-star-inserted" title="订阅阻断类事件"> 订阅阻断类事件 </h1>

<div _ngcontent-btu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section14564084215">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section14564084215" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002504574055__p15680193415577">从API version 20 开始，新增提供统一的安全审计数据多客户端订阅/取消订阅、添加/删除过滤条件、阻断接口，应用可以获取设备上的安全审计数据（如下表），并按需进行订阅、过滤与阻断，以支撑审计相关业务。</p>     <div class="tablenoborder">      <div class="tbBox"><table id="table111148409115" class="layoutFixed idpTab">       <thead>        <tr id="ZH-CN_TOPIC_0000002504574055__row1111494011120">         <th align="left" class="cellrowborder" id="mcps1.3.1.3.1.3.1.1" valign="top" width="35.410000000000004%">          <p id="ZH-CN_TOPIC_0000002504574055__p181148406119">审计事件ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.1.3.1.3.1.2" valign="top" width="64.59%">          <p id="ZH-CN_TOPIC_0000002504574055__p181142401117">说明</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002504574055__row9153144219176">         <td class="cellrowborder" valign="top" width="35.410000000000004%">          <p id="ZH-CN_TOPIC_0000002504574055__p7985735579">0x1C801100</p></td>         <td class="cellrowborder" valign="top" width="64.59%">          <p id="ZH-CN_TOPIC_0000002504574055__p17831550153617">文件创建阻断事件。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002504574055__row195841952182">         <td class="cellrowborder" valign="top" width="35.410000000000004%">          <p id="ZH-CN_TOPIC_0000002504574055__p151355173410">0x1C801101</p></td>         <td class="cellrowborder" valign="top" width="64.59%">          <p id="ZH-CN_TOPIC_0000002504574055__p195131751203415">文件打开阻断事件。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002504574055__row03931317141814">         <td class="cellrowborder" valign="top" width="35.410000000000004%">          <p id="ZH-CN_TOPIC_0000002504574055__p1051212518341">0x1C801102</p></td>         <td class="cellrowborder" valign="top" width="64.59%">          <p id="ZH-CN_TOPIC_0000002504574055__p2051255112349">文件重命名阻断事件。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002504574055__row694074221818">         <td class="cellrowborder" valign="top" width="35.410000000000004%">          <p id="ZH-CN_TOPIC_0000002504574055__p4511651173411">0x1C801103</p></td>         <td class="cellrowborder" valign="top" width="64.59%">          <p id="ZH-CN_TOPIC_0000002504574055__p19511125119342">文件删除阻断事件。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002504574055__row11217161319195">         <td class="cellrowborder" valign="top" width="35.410000000000004%">          <p id="ZH-CN_TOPIC_0000002504574055__p651035163412">0x1C801104</p></td>         <td class="cellrowborder" valign="top" width="64.59%">          <p id="ZH-CN_TOPIC_0000002504574055__p1510115123417">文件设置扩展属性的阻断事件。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002504574055__row185261223191911">         <td class="cellrowborder" valign="top" width="35.410000000000004%">          <p id="ZH-CN_TOPIC_0000002504574055__p450925123410">0x1C801105</p></td>         <td class="cellrowborder" valign="top" width="64.59%">          <p id="ZH-CN_TOPIC_0000002504574055__p9509145133412">文件删除扩展属性的阻断事件。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section47419315463">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section47419315463" tips="复制节点链接"></i></h2>          <ol id="ZH-CN_TOPIC_0000002504574055__ol114711544105714">      <li id="li747118440573">当前能力仅支持2in1设备。</li>      <li id="li14418184615575">一个进程最大只允许创建2个客户端实例，当前设备最多只允许创建16个客户端实例。</li>      <li id="li991454317581">一个客户端实例最大只允许设置256条正过滤的过滤value和256条反过滤的过滤value。</li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section168241821392">业务流程<i class="anchor-icon anchor-icon-link" anchorid="section168241821392" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002504574055__p10806567310"><span><img height="633.3471666666667" originheight="959" originwidth="1393" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115103.70160596362710421188983984397763:50001231000000:2800:73D96B85BC0F8B777B3282802F2783EF8D927F6FBD5EB429CE6D1A306AB5DF32.png" title="点击放大" width="920"></span></p>     <p id="ZH-CN_TOPIC_0000002504574055__p1436613125418"><strong>流程说明：</strong></p>     <ol id="ZH-CN_TOPIC_0000002504574055__ol19132466579">      <li id="li4913124645718">开发者创建审计阻断类事件（以下统称为事件）订阅客户端实例，需要提供CallBack。</li>      <li id="li154315261899">开发者使用步骤1中创建的实例订阅事件，需要提供想要订阅的事件id。</li>      <li id="li7552151615919">开发者使用步骤1中创建的实例设置事件过滤条件，需要提供事件id和过滤条件信息。</li>      <li id="li17346154813508">当事件发生时，审计服务先根据事件过滤条件过滤事件，当事件满足过滤条件时，触发回调通知订阅当前事件的客户端。</li>      <li id="li574671985311">开发者根据审计数据制定阻断策略。</li>      <li id="li189341353201518">使用步骤1中创建的实例设置接收到的事件的阻断策略。</li>      <li id="li75264426537">当业务结束时，开发者可以使用步骤1中创建的实例解除过滤条件，取消订阅事件。</li>      <li id="li9373196155512">当业务结束时，开发者可以删除步骤1中创建的实例。       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002504574055__p2083121119317">支持先设置过滤条件再订阅事件。</p>        </div></div></div>       <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">         <p id="ZH-CN_TOPIC_0000002504574055__p17962174815447">删除实例后，被删除的实例所有的订阅以及过滤条件将被全部解除。</p>        </div></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section12853714125811">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section12853714125811" tips="复制节点链接"></i></h2>          <p>更多接口及使用方法请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section1768135711112" target="_blank">API参考</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.1" valign="top" width="47.949999999999996%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.3.1.2" valign="top" width="52.05%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="47.949999999999996%">          <p>newAuthClient(callback: Callback&lt;AuditEvent&gt;): AuthClient;</p></td>         <td class="cellrowborder" valign="top" width="52.05%">          <p>创建审计阻断类事件管理对象AuthClient，AuthClient提供订阅、解订阅、增加事件过滤、移除事件过滤、阻断功能</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="47.949999999999996%">          <p>deleteAuthClient(client: AuthClient): void;</p></td>         <td class="cellrowborder" valign="top" width="52.05%">          <p>删除审计阻断类事件管理对象</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="47.949999999999996%">          <p>interface AuthClient {</p>          <p>subscribe(events: AuthEvent[]): void;</p>          <p>}</p></td>         <td class="cellrowborder" valign="top" width="52.05%">          <p>订阅审计阻断类事件</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="47.949999999999996%">          <p>interface AuthClient {</p>          <p>unsubscribe(events: AuthEvent[]): void;</p>          <p>}</p></td>         <td class="cellrowborder" valign="top" width="52.05%">          <p>解订阅审计阻断类事件</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="47.949999999999996%">          <p>interface AuthClient {</p>          <p>addFilter(event: AuthEvent, filter: Filter): void；</p>          <p>}</p></td>         <td class="cellrowborder" valign="top" width="52.05%">          <p>添加审计阻断类事件过滤条件</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="47.949999999999996%">          <p>interface AuthClient {</p>          <p>removeFilter(event: AuthEvent, filter: Filter): void;</p>          <p>}</p></td>         <td class="cellrowborder" valign="top" width="52.05%">          <p>移除审计阻断类事件过滤条件</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="47.949999999999996%">          <p>interface AuthClient {</p>          <p>auth(auditEvent: AuditEvent, authResult: AuthResult): void;</p>          <p>}</p></td>         <td class="cellrowborder" valign="top" width="52.05%">          <p>设置审计阻断类事件的阻断结果</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section64865567292">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section64865567292" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>在开发准备过程中，需要申请权限：ohos.permission.kernel.AUTH_AUDIT_EVENT。</li>        <li>只允许清单内的企业类应用申请该权限，申请方式请参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/permissions-for-enterprise-apps" target="_blank">申请使用企业类应用可用权限</a>。</li>       </ul>      </div></div></div>     <ol>      <li><span>导入Device Security Kit模块及相关公共模块。</span>       <p></p>       <div _ngcontent-btu-c106="" class="highlight-div"><div _ngcontent-btu-c106="" class="highlight-div-header"><div _ngcontent-btu-c106="" class="highlight-div-header-left"><div _ngcontent-btu-c106="" class="handle-button expand-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-btu-c106="" class="highlight-div-header-right"><div _ngcontent-btu-c106="" class="handle-button ai-button"></div><div _ngcontent-btu-c106="" class="handle-button line-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-btu-c106="" class="handle-button theme-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-btu-c106="" class="handle-button copy-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-btu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>; </li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>; </li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>使用携带阻断策略的回调函数创建审计阻断类事件客户端实例。</span>       <p></p>       <div _ngcontent-btu-c106="" class="highlight-div"><div _ngcontent-btu-c106="" class="highlight-div-header"><div _ngcontent-btu-c106="" class="highlight-div-header-left"><div _ngcontent-btu-c106="" class="handle-button expand-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-btu-c106="" class="highlight-div-header-right"><div _ngcontent-btu-c106="" class="handle-button ai-button"></div><div _ngcontent-btu-c106="" class="handle-button line-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-btu-c106="" class="handle-button theme-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-btu-c106="" class="handle-button copy-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-btu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-variable">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">authClient</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuthClient</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">allowEventCallback</span> = (<span class="hljs-variable">event</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuditEvent</span>) =&gt; {</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">eventId</span>);</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">content</span>);</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">metadata</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-variable">authClient</span>?.<span class="hljs-title function_">auth</span>(<span class="hljs-variable">event</span>, <span class="hljs-variable">securityAudit</span>.<span class="hljs-variable">AuthResult</span>.<span class="hljs-variable">ALLOW</span>);</li><li>  } <span class="hljs-keyword">catch</span> (<span class="hljs-variable">error</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">error</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'allowEventCallback'</span>, <span class="hljs-string">'auth error:'</span> + <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>);</li><li>  }</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">authClient</span> = <span class="hljs-variable">securityAudit</span>.<span class="hljs-title function_">newAuthClient</span>(<span class="hljs-variable">allowEventCallback</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>);</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li><span>订阅审计阻断类事件。</span>       <p></p>       <div _ngcontent-btu-c106="" class="highlight-div"><div _ngcontent-btu-c106="" class="highlight-div-header"><div _ngcontent-btu-c106="" class="highlight-div-header-left"><div _ngcontent-btu-c106="" class="handle-button expand-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-btu-c106="" class="highlight-div-header-right"><div _ngcontent-btu-c106="" class="handle-button ai-button"></div><div _ngcontent-btu-c106="" class="handle-button line-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-btu-c106="" class="handle-button theme-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-btu-c106="" class="handle-button copy-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-btu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'subscribe begin.'</span>);</li><li>  authClient?.subscribe([securityAudit.AuthEvent.FILE_CREATE]);</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'Succeeded in subscribe.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> e: BusinessError = err <span class="hljs-keyword">as</span> BusinessError;</li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'subscribe failed: %{public}d %{public}s'</span>, e.code, e.message);</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li><span>设置审计阻断类事件过滤条件。</span>       <p></p>       <div _ngcontent-btu-c106="" class="highlight-div"><div _ngcontent-btu-c106="" class="highlight-div-header"><div _ngcontent-btu-c106="" class="highlight-div-header-left"><div _ngcontent-btu-c106="" class="handle-button expand-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-btu-c106="" class="highlight-div-header-right"><div _ngcontent-btu-c106="" class="handle-button ai-button"></div><div _ngcontent-btu-c106="" class="handle-button line-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-btu-c106="" class="handle-button theme-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-btu-c106="" class="handle-button copy-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-btu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">filter</span> : <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">Filter</span> = {</li><li>  <span class="hljs-keyword">type</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">FilterType</span>.<span class="hljs-title class_">PROCESS_PID_EQUAL</span>,</li><li>  <span class="hljs-variable">isInclude</span>: <span class="hljs-keyword">true</span>,</li><li>  <span class="hljs-variable">values</span> : [<span class="hljs-string">"2"</span>]</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'addFilter begin.'</span>);</li><li>  <span class="hljs-variable">authClient</span>?.<span class="hljs-title function_">addFilter</span>(<span class="hljs-variable">securityAudit</span>.<span class="hljs-variable">AuthEvent</span>.<span class="hljs-variable">FILE_CREATE</span>, <span class="hljs-variable">filter</span>);</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'Succeeded in addFilter.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'addFilter failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>);</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li><span>解除审计阻断类事件订阅。</span>       <p></p>       <div _ngcontent-btu-c106="" class="highlight-div"><div _ngcontent-btu-c106="" class="highlight-div-header"><div _ngcontent-btu-c106="" class="highlight-div-header-left"><div _ngcontent-btu-c106="" class="handle-button expand-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-btu-c106="" class="highlight-div-header-right"><div _ngcontent-btu-c106="" class="handle-button ai-button"></div><div _ngcontent-btu-c106="" class="handle-button line-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-btu-c106="" class="handle-button theme-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-btu-c106="" class="handle-button copy-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-btu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'unsubscribe begin.'</span>);</li><li>  authClient?.unsubscribe([securityAudit.AuthEvent.FILE_CREATE]);</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'Succeeded in unsubscribe.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> e: BusinessError = err <span class="hljs-keyword">as</span> BusinessError;</li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'unsubscribe failed: %{public}d %{public}s'</span>, e.code, e.message);</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li><span>解除审计阻断类事件过滤条件。</span>       <p></p>       <div _ngcontent-btu-c106="" class="highlight-div"><div _ngcontent-btu-c106="" class="highlight-div-header"><div _ngcontent-btu-c106="" class="highlight-div-header-left"><div _ngcontent-btu-c106="" class="handle-button expand-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-btu-c106="" class="highlight-div-header-right"><div _ngcontent-btu-c106="" class="handle-button ai-button"></div><div _ngcontent-btu-c106="" class="handle-button line-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-btu-c106="" class="handle-button theme-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-btu-c106="" class="handle-button copy-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-btu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'removeFilter begin.'</span>);</li><li>  authClient?.removeFilter(securityAudit.AuthEvent.FILE_CREATE, filter);</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'Succeeded in removeFilter.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> e: BusinessError = err <span class="hljs-keyword">as</span> BusinessError;</li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'removeFilter failed: %{public}d %{public}s'</span>, e.code, e.message);</li><li>}</li></ol></pre></div></div>       <p></p></li>      <li><span>删除审计阻断类事件客户端实例。</span>       <p></p>       <div _ngcontent-btu-c106="" class="highlight-div"><div _ngcontent-btu-c106="" class="highlight-div-header"><div _ngcontent-btu-c106="" class="highlight-div-header-left"><div _ngcontent-btu-c106="" class="handle-button expand-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-btu-c106="" class="highlight-div-header-right"><div _ngcontent-btu-c106="" class="handle-button ai-button"></div><div _ngcontent-btu-c106="" class="handle-button line-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-btu-c106="" class="handle-button theme-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-btu-c106="" class="handle-button copy-button"><div _ngcontent-btu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-btu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  securityAudit.deleteAuthClient(authClient);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> e: <span class="hljs-type">BusinessError</span> <span class="hljs-operator">=</span> err <span class="hljs-keyword">as</span> <span class="hljs-type">BusinessError</span>;</li><li>  hilog.error(<span class="hljs-number">0x0000</span>, <span class="hljs-type">TAG</span>, 'deleteAuthClient failed: <span class="hljs-operator">%</span>{<span class="hljs-keyword">public</span>}d <span class="hljs-operator">%</span>{<span class="hljs-keyword">public</span>}s', e.code, e.message);</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>