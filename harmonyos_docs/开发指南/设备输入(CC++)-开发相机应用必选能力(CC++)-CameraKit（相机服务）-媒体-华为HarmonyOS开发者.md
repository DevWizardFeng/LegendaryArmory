<h1 _ngcontent-vrn-c119="" class="doc-title ng-star-inserted" title="设备输入(C/C++)"> 设备输入(C/C++) </h1>

<div _ngcontent-vrn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>在开发相机应用时，需要先<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/camera-preparation">申请相关权限</a>。</p>    <p>相机应用通过调用和控制相机设备，完成预览、拍照和录像等基础操作。</p>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p>详细的API说明请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-camera" target="_blank">Camera API参考</a>。</p>     <ol>      <li>       <p>导入NDK接口。选择系统提供的NDK接口能力，导入NDK接口的方法如下。</p>       <div _ngcontent-vrn-c106="" class="highlight-div"><div _ngcontent-vrn-c106="" class="highlight-div-header"><div _ngcontent-vrn-c106="" class="highlight-div-header-left"><div _ngcontent-vrn-c106="" class="handle-button expand-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vrn-c106="" class="highlight-div-header-right"><div _ngcontent-vrn-c106="" class="handle-button ai-button"></div><div _ngcontent-vrn-c106="" class="handle-button line-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vrn-c106="" class="handle-button theme-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vrn-c106="" class="handle-button copy-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vrn-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 导入NDK接口头文件。</span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"hilog/log.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohcamera/camera.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohcamera/camera_input.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohcamera/capture_session.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohcamera/photo_output.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohcamera/preview_output.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohcamera/video_output.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohcamera/camera_manager.h"</span></span></li></ol></pre></div></div></li>      <li>       <p>在CMake脚本中链接相关动态库。</p>       <div _ngcontent-vrn-c106="" class="highlight-div"><div _ngcontent-vrn-c106="" class="highlight-div-header"><div _ngcontent-vrn-c106="" class="highlight-div-header-left"><div _ngcontent-vrn-c106="" class="handle-button expand-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vrn-c106="" class="highlight-div-header-right"><div _ngcontent-vrn-c106="" class="handle-button ai-button"></div><div _ngcontent-vrn-c106="" class="handle-button line-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vrn-c106="" class="handle-button theme-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vrn-c106="" class="handle-button copy-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vrn-c106="" class="highlight-scroll-div"><pre class="txt prettyprint linenums hljs language-plaintext" hw-language="txt" data-highlighted="yes"><ol class="linenums"><li>target_link_libraries(entry PUBLIC</li><li>    libace_napi.z.so</li><li>    libohcamera.so</li><li>    libhilog_ndk.z.so</li><li>)</li></ol></pre></div></div></li>      <li>       <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-camera-manager-h#oh_cameramanager_createcamerainput" target="_blank">OH_CameraManager_CreateCameraInput()</a>方法，获取cameraInput对象。</p>       <div _ngcontent-vrn-c106="" class="highlight-div"><div _ngcontent-vrn-c106="" class="highlight-div-header"><div _ngcontent-vrn-c106="" class="highlight-div-header-left"><div _ngcontent-vrn-c106="" class="handle-button expand-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vrn-c106="" class="highlight-div-header-right"><div _ngcontent-vrn-c106="" class="handle-button ai-button"></div><div _ngcontent-vrn-c106="" class="handle-button line-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vrn-c106="" class="handle-button theme-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vrn-c106="" class="handle-button copy-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vrn-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 监听cameraInput错误信息。</span></li><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OnCameraInputError</span><span class="hljs-params">(<span class="hljs-type">const</span> Camera_Input* cameraInput, Camera_ErrorCode errorCode)</span></span></li><li><span class="hljs-function"></span>{</li><li>   <span class="hljs-built_in">OH_LOG_INFO</span>(LOG_APP, <span class="hljs-string">"OnCameraInput errorCode: %{public}d"</span>, errorCode);</li><li>}</li><li>
</li><li><span class="hljs-function">CameraInput_Callbacks* <span class="hljs-title">GetCameraInputListener</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li><li><span class="hljs-function"></span>{</li><li>   <span class="hljs-type">static</span> CameraInput_Callbacks cameraInputCallbacks = {</li><li>      .onError = OnCameraInputError</li><li>   };</li><li>   <span class="hljs-keyword">return</span> &amp;cameraInputCallbacks;</li><li>}</li></ol></pre></div></div>       <div _ngcontent-vrn-c106="" class="highlight-div"><div _ngcontent-vrn-c106="" class="highlight-div-header"><div _ngcontent-vrn-c106="" class="highlight-div-header-left"><div _ngcontent-vrn-c106="" class="handle-button expand-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vrn-c106="" class="highlight-div-header-right"><div _ngcontent-vrn-c106="" class="handle-button ai-button"></div><div _ngcontent-vrn-c106="" class="handle-button line-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vrn-c106="" class="handle-button theme-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vrn-c106="" class="handle-button copy-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vrn-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 监听cameraStatus信息。</span></li><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CameraManagerStatusCallback</span><span class="hljs-params">(Camera_Manager* cameraManager, Camera_StatusInfo* status)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-built_in">OH_LOG_INFO</span>(LOG_APP, <span class="hljs-string">"CameraManagerStatusCallback is called"</span>);</li><li>}</li><li>
</li><li><span class="hljs-function">CameraManager_Callbacks* <span class="hljs-title">GetCameraManagerListener</span><span class="hljs-params">()</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">static</span> CameraManager_Callbacks cameraManagerListener = {</li><li>        .onCameraStatus = CameraManagerStatusCallback</li><li>    };</li><li>    <span class="hljs-keyword">return</span> &amp;cameraManagerListener;</li><li>}</li></ol></pre></div></div>       <div _ngcontent-vrn-c106="" class="highlight-div"><div _ngcontent-vrn-c106="" class="highlight-div-header"><div _ngcontent-vrn-c106="" class="highlight-div-header-left"><div _ngcontent-vrn-c106="" class="handle-button expand-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vrn-c106="" class="highlight-div-header-right"><div _ngcontent-vrn-c106="" class="handle-button ai-button"></div><div _ngcontent-vrn-c106="" class="handle-button line-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vrn-c106="" class="handle-button theme-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vrn-c106="" class="handle-button copy-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vrn-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CreateAndOpenCamera</span><span class="hljs-params">()</span></span></li><li><span class="hljs-function"></span>{</li><li>    Camera_Manager* cameraManager = <span class="hljs-literal">nullptr</span>;</li><li>    Camera_Input* cameraInput = <span class="hljs-literal">nullptr</span>;</li><li>    Camera_Device* cameras = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-type">uint32_t</span> size = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-type">uint32_t</span> cameraDeviceIndex = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 创建CameraManager对象。</span></li><li>    Camera_ErrorCode ret = <span class="hljs-built_in">OH_Camera_GetCameraManager</span>(&amp;cameraManager);</li><li>    <span class="hljs-keyword">if</span> (cameraManager == <span class="hljs-literal">nullptr</span> || ret != CAMERA_OK) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"OH_Camera_GetCameraManager failed."</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 监听相机状态变化。</span></li><li>    ret = <span class="hljs-built_in">OH_CameraManager_RegisterCallback</span>(cameraManager, <span class="hljs-built_in">GetCameraManagerListener</span>());</li><li>    <span class="hljs-keyword">if</span> (ret != CAMERA_OK) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"OH_CameraManager_RegisterCallback failed."</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 获取相机列表。</span></li><li>     ret = <span class="hljs-built_in">OH_CameraManager_GetSupportedCameras</span>(cameraManager, &amp;cameras, &amp;size);</li><li>     <span class="hljs-keyword">if</span> (cameras == <span class="hljs-literal">nullptr</span> || size == <span class="hljs-number">0</span> || ret != CAMERA_OK) {</li><li>         <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"OH_CameraManager_GetSupportedCameras failed."</span>);</li><li>         <span class="hljs-keyword">return</span>;</li><li>     }</li><li>    <span class="hljs-comment">// 创建相机输入流。</span></li><li>    ret = <span class="hljs-built_in">OH_CameraManager_CreateCameraInput</span>(cameraManager, &amp;cameras[cameraDeviceIndex], &amp;cameraInput);</li><li>    <span class="hljs-keyword">if</span> (cameraInput == <span class="hljs-literal">nullptr</span> || ret != CAMERA_OK) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"OH_CameraManager_CreateCameraInput failed."</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    ret = <span class="hljs-built_in">OH_CameraInput_RegisterCallback</span>(cameraInput, <span class="hljs-built_in">GetCameraInputListener</span>());</li><li>    <span class="hljs-keyword">if</span> (ret != CAMERA_OK) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"OH_CameraInput_RegisterCallback failed."</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 打开相机。</span></li><li>    ret = <span class="hljs-built_in">OH_CameraInput_Open</span>(cameraInput);</li><li>    <span class="hljs-keyword">if</span> (ret != CAMERA_OK) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"OH_CameraInput_open failed."</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>在相机设备输入之前需要先完成相机管理，详细开发步骤请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/native-camera-device-management">相机管理</a>。</p>        </div></div></div></li>      <li>       <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-camera-manager-h#oh_cameramanager_getsupportedscenemodes" target="_blank">OH_CameraManager_GetSupportedSceneModes()</a>方法，获取当前相机设备支持的模式列表，列表中存储了相机设备支持的所有模式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-camera-h#camera_scenemode" target="_blank">Camera_SceneMode</a>。</p>       <div _ngcontent-vrn-c106="" class="highlight-div"><div _ngcontent-vrn-c106="" class="highlight-div-header"><div _ngcontent-vrn-c106="" class="highlight-div-header-left"><div _ngcontent-vrn-c106="" class="handle-button expand-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vrn-c106="" class="highlight-div-header-right"><div _ngcontent-vrn-c106="" class="handle-button ai-button"></div><div _ngcontent-vrn-c106="" class="handle-button line-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vrn-c106="" class="handle-button theme-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vrn-c106="" class="handle-button copy-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vrn-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsSupportedSceneMode</span><span class="hljs-params">(Camera_Device camera, Camera_SceneMode sceneMode)</span></span></li><li><span class="hljs-function"></span>{</li><li>    Camera_SceneMode* sceneModes = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-type">uint32_t</span> sceneModeSize = <span class="hljs-number">0</span>;</li><li>    Camera_ErrorCode ret = <span class="hljs-built_in">OH_CameraManager_GetSupportedSceneModes</span>(&amp;camera, &amp;sceneModes, &amp;sceneModeSize);</li><li>    <span class="hljs-keyword">if</span> (sceneModes == <span class="hljs-literal">nullptr</span> || ret != CAMERA_OK) {</li><li>        <span class="hljs-built_in">OH_LOG_ERROR</span>(LOG_APP, <span class="hljs-string">"OH_CameraManager_GetSupportedSceneModes failed."</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>    }</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint32_t</span> index = <span class="hljs-number">0</span>; index &lt; sceneModeSize; index++) {</li><li>        <span class="hljs-built_in">OH_LOG_INFO</span>(LOG_APP, <span class="hljs-string">"scene mode = %{public}u "</span>, sceneModes[index]);    <span class="hljs-comment">// 获取相机指定模式。</span></li><li>        <span class="hljs-keyword">if</span> (sceneModes[index] == sceneMode) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>        }</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>}</li></ol></pre></div></div></li>      <li>       <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-camera-manager-h#oh_cameramanager_getsupportedcameraoutputcapabilitywithscenemode" target="_blank">OH_CameraManager_GetSupportedCameraOutputCapabilityWithSceneMode()</a>方法，获取当前设备支持的所有输出流，如预览流、拍照流等。输出流在CameraOutputCapability中的各个profile字段中。根据相机设备指定模式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-camera-h#camera_scenemode" target="_blank">Camera_SceneMode</a>的不同，需要添加不同类型的输出流。</p>       <div _ngcontent-vrn-c106="" class="highlight-div"><div _ngcontent-vrn-c106="" class="highlight-div-header"><div _ngcontent-vrn-c106="" class="highlight-div-header-left"><div _ngcontent-vrn-c106="" class="handle-button expand-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vrn-c106="" class="highlight-div-header-right"><div _ngcontent-vrn-c106="" class="handle-button ai-button"></div><div _ngcontent-vrn-c106="" class="handle-button line-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vrn-c106="" class="handle-button theme-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vrn-c106="" class="handle-button copy-button"><div _ngcontent-vrn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vrn-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">Camera_OutputCapability</span>* <span class="hljs-title function_">GetSupportedCameraOutputCapability</span>(<span class="hljs-variable">Camera_Manager</span>* <span class="hljs-variable">cameraManager</span>, <span class="hljs-variable">Camera_Device</span> &amp;<span class="hljs-title class_">camera</span>)</li><li>{</li><li>    <span class="hljs-variable">Camera_OutputCapability</span>* <span class="hljs-variable">cameraOutputCapability</span> = <span class="hljs-variable">nullptr</span>;</li><li>    <span class="hljs-comment">// 示例代码以NORMAL_PHOTO模式为例，查询NORMAL_PHOTO在camera中是否支持。</span></li><li>    <span class="hljs-variable">bool</span> <span class="hljs-variable">isSupported</span> = <span class="hljs-title function_">IsSupportedSceneMode</span>(<span class="hljs-variable">camera</span>, <span class="hljs-variable">Camera_SceneMode</span>::<span class="hljs-title class_">NORMAL_PHOTO</span>);</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable">isSupported</span>) {</li><li>        <span class="hljs-title function_">OH_LOG_ERROR</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-string">"NORMAL_PHOTO is not supported."</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-variable">cameraOutputCapability</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 获取相机设备支持的输出流能力。</span></li><li>    <span class="hljs-keyword">const</span> <span class="hljs-variable">Camera_Profile</span>* <span class="hljs-variable">previewProfile</span> = <span class="hljs-variable">nullptr</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-variable">Camera_Profile</span>* <span class="hljs-variable">photoProfile</span> = <span class="hljs-variable">nullptr</span>;</li><li>    <span class="hljs-variable">Camera_ErrorCode</span> <span class="hljs-variable">ret</span> = <span class="hljs-title function_">OH_CameraManager_GetSupportedCameraOutputCapabilityWithSceneMode</span>(<span class="hljs-variable">cameraManager</span>, &amp;<span class="hljs-title class_">camera</span>,</li><li>        <span class="hljs-variable">Camera_SceneMode</span>::<span class="hljs-title class_">NORMAL_PHOTO</span>, &amp;<span class="hljs-title class_">cameraOutputCapability</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">cameraOutputCapability</span> == <span class="hljs-variable">nullptr</span> || <span class="hljs-variable">ret</span> != <span class="hljs-variable">CAMERA_OK</span>) {</li><li>        <span class="hljs-title function_">OH_LOG_ERROR</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-string">"OH_CameraManager_GetSupportedCameraOutputCapability failed."</span>);</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-variable">cameraOutputCapability</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 以NORMAL_PHOTO模式为例，需要添加预览流、拍照流。</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">cameraOutputCapability</span>-&gt;<span class="hljs-title class_">previewProfiles</span> == <span class="hljs-variable">nullptr</span>) {</li><li>        <span class="hljs-title function_">OH_LOG_ERROR</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-string">"previewProfiles == null"</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 根据所需从cameraOutputCapability-&gt;previewProfiles中选择合适的预览分辨率。</span></li><li>        <span class="hljs-variable">previewProfile</span> = <span class="hljs-variable">cameraOutputCapability</span>-&gt;<span class="hljs-title class_">previewProfiles</span>[<span class="hljs-number">0</span>];</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">cameraOutputCapability</span>-&gt;<span class="hljs-title class_">photoProfiles</span> == <span class="hljs-variable">nullptr</span>) {</li><li>        <span class="hljs-title function_">OH_LOG_ERROR</span>(<span class="hljs-variable">LOG_APP</span>, <span class="hljs-string">"photoProfiles == null"</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 根据所需从cameraOutputCapability-&gt;photoProfiles中选择合适的拍照分辨率。</span></li><li>        <span class="hljs-variable">photoProfile</span> = <span class="hljs-variable">cameraOutputCapability</span>-&gt;<span class="hljs-title class_">photoProfiles</span>[<span class="hljs-number">0</span>];</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable">cameraOutputCapability</span>;</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>