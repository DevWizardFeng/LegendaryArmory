<h1 _ngcontent-eqh-c119="" class="doc-title ng-star-inserted" title="设置常驻通知弹窗"> 设置常驻通知弹窗 </h1>

<div _ngcontent-eqh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section18555183713293">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section18555183713293" tips="复制节点链接"></i></h2>          <p>从6.0.0(20) Beta1版本开始，新增支持设置常驻通知弹窗。</p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-hdssnackbar" target="_blank">HdsSnackBar</a>支持常驻通知弹窗。当应用开发者需要常驻通知提醒弹窗时，可以通过HdsSnackBar的show方法显示HdsSnackBar弹窗，设置duration是-1表示常驻弹窗。</p>    </div>    <p><span><img height="322.649355" originheight="444" originwidth="431" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114726.69431080188128999769450515097123:50001231000000:2800:D03D81CF167F28B250953BC74C967D3C04E6552A14D9A1546D9706FE3F4BD02C.gif" title="点击放大" width="313.21500000000003"></span></p>    <div class="tiledSection">     <h2 id="section958017291991">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section958017291991" tips="复制节点链接"></i></h2>          <ol>      <li><span>导入相关模块。</span>       <p></p>       <div _ngcontent-eqh-c106="" class="highlight-div"><div _ngcontent-eqh-c106="" class="highlight-div-header"><div _ngcontent-eqh-c106="" class="highlight-div-header-left"><div _ngcontent-eqh-c106="" class="handle-button expand-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqh-c106="" class="highlight-div-header-right"><div _ngcontent-eqh-c106="" class="handle-button ai-button"></div><div _ngcontent-eqh-c106="" class="handle-button line-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqh-c106="" class="handle-button theme-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqh-c106="" class="handle-button copy-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqh-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {</li><li>  <span class="hljs-title class_">HdsSnackBar</span>,</li><li>  <span class="hljs-title class_">SnackBarIconOptions</span>,</li><li>  <span class="hljs-title class_">SnackBarMessageOptions</span>,</li><li>  <span class="hljs-title class_">SnackBarOperationOptions</span>,</li><li>  <span class="hljs-title class_">SnackBarStyleOptions</span>,</li><li>  <span class="hljs-title class_">SnackBarOperationType</span></li><li>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span></li></ol></pre></div></div>       <p></p></li>      <li><span>创建UIContext，创建HdsSnackBar对象hdsSnackBar，调用HdsSnackBar对象的show方法可以显示HdsSnackBar弹窗，入参是左侧图标icon、中间文本message、右侧操作区operation、样式style，其中右侧操作区设置类型是带有关闭按钮的文本按钮，其中style中设置duration是-1表示HdsSnackBar弹窗常驻。</span></li>      <li><span>设置textButtonId和nextFocusId两个属性，支持开发者自定义Tab键走焦能力。</span>       <p></p>       <div _ngcontent-eqh-c106="" class="highlight-div"><div _ngcontent-eqh-c106="" class="highlight-div-header"><div _ngcontent-eqh-c106="" class="highlight-div-header-left"><div _ngcontent-eqh-c106="" class="handle-button expand-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqh-c106="" class="highlight-div-header-right"><div _ngcontent-eqh-c106="" class="handle-button ai-button"></div><div _ngcontent-eqh-c106="" class="handle-button line-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqh-c106="" class="handle-button theme-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqh-c106="" class="handle-button copy-button"><div _ngcontent-eqh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqh-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">TestSnackBar</span> {</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-attr">hdsSnackBar</span>: <span class="hljs-title class_">HdsSnackBar</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HdsSnackBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>);</li><li>  <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SnackBarIconOptions</span> = {</li><li>    <span class="hljs-attr">icon</span>: $r(<span class="hljs-string">'sys.symbol.checkmark_circle'</span>)</li><li>  }</li><li>  <span class="hljs-attr">message</span>: <span class="hljs-title class_">SnackBarMessageOptions</span> = {</li><li>    <span class="hljs-attr">title</span>: $r(<span class="hljs-string">'sys.string.ohos_id_text_location_button_description_current_position'</span>),</li><li>    <span class="hljs-attr">content</span>: $r(<span class="hljs-string">'sys.string.ohos_id_text_save_button_description_save'</span>)</li><li>  }</li><li>  <span class="hljs-attr">operation</span>: <span class="hljs-title class_">SnackBarOperationOptions</span> = {</li><li>    <span class="hljs-attr">operationType</span>: <span class="hljs-title class_">SnackBarOperationType</span>.<span class="hljs-property">TEXT_WITH_CLOSE</span>,</li><li>    <span class="hljs-attr">content</span>: $r(<span class="hljs-string">'sys.string.ohos_id_text_save_button_description_save_image'</span>),</li><li>    <span class="hljs-attr">textButtonId</span>: <span class="hljs-string">'snackBarTextButton'</span></li><li>  }</li><li>  <span class="hljs-attr">style</span>: <span class="hljs-title class_">SnackBarStyleOptions</span> = {</li><li>    <span class="hljs-attr">nextFocusId</span>: <span class="hljs-string">'button'</span>,</li><li>    <span class="hljs-attr">duration</span>: -<span class="hljs-number">1</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Blank</span>()</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">400</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'右侧操作区是文字按钮和关闭按钮的SnackBar弹窗，常驻'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">hdsSnackBar</span>.<span class="hljs-title function_">show</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">icon</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">operation</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">"button"</span>)</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'关注'</span>)</li><li>        .<span class="hljs-title function_">nextFocus</span>({</li><li>          <span class="hljs-comment">// 这里forward的id必须和SnackBarOperationOptions接口中传入的textButtonId相同</span></li><li>          <span class="hljs-attr">forward</span>: <span class="hljs-string">'snackBarTextButton'</span></li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xF1F3F5</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>    <p></p>    <p></p>   </div>   <div></div></div>