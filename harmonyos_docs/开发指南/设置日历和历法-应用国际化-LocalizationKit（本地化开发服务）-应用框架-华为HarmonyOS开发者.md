<h1 _ngcontent-fie-c119="" class="doc-title ng-star-inserted" title="设置日历和历法"> 设置日历和历法 </h1>

<div _ngcontent-fie-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>          <p>不同地区的用户使用不同的历法，大多数地区使用公历，也有些地区的用户使用其他历法，例如农历、伊斯兰历或希伯来历。日历上的时间和日期根据历法计算得到，并会随时区和夏令时的变化而调整。因此，用户需要设置符合本地习惯的历法。国际化提供了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#calendar8" target="_blank">Calendar</a>类，可以设置历法、日期、时区、一周的起始日期和一年中第一周的最小天数。此外，还可以判断具体某一天在日历中是否为周末以及计算相差天数。在应用开发过程中，可以根据业务需求选择使用不同功能。</p>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p>以查看公历日期对应的农历日期为例，说明如何使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#calendar8" target="_blank">Calendar</a>类接口。</p>     <ol>      <li>       <p>公历相关用法。</p>       <div _ngcontent-fie-c106="" class="highlight-div"><div _ngcontent-fie-c106="" class="highlight-div-header"><div _ngcontent-fie-c106="" class="highlight-div-header-left"><div _ngcontent-fie-c106="" class="handle-button expand-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fie-c106="" class="highlight-div-header-right"><div _ngcontent-fie-c106="" class="handle-button ai-button"></div><div _ngcontent-fie-c106="" class="handle-button line-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fie-c106="" class="handle-button theme-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fie-c106="" class="handle-button copy-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">calendar</span>: i18n.<span class="hljs-property">Calendar</span> = i18n.<span class="hljs-title function_">getCalendar</span>(<span class="hljs-string">'zh-Hans'</span>, <span class="hljs-string">'gregory'</span>);</li><li><span class="hljs-comment">// 设置日历对象的时间日期为2022.06.13 08:00:00</span></li><li>calendar.<span class="hljs-title function_">setTime</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">2022</span>, <span class="hljs-number">5</span>, <span class="hljs-number">13</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));</li><li>calendar.<span class="hljs-title function_">setTime</span>(<span class="hljs-number">10540800000</span>);</li><li>
</li><li><span class="hljs-comment">// 设置日历对象的时间日期为2022.06.13 08:00:00</span></li><li>calendar.<span class="hljs-title function_">set</span>(<span class="hljs-number">2022</span>, <span class="hljs-number">5</span>, <span class="hljs-number">13</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>
</li><li><span class="hljs-comment">// 设置日历对象的时区</span></li><li>calendar.<span class="hljs-title function_">setTimeZone</span>(<span class="hljs-string">'Asia/Shanghai'</span>);</li><li>
</li><li><span class="hljs-comment">// 获取日历对象的时区</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">timezone</span>: <span class="hljs-built_in">string</span> = calendar.<span class="hljs-title function_">getTimeZone</span>(); <span class="hljs-comment">// timezone = 'Asia/Shanghai'</span></li><li>
</li><li><span class="hljs-comment">// 获取日历对象的一周起始日</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">firstDayOfWeek</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">getFirstDayOfWeek</span>(); <span class="hljs-comment">// firstDayOfWeek = 1</span></li><li>
</li><li><span class="hljs-comment">// 设置每一周的起始日</span></li><li>calendar.<span class="hljs-title function_">setFirstDayOfWeek</span>(<span class="hljs-number">1</span>);</li><li>
</li><li><span class="hljs-comment">// 获取一年中第一周的最小天数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">minimalDaysInFirstWeek</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">getMinimalDaysInFirstWeek</span>(); <span class="hljs-comment">// minimalDaysInFirstWeek = 1</span></li><li>
</li><li><span class="hljs-comment">// 设置一年中第一周的最小天数</span></li><li>calendar.<span class="hljs-title function_">setMinimalDaysInFirstWeek</span>(<span class="hljs-number">3</span>);</li><li>
</li><li><span class="hljs-comment">// 获取日历对象中与field相关联的值</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">year</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">get</span>(<span class="hljs-string">'year'</span>); <span class="hljs-comment">// year = 2022</span></li><li>
</li><li><span class="hljs-comment">// 获取日历对象本地化名称</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">calendarName</span>: <span class="hljs-built_in">string</span> = calendar.<span class="hljs-title function_">getDisplayName</span>(<span class="hljs-string">'zh-Hans'</span>); <span class="hljs-comment">// calendarName = '公历'</span></li><li>
</li><li><span class="hljs-comment">// 判断指定的日期在日历中是否为周末</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isWeekend</span>: <span class="hljs-built_in">boolean</span> = calendar.<span class="hljs-title function_">isWeekend</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">2023</span>, <span class="hljs-number">9</span>, <span class="hljs-number">15</span>)); <span class="hljs-comment">// isWeekend = true</span></li><li>
</li><li><span class="hljs-comment">// 在日历的给定字段进行加减操作</span></li><li>calendar.<span class="hljs-title function_">set</span>(<span class="hljs-number">2023</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>);</li><li>calendar.<span class="hljs-title function_">add</span>(<span class="hljs-string">'date'</span>, <span class="hljs-number">2</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">day</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">get</span>(<span class="hljs-string">'date'</span>); <span class="hljs-comment">// day = 17</span></li><li>
</li><li><span class="hljs-comment">// 比较日历和指定日期相差的天数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">daysDifference</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">compareDays</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">2023</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>)); <span class="hljs-comment">// daysDifference = -3</span></li></ol></pre></div></div></li>      <li>       <p>获取公历日期对应的农历日期。</p>       <div _ngcontent-fie-c106="" class="highlight-div"><div _ngcontent-fie-c106="" class="highlight-div-header"><div _ngcontent-fie-c106="" class="highlight-div-header-left"><div _ngcontent-fie-c106="" class="handle-button expand-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fie-c106="" class="highlight-div-header-right"><div _ngcontent-fie-c106="" class="handle-button ai-button"></div><div _ngcontent-fie-c106="" class="handle-button line-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fie-c106="" class="handle-button theme-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fie-c106="" class="handle-button copy-button"><div _ngcontent-fie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { i18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">calendar</span>: i18n.<span class="hljs-property">Calendar</span> = i18n.<span class="hljs-title function_">getCalendar</span>(<span class="hljs-string">'zh-Hans'</span>, <span class="hljs-string">'chinese'</span>);</li><li><span class="hljs-comment">// 将公历日期设置到calendar对象，时间日期为2023.07.25 08:00:00</span></li><li>calendar.<span class="hljs-title function_">setTime</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">2023</span>, <span class="hljs-number">6</span>, <span class="hljs-number">25</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));</li><li><span class="hljs-comment">// 获取农历年月日</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">year</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">get</span>(<span class="hljs-string">'year'</span>); <span class="hljs-comment">// year = 40，指干支纪年40，范围1-60</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">month</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">get</span>(<span class="hljs-string">'month'</span>); <span class="hljs-comment">// month = 5，指6月</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">day</span>: <span class="hljs-built_in">number</span> = calendar.<span class="hljs-title function_">get</span>(<span class="hljs-string">'date'</span>); <span class="hljs-comment">// day = 8，指8日</span></li></ol></pre></div></div></li>     </ol>     <p><strong>表1</strong> 支持的历法</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.3.1.1" valign="top" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.3.1.2" valign="top" width="50%">中文名称</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">buddhist</td>         <td class="cellrowborder" valign="top" width="50%">佛历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">chinese</td>         <td class="cellrowborder" valign="top" width="50%">农历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">coptic</td>         <td class="cellrowborder" valign="top" width="50%">科普特历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">ethiopic</td>         <td class="cellrowborder" valign="top" width="50%">埃塞俄比亚历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">hebrew</td>         <td class="cellrowborder" valign="top" width="50%">希伯来历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">gregory</td>         <td class="cellrowborder" valign="top" width="50%">公历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">indian</td>         <td class="cellrowborder" valign="top" width="50%">印度历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">islamic_civil</td>         <td class="cellrowborder" valign="top" width="50%">伊斯兰希吉来历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">islamic_tbla</td>         <td class="cellrowborder" valign="top" width="50%">伊斯兰天文历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">islamic_umalqura</td>         <td class="cellrowborder" valign="top" width="50%">伊斯兰历（乌姆库拉）</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">japanese</td>         <td class="cellrowborder" valign="top" width="50%">日本历</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">persian</td>         <td class="cellrowborder" valign="top" width="50%">波斯历</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitee.com/harmonyos_samples/international" target="_blank">国际化-日历</a></li>     </ul>    </div>   </div>   <div></div></div>