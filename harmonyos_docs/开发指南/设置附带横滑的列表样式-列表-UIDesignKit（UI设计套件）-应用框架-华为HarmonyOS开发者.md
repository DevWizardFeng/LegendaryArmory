<h1 _ngcontent-cwb-c119="" class="doc-title ng-star-inserted" title="设置附带横滑的列表样式"> 设置附带横滑的列表样式 </h1>

<div _ngcontent-cwb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section138501953195513">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section138501953195513" tips="复制节点链接"></i></h2>          <p>从6.0.0(20) Beta1版本开始，新增支持设置附带横滑的列表样式。</p>     <p>应用使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-hdslistitem" target="_blank">HdsListItem</a>组件实现多设备上的系统列表的横滑动效按钮的内容和样式。</p>     <p><span><img height="168.48067600000002" originheight="247" originwidth="639" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114726.72983230398297614821215112236387:50001231000000:2800:6E0071F2DC1874E5FEB24FF62CC160EDBEE315EC82C7A9EE91FB0DB4753CB677.gif" title="点击放大" width="435.9075"></span></p>    </div>    <div class="tiledSection">     <h2 id="section1856314351908">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section1856314351908" tips="复制节点链接"></i></h2>          <ol>      <li><span>导入相关模块。</span>       <p></p>       <div _ngcontent-cwb-c106="" class="highlight-div"><div _ngcontent-cwb-c106="" class="highlight-div-header"><div _ngcontent-cwb-c106="" class="highlight-div-header-left"><div _ngcontent-cwb-c106="" class="handle-button expand-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cwb-c106="" class="highlight-div-header-right"><div _ngcontent-cwb-c106="" class="handle-button ai-button"></div><div _ngcontent-cwb-c106="" class="handle-button line-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cwb-c106="" class="handle-button theme-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cwb-c106="" class="handle-button copy-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cwb-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { promptAction, <span class="hljs-title class_">SymbolGlyphModifier</span>, <span class="hljs-title class_">TextModifier</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HdsListItem</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li></ol></pre></div></div>       <p></p></li>      <li><span>简单配置页面的布局，调用HdsListItem的接口绘制列表的横滑动效按钮的内容和样式。</span>       <p></p>       <div _ngcontent-cwb-c106="" class="highlight-div"><div _ngcontent-cwb-c106="" class="highlight-div-header"><div _ngcontent-cwb-c106="" class="highlight-div-header-left"><div _ngcontent-cwb-c106="" class="handle-button expand-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cwb-c106="" class="highlight-div-header-right"><div _ngcontent-cwb-c106="" class="handle-button ai-button"></div><div _ngcontent-cwb-c106="" class="handle-button line-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cwb-c106="" class="handle-button theme-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cwb-c106="" class="handle-button copy-button"><div _ngcontent-cwb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cwb-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">HdsListItemExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">dataSource</span>: <span class="hljs-title class_">LazyDataSource</span>&lt;<span class="hljs-title class_">Item</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LazyDataSource</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">dataArr</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Item</span>&gt; = [];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">EndOffset</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">scroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">scroller</span> }) {</li><li>        <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>, <span class="hljs-function">(<span class="hljs-params">item: Item</span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">HdsListItem</span>({</li><li>            <span class="hljs-attr">hdsListItemCard</span>: {</li><li>              <span class="hljs-attr">textItem</span>: {</li><li>                <span class="hljs-attr">primaryText</span>: {</li><li>                  <span class="hljs-attr">text</span>: <span class="hljs-string">'Primary Text'</span>,</li><li>                  <span class="hljs-attr">modifier</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextModifier</span>().<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>),</li><li>                }</li><li>              }</li><li>            },</li><li>            <span class="hljs-attr">swipeActionOptions</span>: {</li><li>              <span class="hljs-attr">icons</span>: [</li><li>                {</li><li>                  <span class="hljs-attr">icon</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SymbolGlyphModifier</span>($r(<span class="hljs-string">'sys.symbol.share'</span>)).<span class="hljs-title function_">fontColor</span>([<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>]).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>),</li><li>                  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>,</li><li>                  <span class="hljs-attr">onAction</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                    promptAction.<span class="hljs-title function_">openToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'点击share按钮'</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span> });</li><li>                  },</li><li>                },</li><li>                {</li><li>                  <span class="hljs-attr">icon</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SymbolGlyphModifier</span>($r(<span class="hljs-string">'sys.symbol.plus_square_on_square'</span>)),</li><li>                  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>,</li><li>                  <span class="hljs-attr">onAction</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                    promptAction.<span class="hljs-title function_">openToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'点击copy按钮'</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span> });</li><li>                  },</li><li>                },</li><li>                {</li><li>                  <span class="hljs-attr">icon</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SymbolGlyphModifier</span>($r(<span class="hljs-string">'sys.symbol.plus_square_dashed_on_square'</span>))</li><li>                          .<span class="hljs-title function_">symbolEffect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BounceSymbolEffect</span>(), <span class="hljs-literal">true</span>),</li><li>                  <span class="hljs-attr">onAction</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                    promptAction.<span class="hljs-title function_">openToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'点击paste按钮'</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span> });</li><li>                  },</li><li>                },</li><li>              ],</li><li>              <span class="hljs-attr">deleteIconOptions</span>: {</li><li>                <span class="hljs-attr">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>, <span class="hljs-comment">//  ---修改背景色</span></li><li>                <span class="hljs-attr">iconColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>, <span class="hljs-comment">//  ---- 修改垃圾桶的颜色</span></li><li>                <span class="hljs-attr">onAction</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  promptAction.<span class="hljs-title function_">openToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'点击删除按钮'</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span> });</li><li>                }, <span class="hljs-comment">//   --点击回调</span></li><li>              },</li><li>              <span class="hljs-attr">fullDeleteOptions</span>: {</li><li>                <span class="hljs-attr">isFullDelete</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// --- 划动距离超过划出组件大小后自动触发删除，默认是false</span></li><li>                <span class="hljs-attr">onFullDeleteAction</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  promptAction.<span class="hljs-title function_">openToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'触发自动删除'</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span> });</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">animateTo</span>({</li><li>                    <span class="hljs-attr">duration</span>: <span class="hljs-number">350</span>,</li><li>                  }, <span class="hljs-function">() =&gt;</span> {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-title function_">deleteItem</span>(item)</li><li>                  });</li><li>                }, <span class="hljs-comment">//   -- 触发删除时的回调</span></li><li>              },</li><li>            }</li><li>          })</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: Item</span>) =&gt;</span> item.<span class="hljs-property">data</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      .<span class="hljs-title function_">onDidScroll</span>(<span class="hljs-function">(<span class="hljs-params">scrollOffset: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">EndOffset</span> = scrollOffset</li><li>      })</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0D182431'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-title function_">pushItem</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Item</span>(i + <span class="hljs-string">''</span>));</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataArr</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Item</span>(i + <span class="hljs-string">''</span>));</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyDataSource</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IDataSource</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">elements</span>: T[];</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">listeners</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">DataChangeListener</span>&gt;;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">elements: T[] = []</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span> = elements;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">totalCount</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-property">length</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getData</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): T {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>[index];</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">indexOf</span>(<span class="hljs-attr">item</span>: T): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">indexOf</span>(item);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">pinItem</span>(<span class="hljs-attr">item</span>: T, <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">unshift</span>(item);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener.<span class="hljs-title function_">onDataReloaded</span>());</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">pushItem</span>(<span class="hljs-params">item: T</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">push</span>(item);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener.<span class="hljs-title function_">onDataAdd</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>));</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">deleteItem</span>(<span class="hljs-attr">item</span>: T): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">indexOf</span>(item);</li><li>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener.<span class="hljs-title function_">onDataDelete</span>(index));</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">deleteItemByIndex</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener.<span class="hljs-title function_">onDataDelete</span>(index));</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">registerDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">add</span>(listener);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">unregisterDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(listener);</li><li>  }</li><li>}</li></ol></pre></div></div>       <p></p></li>     </ol>    </div>   </div>   <div></div></div>