<h1 _ngcontent-auo-c119="" class="doc-title ng-star-inserted" title="访问设备文件"> 访问设备文件 </h1>

<div _ngcontent-auo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001558037338"><p id="ZH-CN_TOPIC_0000002510174379__p8060118">开发者可以使用Device File Browser，在DevEco Studio上如PC端操作一样，对设备文件进行新建、删除、上传、下载等操作，而无需使用命令行，提升开发效率，当前支持普通文件视图与应用沙箱视图两种模式。</p> <div class="tiledSection"><h2 id="section1943652015712">使用场景<i class="anchor-icon anchor-icon-link" anchorid="section1943652015712" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002510174379__ul643672075718"><li id="li27220591663">查看设备上的文件列表及基本信息。</li><li id="li7531947798">在设备上搜索文件及文件夹。</li><li id="li41960915719">在设备上新建、删除文件。</li><li id="li49335202713">从PC本地上传文件到设备上，从设备上下载文件到PC本地。</li></ul> </div> <div class="tiledSection"><h2 id="section125755210545">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section125755210545" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002510174379__ul257195219545"><li id="li10141203817494">已通过USB或Wi-Fi连接设备。</li><li id="li139001521205517">不支持访问无权限目录，新建、删除、上传、下载文件受设备权限约束。</li><li id="li095092432615">不支持文件拖拽。</li><li id="li0754101135116">不支持文件修改。如需对文件进行修改，需下载至PC，在本地修改后再上传至设备。</li><li id="li5149141618815">不支持上传文件或文件夹的快捷方式。</li><li id="li12949121717364">应用沙箱视图不支持模拟器设备。</li><li id="li168760144512">只支持访问调试态应用的沙箱数据目录。</li><li id="li66754543367">应用需为debug应用才可使用沙箱视图查看文件结构、对应用沙箱内的文件/文件夹进行新建、删除、上传或下载操作。</li></ul> </div> <div class="tiledSection"><h2 id="section165192211111">操作步骤<i class="anchor-icon anchor-icon-link" anchorid="section165192211111" tips="复制节点链接"></i></h2><ol id="ZH-CN_TOPIC_0000002510174379__ol16722182818116"><li id="li16881165521516"><span>在菜单栏单击<strong>View &gt; Tool Windows &gt; Device File Browser</strong>，打开Device File Browser。</span><p></p><p id="ZH-CN_TOPIC_0000002510174379__p124081210171811"><span><img originheight="321" originwidth="431" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104824.57764647708779047953525996841757:50001231000000:2800:0DBA80849AEA339C9CF505C1C635828F29538B8569045A08D9537F07DD7113D5.png" width="431" height="321"></span></p> <p></p></li><li id="li511317871815"><span>从下拉列表中选择设备（设备需已连接）。</span></li><li id="li24314202185"><span>选择设备后，显示文件/文件夹列表，可进行以下操作：</span><p></p><ol id="ZH-CN_TOPIC_0000002510174379__ol118461452141813"><li id="li20846135271815">右键单击目录或文件，进行新建/删除操作。</li><li id="li1639141964518">右键单击<strong>Save As</strong>将选定的文件或目录下载到PC上，右键单击<strong>Upload</strong>将PC上的文件上传到设备指定目录。<p id="ZH-CN_TOPIC_0000002510174379__p1286717191456">如果需要查看数据库文件，可以通过该方式将数据库文件（路径举例：data &gt; app &gt; el2 &gt; 100 &gt; database &gt;项目名称 &gt; entry &gt; rdb &gt; 数据库文件）下载到PC上，再通过其他工具进行可视化查看。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510174379__p44251213598">从DevEco Studio 6.0.0 Beta2版本开始，支持使用快捷键<strong>Ctrl或Shift+鼠标左键</strong>（macOS为<strong>Command或Shift+鼠标左键</strong>），选中多个文件或目录下载到本地计算机。</p> </div></div></div> </li><li id="li4846205219181">焦点在Device File Browser框中，输入字母可以快速进行搜索。</li><li id="li1884619522181">双击某个文件可在DevEco Studio中将其打开。打开文件会默认下载文件到临时目录（%USER%\AppData\Local\Huawei\DevecoStudio{版本号}\device-file-browser\{设备名称}\{设备上的文件路径}），关闭文件后，临时文件将被删除。</li><li id="li137381281245">如果通过命令行方式上传文件到设备后，需要右键对应文件夹，选择<strong>Synchronize</strong>后才可以在Device File Browser窗口中显示该文件。</li></ol> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section128150542150">可访问目录<i class="anchor-icon anchor-icon-link" anchorid="section128150542150" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174379__p1878653111185">当前Device File Browser可访问的文件夹有四种类型：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory" target="_blank">应用沙箱目录</a>、一般暂存区目录、日志目录、设备公共目录。</p> <p id="ZH-CN_TOPIC_0000002510174379__p4778437122119"><span><img originheight="582" originwidth="706" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104824.25088419029894510065745745126758:50001231000000:2800:E9BB9D222460E8FBF6FFB890705720C5627D71C5C6AD6E35412AECC855A7D1BA.png" width="706" height="582"></span></p> </div> <div class="tiledSection"><h3 id="section4283334171614" class="firsth2">应用沙箱目录<i class="anchor-icon anchor-icon-link" anchorid="section4283334171614" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510174379__p1496019465183">此目录用于存放应用自身相关的数据、资源文件等，有两种访问方式。</p> <ul id="ZH-CN_TOPIC_0000002510174379__ul11147141833811"><li id="li914711811384"><strong>普通文件视图</strong><p id="ZH-CN_TOPIC_0000002510174379__p12246153474011">普通文件视图将按照设备的真实物理路径显示当前设备上的文件结构。</p> <p id="ZH-CN_TOPIC_0000002510174379__p52341173314"><span><img originheight="97" originwidth="174" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104824.83289833896932946547203230834849:50001231000000:2800:7CF4F78F496775B59D222EE86197091659AD77C1BF014C569893321A7A2BF61E.png" class="notEnlarge" width="174" height="97"></span></p> <p id="ZH-CN_TOPIC_0000002510174379__p533512532452">应用沙箱在设备上的物理路径位于/data/app/{el1，el2}/100/{base，database}/{packageName}路径下。</p> <p id="ZH-CN_TOPIC_0000002510174379__p1335195312459">在普通文件视图下，el1目录下的文件仅具备查看文件目录结构的权限，无法执行新建、删除、上传或下载操作；与el1相比，el2目录下的文件允许下载，但其他操作仍无权限执行。</p> </li></ul> <ul id="ZH-CN_TOPIC_0000002510174379__ul9445124433810"><li id="li1844513443384"><strong>应用沙箱视图</strong><p id="ZH-CN_TOPIC_0000002510174379__p3522182817415">应用沙箱视图会展示所有debug类型的应用，按照应用的沙箱文件路径显示应用的沙箱文件结构。</p> <p id="ZH-CN_TOPIC_0000002510174379__p73591221802"><span><img originheight="98" originwidth="176" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104824.09690547979707284142180362412170:50001231000000:2800:4E317693DC90F840BF2146F860B74DD6795AF1CD4442D0A331372A229DCC917B.png" class="notEnlarge" width="176" height="98"></span></p> <p id="ZH-CN_TOPIC_0000002510174379__p11849142010227">API 15以下的版本，当需要以沙箱视图查看应用的文件结构时，需在module.json5文件内配置ohos.permission.INTERNET开启网络权限，卸载并重新安装应用。</p> <p id="ZH-CN_TOPIC_0000002510174379__p1232832432215"><span><img originheight="491" originwidth="963" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104824.96546634589127047782187754556211:50001231000000:2800:8E5005FD601145A3DED43456DCFD00A7C50374504182DB29A4529BA7FE1EF3D8.png" width="920" height="469.07580477673935"></span></p> <p id="ZH-CN_TOPIC_0000002510174379__p1277816281119">对应于物理路径，沙箱路径为/data/storage/{el1，el2}/{base，database}。</p> <p id="ZH-CN_TOPIC_0000002510174379__p119564261100">在应用沙箱视图下，el1和el2目录下的文件均支持新建、删除、上传、下载操作。</p> </li></ul> </div> <div class="tiledSection"><h3 id="section1534313426162">一般暂存区目录<i class="anchor-icon anchor-icon-link" anchorid="section1534313426162" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510174379__p84958275194">一般暂存区目录位于/data/local/tmp/路径下，支持新建、删除、上传、下载操作，在DevEco Studio进行调试、测试等操作时，将在此目录下生成相关的文件。</p> <p id="ZH-CN_TOPIC_0000002510174379__p9576123535113"><span><img originheight="153" originwidth="635" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.87254661000198770781973464875608:50001231000000:2800:30EEDFA7D2EB13F0F30E006F9CD9461723751B1A711738AB324DCFDBE927A088.png" width="635" height="153"></span></p> </div> <div class="tiledSection"><h3 id="section58711585160">日志目录<i class="anchor-icon anchor-icon-link" anchorid="section58711585160" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510174379__p4105839171913">应用运行时的日志通过HiLog工具实时输出，此工具的输出缓存区一般为256K，超出大小的历史日志将会以压缩包的形式保存在/data/log/hilog/路径下。</p> <p id="ZH-CN_TOPIC_0000002510174379__p010514398192">当需要查看历史日志时，需要将此目录下的压缩包文件和数据字典压缩包文件hilog_dict.XXX.zip下载到本地计算机，然后使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hilog-tool" target="_blank">hilogtool工具</a>解析出对应的日志原文件。</p> <p id="ZH-CN_TOPIC_0000002510174379__p5600563214"><span><img originheight="269" originwidth="634" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.69921631791944885512942072466999:50001231000000:2800:1E2C4A675C207B6C8AB41DF5F05DF862B66408B5E0698E498ABD5A482C0E5350.png" width="634" height="269"></span></p> </div> <div class="tiledSection"><h3 id="section975311314172">公共目录<i class="anchor-icon anchor-icon-link" anchorid="section975311314172" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510174379__p163884891917">用户的桌面、文档、下载等公共目录位于/storage/media/100/local/files/Docs路径下，支持删除、上传、下载操作。</p> <p id="ZH-CN_TOPIC_0000002510174379__p194291141944"><span><img originheight="372" originwidth="637" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.69994595673808214287874011678610:50001231000000:2800:5FBC139D4D52B053ADFB42A27A0478379135CE0E074FA181CADB899656B05C98.png" width="637" height="372"></span></p> </div> <div class="tiledSection"><h2 id="section55291626141610">特殊目录<i class="anchor-icon anchor-icon-link" anchorid="section55291626141610" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174379__p1663115815196">设备上存在两个特殊的目录：faultlog目录和图库目录，这两个目录有下载权限，但没有查看权限，Device File Browser中无法显示这两个目录，但其下的文件可以通过hdc命令查看并导出。</p> </div> <div class="tiledSection"><h3 id="section9614161816173" class="firsth2">faultlog目录<i class="anchor-icon anchor-icon-link" anchorid="section9614161816173" tips="复制节点链接"></i></h3><div class="p" id="ZH-CN_TOPIC_0000002510174379__p844711116207">当应用崩溃时，会在/data/log/faultlog/faultlogger路径下生成相关的崩溃日志，可通过以下方式查询并下载日志。<ol id="ZH-CN_TOPIC_0000002510174379__ol48891750133014"><li id="li198891950193011">执行命令，查询此路径下的崩溃日志文件列表。<ul id="ZH-CN_TOPIC_0000002510174379__ul382717342617"><li id="li1582717341163">设备版本低于5.1.0.54时，执行以下命令。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" id="ZH-CN_TOPIC_0000002510174379__screen162544311363" data-highlighted="yes"><ol class="linenums"><li>hdc shell hidumper -s <span class="hljs-number">1201</span> -<span class="hljs-selector-tag">a</span> "-<span class="hljs-selector-tag">p</span> Faultlogger"</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174379__p15703155916169"><span><img originheight="281" originwidth="618" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.23359717476097329907617332406277:50001231000000:2800:704E05DB203DFBBE3C889965AAD75C0CA63E62308B79D02D75AD1A731BE2A3ED.png" width="618" height="281"></span></p> </li><li id="li7632939182">设备版本为5.1.0.54及以上时，崩溃日志文件名时间戳新增了毫秒级信息，执行以下命令。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" id="ZH-CN_TOPIC_0000002510174379__screen12450141717915" data-highlighted="yes"><ol class="linenums"><li>hdc shell hidumper -s <span class="hljs-number">1201</span> -<span class="hljs-selector-tag">a</span> "-<span class="hljs-selector-tag">p</span> Faultlogger %s -LogSuffixWithMs"</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174379__p331312264182"><span><img originheight="249" originwidth="620" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.71844135012153732094939094244185:50001231000000:2800:BF1CE6272D13DFE02E4AC93DB7181D816796CAC911CFF664DE6FE5F74884F9F8.png" width="620" height="249"></span></p> </li></ul> </li><li id="li1448562220329">执行命令，查看指定的崩溃日志文件的内容。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" id="ZH-CN_TOPIC_0000002510174379__screen12631193153718" data-highlighted="yes"><ol class="linenums"><li>hdc shell hidumper -s <span class="hljs-number">1201</span> -<span class="hljs-selector-tag">a</span> "-<span class="hljs-selector-tag">p</span> Faultlogger -f {filename}"</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174379__p75231219114319"><span><img originheight="384" originwidth="988" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.92064229010762579413263972523774:50001231000000:2800:AEA027FB6D0855EAD2EC187129833B6C7DA3D170923D04DD8497A0247D80F556.png" width="920" height="357.57085020242914"></span></p> </li><li id="li19912154411374">执行命令，将文件保存到本地计算机指定的路径下。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-lua" id="ZH-CN_TOPIC_0000002510174379__screen166123113813" data-highlighted="yes"><ol class="linenums"><li>hdc file recv /data/<span class="hljs-built_in">log</span>/faultlog/faultlogger/{filename} {<span class="hljs-built_in">path</span>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174379__p21361521124314"><span><img originheight="50" originwidth="866" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.14733816412667933813380210238990:50001231000000:2800:B949ED94EFFF9E241667EA9F8250CA7448D523F3C34B9963EEE8D252EC1EA18A.png" width="866" height="50"></span></p> </li></ol> </div> </div> <div class="tiledSection"><h3 id="section4574233170">图库目录<i class="anchor-icon anchor-icon-link" anchorid="section4574233170" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002510174379__p2016717014213">图库目录中保存了录屏工具、照相机等系统应用生成的图片、视频文件，可通过以下方式将文件下载到本地计算机。</p> <ol id="ZH-CN_TOPIC_0000002510174379__ol4990333195218"><li id="li999093316520">在图库中查看文件名及后缀，例如a.mp4。<p id="ZH-CN_TOPIC_0000002510174379__p26151506565"><span><img originheight="869" originwidth="454" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.85622176439669249743066295725003:50001231000000:2800:447249980D60252A0C6944731C08BDF75E084EE2CF1BF6EDAEE7370E3DBEC1E3.png" width="454" height="869"></span></p> <p id="ZH-CN_TOPIC_0000002510174379__p54682124810"></p> </li><li id="li8529175605518">查询文件路径，记录为{FilePath}。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" id="ZH-CN_TOPIC_0000002510174379__screen1585512875916" data-highlighted="yes"><ol class="linenums"><li>hdc shell mediatool query <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.mp4</span> -u</li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002510174379__ul15862326115419"><li id="li1786372685413">如果查询的结果中包含uri字段，则返回值第三行对应的文件路径不允许直接下载。<p id="ZH-CN_TOPIC_0000002510174379__p15358135719813"><span><img originheight="74" originwidth="487" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.76821723759027294255879023189552:50001231000000:2800:80E51350C5DF566D7CD3994CD744D441FDAE4D2273F730438ED9B0B96292E2DE.png" width="487" height="74"></span></p> <p id="ZH-CN_TOPIC_0000002510174379__p1027711933215">需要再执行如下命令，指定该uri，将文件复制到有下载权限的路径中（如/data/local/tmp）。</p> <div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" id="ZH-CN_TOPIC_0000002510174379__screen183010020299" data-highlighted="yes"><ol class="linenums"><li>hdc shell mediatool recv file://media/Photo/2/VID_1744944984_000/a.mp4 /data/local/tmp</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510174379__p1535176181915">命令返回值第二行即为文件路径{FilePath}。</p> <p id="ZH-CN_TOPIC_0000002510174379__p885211510209"><span><img originheight="46" originwidth="610" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.32047470970649196844843870287101:50001231000000:2800:B638BBFE067B422001A96DC0D549F389B4CC3572B02E0764BD5E956B945AA4F7.png" width="610" height="46"></span></p> </li></ul> <ul id="ZH-CN_TOPIC_0000002510174379__ul3790239301"><li id="li187915238302">如果查询结果不包含uri字段，则返回值第二行即为文件路径{FilePath}。<p id="ZH-CN_TOPIC_0000002510174379__p4234135205415"><span><img originheight="53" originwidth="581" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.99634076274240643765400613297477:50001231000000:2800:BADFE2301887C8BE69F5D6440C13FFAF9C41E431FABE073792F852D91B6CE0DF.png" width="581" height="53"></span></p> </li></ul> </li><li id="li20130151205820">指定上一个步骤中获取到的文件路径{FilePath}，下载文件到本地。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" id="ZH-CN_TOPIC_0000002510174379__screen74131449158" data-highlighted="yes"><ol class="linenums"><li>hdc file <span class="hljs-keyword">recv</span> <span class="hljs-string">{FilePath}</span> .\</li></ol></pre></div></div> </li></ol> </div> <div class="tiledSection"><h2 id="section48216711204">命令行方式访问应用沙箱<i class="anchor-icon anchor-icon-link" anchorid="section48216711204" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174379__p865511438203">可以通过命令行的方式访问debug应用的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#应用沙箱路径和真实物理路径的对应关系" target="_blank">沙箱目录</a>。</p> <ul id="ZH-CN_TOPIC_0000002510174379__ul1065524322014"><li id="li14655104315202">从API 15开始，支持通过hdc工具访问debug应用的沙箱目录，推荐开发者使用此种方式。更多关于命令行工具hdc的说明请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc" target="_blank">hdc工具使用指导</a>。<ol id="ZH-CN_TOPIC_0000002510174379__ol66553433208"><li id="li166561843192018"><div class="p" id="ZH-CN_TOPIC_0000002510174379__p1365613433209">在设备侧启动应用。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-wasm" id="ZH-CN_TOPIC_0000002510174379__screen465634316202" data-highlighted="yes"><ol class="linenums"><li>$ hdc shell aa <span class="hljs-keyword">start</span> -a {abilityName} -b {bundleName}</li><li><span class="hljs-keyword">start</span> ability successfully.</li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002510174379__ul165614314202"><li id="li14656134332010">abilityName：应用的ability名称。</li><li id="li10656164392013">bundleName：调试应用包名。</li></ul> </div> </li><li id="li116566431206"><div class="p" id="ZH-CN_TOPIC_0000002510174379__p1965634317209">通过命令访问沙箱文件目录，创建目录文件，删除指定目录下的文件。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002510174379__screen1265610437208" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell -b {bundleName} <span class="hljs-built_in">ls</span> -lZ -A <span class="hljs-string">"./data/storage/el2/base"</span>          // 查看应用沙箱下/el2/base目录文件（返回文件全部信息）</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell -b {bundleName} <span class="hljs-built_in">ls</span> -A <span class="hljs-string">"./data/storage/el2/base"</span>          // 查看应用沙箱下/el2/base目录文件（仅返回文件名）</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell -b {bundleName} <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"./data/storage/el2/base/test"</span>     // 在应用沙箱下/el2/base目录下创建<span class="hljs-built_in">test</span>目录</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell -b {bundleName} <span class="hljs-built_in">rm</span> -r <span class="hljs-string">"./data/storage/el2/base/test.txt"</span>  // 在应用沙箱下/el2/base目录下删除test.txt文件</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc shell -b {bundleName} <span class="hljs-built_in">rm</span> -r <span class="hljs-string">"./data/storage/el2/base/test"</span>      // 在应用沙箱下/el2/base目录下删除<span class="hljs-built_in">test</span>目录</span></li></ol></pre></div></div> </div> </li><li id="li15656184317209"><div class="p" id="ZH-CN_TOPIC_0000002510174379__p2656743102014">通过命令往应用沙箱目录中发送文件，从沙箱目录中下载文件到本地计算机。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002510174379__screen665694372015" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc file send -b {bundleName} <span class="hljs-string">"D:\test.txt"</span> <span class="hljs-string">"./data/storage/el2/base"</span>    // 发送文件到设备沙箱目录/el2/base</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">hdc file recv -b {bundleName} <span class="hljs-string">"./data/storage/el2/base/test.txt"</span> D:\  // 从设备沙箱目录/el2/base下载文件到本地计算机</span></li></ol></pre></div></div> </div> </li></ol> </li><li id="li156561143152010">API 15以下的版本，通过以下方式访问debug应用的沙箱目录。<ol id="ZH-CN_TOPIC_0000002510174379__ol865634332010"><li id="li1765634310205">在工程主模块下的module.json5文件下增加网络权限。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174379__screen365654319208" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-string">"requestPermissions"</span></span><span class="">: </span>[</li><li>  {<span class=""><span class="hljs-string">"name"</span></span><span class="">:  </span><span class=""><span class="hljs-string">"ohos.permission.INTERNET"</span></span>}</li><li>]</li></ol></pre></div></div> </li><li id="li106561843122018">在设备侧(hdc shell)启动应用的bftpd服务，并查询端口号是否启动成功。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510174379__screen166561743142012" data-highlighted="yes"><ol class="linenums"><li>$ <span class="hljs-variable">aa</span> <span class="hljs-variable">process</span> -<span class="hljs-variable">b</span> {<span class="hljs-variable">bundleName</span>} -<span class="hljs-variable">a</span> {<span class="hljs-variable">abilityName</span>} -<span class="hljs-variable">p</span> <span class="hljs-string">"/system/bin/bftpd -D -p {port}"</span>  -<span class="hljs-variable">S</span></li><li><span class="hljs-variable">start</span> <span class="hljs-variable">native</span> <span class="hljs-variable">process</span> <span class="hljs-variable">successfully</span>.</li><li>$ <span class="hljs-variable">ps</span> -<span class="hljs-variable">ef</span> | <span class="hljs-variable">grep</span> <span class="hljs-variable">bftpd</span></li><li><span class="hljs-number">20020143</span>     <span class="hljs-number">12254</span>   <span class="hljs-number">613</span> <span class="hljs-number">0</span> <span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">53</span> ?     <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-title class_">bftpd</span> -<span class="hljs-title class_">D</span> -<span class="hljs-title class_">p</span> <span class="hljs-number">9021</span>   <span class="hljs-comment">// 对应端口号的bftpd服务启动成功</span></li><li><span class="hljs-variable">shell</span>        <span class="hljs-number">13035</span> <span class="hljs-number">11901</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44</span> ?    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-title class_">grep</span> <span class="hljs-title class_">bftpd</span></li></ol></pre></div></div> <ul id="ZH-CN_TOPIC_0000002510174379__ul1365714312010"><li id="li965711431208">bundleName：调试应用包名。</li><li id="li7657843162018">abilityName：应用的ability名称。</li><li id="li3657243152014">port：可用端口号。</li></ul> </li><li id="li76579435205">通过命令访问沙箱文件目录，创建目录文件，删除指定目录下的文件。<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" id="ZH-CN_TOPIC_0000002510174379__screen11657124310204" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">ftpget -p {port} -P guest -u anonymous localhost -l /data/storage/el2/base           // 查看应用沙箱下/el2/base目录文件（返回文件全部信息）</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">ftpget -p {port} -P guest -u anonymous localhost -L /data/storage/el2/base           // 查看应用沙箱下/el2/base目录文件（仅返回文件名）</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">ftpget -p {port} -P guest -u anonymous localhost -M /data/storage/el2/base/test      // 在应用沙箱下/el2/base目录下创建<span class="hljs-built_in">test</span>目录</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">ftpget -p {port} -P guest -u anonymous localhost -d /data/storage/el2/base/test.txt  // 在应用沙箱下/el2/base目录下删除test.txt文件</span></li><li><span class="hljs-meta prompt_">$ </span><span class="language-bash">ftpget -p {port} -P guest -u anonymous localhost -D /data/storage/el2/base/test      // 在应用沙箱下/el2/base目录下删除<span class="hljs-built_in">test</span>目录（仅支持删除空目录）</span></li></ol></pre></div></div> </li><li id="li11657134302016">通过命令往应用沙箱目录中发送文件，从沙箱目录中下载文件到本地。(/data/local/tmp/作为中转目录)<div _ngcontent-auo-c106="" class="highlight-div"><div _ngcontent-auo-c106="" class="highlight-div-header"><div _ngcontent-auo-c106="" class="highlight-div-header-left"><div _ngcontent-auo-c106="" class="handle-button expand-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-auo-c106="" class="highlight-div-header-right"><div _ngcontent-auo-c106="" class="handle-button ai-button"></div><div _ngcontent-auo-c106="" class="handle-button line-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-auo-c106="" class="handle-button theme-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-auo-c106="" class="handle-button copy-button"><div _ngcontent-auo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-auo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" id="ZH-CN_TOPIC_0000002510174379__screen1665704316207" data-highlighted="yes"><ol class="linenums"><li>$ hdc file send test.txt <span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>test.txt    <span class="hljs-comment">// 先发送文件到设备data/local/tmp目录</span></li><li>$ ftpget <span class="hljs-operator">-</span>p {port} <span class="hljs-operator">-</span><span class="hljs-type">P</span> guest <span class="hljs-operator">-</span>u anonymous localhost <span class="hljs-operator">-</span>s <span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>test.txt <span class="hljs-regexp">/data/</span>storage<span class="hljs-regexp">/el2/</span>base<span class="hljs-regexp">/test.txt  /</span><span class="hljs-operator">/</span> 再推送到应用沙箱目录</li><li>$ ftpget <span class="hljs-operator">-</span>p {port} <span class="hljs-operator">-</span><span class="hljs-type">P</span> guest <span class="hljs-operator">-</span>u anonymous localhost <span class="hljs-operator">-</span>g <span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>test.txt <span class="hljs-regexp">/data/</span>storage<span class="hljs-regexp">/el2/</span>base<span class="hljs-regexp">/test.txt  /</span><span class="hljs-operator">/</span> 先下载到设备的data<span class="hljs-regexp">/local/</span>tmp目录</li><li>$ hdc file recv <span class="hljs-regexp">/data/</span>local<span class="hljs-regexp">/tmp/</span>test.txt test.txt  <span class="hljs-comment">// 再从设备中获取</span></li></ol></pre></div></div> </li></ol> </li></ul> </div> <div class="tiledSection"><h2 id="section175336130386">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section175336130386" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510174379__p5819752193">沙箱视图下，打开沙箱文件夹时报错：[Fail][E003001] Invalid bundle name。</p> <p id="ZH-CN_TOPIC_0000002510174379__p172735520428"><span><img originheight="89" originwidth="622" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104825.05361014650833489589086468846927:50001231000000:2800:CD2631DC0443856CA7284748924FE96FE4C649B4510FBB72C3D24EF50C122AAB.png" width="622" height="89"></span></p> <p id="ZH-CN_TOPIC_0000002510174379__p0602175904218">可能是以下原因：</p> <ol id="ZH-CN_TOPIC_0000002510174379__ol118893102015"><li id="li1089143182011">应用不是debug应用，无法查看沙箱文件。</li><li id="li5894342019">应用安装后，未运行过或重启了设备，导致应用沙箱暂未挂载。此场景下先手动运行一遍应用，然后在报错目录右键点击<strong>Synchronize</strong>即可打开目录。</li></ol> </div> </div> <div></div></div>