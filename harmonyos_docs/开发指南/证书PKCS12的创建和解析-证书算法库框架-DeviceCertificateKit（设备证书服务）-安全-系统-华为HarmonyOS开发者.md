<h1 _ngcontent-pbn-c119="" class="doc-title ng-star-inserted" title="证书PKCS12的创建和解析"> 证书PKCS12的创建和解析 </h1>

<div _ngcontent-pbn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>从API 18开始，支持解析PKCS12证书。</p>    <p>从API 21开始，支持创建PKCS12证书。</p>    <p>PKCS12是一种用于存储和传输用户私钥、证书及其相关证书链的标准格式。该格式通过密码保护，将多个密码学对象打包为一个加密的容器文件，支持存储私钥、公钥证书、证书颁发机构证书以及其他相关的密码学数据。PKCS12广泛应用于数字证书的安全存储、跨平台传输和证书备份场景，是实现证书管理和PKI应用的重要标准之一。</p>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>导入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert" target="_blank">证书算法库框架模块</a>。</p>       <div _ngcontent-pbn-c106="" class="highlight-div"><div _ngcontent-pbn-c106="" class="highlight-div-header"><div _ngcontent-pbn-c106="" class="highlight-div-header-left"><div _ngcontent-pbn-c106="" class="handle-button expand-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pbn-c106="" class="highlight-div-header-right"><div _ngcontent-pbn-c106="" class="handle-button ai-button"></div><div _ngcontent-pbn-c106="" class="handle-button line-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pbn-c106="" class="handle-button theme-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pbn-c106="" class="handle-button copy-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pbn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li></ol></pre></div></div></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert#certcreatepkcs1221" target="_blank">cert.createPkcs12</a>创建PKCS12文件。</p></li>      <li>       <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert#certparsepkcs1218" target="_blank">cert.parsePkcs12</a>解析PKCS12文件。</p></li>     </ol>     <ul>      <li>       <p>异步方法示例：</p>       <div _ngcontent-pbn-c106="" class="highlight-div"><div _ngcontent-pbn-c106="" class="highlight-div-header"><div _ngcontent-pbn-c106="" class="highlight-div-header-left"><div _ngcontent-pbn-c106="" class="handle-button expand-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pbn-c106="" class="highlight-div-header-right"><div _ngcontent-pbn-c106="" class="handle-button ai-button"></div><div _ngcontent-pbn-c106="" class="handle-button line-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pbn-c106="" class="handle-button theme-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pbn-c106="" class="handle-button copy-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pbn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">// string转Uint8Array。</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">stringToUint8Array</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Uint8Array</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    arr.<span class="hljs-title function_">push</span>(str.<span class="hljs-title function_">charCodeAt</span>(i));</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arr);</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createX509Cert</span>(<span class="hljs-params">certData: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;cert.<span class="hljs-property">X509Cert</span>&gt; {</li><li>  <span class="hljs-comment">// 证书二进制数据，需业务自行赋值。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">encodingBlob</span>: cert.<span class="hljs-property">EncodingBlob</span> = {</li><li>    <span class="hljs-attr">data</span>: <span class="hljs-title function_">stringToUint8Array</span>(certData),</li><li>    <span class="hljs-comment">// 根据encodingData的格式进行赋值，支持FORMAT_PEM和FORMAT_DER。</span></li><li>    <span class="hljs-attr">encodingFormat</span>: cert.<span class="hljs-property">EncodingFormat</span>.<span class="hljs-property">FORMAT_PEM</span></li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">x509Cert</span>: cert.<span class="hljs-property">X509Cert</span> = {} <span class="hljs-keyword">as</span> cert.<span class="hljs-property">X509Cert</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    x509Cert = <span class="hljs-keyword">await</span> cert.<span class="hljs-title function_">createX509Cert</span>(encodingBlob);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createX509Cert failed: errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> x509Cert;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> priKey = <span class="hljs-string">'-----BEGIN PRIVATE KEY-----\n'</span> +</li><li>  <span class="hljs-string">'MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC9kBV6Cqd3vSi5\n'</span> +</li><li>  <span class="hljs-string">'RuRAWjXEvsfD20ekCYyeJvnnSrHwnKodbF8VWFSv4sqYzMnxObpDLyQw0Uu08tbn\n'</span> +</li><li>  <span class="hljs-string">'EQvxv0lOwnWkZR+Oc3M9Ow1uhDkm3eFbY5858mAmtY7Sqzhd0LS9k8Q57FRqOrQm\n'</span> +</li><li>  <span class="hljs-string">'7ngHb0O+yjCIn/zmjyEuw51/cPDTM4h3P3di9nhbIg+UOMfkDbuSKRD7UvVV/JZi\n'</span> +</li><li>  <span class="hljs-string">'BklF5ZrjFYgzYnWKv7N7XkYMGkaOx8+tue24eK06SapQWDLRnRPCVePV6xtoCmbN\n'</span> +</li><li>  <span class="hljs-string">'A3ib/Uvr0qvRwPDCzGGOW9JvQdrI6Z/GD9nt5hqHB15iJVNxkDQtugv14qeDsFPS\n'</span> +</li><li>  <span class="hljs-string">'IU8CtkCbAgMBAAECggEBAKbMmMlJhLCM5r+ZDJE/j55ujRLe6XwC1xP2keEeTdK9\n'</span> +</li><li>  <span class="hljs-string">'18aKLGR41BPsSH8JfAxh0m75lSvLjoVLRSQPUOZIfjXqUF/2hzzug5F2W8xKVovH\n'</span> +</li><li>  <span class="hljs-string">'o1uqHlp71nVZPrJK7Q9H7TH/SyP4uxK6UvkKzt0j34WLHgeqV3t8qCMhB34zIAWG\n'</span> +</li><li>  <span class="hljs-string">'BcAuKJNRZGvMvjK99OSOh0SyvGQ5Yb5vyj1/znx3gM4z4deYXxDSyCO0m5I16jmM\n'</span> +</li><li>  <span class="hljs-string">'gBEUG0UDUp8Xr2xs/EkhhWYRT1bkDlYZ9IuCbH/vB1YJJFdaO2tDivDUF6IObvNt\n'</span> +</li><li>  <span class="hljs-string">'GaVuLlA/rSOJmJFBetrm7n+O2vNJxvoQmBYDKm3+qYkCgYEA9p5C1ZY5XfwwOcqi\n'</span> +</li><li>  <span class="hljs-string">'KQ+Asd2NWLG2blhsII5wB8uPhFapjV0S9xTabScUD35AfxHgctafpZeQk4x5niRP\n'</span> +</li><li>  <span class="hljs-string">'BHq7hpitaDdYs6A/jhZ7fdVYKb1KRTDt1LXmcg0qVmi/ANNvjhqjvyZM+pEj8yxM\n'</span> +</li><li>  <span class="hljs-string">'aOl4isbBfUbzSsEbda3LcHi6+w8CgYEAxMYtkl3gbXJcgbAEdW+nMMQGoFDLkgyu\n'</span> +</li><li>  <span class="hljs-string">'n0ZYuRRrWLnnUzZUyqNBwQUaZpwxHaAqi0OAEGSRSZBKRHz9IA2iP9YzcaJ0WtpB\n'</span> +</li><li>  <span class="hljs-string">'CPqwBZjrCaVEpHldo2pIdujysXgiXRUiE+VR9ViDmftoVbdL6kttGS08jBBDVIV/\n'</span> +</li><li>  <span class="hljs-string">'uQgC/q29UbUCgYAJHirMaMRwNB24VUSPjhItAUrzh4Z+J+i/f2Sm9SC2PNoB7vn/\n'</span> +</li><li>  <span class="hljs-string">'hpbYyEQWmo1Z5VhOBp9aaPMgcWYhsaf2O29pd4WZv8oYwgj3gN9J9LRQvr3bNwbk\n'</span> +</li><li>  <span class="hljs-string">'AWGmv9Pb4/2D001hjJyXOZxI+0q/99hPXKpnPxfyQMhH8EHKpQVLgDsxgwKBgEiH\n'</span> +</li><li>  <span class="hljs-string">'+DJUci5Fkj2ngO08u7bo+rxLK85o6FEDYB7QnQT2eYMdqsGKzej1FZcvCZeu+x+c\n'</span> +</li><li>  <span class="hljs-string">'QO9J8pfYHNgD7lXLULwRG6NOS29VtdU2en2FsVU72wJ5Tf+3ZICYOyUZcCk5afdF\n'</span> +</li><li>  <span class="hljs-string">'dyFlgBTZK8s0pkH1jYBTQVcrg3X7Q2oTvu7bYcZlAoGAUwQI11mMR8oqfgWMoI/1\n'</span> +</li><li>  <span class="hljs-string">'smOoq9qSMlutuWBjoPkbtJEGHEXAvjW1kgdBlPjUCwn6j+oIDLYu8DbfQRdiFQeP\n'</span> +</li><li>  <span class="hljs-string">'rVCbbgOgayVpr+8Tv2DqB370GwBpOpuq0yiiN+c39Y0u03Yfve3icyl8+lN1t4h6\n'</span> +</li><li>  <span class="hljs-string">'a20rj9HG4sb8tUIHPBv0dgY=\n'</span> +</li><li>  <span class="hljs-string">'-----END PRIVATE KEY-----\n'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> othercerts = <span class="hljs-string">'-----BEGIN CERTIFICATE-----\n'</span> +</li><li>  <span class="hljs-string">'MIIDZTCCAk0CFAoqA7Irtoo7/3+sfOHy0s91pKkiMA0GCSqGSIb3DQEBCwUAMG8x\n'</span> +</li><li>  <span class="hljs-string">'CzAJBgNVBAYTAkVOMQ0wCwYDVQQIDARURVNUMQ0wCwYDVQQHDAR4aWFuMQ8wDQYD\n'</span> +</li><li>  <span class="hljs-string">'VQQKDAZodWF3ZWkxDTALBgNVBAsMBHhpYW4xDTALBgNVBAMMBHhpYW4xEzARBgkq\n'</span> +</li><li>  <span class="hljs-string">'hkiG9w0BCQEWBHhpYW4wHhcNMjUwODE0MTE1NDM0WhcNMjYwODE0MTE1NDM0WjBv\n'</span> +</li><li>  <span class="hljs-string">'MQswCQYDVQQGEwJFTjENMAsGA1UECAwEVEVTVDENMAsGA1UEBwwEeGlhbjEPMA0G\n'</span> +</li><li>  <span class="hljs-string">'A1UECgwGaHVhd2VpMQ0wCwYDVQQLDAR4aWFuMQ0wCwYDVQQDDAR4aWFuMRMwEQYJ\n'</span> +</li><li>  <span class="hljs-string">'KoZIhvcNAQkBFgR4aWFuMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA\n'</span> +</li><li>  <span class="hljs-string">'wk4aByV5nOw+zIh/1agaN7rQyk+NFuXlYSwINrONRZt8zePSxhxz6gMq0XAb8ld0\n'</span> +</li><li>  <span class="hljs-string">'DFC5onGQEI4ED8iP3v7C7yHqIAybTmIy22RWWk8c6h9S40Azp/YHujTTRs2XMe9G\n'</span> +</li><li>  <span class="hljs-string">'A/iKed9DwLclbv6+m+WPmIvgFFAJlebtFI6X0E/zBxs/TknR8tJ2uk2G/CGCBlo5\n'</span> +</li><li>  <span class="hljs-string">'bbSz5RIPfEmz93rR7prMxQLOsvfdNewNlhe82jxMKfzGEPXYXUj+Xwp8ep+aaUTr\n'</span> +</li><li>  <span class="hljs-string">'Kb6Thvx7+uOBxgMM1crREepTKJM/4bsOpb2yIXXcOqclUPAZBvtzIjgs/DdKtCZo\n'</span> +</li><li>  <span class="hljs-string">'0Jzr3gUbDJeE2xd+DcADxQIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQA5RyDOMYJV\n'</span> +</li><li>  <span class="hljs-string">'AsdBUihPvnnakKfAY9CYN9I1tR0b9DaboeL+bONeIKzXyFdDrAj6eZLKZLUblFlH\n'</span> +</li><li>  <span class="hljs-string">'BZnbP4lNwfYjmNgp4j7cqSIFVwd2Y+6T29pK6T6XYRsFGOaSp7wFzXplfbP8Ou1b\n'</span> +</li><li>  <span class="hljs-string">'o2zTZWWWHbiExuXot4RfQkgH3Zhk5zjJGWvaOksvEhJUaufkWAXbRY2KHmH64dDB\n'</span> +</li><li>  <span class="hljs-string">'Bgp50CPObTuc2a+5PAi7W5nj1se2OqKvepoeYLl8pfF/GFRqrvcII9kCm0oyMqBx\n'</span> +</li><li>  <span class="hljs-string">'25R7aCNtSnENZnvRBspdYcX8zu6fR1qf0JmpLqLw5pPxJ2Puvq7g+33GWJ3Gq45f\n'</span> +</li><li>  <span class="hljs-string">'ZcLXS+9LpW3a\n'</span> +</li><li>  <span class="hljs-string">'-----END CERTIFICATE-----\n'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> certData = <span class="hljs-string">'-----BEGIN CERTIFICATE-----\n'</span> +</li><li>  <span class="hljs-string">'MIIDZzCCAk8CFCwQ5cxuFI+fsf/2fkG4gy8UT1gmMA0GCSqGSIb3DQEBCwUAMG8x\n'</span> +</li><li>  <span class="hljs-string">'CzAJBgNVBAYTAkVOMQ0wCwYDVQQIDARURVNUMQ0wCwYDVQQHDAR4aWFuMQ8wDQYD\n'</span> +</li><li>  <span class="hljs-string">'VQQKDAZodWF3ZWkxDTALBgNVBAsMBHhpYW4xDTALBgNVBAMMBHhpYW4xEzARBgkq\n'</span> +</li><li>  <span class="hljs-string">'hkiG9w0BCQEWBHhpYW4wHhcNMjUwODE0MTE1NTQ1WhcNMjYwODE0MTE1NTQ1WjBx\n'</span> +</li><li>  <span class="hljs-string">'MQswCQYDVQQGEwJHVDEPMA0GA1UECAwGaHVhd2VpMQ0wCwYDVQQHDAR4aWFuMQ8w\n'</span> +</li><li>  <span class="hljs-string">'DQYDVQQKDAZodWF3ZWkxDTALBgNVBAsMBHhpYW4xDTALBgNVBAMMBHhpYW4xEzAR\n'</span> +</li><li>  <span class="hljs-string">'BgkqhkiG9w0BCQEWBHhpYW4wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB\n'</span> +</li><li>  <span class="hljs-string">'AQC9kBV6Cqd3vSi5RuRAWjXEvsfD20ekCYyeJvnnSrHwnKodbF8VWFSv4sqYzMnx\n'</span> +</li><li>  <span class="hljs-string">'ObpDLyQw0Uu08tbnEQvxv0lOwnWkZR+Oc3M9Ow1uhDkm3eFbY5858mAmtY7Sqzhd\n'</span> +</li><li>  <span class="hljs-string">'0LS9k8Q57FRqOrQm7ngHb0O+yjCIn/zmjyEuw51/cPDTM4h3P3di9nhbIg+UOMfk\n'</span> +</li><li>  <span class="hljs-string">'DbuSKRD7UvVV/JZiBklF5ZrjFYgzYnWKv7N7XkYMGkaOx8+tue24eK06SapQWDLR\n'</span> +</li><li>  <span class="hljs-string">'nRPCVePV6xtoCmbNA3ib/Uvr0qvRwPDCzGGOW9JvQdrI6Z/GD9nt5hqHB15iJVNx\n'</span> +</li><li>  <span class="hljs-string">'kDQtugv14qeDsFPSIU8CtkCbAgMBAAEwDQYJKoZIhvcNAQELBQADggEBALuqlvql\n'</span> +</li><li>  <span class="hljs-string">'q/5SVghmtdzVNlsif9JofSgJhmww3r8HblZ7zD7ALfR6JcxxbBJYdBIn6mf2eNx/\n'</span> +</li><li>  <span class="hljs-string">'kTzwYs94D12PhyAP63AcDxS/4Sh7QhmnNIx2SGi/rbFdPm8cmkaFfwr5gQP+ouNB\n'</span> +</li><li>  <span class="hljs-string">'1e7vVyNpSjr4F8YcfjOHPofoCdWaOaBPrM760h711y/BTVMjuYkdzn0D1bHZIBc+\n'</span> +</li><li>  <span class="hljs-string">'tljIMWXKsTwR6wCIpnFRJbEATTBwV843Q071d62jYueLgdS2wT39Syqb3ao3aHAS\n'</span> +</li><li>  <span class="hljs-string">'ZI8k9GgNNKD4qBAZUbQVCs6diTBbeUMaqJ2N+tcQfmGfnNZK+/olEF6Ue/H0LZzY\n'</span> +</li><li>  <span class="hljs-string">'nZSOvPxc0c2O34k=\n'</span> +</li><li>  <span class="hljs-string">'-----END CERTIFICATE-----\n'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">doTestCreatePkcs12</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> caCert = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createX509Cert</span>(othercerts);</li><li>  <span class="hljs-keyword">const</span> x509Cert = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createX509Cert</span>(certData);</li><li>
</li><li>  <span class="hljs-keyword">let</span> data : cert.<span class="hljs-property">Pkcs12Data</span> = {</li><li>    privateKey : priKey,</li><li>    cert : x509Cert,</li><li>    otherCerts : [caCert]</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> keyParam : cert.<span class="hljs-property">PbesParams</span> = {</li><li>    saltLen : <span class="hljs-number">16</span>,</li><li>    iterations : <span class="hljs-number">2048</span>,</li><li>    encryptionAlgorithm : cert.<span class="hljs-property">PbesEncryptionAlgorithm</span>.<span class="hljs-property">AES_192_CBC</span></li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> certParam : cert.<span class="hljs-property">PbesParams</span> = {</li><li>    saltLen : <span class="hljs-number">16</span>,</li><li>    iterations : <span class="hljs-number">2048</span>,</li><li>    encryptionAlgorithm : cert.<span class="hljs-property">PbesEncryptionAlgorithm</span>.<span class="hljs-property">AES_256_CBC</span></li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> config : cert.<span class="hljs-property">Pkcs12CreationConfig</span> = {</li><li>    password : <span class="hljs-string">"123456"</span>,</li><li>    keyEncParams : keyParam,</li><li>    encryptCert : <span class="hljs-literal">true</span>,</li><li>    certEncParams : certParam,</li><li>    macSaltLen : <span class="hljs-number">16</span>,</li><li>    macIterations : <span class="hljs-number">2048</span>,</li><li>    macDigestAlgorithm : cert.<span class="hljs-property">Pkcs12MacDigestAlgorithm</span>.<span class="hljs-property">SHA384</span></li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> p12 = <span class="hljs-keyword">await</span> cert.<span class="hljs-title function_">createPkcs12</span>(data, config);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"createPkcs12 succeed p12 = "</span> + p12);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">out</span>: cert.<span class="hljs-property">Pkcs12Data</span> = <span class="hljs-keyword">await</span> cert.<span class="hljs-title function_">parsePkcs12</span>(p12, <span class="hljs-string">"123456"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"parsePKCS12 succeed."</span>);</li><li>    <span class="hljs-keyword">if</span> (out.<span class="hljs-property">privateKey</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"privateKey:"</span> + out.<span class="hljs-property">privateKey</span>.<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (out.<span class="hljs-property">cert</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"cert:"</span> + out.<span class="hljs-property">cert</span>.<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (out.<span class="hljs-property">otherCerts</span> &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(out.<span class="hljs-property">otherCerts</span>)) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"otherCerts counts:"</span>, out.<span class="hljs-property">otherCerts</span>.<span class="hljs-property">length</span>);</li><li>      out.<span class="hljs-property">otherCerts</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cert, idx</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`otherCerts[<span class="hljs-subst">${idx}</span>]:\n<span class="hljs-subst">${cert.toString()}</span>`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"otherCerts is empty or not an array."</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`doTestCreatePkcs12 failed: errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>同步方法示例：</p>       <div _ngcontent-pbn-c106="" class="highlight-div"><div _ngcontent-pbn-c106="" class="highlight-div-header"><div _ngcontent-pbn-c106="" class="highlight-div-header-left"><div _ngcontent-pbn-c106="" class="handle-button expand-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pbn-c106="" class="highlight-div-header-right"><div _ngcontent-pbn-c106="" class="handle-button ai-button"></div><div _ngcontent-pbn-c106="" class="handle-button line-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pbn-c106="" class="handle-button theme-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pbn-c106="" class="handle-button copy-button"><div _ngcontent-pbn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pbn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">// string转Uint8Array。</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">stringToUint8Array</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Uint8Array</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    arr.<span class="hljs-title function_">push</span>(str.<span class="hljs-title function_">charCodeAt</span>(i));</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arr);</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createX509Cert</span>(<span class="hljs-params">certData: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;cert.<span class="hljs-property">X509Cert</span>&gt; {</li><li>  <span class="hljs-comment">// 证书二进制数据，需业务自行赋值。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">encodingBlob</span>: cert.<span class="hljs-property">EncodingBlob</span> = {</li><li>    <span class="hljs-attr">data</span>: <span class="hljs-title function_">stringToUint8Array</span>(certData),</li><li>    <span class="hljs-comment">// 根据encodingData的格式进行赋值，支持FORMAT_PEM和FORMAT_DER。</span></li><li>    <span class="hljs-attr">encodingFormat</span>: cert.<span class="hljs-property">EncodingFormat</span>.<span class="hljs-property">FORMAT_PEM</span></li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">x509Cert</span>: cert.<span class="hljs-property">X509Cert</span> = {} <span class="hljs-keyword">as</span> cert.<span class="hljs-property">X509Cert</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    x509Cert = <span class="hljs-keyword">await</span> cert.<span class="hljs-title function_">createX509Cert</span>(encodingBlob);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`doTestCreatePkcs12 failed: errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> x509Cert;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> priKey = <span class="hljs-string">'-----BEGIN PRIVATE KEY-----\n'</span> +</li><li>  <span class="hljs-string">'MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC9kBV6Cqd3vSi5\n'</span> +</li><li>  <span class="hljs-string">'RuRAWjXEvsfD20ekCYyeJvnnSrHwnKodbF8VWFSv4sqYzMnxObpDLyQw0Uu08tbn\n'</span> +</li><li>  <span class="hljs-string">'EQvxv0lOwnWkZR+Oc3M9Ow1uhDkm3eFbY5858mAmtY7Sqzhd0LS9k8Q57FRqOrQm\n'</span> +</li><li>  <span class="hljs-string">'7ngHb0O+yjCIn/zmjyEuw51/cPDTM4h3P3di9nhbIg+UOMfkDbuSKRD7UvVV/JZi\n'</span> +</li><li>  <span class="hljs-string">'BklF5ZrjFYgzYnWKv7N7XkYMGkaOx8+tue24eK06SapQWDLRnRPCVePV6xtoCmbN\n'</span> +</li><li>  <span class="hljs-string">'A3ib/Uvr0qvRwPDCzGGOW9JvQdrI6Z/GD9nt5hqHB15iJVNxkDQtugv14qeDsFPS\n'</span> +</li><li>  <span class="hljs-string">'IU8CtkCbAgMBAAECggEBAKbMmMlJhLCM5r+ZDJE/j55ujRLe6XwC1xP2keEeTdK9\n'</span> +</li><li>  <span class="hljs-string">'18aKLGR41BPsSH8JfAxh0m75lSvLjoVLRSQPUOZIfjXqUF/2hzzug5F2W8xKVovH\n'</span> +</li><li>  <span class="hljs-string">'o1uqHlp71nVZPrJK7Q9H7TH/SyP4uxK6UvkKzt0j34WLHgeqV3t8qCMhB34zIAWG\n'</span> +</li><li>  <span class="hljs-string">'BcAuKJNRZGvMvjK99OSOh0SyvGQ5Yb5vyj1/znx3gM4z4deYXxDSyCO0m5I16jmM\n'</span> +</li><li>  <span class="hljs-string">'gBEUG0UDUp8Xr2xs/EkhhWYRT1bkDlYZ9IuCbH/vB1YJJFdaO2tDivDUF6IObvNt\n'</span> +</li><li>  <span class="hljs-string">'GaVuLlA/rSOJmJFBetrm7n+O2vNJxvoQmBYDKm3+qYkCgYEA9p5C1ZY5XfwwOcqi\n'</span> +</li><li>  <span class="hljs-string">'KQ+Asd2NWLG2blhsII5wB8uPhFapjV0S9xTabScUD35AfxHgctafpZeQk4x5niRP\n'</span> +</li><li>  <span class="hljs-string">'BHq7hpitaDdYs6A/jhZ7fdVYKb1KRTDt1LXmcg0qVmi/ANNvjhqjvyZM+pEj8yxM\n'</span> +</li><li>  <span class="hljs-string">'aOl4isbBfUbzSsEbda3LcHi6+w8CgYEAxMYtkl3gbXJcgbAEdW+nMMQGoFDLkgyu\n'</span> +</li><li>  <span class="hljs-string">'n0ZYuRRrWLnnUzZUyqNBwQUaZpwxHaAqi0OAEGSRSZBKRHz9IA2iP9YzcaJ0WtpB\n'</span> +</li><li>  <span class="hljs-string">'CPqwBZjrCaVEpHldo2pIdujysXgiXRUiE+VR9ViDmftoVbdL6kttGS08jBBDVIV/\n'</span> +</li><li>  <span class="hljs-string">'uQgC/q29UbUCgYAJHirMaMRwNB24VUSPjhItAUrzh4Z+J+i/f2Sm9SC2PNoB7vn/\n'</span> +</li><li>  <span class="hljs-string">'hpbYyEQWmo1Z5VhOBp9aaPMgcWYhsaf2O29pd4WZv8oYwgj3gN9J9LRQvr3bNwbk\n'</span> +</li><li>  <span class="hljs-string">'AWGmv9Pb4/2D001hjJyXOZxI+0q/99hPXKpnPxfyQMhH8EHKpQVLgDsxgwKBgEiH\n'</span> +</li><li>  <span class="hljs-string">'+DJUci5Fkj2ngO08u7bo+rxLK85o6FEDYB7QnQT2eYMdqsGKzej1FZcvCZeu+x+c\n'</span> +</li><li>  <span class="hljs-string">'QO9J8pfYHNgD7lXLULwRG6NOS29VtdU2en2FsVU72wJ5Tf+3ZICYOyUZcCk5afdF\n'</span> +</li><li>  <span class="hljs-string">'dyFlgBTZK8s0pkH1jYBTQVcrg3X7Q2oTvu7bYcZlAoGAUwQI11mMR8oqfgWMoI/1\n'</span> +</li><li>  <span class="hljs-string">'smOoq9qSMlutuWBjoPkbtJEGHEXAvjW1kgdBlPjUCwn6j+oIDLYu8DbfQRdiFQeP\n'</span> +</li><li>  <span class="hljs-string">'rVCbbgOgayVpr+8Tv2DqB370GwBpOpuq0yiiN+c39Y0u03Yfve3icyl8+lN1t4h6\n'</span> +</li><li>  <span class="hljs-string">'a20rj9HG4sb8tUIHPBv0dgY=\n'</span> +</li><li>  <span class="hljs-string">'-----END PRIVATE KEY-----\n'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> othercerts = <span class="hljs-string">'-----BEGIN CERTIFICATE-----\n'</span> +</li><li>  <span class="hljs-string">'MIIDZTCCAk0CFAoqA7Irtoo7/3+sfOHy0s91pKkiMA0GCSqGSIb3DQEBCwUAMG8x\n'</span> +</li><li>  <span class="hljs-string">'CzAJBgNVBAYTAkVOMQ0wCwYDVQQIDARURVNUMQ0wCwYDVQQHDAR4aWFuMQ8wDQYD\n'</span> +</li><li>  <span class="hljs-string">'VQQKDAZodWF3ZWkxDTALBgNVBAsMBHhpYW4xDTALBgNVBAMMBHhpYW4xEzARBgkq\n'</span> +</li><li>  <span class="hljs-string">'hkiG9w0BCQEWBHhpYW4wHhcNMjUwODE0MTE1NDM0WhcNMjYwODE0MTE1NDM0WjBv\n'</span> +</li><li>  <span class="hljs-string">'MQswCQYDVQQGEwJFTjENMAsGA1UECAwEVEVTVDENMAsGA1UEBwwEeGlhbjEPMA0G\n'</span> +</li><li>  <span class="hljs-string">'A1UECgwGaHVhd2VpMQ0wCwYDVQQLDAR4aWFuMQ0wCwYDVQQDDAR4aWFuMRMwEQYJ\n'</span> +</li><li>  <span class="hljs-string">'KoZIhvcNAQkBFgR4aWFuMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA\n'</span> +</li><li>  <span class="hljs-string">'wk4aByV5nOw+zIh/1agaN7rQyk+NFuXlYSwINrONRZt8zePSxhxz6gMq0XAb8ld0\n'</span> +</li><li>  <span class="hljs-string">'DFC5onGQEI4ED8iP3v7C7yHqIAybTmIy22RWWk8c6h9S40Azp/YHujTTRs2XMe9G\n'</span> +</li><li>  <span class="hljs-string">'A/iKed9DwLclbv6+m+WPmIvgFFAJlebtFI6X0E/zBxs/TknR8tJ2uk2G/CGCBlo5\n'</span> +</li><li>  <span class="hljs-string">'bbSz5RIPfEmz93rR7prMxQLOsvfdNewNlhe82jxMKfzGEPXYXUj+Xwp8ep+aaUTr\n'</span> +</li><li>  <span class="hljs-string">'Kb6Thvx7+uOBxgMM1crREepTKJM/4bsOpb2yIXXcOqclUPAZBvtzIjgs/DdKtCZo\n'</span> +</li><li>  <span class="hljs-string">'0Jzr3gUbDJeE2xd+DcADxQIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQA5RyDOMYJV\n'</span> +</li><li>  <span class="hljs-string">'AsdBUihPvnnakKfAY9CYN9I1tR0b9DaboeL+bONeIKzXyFdDrAj6eZLKZLUblFlH\n'</span> +</li><li>  <span class="hljs-string">'BZnbP4lNwfYjmNgp4j7cqSIFVwd2Y+6T29pK6T6XYRsFGOaSp7wFzXplfbP8Ou1b\n'</span> +</li><li>  <span class="hljs-string">'o2zTZWWWHbiExuXot4RfQkgH3Zhk5zjJGWvaOksvEhJUaufkWAXbRY2KHmH64dDB\n'</span> +</li><li>  <span class="hljs-string">'Bgp50CPObTuc2a+5PAi7W5nj1se2OqKvepoeYLl8pfF/GFRqrvcII9kCm0oyMqBx\n'</span> +</li><li>  <span class="hljs-string">'25R7aCNtSnENZnvRBspdYcX8zu6fR1qf0JmpLqLw5pPxJ2Puvq7g+33GWJ3Gq45f\n'</span> +</li><li>  <span class="hljs-string">'ZcLXS+9LpW3a\n'</span> +</li><li>  <span class="hljs-string">'-----END CERTIFICATE-----\n'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> certData = <span class="hljs-string">'-----BEGIN CERTIFICATE-----\n'</span> +</li><li>  <span class="hljs-string">'MIIDZzCCAk8CFCwQ5cxuFI+fsf/2fkG4gy8UT1gmMA0GCSqGSIb3DQEBCwUAMG8x\n'</span> +</li><li>  <span class="hljs-string">'CzAJBgNVBAYTAkVOMQ0wCwYDVQQIDARURVNUMQ0wCwYDVQQHDAR4aWFuMQ8wDQYD\n'</span> +</li><li>  <span class="hljs-string">'VQQKDAZodWF3ZWkxDTALBgNVBAsMBHhpYW4xDTALBgNVBAMMBHhpYW4xEzARBgkq\n'</span> +</li><li>  <span class="hljs-string">'hkiG9w0BCQEWBHhpYW4wHhcNMjUwODE0MTE1NTQ1WhcNMjYwODE0MTE1NTQ1WjBx\n'</span> +</li><li>  <span class="hljs-string">'MQswCQYDVQQGEwJHVDEPMA0GA1UECAwGaHVhd2VpMQ0wCwYDVQQHDAR4aWFuMQ8w\n'</span> +</li><li>  <span class="hljs-string">'DQYDVQQKDAZodWF3ZWkxDTALBgNVBAsMBHhpYW4xDTALBgNVBAMMBHhpYW4xEzAR\n'</span> +</li><li>  <span class="hljs-string">'BgkqhkiG9w0BCQEWBHhpYW4wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB\n'</span> +</li><li>  <span class="hljs-string">'AQC9kBV6Cqd3vSi5RuRAWjXEvsfD20ekCYyeJvnnSrHwnKodbF8VWFSv4sqYzMnx\n'</span> +</li><li>  <span class="hljs-string">'ObpDLyQw0Uu08tbnEQvxv0lOwnWkZR+Oc3M9Ow1uhDkm3eFbY5858mAmtY7Sqzhd\n'</span> +</li><li>  <span class="hljs-string">'0LS9k8Q57FRqOrQm7ngHb0O+yjCIn/zmjyEuw51/cPDTM4h3P3di9nhbIg+UOMfk\n'</span> +</li><li>  <span class="hljs-string">'DbuSKRD7UvVV/JZiBklF5ZrjFYgzYnWKv7N7XkYMGkaOx8+tue24eK06SapQWDLR\n'</span> +</li><li>  <span class="hljs-string">'nRPCVePV6xtoCmbNA3ib/Uvr0qvRwPDCzGGOW9JvQdrI6Z/GD9nt5hqHB15iJVNx\n'</span> +</li><li>  <span class="hljs-string">'kDQtugv14qeDsFPSIU8CtkCbAgMBAAEwDQYJKoZIhvcNAQELBQADggEBALuqlvql\n'</span> +</li><li>  <span class="hljs-string">'q/5SVghmtdzVNlsif9JofSgJhmww3r8HblZ7zD7ALfR6JcxxbBJYdBIn6mf2eNx/\n'</span> +</li><li>  <span class="hljs-string">'kTzwYs94D12PhyAP63AcDxS/4Sh7QhmnNIx2SGi/rbFdPm8cmkaFfwr5gQP+ouNB\n'</span> +</li><li>  <span class="hljs-string">'1e7vVyNpSjr4F8YcfjOHPofoCdWaOaBPrM760h711y/BTVMjuYkdzn0D1bHZIBc+\n'</span> +</li><li>  <span class="hljs-string">'tljIMWXKsTwR6wCIpnFRJbEATTBwV843Q071d62jYueLgdS2wT39Syqb3ao3aHAS\n'</span> +</li><li>  <span class="hljs-string">'ZI8k9GgNNKD4qBAZUbQVCs6diTBbeUMaqJ2N+tcQfmGfnNZK+/olEF6Ue/H0LZzY\n'</span> +</li><li>  <span class="hljs-string">'nZSOvPxc0c2O34k=\n'</span> +</li><li>  <span class="hljs-string">'-----END CERTIFICATE-----\n'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">doTestCreatePkcs12Sync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> caCert = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createX509Cert</span>(othercerts);</li><li>  <span class="hljs-keyword">const</span> x509Cert = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createX509Cert</span>(certData);</li><li>
</li><li>  <span class="hljs-keyword">let</span> data : cert.<span class="hljs-property">Pkcs12Data</span> = {</li><li>    privateKey : priKey,</li><li>    cert : x509Cert,</li><li>    otherCerts : [caCert]</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> keyParam : cert.<span class="hljs-property">PbesParams</span> = {</li><li>    saltLen : <span class="hljs-number">16</span>,</li><li>    iterations : <span class="hljs-number">2048</span>,</li><li>    encryptionAlgorithm : cert.<span class="hljs-property">PbesEncryptionAlgorithm</span>.<span class="hljs-property">AES_192_CBC</span></li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> certParam : cert.<span class="hljs-property">PbesParams</span> = {</li><li>    saltLen : <span class="hljs-number">16</span>,</li><li>    iterations : <span class="hljs-number">2048</span>,</li><li>    encryptionAlgorithm : cert.<span class="hljs-property">PbesEncryptionAlgorithm</span>.<span class="hljs-property">AES_256_CBC</span></li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> config : cert.<span class="hljs-property">Pkcs12CreationConfig</span> = {</li><li>    password : <span class="hljs-string">"123456"</span>,</li><li>    keyEncParams : keyParam,</li><li>    encryptCert : <span class="hljs-literal">true</span>,</li><li>    certEncParams : certParam,</li><li>    macSaltLen : <span class="hljs-number">16</span>,</li><li>    macIterations : <span class="hljs-number">2048</span>,</li><li>    macDigestAlgorithm : cert.<span class="hljs-property">Pkcs12MacDigestAlgorithm</span>.<span class="hljs-property">SHA384</span></li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> p12 = cert.<span class="hljs-title function_">createPkcs12Sync</span>(data, config);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"createPkcs12Sync succeed p12 = "</span> + p12);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">conf</span>: cert.<span class="hljs-property">Pkcs12ParsingConfig</span> = {</li><li>      <span class="hljs-attr">password</span>: <span class="hljs-string">"123456"</span>,</li><li>      <span class="hljs-attr">needsCert</span>: <span class="hljs-literal">true</span>,</li><li>      <span class="hljs-attr">needsPrivateKey</span>: <span class="hljs-literal">true</span>,</li><li>      <span class="hljs-attr">privateKeyFormat</span>: cert.<span class="hljs-property">EncodingBaseFormat</span>.<span class="hljs-property">PEM</span>,</li><li>      <span class="hljs-attr">needsOtherCerts</span>: <span class="hljs-literal">true</span>,</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">out</span>: cert.<span class="hljs-property">Pkcs12Data</span> = cert.<span class="hljs-title function_">parsePkcs12</span>(p12, conf);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"parsePKCS12 succeed."</span>);</li><li>    <span class="hljs-keyword">if</span> (out.<span class="hljs-property">privateKey</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"privateKey:"</span> + out.<span class="hljs-property">privateKey</span>.<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (out.<span class="hljs-property">cert</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"cert:"</span> + out.<span class="hljs-property">cert</span>.<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (out.<span class="hljs-property">otherCerts</span> &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(out.<span class="hljs-property">otherCerts</span>)) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"otherCerts counts:"</span>, out.<span class="hljs-property">otherCerts</span>.<span class="hljs-property">length</span>);</li><li>      out.<span class="hljs-property">otherCerts</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cert, idx</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`otherCerts[<span class="hljs-subst">${idx}</span>]:\n<span class="hljs-subst">${cert.toString()}</span>`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"otherCerts is empty or not an array."</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`doTestCreatePkcs12 failed: errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>   </div>   <div></div></div>