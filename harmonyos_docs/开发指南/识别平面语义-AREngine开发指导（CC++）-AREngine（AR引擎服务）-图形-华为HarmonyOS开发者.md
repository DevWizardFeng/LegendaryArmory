<h1 _ngcontent-rwg-c119="" class="doc-title ng-star-inserted" title="识别平面语义"> 识别平面语义 </h1>

<div _ngcontent-rwg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section68124225572">概要<i class="anchor-icon anchor-icon-link" anchorid="section68124225572" tips="复制节点链接"></i></h2>          <p>从5.0.0(12)开始，AR Engine支持识别平面语义能力。</p>     <p>对于检测到的平面，开发者可以通过AR Engine识别该平面的语义，语义类型包括墙面、地面、座椅、桌面、天花板、门、窗户、床、平面空间、立方体体积、立方体空间容积和未知类型（平面空间、立方体体积和立方体空间容积仅在高精几何重建模式下支持）。</p>    </div>    <div class="tiledSection">     <h2 id="section0222145391119">引入AR Engine<i class="anchor-icon anchor-icon-link" anchorid="section0222145391119" tips="复制节点链接"></i></h2>          <p>开发者可参考管理AR会话章节的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arengine-c-arsession#section1410827131110">引入AR Engine</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section416624191615">创建AR会话<i class="anchor-icon anchor-icon-link" anchorid="section416624191615" tips="复制节点链接"></i></h2>          <p>创建AR会话并配置为平面语义识别模式。</p>     <div _ngcontent-rwg-c106="" class="highlight-div"><div _ngcontent-rwg-c106="" class="highlight-div-header"><div _ngcontent-rwg-c106="" class="highlight-div-header-left"><div _ngcontent-rwg-c106="" class="handle-button expand-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rwg-c106="" class="highlight-div-header-right"><div _ngcontent-rwg-c106="" class="handle-button ai-button"></div><div _ngcontent-rwg-c106="" class="handle-button line-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rwg-c106="" class="handle-button theme-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rwg-c106="" class="handle-button copy-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rwg-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li>AREngine_ARSession *arSession = <span class="hljs-literal">nullptr</span>;</li><li><span class="hljs-comment">// 创建AR会话。</span></li><li><span class="hljs-built_in">HMS_AREngine_ARSession_Create</span>(<span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>, &amp;arSession);</li><li>AREngine_ARConfig *arConfig = <span class="hljs-literal">nullptr</span>;</li><li><span class="hljs-comment">// 创建AR会话配置器。</span></li><li><span class="hljs-built_in">HMS_AREngine_ARConfig_Create</span>(arSession, &amp;arConfig);</li><li><span class="hljs-comment">// 设置语义识别模式为平面语义识别。</span></li><li><span class="hljs-built_in">HMS_AREngine_ARConfig_SetSemanticMode</span>(arSession, arConfig, ARENGINE_SEMANTIC_MODE_PLANE);</li><li><span class="hljs-comment">// 配置器设置给AR会话。</span></li><li><span class="hljs-built_in">HMS_AREngine_ARSession_Configure</span>(arSession, arConfig);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section76461531140">检测环境中的平面<i class="anchor-icon anchor-icon-link" anchorid="section76461531140" tips="复制节点链接"></i></h2>          <p>进行平面语义识别之前，需要先检测环境中的平面。开发者可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arengine-c-get-plane">检测环境中的平面</a>完成平面检测过程，并获取环境中的平面数量。当存在平面时，就可以继续下面的步骤。</p>    </div>    <div class="tiledSection">     <h2 id="section187402023111620">初始化平面语义标签<i class="anchor-icon anchor-icon-link" anchorid="section187402023111620" tips="复制节点链接"></i></h2>          <p>创建并初始化平面语义标签label，用于描述平面的语义。</p>     <div _ngcontent-rwg-c106="" class="highlight-div"><div _ngcontent-rwg-c106="" class="highlight-div-header"><div _ngcontent-rwg-c106="" class="highlight-div-header-left"><div _ngcontent-rwg-c106="" class="handle-button expand-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rwg-c106="" class="highlight-div-header-right"><div _ngcontent-rwg-c106="" class="handle-button ai-button"></div><div _ngcontent-rwg-c106="" class="handle-button line-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rwg-c106="" class="handle-button theme-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rwg-c106="" class="handle-button copy-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rwg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">AREngine_ARSemanticPlaneLabel</span> <span class="hljs-variable">label</span> <span class="hljs-operator">=</span> ARENGINE_PLANE_UNKNOWN;</li></ol></pre></div></div>     <p>平面语义标签定义为枚举类型，包括12种枚举值（1种未知类型+11种平面类型）。</p>     <div _ngcontent-rwg-c106="" class="highlight-div"><div _ngcontent-rwg-c106="" class="highlight-div-header"><div _ngcontent-rwg-c106="" class="highlight-div-header-left"><div _ngcontent-rwg-c106="" class="handle-button expand-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rwg-c106="" class="highlight-div-header-right"><div _ngcontent-rwg-c106="" class="handle-button ai-button"></div><div _ngcontent-rwg-c106="" class="handle-button line-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rwg-c106="" class="handle-button theme-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rwg-c106="" class="handle-button copy-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rwg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> {</li><li>    <span class="hljs-comment">/** Unknown type. */</span></li><li>    ARENGINE_PLANE_UNKNOWN = <span class="hljs-number">0</span>,</li><li>    <span class="hljs-comment">/** Wall. */</span></li><li>    ARENGINE_PLANE_WALL = <span class="hljs-number">1</span>,</li><li>    <span class="hljs-comment">/** Floor. */</span></li><li>    ARENGINE_PLANE_FLOOR = <span class="hljs-number">2</span>,</li><li>    <span class="hljs-comment">/** Seat. */</span></li><li>    ARENGINE_PLANE_SEAT = <span class="hljs-number">3</span>,</li><li>    <span class="hljs-comment">/** Table. */</span></li><li>    ARENGINE_PLANE_TABLE = <span class="hljs-number">4</span>,</li><li>    <span class="hljs-comment">/** Ceiling. */</span></li><li>    ARENGINE_PLANE_CEILING = <span class="hljs-number">5</span>,</li><li>    <span class="hljs-comment">/** Door. */</span></li><li>    ARENGINE_PLANE_DOOR = <span class="hljs-number">6</span>,</li><li>    <span class="hljs-comment">/** Window. */</span></li><li>    ARENGINE_PLANE_WINDOW = <span class="hljs-number">7</span>,</li><li>    <span class="hljs-comment">/** Bed. */</span></li><li>    ARENGINE_PLANE_BED = <span class="hljs-number">8</span>,</li><li>    <span class="hljs-comment">/** Plane Space. */</span></li><li>    ARENGINE_PLANE_SPACE = <span class="hljs-number">9</span>,</li><li>    <span class="hljs-comment">/** Cube Volume. */</span></li><li>    ARENGINE_CUBE_VOLUME = <span class="hljs-number">10</span>,</li><li>    <span class="hljs-comment">/** Cube Space. */</span></li><li>    ARENGINE_CUBE_SPACE = <span class="hljs-number">11</span>,</li><li>} AREngine_ARSemanticPlaneLabel;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section27081315158">识别平面类型<i class="anchor-icon anchor-icon-link" anchorid="section27081315158" tips="复制节点链接"></i></h2>          <div class="p">      调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-capi-arengine#ga913456f9586c82adcdbcae291ec8e17c" target="_blank">HMS_AREngine_ARPlane_GetLabel</a>函数，获取平面类型，结果存放在label中。平面的获取可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arengine-c-get-plane#section4891238142419">获取平面实例</a>。      <div _ngcontent-rwg-c106="" class="highlight-div"><div _ngcontent-rwg-c106="" class="highlight-div-header"><div _ngcontent-rwg-c106="" class="highlight-div-header-left"><div _ngcontent-rwg-c106="" class="handle-button expand-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rwg-c106="" class="highlight-div-header-right"><div _ngcontent-rwg-c106="" class="handle-button ai-button"></div><div _ngcontent-rwg-c106="" class="handle-button line-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rwg-c106="" class="handle-button theme-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rwg-c106="" class="handle-button copy-button"><div _ngcontent-rwg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rwg-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" hw-language="cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">HMS_AREngine_ARPlane_GetLabel</span>(arSession, arPlane, &amp;label);</li></ol></pre></div></div>     </div>    </div>   </div>   <div></div></div>