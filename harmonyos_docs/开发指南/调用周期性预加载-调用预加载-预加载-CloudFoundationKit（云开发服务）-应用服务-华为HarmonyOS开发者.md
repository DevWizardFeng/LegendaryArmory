<h1 _ngcontent-vsd-c119="" class="doc-title ng-star-inserted" title="调用周期性预加载"> 调用周期性预加载 </h1>

<div _ngcontent-vsd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="p">     在项目的EntryAbility.ets文件中导入预加载实现类<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-prefetch-implementation-class#section1192871813236">PrefetchWrapper</a>，并在onCreate中调用PrefetchWrapper的doPeriodicPrefetch方法。方法内部会先调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudresprefetch#section251833512544" target="_blank">registerPrefetchTask</a>方法注册周期性预加载任务，12小时后将调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudresprefetch#section181501852703" target="_blank">getPrefetchResult</a>获取周期性预加载数据。     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>系统会结合应用活跃情况进行任务清理。应用不活跃后，如果当前时间 – 任务注册时间 &gt; 72小时，则任务将直接从队列移除。移除任务时不立即清理已加载的数据，数据会被定期清理，应用启动时仍然可尝试获取此前已加载的缓存数据，并结合数据时间戳决定是否呈现内容。</li>        <li>获取周期性预加载数据的间隔周期是12小时，如果打开应用的时间间隔低于12小时，可能将无法获取到最新的预加载数据。</li>        <li><span style="color: rgb(34,34,34);">由于系统每隔12小时才会拉取一次周期性预加载数据，不方便调试周期性预加载功能，为此，系统提供了</span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/cloudfoundation-prefetch-debugging">命令行工具</a>，可以实时拉取周期性预加载数据。</li>       </ul>      </div></div></div>     <div _ngcontent-vsd-c106="" class="highlight-div"><div _ngcontent-vsd-c106="" class="highlight-div-header"><div _ngcontent-vsd-c106="" class="highlight-div-header-left"><div _ngcontent-vsd-c106="" class="handle-button expand-button"><div _ngcontent-vsd-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vsd-c106="" class="highlight-div-header-right"><div _ngcontent-vsd-c106="" class="handle-button ai-button"></div><div _ngcontent-vsd-c106="" class="handle-button line-button"><div _ngcontent-vsd-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vsd-c106="" class="handle-button theme-button"><div _ngcontent-vsd-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vsd-c106="" class="handle-button copy-button"><div _ngcontent-vsd-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vsd-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GlobalContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/GlobalContext'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrefetchWrapper</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../prefetchUtil/PrefetchWrapper'</span>;</li><li>
</li><li><span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">initContext</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);  <span class="hljs-comment">// 初始化全局上下文</span></li><li>  <span class="hljs-title class_">PrefetchWrapper</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">doPeriodicPrefetch</span>();</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>