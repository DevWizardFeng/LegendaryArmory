<h1 _ngcontent-tmr-c119="" class="doc-title ng-star-inserted" title="调试云对象"> 调试云对象 </h1>

<div _ngcontent-tmr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001877280584"><p id="ZH-CN_TOPIC_0000002214858653__p31955545913">云对象开发完成后，您可以对其进行调试，以验证云对象代码运行是否正常。</p> <p id="ZH-CN_TOPIC_0000002214858653__p1640513719265">目前DevEco Studio云对象调试支持本地调用和远程调用，请根据实际场景选择使用：</p> <ul id="ZH-CN_TOPIC_0000002214858653__ul14519194510560"><li id="li11408547155617"><a href="/consumer/cn/doc/harmonyos-guides/agc-harmonyos-clouddev-debugcloudobj#section248615546567">通过本地调用方式调试云对象</a>：在DevEco Studio调试本地开发好的云对象。支持单个调试和批量调试，并支持Run和Debug两种模式，调试功能丰富，常在云对象开发过程或问题定位过程中使用。</li><li id="li85191745205616"><a href="/consumer/cn/doc/harmonyos-guides/agc-harmonyos-clouddev-debugcloudobj#section123191549587">通过远程调用方式调试云对象</a>：先将云对象部署至AGC云端，然后直接在DevEco Studio调用云端云对象。此方式主要用于测试云对象在云端的运行情况、或补充测试因各种因素限制未能在本地调用方式中发现的问题。</li></ul> <div class="tiledSection"><h2 id="section691218160463">前提条件<i class="anchor-icon anchor-icon-link" anchorid="section691218160463" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002214858653__ul1755814308463"><li id="li555943014614">请确保您已登录。</li><li id="li24011113478">如果您的工程有代码逻辑涉及云对象调用云数据库，您需在调试前先<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/agc-harmonyos-clouddev-deploy">将整个云工程部署到AGC云端</a>，否则云端将没有相关数据及环境变量。</li></ul> </div> <div class="tiledSection"><h2 id="section248615546567">通过本地调用方式调试云对象<i class="anchor-icon anchor-icon-link" anchorid="section248615546567" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002214858653__p16182191101912">您可在DevEco Studio调试本地开发好的云对象，支持单个调试和批量调试，并支持Run和Debug两种模式。</p> <ul id="ZH-CN_TOPIC_0000002214858653__ul15384101018198"><li id="li53194713192">单个调试和批量调试流程相同，区别仅在于：单个调试是一次只为一个云对象启动本地调试，之后只能调用该云对象；批量调试是一次为“cloudfunctions”目录下所有云对象启动本地调试、然后逐个调用各个云对象。</li><li id="li174088554195">Run模式和Debug模式的区别在于：Debug模式支持使用断点来追踪云对象的运行情况，Run模式则不支持。</li></ul> <p id="ZH-CN_TOPIC_0000002214858653__p8325713198">下文以Debug模式下调试单个云对象“my-cloud-object”为例，介绍如何在DevEco Studio调试本地云对象。</p> <ol id="ZH-CN_TOPIC_0000002214858653__ol4301255184915"><li id="li12307559493">右击“my-cloud-object”云对象目录，选择“Debug 'my-cloud-object'”。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002214858653__ul117861241174913"><li id="li149665418226">如需批量调试多个云对象，右击“cloudfunctions”目录，选择“Debug Cloud Functions”，即可启动该目录下所有云对象。如“cloudfunctions”目录下同时存在云函数和云对象，将会启动所有的云函数和云对象。</li></ul> </div></div></div> <p id="ZH-CN_TOPIC_0000002214858653__p917619598125"></p> <p id="ZH-CN_TOPIC_0000002214858653__p1795612011119"><span><img originheight="344" originwidth="525" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.64679396002968637361526867068976:50001231000000:2800:8B59E99F09DC9BD1C2562EB897DBC3B48751CF7D4D13954F117D5006D6D3B75C.png" width="525" height="344"></span></p> </li><li id="li13301955184910">在下方通知栏“cloudfunctions”窗口，查看调试日志。如果出现“Cloud Functions loaded successfully”，表示云对象已成功加载到本地运行的HTTP Server中，并生成对应的Function URI。<p id="ZH-CN_TOPIC_0000002214858653__p103519417128"><span><img originheight="577" originwidth="1055" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.00644642403139513152123796470284:50001231000000:2800:5A9D983F15A40E70005BF84992BC526F23E11B2ADC082F24A83189EA7F231ED6.png" width="920" height="503.1658767772512"></span></p> </li><li id="li17581396554">如需设置断点调试，在函数代码中选定要设置断点的有效代码行，在行号（如下图行3）后单击鼠标左键设置断点（如下图的红点）。<p id="ZH-CN_TOPIC_0000002214858653__p1770021565715">设置断点后，调试能够在断点处中断，并高亮显示该行。</p> <p id="ZH-CN_TOPIC_0000002214858653__p45851322201615"><span><img originheight="346" originwidth="697" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.78914508896208072016891759569811:50001231000000:2800:7C6CE4C185E636232CFE823AE95E7D2FEA24FBB1DB47AEC30C7655F9403F6FCD.png" width="697" height="346"></span></p> </li><li id="li13025534910">在菜单栏选择“View &gt; Tool Windows &gt; Cloud Functions Requestor”，使用事件模拟器（Cloud Functions Requestor）触发云对象调用。<p id="ZH-CN_TOPIC_0000002214858653__p116411640121620"><span><img originheight="380" originwidth="676" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.30040869248831974601395972933422:50001231000000:2800:2391E18BDAF483C1E0D758895AD0FA5CE03645D865F577ACA837AD00A1302AF2.png" width="676" height="380"></span></p> </li><li id="li123005584910">在弹出的“Cloud Functions Requestor”面板，配置触发事件参数。<ul id="ZH-CN_TOPIC_0000002214858653__ul13005504912"><li id="li658014375171">Cloud Function：选择需要触发的云对象，此处以云对象“my-cloud-object”为例。</li><li id="li23065513495">Environment：选择云对象调用环境。此处选择“Local”，表示本地调用。</li><li id="li1931155594918">Method：必填项，输入云对象的方法名称，如“add”。</li><li id="li7311355194913">Event：方法参数列表，JSON array格式，依次代表Method的入参。如add方法接收两个number类型的形参，num1与num2，那么填入“[1, 2]”表示构造num1=1，num2=2的请求。<div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002214858653__p4406102871720">如果Method的入参中的某一个是数组[]类型，那么Event中将至少包含两层方括号，如'[[1, 2], 3]'，外层的方括号表示参数列表。</p> </div></div></div> </li></ul> <p id="ZH-CN_TOPIC_0000002214858653__p2868924837"></p> <p id="ZH-CN_TOPIC_0000002214858653__p315651851815"><span><img originheight="594" originwidth="1056" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.92565608871261865775360371121006:50001231000000:2800:9E1C3C047990DE914E69BB9509A9CFA550ED725B47599EBDB036CC58C0264C73.png" width="920" height="517.5"></span></p> </li><li id="li1254518447274">（可选）点击“Save”，可保存当前触发事件。<p id="ZH-CN_TOPIC_0000002214858653__p830523022012"><span><img originheight="480" originwidth="1059" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.34709355917667073506311421978172:50001231000000:2800:16D27E0CA6768F2E280947CC68DE47AF09A3CAC8519E682FECB8219E83FF5E33.png" width="920" height="416.9971671388102"></span></p> <p id="ZH-CN_TOPIC_0000002214858653__p954514414271">点击右上角<span><img originheight="29" originwidth="23" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.52957378113427741096521107703579:50001231000000:2800:0CA42FD8F69D369A31C377210420A10B12B6529F8FBA39625CB0081B4EB8E94B.png" class="IconPic notEnlarge" width="23" height="29"></span>可展开保存的触发事件，后续可直接点击“Load”加载事件。对于不需要保存的触发事件，也可以点击“Delete”删除。</p> <p id="ZH-CN_TOPIC_0000002214858653__p78301787212"><span><img originheight="523" originwidth="588" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.42652591764986186480863339440811:50001231000000:2800:58B499E59C5D3912C2FCA19208EA1F8B31F57908815C9F5605B911C5E5BC0187.png" width="588" height="523"></span></p> </li><li id="li193115520499">点击“Trigger”， 将会触发执行云对象的方法，执行结果将展示在“Result”框内。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002214858653__p1920199145120">“Result”框右侧的“Logs”面板仅用于在<a href="/consumer/cn/doc/harmonyos-guides/agc-harmonyos-clouddev-debugcloudobj#section123191549587">通过远程调用方式调试云对象</a>时查看日志。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002214858653__p865065284919"></p> <p id="ZH-CN_TOPIC_0000002214858653__p3239132812257"><span><img originheight="700" originwidth="1052" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.29148839273814175540198291946998:50001231000000:2800:0CFFB3A728519DF109915A13C43B24A06B38D93E5864EE8C3913408DBF58D65E.png" width="920" height="612.1673003802282"></span></p> </li><li id="li8222133191017">点击菜单栏<span><img originheight="20" originwidth="25" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.40767530874689656384840388505141:50001231000000:2800:6CAD1CD95122ED166B720805A3918501892479F966853DDEE45A85A11D64676D.png" class="IconPic notEnlarge" width="25" height="20"></span>，可停止调试。</li><li id="li112228315109">根据调试结果修改云对象代码后，点击<span><img originheight="19" originwidth="20" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.29279822384751971768161355172932:50001231000000:2800:04261C8490B2FD3C0390279021CD7C3F4127ED0E427D354592659FCC9FCC1C87.png" class="IconPic notEnlarge" width="20" height="19"></span>重新以Debug模式启动调试，直至没有问题。</li><li id="li12941103517418">参考步骤5~9，完成云对象其他方法或其他云对象的调试。</li></ol> </div> <div class="tiledSection"><h2 id="section123191549587">通过远程调用方式调试云对象<i class="anchor-icon anchor-icon-link" anchorid="section123191549587" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002214858653__p41344318818">您还可以将云对象部署至AGC云端，然后在DevEco Studio调用云端云对象，以测试云对象在云端的运行情况、或补充测试因各种因素限制未能在本地调试中发现的问题。</p> <ol id="ZH-CN_TOPIC_0000002214858653__ol0456258112714"><li id="li24561358192711">参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/agc-harmonyos-clouddev-deploycloudobj">部署云对象</a>将需要调试的云对象部署至AGC云端。</li><li id="li150015295501">在菜单栏选择“View &gt; Tool Windows &gt; Cloud Functions Requestor”，使用事件模拟器（Cloud Functions Requestor）触发云对象调用。<p id="ZH-CN_TOPIC_0000002214858653__p1368110535277"><span><img originheight="380" originwidth="676" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104750.96404424409746294220420878709029:50001231000000:2800:2E6E00A8B2FA658592B275E0C7566065446F06765C6F5D32511327B980B7599F.png" width="676" height="380"></span></p> </li><li id="li55011229165017">在弹出的“Cloud Functions Requestor”面板，配置触发事件参数。<ul id="ZH-CN_TOPIC_0000002214858653__ul9501152975017"><li id="li2501529195014">Cloud Function：选择需要触发的云对象，此处依然以“my-cloud-object”为例。</li><li id="li11669152814432">Environment：选择云对象调用环境。此处选择“Remote”，表示远程调用。</li><li id="li135012295505">Method：输入云对象的方法名称，如“add”。</li><li id="li1512433381913">Event：方法参数列表，JSON array格式，按顺序代表Method的入参，如add方法接收两个number类型的形参，num1与num2，那么填入“[1, 2]”表示构造num1=1，num2=2的请求，如“[1, 2]”。<div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p id="ZH-CN_TOPIC_0000002214858653__p19436112092213">如果Method的入参中的某一个是数组[]类型，那么Event中将至少包含两层方括号，如'[[1, 2], 3]'，外层的方括号表示参数列表。</p> </div></div></div> </li></ul> <p id="ZH-CN_TOPIC_0000002214858653__p6228833171413"></p> <p id="ZH-CN_TOPIC_0000002214858653__p128541155151217"><span><img originheight="630" originwidth="988" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104751.59450167403754694801340960716471:50001231000000:2800:7928C883FD4602A43CA44A531FA3F6AC1F6C747BBF4DB2C06BE65BF1320FEB48.png" width="920" height="586.6396761133603"></span></p> </li><li id="li5457175872714">点击“Trigger”， 将会触发执行云对象方法，执行结果将展示在“Result”框内。<p id="ZH-CN_TOPIC_0000002214858653__p2940303505"><span><img originheight="536" originwidth="591" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104751.99323430451616267080798759451184:50001231000000:2800:1A316F0B47C481E9F8FC9E1592863069D6A4C37B0BC96CD894C3C39F43EB8891.png" width="591" height="536"></span></p> </li><li id="li14685192375916">点击“Logs”页签，还可查看打印的日志定位问题。修改云对象代码、重新部署云对象后再次执行远程调用，直至没有问题。</li><li id="li345765882717">参考步骤1~5，完成云对象其他方法或其他云对象的调试。</li></ol> </div> </div> <div></div></div>