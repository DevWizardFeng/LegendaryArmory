<h1 _ngcontent-dxq-c119="" class="doc-title ng-star-inserted" title="调试周期性预加载"> 调试周期性预加载 </h1>

<div _ngcontent-dxq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>prefetch_test_tool是为周期性预加载功能提供的一种命令行工具，开发者集成预加载服务后，使用该工具可以更方便、更高效地进行周期性预加载功能测试和调试，提高开发效率，同时确保预加载服务的平稳运行。</p> <p>当前命令行工具支持的命令集如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.1.3.1.1" valign="top" width="46.72%"><p>命令名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.3.1.2" valign="top" width="53.28000000000001%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="46.72%"><p><a href="/consumer/cn/doc/harmonyos-guides/cloudfoundation-commandtool-debug#section1348600182818">getcache</a></p> </td> <td class="cellrowborder" valign="top" width="53.28000000000001%"><p>提供获取周期性预加载数据的能力。</p> </td> </tr>  </tbody></table></div> </div> <div class="tiledSection"><h2 id="section86751657687">调试准备<i class="anchor-icon anchor-icon-link" anchorid="section86751657687" tips="复制节点链接"></i></h2><p>使用命令行工具调试周期性预加载之前，需要完成以下准备工作：</p> <ul><li>您已在开发者联盟官网注册账号并通过实名认证，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/start/registration-and-verification-0000001053628148" target="_blank">账号注册认证</a>。</li><li>您已在本地安装DevEco Studio 5.0.3 Release及以上版本。</li><li>手机/平板终端设备的ROM版本已升级至HarmonyOS 6.0.0 Beta5及以上版本。</li><li>设置HAP包的“Build Mode”为“debug”，且已<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-debugcert-0000001914263178" target="_blank">申请调试证书</a>。<p><span><img originheight="313" originwidth="470" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.43791083070098253516496270332511:50001231000000:2800:125B3F0113784194C66165C0420B7016CE6159A24BC9FE18A4CFEA846172FD2F.png" width="470" height="313"></span></p> </li></ul> </div> <div class="tiledSection"><h2 id="section97672211401">切换shell环境<i class="anchor-icon anchor-icon-link" anchorid="section97672211401" tips="复制节点链接"></i></h2><p>prefetch_test_tool命令行工具基于hdc shell调试，需要切换到hdc shell命令环境。</p> <ol><li>PC连接调试设备。连接方式请根据实际情况选择，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc#设备连接管理" target="_blank">设备连接管理</a>。</li><li>打开DevEco Studio，菜单栏选择“View &gt; Tool Windows &gt; Terminal”进入Terminal窗口。<p><span><img originheight="636" originwidth="554" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.12442336946857010371544151574300:50001231000000:2800:950D63B381DA8923C4E40A382D6BD40149B8E4875D6988A305A669CCFAB2D171.png" width="554" height="636"></span></p> </li><li>输入hdc shell，切换到hdc shell命令环境。切换过程中如果出现报错，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hdc#常见问题" target="_blank">常见问题</a>排查解决。<p><span><img originheight="184" originwidth="554" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.02964607365433775922600830682879:50001231000000:2800:A88A275E754ABA2396F71B9C2A34D05681703A8FB7E030AB11FADB5E53AA5CBB.png" width="554" height="184"></span></p> </li></ol> </div> <div class="tiledSection"><h2 id="section1348600182818">调试命令<i class="anchor-icon anchor-icon-link" anchorid="section1348600182818" tips="复制节点链接"></i></h2><p>命令名“getcache”，提供获取周期性预加载数据的能力。</p> </div> <div class="tiledSection"><h3 id="section766062163312" class="firsth2">命令格式<i class="anchor-icon anchor-icon-link" anchorid="section766062163312" tips="复制节点链接"></i></h3><div _ngcontent-dxq-c106="" class="highlight-div"><div _ngcontent-dxq-c106="" class="highlight-div-header"><div _ngcontent-dxq-c106="" class="highlight-div-header-left"><div _ngcontent-dxq-c106="" class="handle-button expand-button"><div _ngcontent-dxq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dxq-c106="" class="highlight-div-header-right"><div _ngcontent-dxq-c106="" class="handle-button ai-button"></div><div _ngcontent-dxq-c106="" class="handle-button line-button"><div _ngcontent-dxq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dxq-c106="" class="handle-button theme-button"><div _ngcontent-dxq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dxq-c106="" class="handle-button copy-button"><div _ngcontent-dxq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dxq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">cf_prefetch</span> <span class="hljs-variable">getcache</span> -<span class="hljs-title class_">m</span> &lt;<span class="hljs-title class_">bundlename</span>&gt;</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section9444141123411">命令选项<i class="anchor-icon anchor-icon-link" anchorid="section9444141123411" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.1" valign="top" width="14.528547145285472%"><p>命令选项</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.2" valign="top" width="15.16848315168483%"><p>必填(M)/选填(O)</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.3" valign="top" width="32.966703329667034%"><p>描述</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.2.1.5.1.4" valign="top" width="37.33626637336266%"><p>示例</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="14.528547145285472%"><p>-m</p> </td> <td class="cellrowborder" valign="top" width="15.16848315168483%"><p>M</p> </td> <td class="cellrowborder" valign="top" width="32.966703329667034%"><p>应用包名。此处的包名需要与您在AppGallery Connect中创建应用时配置的包名保持一致。</p> </td> <td class="cellrowborder" valign="top" width="37.33626637336266%"><p>cf_prefetch getcache -m  com.huawei.hms.xs.test</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1212013014920">调用示例<i class="anchor-icon anchor-icon-link" anchorid="section1212013014920" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section46534672520" class="firsth2">正常场景<i class="anchor-icon anchor-icon-link" anchorid="section46534672520" tips="复制节点链接"></i></h3><ul><li>输入cf_prefetch help，获取命令行工具的使用说明。<p><span><img originheight="142" originwidth="800" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.71862096852773130838884642206863:50001231000000:2800:E7D420636BB549B51411342A4B8812FE52F4B774FB3356142162679155D7AA70.png" width="800" height="142"></span></p> </li><li>输入cf_prefetch getcache -h，获取getcache命令支持的参数信息。<p><span><img originheight="161" originwidth="800" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.25947322754302403168444083743795:50001231000000:2800:0278EFE2829E71423BDD12CEE1B6042C9FA2C6F86BBA8032BC97839FD997985D.png" width="800" height="161"></span></p> </li><li>输入cf_prefetch getcache -m  &lt;bundlename&gt;，立即向云侧请求获取一次周期性预加载数据。<p><span><img originheight="118" originwidth="674" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.70277915521868044532495604188287:50001231000000:2800:C11DCCA9FF6E2E7695813FE403DC2B91F50252D3C0FF46D7BD345471E311FDF5.png" width="674" height="118"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>如果返回结果中的“fetch data timestamp”不是当前时间，则表示仍为上一次成功拉取数据的时间戳，此次数据拉取失败，请参见<a href="/consumer/cn/doc/harmonyos-guides/cloudfoundation-commandtool-debug#section990573323613">异常场景</a>排查。</p> </div></div></div> </li></ul> </div> <div class="tiledSection"><h3 id="section990573323613">异常场景<i class="anchor-icon anchor-icon-link" anchorid="section990573323613" tips="复制节点链接"></i></h3><ul><li>链路不通，例如无网络情况；或周期性预加载配置不正确。<p><span><img originheight="66" originwidth="630" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.46165802698449237973731583774461:50001231000000:2800:AD0E34946FE6A06DB70685DCD330A44DC07CD0F10BCBE42BF7109A666AC89219.png" width="630" height="66"></span></p> </li><li>命令行工具内部错误。<p><span><img originheight="64" originwidth="589" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.87843981578490220597858053943325:50001231000000:2800:0AE1FB9E1833CC24A0B8E03121E08812B6D69E01C367F13B5445C699D091C7B3.png" width="589" height="64"></span></p> </li><li>HAP包非debug调试模式。<p><span><img originheight="93" originwidth="1423" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.11431253616411898776305328354996:50001231000000:2800:1DAB329F5108BB67FAD2527F0ADFE5A52357E0752554397E62E9BF86A8714B08.png" width="920" height="60.12649332396345"></span></p> </li><li>应用包名输入错误。<p><span><img originheight="64" originwidth="1229" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114645.00443283673357606616788649322269:50001231000000:2800:98D228A698532849913BEF5B2D1EB33523F7F669A7968291E0977CAEFB24F1CB.png" width="920" height="47.90886899918633"></span></p> </li></ul> </div> </div> <div></div></div>