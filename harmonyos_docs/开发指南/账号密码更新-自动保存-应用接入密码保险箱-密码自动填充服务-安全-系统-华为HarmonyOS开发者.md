<h1 _ngcontent-qgu-c119="" class="doc-title ng-star-inserted" title="账号密码更新"> 账号密码更新 </h1>

<div _ngcontent-qgu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>应用界面触发账号密码自动保存时，若密码保险箱中已存在同应用下与本次使用账号相同的账号，则弹出密码更新提示框，用户点击更新按钮，即可更新密码保险箱内对应账号的密码。</p> <p><span><img height="337.85990000000004" originheight="510" originwidth="579" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115100.78668859649608564732207320042255:50001231000000:2800:DE2603489F090664EA14F181C0519697108B4F5F7BAD4B590C1AF896AEF7FE30.png" title="点击放大" width="383.04"></span></p> <p></p> <p>应用触发修改密码或使用已经保存过的账号手动登录时，均会触发密码更新功能。</p> <p>登录的布局介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-save-acc-password#section13679181143915">账号密码登录</a>，以下仅介绍修改账号密码的标准适配场景。</p> <p><strong>触发条件及注意事项同<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/passwordvault-save-acc-password">账号密码保存</a>功能。</strong></p> <div class="tiledSection"><h2 id="section1660711384473">修改账号密码<i class="anchor-icon anchor-icon-link" anchorid="section1660711384473" tips="复制节点链接"></i></h2><p><span><img height="330.6646" originheight="499" originwidth="579" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115101.71145790094603923985979719951443:50001231000000:2800:6B3F737E8D390DA61C018949B6EA4B62A08C63430FFD30AF266A296B35F07B9E.png" title="点击放大" width="383.04"></span></p> <p>示例代码如下：</p> <div _ngcontent-qgu-c106="" class="highlight-div"><div _ngcontent-qgu-c106="" class="highlight-div-header"><div _ngcontent-qgu-c106="" class="highlight-div-header-left"><div _ngcontent-qgu-c106="" class="handle-button expand-button"><div _ngcontent-qgu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qgu-c106="" class="highlight-div-header-right"><div _ngcontent-qgu-c106="" class="handle-button ai-button"></div><div _ngcontent-qgu-c106="" class="handle-button line-button"><div _ngcontent-qgu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qgu-c106="" class="handle-button theme-button"><div _ngcontent-qgu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qgu-c106="" class="handle-button copy-button"><div _ngcontent-qgu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qgu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RegisterExample</span> {</li><li>  <span class="hljs-attr">pathInfos</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">ReserveAccount</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-title class_">ReservePassword</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">enAbleAutoFill</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>
</li><li>  <span class="hljs-title function_">onBackPress</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 当非成功登录、返回等页面跳转时，将enAbleAutoFill设置为false，密码保险箱将不启用自动填充功能</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">enAbleAutoFill</span> = <span class="hljs-literal">false</span>;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageMap</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'register_result_page'</span>) {</li><li>      <span class="hljs-title class_">RegisterResultPage</span>()</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pathInfos</span>) {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"修改密码"</span>)</li><li>          .<span class="hljs-title function_">commonTitleStyles</span>()</li><li>
</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'用户名'</span> })</li><li>          .<span class="hljs-title function_">commonInputStyles</span>()</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">InputType</span>.<span class="hljs-property">USER_NAME</span>) <span class="hljs-comment">// 账号框使用USER_NAME属性</span></li><li>          .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ReserveAccount</span> = value;</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'密码'</span> })</li><li>          .<span class="hljs-title function_">showPasswordIcon</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">commonInputStyles</span>()</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">InputType</span>.<span class="hljs-property">Password</span>)</li><li>          .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ReservePassword</span> = value;</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'新密码'</span> })</li><li>          .<span class="hljs-title function_">showPasswordIcon</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">commonInputStyles</span>()</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">InputType</span>.<span class="hljs-property">NEW_PASSWORD</span>) <span class="hljs-comment">// 密码框使用NEW_PASSWORD属性，可以触发生成强密码。</span></li><li>          .<span class="hljs-title function_">enableAutoFill</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">enAbleAutoFill</span>)</li><li>          .<span class="hljs-title function_">passwordRules</span>(<span class="hljs-string">'begin:[upper],special:[yes],len:[maxlen:32,minlen:12]'</span>)</li><li>          .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ReservePassword</span> = value;</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'页面跳转'</span>)</li><li>          .<span class="hljs-title function_">commonButtonStyles</span>()</li><li>          .<span class="hljs-title function_">enabled</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">ReserveAccount</span> !== <span class="hljs-string">''</span>) &amp;&amp; (<span class="hljs-variable language_">this</span>.<span class="hljs-property">ReservePassword</span> !== <span class="hljs-string">''</span>))</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathInfos</span>.<span class="hljs-title function_">pushPathByName</span>(<span class="hljs-string">'register_result_page'</span>, <span class="hljs-literal">null</span>)</li><li>          })</li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'页面跳转（跳转前关闭autofill）'</span>)</li><li>          .<span class="hljs-title function_">commonButtonStyles</span>()</li><li>          .<span class="hljs-title function_">enabled</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">ReserveAccount</span> !== <span class="hljs-string">''</span>) &amp;&amp; (<span class="hljs-variable language_">this</span>.<span class="hljs-property">ReservePassword</span> !== <span class="hljs-string">''</span>))</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">enAbleAutoFill</span> = <span class="hljs-literal">false</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathInfos</span>.<span class="hljs-title function_">pushPathByName</span>(<span class="hljs-string">'register_result_page'</span>, <span class="hljs-literal">null</span>)</li><li>          })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageMap</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RegisterResultPage</span> {</li><li>  <span class="hljs-attr">pathInfos</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Result Page"</span>).<span class="hljs-title function_">commonTitleStyles</span>()</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">"Result Page"</span>)</li><li>    .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">(<span class="hljs-params">context: NavDestinationContext</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pathInfos</span> = context.<span class="hljs-property">pathStack</span>;</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Extend</span>(<span class="hljs-title class_">Text</span>)</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">commonTitleStyles</span>(<span class="hljs-params"></span>) {</li><li>  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>  .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#000000'</span>)</li><li>  .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>  .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">24</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">16</span> })</li><li>}</li><li>
</li><li><span class="hljs-meta">@Extend</span>(<span class="hljs-title class_">TextInput</span>)</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">commonInputStyles</span>(<span class="hljs-params"></span>) {</li><li>  .<span class="hljs-title function_">placeholderColor</span>(<span class="hljs-number">0x182431</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.6</span>)</li><li>  .<span class="hljs-title function_">placeholderFont</span>({ <span class="hljs-attr">size</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">weight</span>: <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Regular</span> })</li><li>  .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">16</span> })</li><li>}</li><li>
</li><li><span class="hljs-meta">@Extend</span>(<span class="hljs-title class_">Button</span>)</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">commonButtonStyles</span>(<span class="hljs-params"></span>) {</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>  .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">24</span> })</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>