<h1 _ngcontent-kic-c119="" class="doc-title ng-star-inserted" title="资源分类与访问"> 资源分类与访问 </h1>

<div _ngcontent-kic-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>应用开发过程中，需要使用字符串、颜色、字体、间距和图标等资源。不同设备或配置下，这些资源的值会有所不同。本文档对资源类型进行介绍，并提供资源开发指导。</p>    <p>根据来源差异，可以将资源分为：</p>    <ul>     <li>应用资源：开发者在应用中自定义的资源，可以利用资源文件管理资源在不同的设备或配置中的表现。</li>     <li>      <p>系统资源：系统提供的资源，开发者可以通过<a href="https://developer.huawei.com/consumer/cn/design/harmonyos-symbol/" target="_blank">主题图标库</a>获取系统symbol图标资源信息、通过<a href="https://gitcode.com/openharmony/docs/blob/master/zh-cn/design/ux-design/design-resources.md" target="_blank">系统资源分层设计表</a>获取系统颜色、间距、圆角等资源信息。此外，系统颜色资源还可以通过<a href="https://developer.huawei.com/consumer/cn/doc/design-guides/color-0000001776857164#section17672143841113" target="_blank">系统色彩全量表</a>获取，系统色彩全量表与系统资源分层设计表内的资源不重合，均为推荐使用的系统颜色资源。</p>      <p>表格中未列出的其他系统资源均为系统组件和底层能力参数，推荐开发者优先使用上述表格中提供的系统资源。</p></li>    </ul>    <div class="tiledSection">     <h2 id="资源分类">资源分类<i class="anchor-icon anchor-icon-link" anchorid="资源分类" tips="复制节点链接"></i></h2>          <p>应用开发中使用的各类资源文件，需要放入特定子目录中存储管理。目录结构如下所示，base目录、限定词目录、rawfile目录、resfile目录称为资源目录，element、media、profile称为资源组目录。</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>resources</li><li>|---base  // 默认存在的目录</li><li>|   |---element</li><li>|   |   |---string.json // 字符串资源</li><li>|   |---media</li><li>|   |   |---icon.png // 图片、视频等媒体资源文件</li><li>|   |---profile</li><li>|   |   |---test_profile.json // 自定义profile文件，文件内容可自定义</li><li>|---en_GB-vertical-car-mdpi // 自定义限定词目录示例，由开发者创建</li><li>|   |---element</li><li>|   |   |---string.json</li><li>|   |---media</li><li>|   |   |---icon.png</li><li>|   |---profile</li><li>|   |   |---test_profile.json</li><li>|---rawfile // 其他类型文件，原始文件形式保存，不会被集成到resources.index文件中。文件名可自定义。</li><li>|---resfile // 其他类型文件，原始文件形式保存，不会被集成到resources.index文件中。文件名可自定义。</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>资源目录和资源组目录下的文件均被视为资源文件，在应用打包时不会进行混淆。</p></li>        <li>         <p>stage模型多工程情况下，共有的资源文件放到AppScope下的resources目录。</p></li>        <li>         <p>在编译构建时，AppScope目录下的资源文件会合入到模块下面的资源文件中，如果两个目录下的相同资源目录和资源组目录下存在重名资源，编译打包后只会保留AppScope目录下的资源。</p></li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="资源目录" class="firsth2">资源目录<i class="anchor-icon anchor-icon-link" anchorid="资源目录" tips="复制节点链接"></i></h3>          <p>表1 资源目录说明</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1" valign="top" width="50%">目录类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.2" valign="top" width="50%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">base目录</td>         <td class="cellrowborder" valign="top" width="50%">          <p>base目录默认存在。二级子目录element用于存放字符串、颜色、布尔值等基础元素，media和profile子目录存放媒体、动画、布局等资源文件。</p>          <p>目录中的资源文件会被编译成二进制文件，并分配资源ID。通过指定资源类型（type）和资源名称（name）来访问。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">限定词目录</td>         <td class="cellrowborder" valign="top" width="50%">          <p>限定词目录需要开发者根据开发需要自行创建，二级子目录element用于存放字符串、颜色、布尔值等基础元素，media和profile子目录存放媒体、动画、布局等资源文件。</p>          <p>同样，目录中的资源文件会被编译成二进制文件，并分配资源ID。通过指定资源类型（type）和资源名称（name）来访问。限定词的含义和取值范围以及限定词目录的命名规则请参考下方<a href="/consumer/cn/doc/harmonyos-guides/resource-categories-and-access#限定词目录">限定词目录</a>中的说明。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">rawfile目录</td>         <td class="cellrowborder" valign="top" width="50%">          <p>支持创建多层子目录，子目录名称可以自定义，文件夹内可以自由放置各类资源文件。</p>          <p>目录中的资源文件会被直接打包进应用，不经过编译，也不会分配资源ID。通过指定文件路径和文件名访问。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">resfile目录</td>         <td class="cellrowborder" valign="top" width="50%">          <p>支持创建多层子目录，子目录名称可以自定义，文件夹内可以自由放置各类资源文件。</p>          <p>目录中的资源文件会被直接打包进应用，不经过编译，也不会分配资源ID。应用安装后，resfile资源会被解压到应用沙箱路径，通过Context属性<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#属性" target="_blank">resourceDir</a>获取到resfile资源目录后，可通过文件路径访问，且该路径仅能以只读方式访问。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="资源组目录">资源组目录<i class="anchor-icon anchor-icon-link" anchorid="资源组目录" tips="复制节点链接"></i></h3>          <p>表2 资源组目录说明</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.4.1.1" valign="top" width="33.33333333333333%">目录类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.4.1.2" valign="top" width="33.33333333333333%">说明</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.4.1.3" valign="top" width="33.33333333333333%">资源文件</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">element</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>表示元素资源，以下每一类数据都采用相应的JSON文件来表征（目录下仅支持文件类型）。</p>          <p>- boolean，布尔型</p>          <p>- color，颜色</p>          <p>- float，浮点型，范围是-2^128到2^128</p>          <p>- intarray，整型数组</p>          <p>- integer，整型，范围是-2^31到2^31-1</p>          <p>- plural，复数形式</p>          <p>- strarray，字符串数组</p>          <p>- string，字符串，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#getstringsync10" target="_blank">格式化字符串请参考API文档</a></p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>element目录中的文件名称建议与下面的文件名保持一致。每个文件中只能包含同一类型的数据。</p>          <p>- boolean.json</p>          <p>- color.json</p>          <p>- float.json</p>          <p>- intarray.json</p>          <p>- integer.json</p>          <p>- plural.json</p>          <p>- strarray.json</p>          <p>- string.json</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">media</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>表示媒体资源，包括图片、音频、视频等非文本格式的文件（目录下只支持文件类型）。</p>          <p>图片和音视频的类型说明见表3和表4。</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">文件名可自定义，例如：icon.png。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">profile</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">表示自定义配置文件，其文件内容可<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-bundlemanager#bundlemanagergetprofilebyability" target="_blank">通过包管理接口</a>获取（目录下只支持json文件类型）。</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">文件名可自定义，例如：test_profile.json。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>媒体资源类型说明</strong></p>     <p>表3 图片资源类型说明</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.1" valign="top" width="50%">格式</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.2" valign="top" width="50%">文件后缀名</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">JPEG</td>         <td class="cellrowborder" valign="top" width="50%">.jpg</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">PNG</td>         <td class="cellrowborder" valign="top" width="50%">.png</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">GIF</td>         <td class="cellrowborder" valign="top" width="50%">.gif</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">SVG</td>         <td class="cellrowborder" valign="top" width="50%">.svg</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">WEBP</td>         <td class="cellrowborder" valign="top" width="50%">.webp</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">BMP</td>         <td class="cellrowborder" valign="top" width="50%">.bmp</td>        </tr>             </tbody></table></div>     </div>     <p>表4 音视频资源类型说明</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" valign="top" width="50%">格式</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" valign="top" width="50%">支持的文件类型</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">H.264 AVC</td>         <td class="cellrowborder" valign="top" width="50%">.3gp</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">Baseline Profile (BP)</td>         <td class="cellrowborder" valign="top" width="50%">.mp4</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="限定词目录">限定词目录<i class="anchor-icon anchor-icon-link" anchorid="限定词目录" tips="复制节点链接"></i></h3>          <p>限定词目录由一个或多个表征应用场景或设备特征的限定词组合而成，限定词包括移动国家码和移动网络码、语言、文字、国家或地区、横竖屏、设备类型、颜色模式和屏幕密度，限定词之间通过下划线（_）或者中划线（-）连接。开发者在创建限定词目录时，需要遵守如下限定词目录命名规则。</p>     <ul>      <li>       <p>限定词的组合顺序：移动国家码_移动网络码-语言_文字_国家或地区-横竖屏-设备类型-颜色模式-屏幕密度。开发者可以根据应用的使用场景和设备特征，选择其中的一类或几类限定词组成目录名称。</p></li>      <li>       <p>限定词的连接方式：移动国家码和移动网络码之间采用下划线（_）连接，语言、文字、国家或地区之间也采用下划线（_）连接，除此之外的其他限定词之间均采用中划线（-）连接。例如：<strong>mcc460_mnc00-zh_Hant_CN</strong>、<strong>zh_CN-car-ldpi</strong>。</p></li>      <li>       <p>限定词的取值范围：每类限定词的取值必须符合限定词取值要求表中的条件，如表5。否则，将无法匹配目录中的资源文件。</p></li>     </ul>     <p>表5 限定词取值要求</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.3.1.1" valign="top" width="50%">限定词类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.3.1.2" valign="top" width="50%">含义与取值说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">移动国家码和移动网络码</td>         <td class="cellrowborder" valign="top" width="50%">          <p>移动国家码（MCC）和移动网络码（MNC）的值取自设备注册的网络。</p>          <p>MCC可与MNC合并使用，使用下划线（_）连接，也可以单独使用。例如：mcc460表示中国，mcc460_mnc00表示中国_中国移动。</p>          <p>详细取值范围，请查阅<a href="https://www.itu.int/rec/T-REC-E.212" target="_blank"><strong>ITU-T E.212</strong></a>（国际电联相关标准）。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">语言</td>         <td class="cellrowborder" valign="top" width="50%">          <p>表示设备使用的语言类型，由2~3个小写字母组成。例如：zh表示中文，en表示英语，mai表示迈蒂利语。</p>          <p>详细取值范围，请查阅<a href="https://www.iso.org/iso-639-language-code" target="_blank"><strong>ISO 639</strong></a>（ISO制定的语言编码标准）。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">文字</td>         <td class="cellrowborder" valign="top" width="50%">          <p>表示设备使用的文字类型，由1个大写字母（首字母）和3个小写字母组成。例如：Hans表示简体中文，Hant表示繁体中文。</p>          <p>详细取值范围，请查阅<a href="https://www.iso.org/standard/81905.html" target="_blank"><strong>ISO 15924</strong></a>（ISO制定的文字编码标准）。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">国家或地区</td>         <td class="cellrowborder" valign="top" width="50%">          <p>表示用户所在的国家或地区，由2~3个大写字母或者3个数字组成。例如：CN表示中国，GB表示英国。</p>          <p>详细取值范围，请查阅<a href="https://www.iso.org/iso-3166-country-codes.html" target="_blank"><strong>ISO 3166-1</strong></a>（ISO制定的国家和地区编码标准）。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">横竖屏</td>         <td class="cellrowborder" valign="top" width="50%">          <p>表示设备的屏幕方向，取值如下：</p>          <p>- vertical：竖屏</p>          <p>- horizontal：横屏</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">设备类型</td>         <td class="cellrowborder" valign="top" width="50%">          <p>表示设备的类型，取值如下：</p>          <p>- phone：手机</p>          <p>- car：车机</p>          <p>- tablet：平板</p>          <p>- tv：智慧屏</p>          <p>- wearable：智能穿戴</p>          <p>- 2in1：PC设备</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">颜色模式</td>         <td class="cellrowborder" valign="top" width="50%">          <p>表示设备的颜色模式，取值如下：</p>          <p>- dark：深色模式</p>          <p>- light：浅色模式</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">屏幕密度</td>         <td class="cellrowborder" valign="top" width="50%">          <p>表示设备的屏幕密度（单位为dpi），取值如下：</p>          <p>- sdpi：表示小规模的屏幕密度（Small-scale Dots Per Inch），适用于dpi取值为(0, 120]的设备。</p>          <p>- mdpi：表示中规模的屏幕密度（Medium-scale Dots Per Inch），适用于dpi取值为(120, 160]的设备。</p>          <p>- ldpi：表示大规模的屏幕密度（Large-scale Dots Per Inch），适用于dpi取值为(160, 240]的设备。</p>          <p>- xldpi：表示特大规模的屏幕密度（Extra Large-scale Dots Per Inch），适用于dpi取值为(240, 320]的设备。</p>          <p>- xxldpi：表示超大规模的屏幕密度（Extra Extra Large-scale Dots Per Inch），适用于dpi取值为(320, 480]的设备。</p>          <p>- xxxldpi：表示超特大规模的屏幕密度（Extra Extra Extra Large-scale Dots Per Inch），适用于dpi取值为(480, 640]的设备。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="资源文件示例">资源文件示例<i class="anchor-icon anchor-icon-link" anchorid="资源文件示例" tips="复制节点链接"></i></h3>          <p>color.json文件的内容如下：</p>     <p>标准的十六进制颜色值由八位十六进制数字组成，前两位表示透明度，后六位表示颜色值。</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color_hello"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffff0000"</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color_world"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ff0000ff"</span></li><li>        <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p>float.json文件的内容如下：</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"float"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"font_hello"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"28.0fp"</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"font_world"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"20.0fp"</span></li><li>        <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p>string.json文件的内容如下：</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"string"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string_hello"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello"</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string_world"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"World"</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"message_arrive"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"We will arrive at %1$s."</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"message_notification"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello, %1$s!,You have %2$d new messages."</span></li><li>        <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p>plural.json文件的内容如下：</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"plural"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eat_apple"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>                <span class="hljs-punctuation">{</span></li><li>                    <span class="hljs-attr">"quantity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"one"</span><span class="hljs-punctuation">,</span></li><li>                    <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"%d apple"</span></li><li>                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>                <span class="hljs-punctuation">{</span></li><li>                    <span class="hljs-attr">"quantity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"other"</span><span class="hljs-punctuation">,</span></li><li>                    <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"%d apples"</span></li><li>                <span class="hljs-punctuation">}</span></li><li>            <span class="hljs-punctuation">]</span></li><li>        <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="创建资源目录和资源文件">创建资源目录和资源文件<i class="anchor-icon anchor-icon-link" anchorid="创建资源目录和资源文件" tips="复制节点链接"></i></h2>          <p>在resources目录下，可按照限定词目录命名规则和资源组目录支持的文件类型，创建资源目录和资源组目录，添加特定类型资源。DevEco Studio支持同时创建资源目录和资源文件，也支持单独创建资源目录或资源文件。</p>    </div>    <div class="tiledSection">     <h3 id="创建资源目录和资源文件-1" class="firsth2">创建资源目录和资源文件<i class="anchor-icon anchor-icon-link" anchorid="创建资源目录和资源文件-1" tips="复制节点链接"></i></h3>          <p>在resources目录右键菜单选择“New &gt; Resource File”，可同时创建资源目录和资源文件，文件默认创建在base目录的对应资源组中。如果选择了限定词，则会按照命名规范自动生成限定词和资源组目录，并将文件创建在限定词目录中。</p>     <p>不同类型的限定词可以组合，如同时选择Locale为zh_CN，ColorMode为Dark，将创建zh_CN-dark目录，具体组合规则参考<a href="/consumer/cn/doc/harmonyos-guides/resource-categories-and-access#限定词目录">限定词目录</a>。</p>     <p>图中File name为需要创建的文件名。Resource type为资源组类型，默认是element。Root Element为资源类型。Available qualifiers为供选择的限定词目录，通过右边的小箭头可添加或者删除。</p>     <p>创建的目录名自动生成，格式固定为“限定词.资源组”，例如：创建一个限定词为dark的element目录，自动生成的目录名称为“dark/element”。</p>     <p><span><img originheight="621" originwidth="870" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114341.41905524391013685161870434114496:50001231000000:2800:87AB8B3F4F94F9F8A3CDFC687DA17B3244E381E803F4CD20653E6DEB47CE8A70.png" width="870" height="621"></span></p>    </div>    <div class="tiledSection">     <h3 id="创建资源目录">创建资源目录<i class="anchor-icon anchor-icon-link" anchorid="创建资源目录" tips="复制节点链接"></i></h3>          <p>在resources目录右键菜单选择“New &gt; Resource Directory”，可创建资源目录，默认创建的是base目录。如果选择了限定词，则会按照命名规范自动生成限定词和资源组目录。确定限定词后，选择资源组类型，当前资源组类型支持Element、Media、Profile三种，创建后生成资源目录。</p>     <p><span><img originheight="533" originwidth="827" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114341.23997185667129641632570768383676:50001231000000:2800:492713D395C541414F939D3B170D374CC71CD271A23971399366B8D2943873F4.png" width="827" height="533"></span></p>    </div>    <div class="tiledSection">     <h3 id="创建资源文件">创建资源文件<i class="anchor-icon anchor-icon-link" anchorid="创建资源文件" tips="复制节点链接"></i></h3>          <p>在资源组目录（element、media、profile）的右键菜单选择“New &gt; XXX Resource File”，可创建对应资源组目录的资源文件。例如，在element目录下可新建Element Resource File。</p>     <p><span><img originheight="395" originwidth="624" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114341.23514042042717724519940358276978:50001231000000:2800:0A12AB7C0E662B0CF39AC7D01BFC97D71187B8128E8C49832F1966FDB467DCBE.png" width="624" height="395"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例">示例<i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h3>          <p>以创建中文和英文字符串资源文件为例，说明如何创建不同限定词的资源。</p>     <ol>      <li>       <p>在resources目录右键菜单选择“New &gt; Resource File”，File name填写为string_sample，Resource type选择Element，Root Element选择string，Available qualifiers选中Locale，在右侧的语言列表中选择zh，地区列表中选择CN，将会在resources目录下创建zh_CN/element/string_sample.json文件。</p>       <p><span><img originheight="579" originwidth="880" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114342.39592456899116281170629857387627:50001231000000:2800:6C8A46BB9FCBD65539B8B9AEA060DFB43546648728EF07F8B565CD193C94B096.png" width="880" height="579"></span></p></li>      <li>       <p>同理，语言选择en，地区选择US，创建en_US/element/string_sample.json文件。</p></li>     </ol>     <p>最终创建的资源文件如下。资源文件创建完成后，如何访问资源文件请参见<a href="/consumer/cn/doc/harmonyos-guides/resource-categories-and-access#资源访问">资源访问</a>。</p>     <p><span><img originheight="666" originwidth="1920" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114342.93886860242885284606237570268224:50001231000000:2800:9255238B3AAAD6AC696D0224DBA1302D36E6EABCCBF48C1F804748D850550287.png" width="920" height="319.125"></span></p>    </div>    <div class="tiledSection">     <h2 id="资源可翻译特性">资源可翻译特性<i class="anchor-icon anchor-icon-link" anchorid="资源可翻译特性" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="功能介绍" class="firsth2">功能介绍<i class="anchor-icon anchor-icon-link" anchorid="功能介绍" tips="复制节点链接"></i></h3>          <p>当应用引用的字符串资源需要支持国际化多语言翻译时，可使用attr属性标记字符串翻译范围和翻译状态。attr属性不参与资源编译，只标记字符串是否翻译。</p>     <p>未配置attr属性时，默认需要翻译。</p>     <p><strong>attr支持属性</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.1" valign="top" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.2" valign="top" width="33.33333333333333%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.3" valign="top" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">translatable</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">boolean</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标记字符串是否需要翻译。</p>          <p>true：需要翻译。</p>          <p>false：不需要翻译。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">priority</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">string</td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标记字符串翻译状态。</p>          <p>code：未翻译。</p>          <p>translate：翻译未验证。</p>          <p>LT：翻译已验证。</p>          <p>customer：用户定制字符串。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="使用约束">使用约束<i class="anchor-icon anchor-icon-link" anchorid="使用约束" tips="复制节点链接"></i></h3>          <p>可翻译特性使能范围：base目录下string、strarray、plural类型资源。</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="text prettyprint linenums hljs language-plaintext" hw-language="text" data-highlighted="yes"><ol class="linenums"><li>resources</li><li>|---base</li><li>|   |---element</li><li>|   |   |---string.json</li><li>|   |   |---strarray.json</li><li>|   |   |---plural.json</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="示例-1">示例<i class="anchor-icon anchor-icon-link" anchorid="示例-1" tips="复制节点链接"></i></h3>          <p>string资源配置attr属性示例如下，其中string1字符串被标记为不需要翻译，string2字符串被标记为需要翻译且翻译已验证。</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"string"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string1"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"attr"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"translatable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string2"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello world!"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"attr"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"translatable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LT"</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="资源访问">资源访问<i class="anchor-icon anchor-icon-link" anchorid="资源访问" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="单hap包应用资源" class="firsth2">单HAP包应用资源<i class="anchor-icon anchor-icon-link" anchorid="单hap包应用资源" tips="复制节点链接"></i></h3>          <ul>      <li>       <p>通过$r或$rawfile访问资源。</p>       <p>对于color、float、string、plural、media、profile等类型的资源，通过$r('app.type.name')形式访问。其中，app为resources目录中定义的资源，type为资源类型，name为资源名，由开发者定义资源时确定。</p>       <p>对于string.json中使用多个占位符的情况，例如资源值value中存在%1$s和%2$d两个占位符，需要通过$r('app.string.label', 'aaa', 444)形式访问。其中label为资源名称name，'aaa'和444用来替代占位符。</p>       <p>对于rawfile目录资源，通过$rawfile('filename')形式访问。其中，filename为rawfile目录下文件的相对路径，文件名需要包含后缀，路径开头不可以"/"开头。</p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>rawfile的native的访问方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/rawfile-guidelines">Rawfile开发指导</a>。</p>        </div></div></div></li>     </ul>     <p><a href="/consumer/cn/doc/harmonyos-guides/resource-categories-and-access#资源文件示例">资源文件示例</a>中显示了.json文件内容，包含color.json、string.json和plural.json，访问应用资源时需先了解.json文件的使用规范。</p>     <p>资源的具体使用方法如下：</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li>  <span class="hljs-comment">//通过$r('app.type.name')访问</span></li><li>  <span class="hljs-title class_">Text</span>($r(<span class="hljs-string">'app.string.string_hello'</span>))</li><li>  .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.color_emphasize'</span>))</li><li>  .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'app.float.text_size_headline1'</span>))</li><li>  .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'app.string.font_family_medium'</span>))</li><li>  .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.color_palette_aux1'</span>))</li><li>
</li><li>  <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.app_icon'</span>))</li><li>  .<span class="hljs-title function_">border</span>({</li><li>    <span class="hljs-attr">color</span>: $r(<span class="hljs-string">'app.color.color_palette_aux1'</span>),</li><li>    <span class="hljs-attr">radius</span>: $r(<span class="hljs-string">'app.float.corner_radius_button'</span>), <span class="hljs-attr">width</span>: <span class="hljs-number">2</span></li><li>  })</li><li>  .<span class="hljs-title function_">margin</span>({</li><li>    <span class="hljs-attr">top</span>: $r(<span class="hljs-string">'app.float.elements_margin_horizontal_m'</span>),</li><li>    <span class="hljs-attr">bottom</span>: $r(<span class="hljs-string">'app.float.elements_margin_horizontal_l'</span>)</li><li>  })</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>
</li><li>  <span class="hljs-comment">// 对于string.json中name为"message_notification"，value为"Hello, %1$s!,You have %2$d new messages."</span></li><li>  <span class="hljs-comment">// 该资源存在%1$s、%2$d两个占位符，需要替代为'LiHua'、2，则采用如下方式访问</span></li><li>  <span class="hljs-title class_">Text</span>($r(<span class="hljs-string">'app.string.message_notification'</span>, <span class="hljs-string">'LiHua'</span>, <span class="hljs-number">2</span>))</li><li>  <span class="hljs-comment">// 对于plural.json中name为"eat_apple"，单数的value为"%d apple"，复数的value为"%d apples"</span></li><li>  <span class="hljs-comment">// 访问plural.json资源，第一个参数控制字符串显示单数形式或复数形式，传递1表示单数，大于1表示复数，且在中文环境下始终为复数</span></li><li>  <span class="hljs-comment">// 该资源存在%d一个占位符，需要替代为2，则采用如下方式访问</span></li><li>  <span class="hljs-title class_">Text</span>($r(<span class="hljs-string">'app.plural.eat_apple'</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>))</li></ol></pre></div></div>     <ul>      <li>       <p>通过本应用上下文获取ResourceManager后，可调用不同<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager" target="_blank">资源管理接口</a>通过资源ID值或资源名称访问各类资源。例如：</p>       <p>getContext().resourceManager.getStringByNameSync('test')可获取字符串资源。</p>       <p>getContext().resourceManager.getRawFd('rawfilepath')可获取Rawfile所在hap包的descriptor信息，访问rawfile文件时需{fd, offset, length}一起使用。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="跨haphsp包应用资源">跨HAP/HSP包应用资源<i class="anchor-icon anchor-icon-link" anchorid="跨haphsp包应用资源" tips="复制节点链接"></i></h3>          <p><strong>bundle相同，跨module访问</strong></p>     <ul>      <li>       <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-application#applicationcreatemodulecontext12" target="_blank">createModuleContext(context, moduleName)</a>接口创建同应用中不同module的上下文，获取resourceManager对象后，调用不同<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager" target="_blank">资源管理接口</a>通过资源ID值或资源名称访问各类资源。</p></li>      <li>       <p>通过$r或$rawfile访问资源。具体操作如下：</p>       <p>1.在entry的oh-package.json5文件中添加依赖。如"dependencies": {"library": "file:../library"}。</p>       <p><span><img originheight="283" originwidth="593" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114342.88871240154883195398675126073075:50001231000000:2800:6F830D0BEFE7C172C6AB73EA6FC7A05EC4CB2CD3110C8317A9C1392EC88A66AF.png" width="593" height="283"></span></p>       <p>2.使用字面量[模块名].type.name或变量获取资源。其中，模块名为hsp模块的名称，type为资源类型，name为资源名称，示例如下：</p>       <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-meta">@Entry</span></li><li> <span class="hljs-meta">@Component</span></li><li> struct <span class="hljs-title class_">Index</span> {</li><li>   <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[hsp].string.test_string'</span>;</li><li>   <span class="hljs-attr">fontSize</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[hsp].float.font_size'</span>;</li><li>   <span class="hljs-attr">fontColor</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[hsp].color.font_color'</span>;</li><li>   <span class="hljs-attr">image</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[hsp].media.string'</span>;</li><li>   <span class="hljs-attr">rawfile</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'[hsp].icon.png'</span>;</li><li>
</li><li>   <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>     <span class="hljs-title class_">Row</span>() {</li><li>       <span class="hljs-comment">// 使用字面量[模块名].type.name获取资源</span></li><li>       <span class="hljs-title class_">Text</span>($r(<span class="hljs-string">'[hsp].string.test_string'</span>))</li><li>         .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'[hsp].float.font_size'</span>))</li><li>         .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'[hsp].color.font_color'</span>))</li><li>       <span class="hljs-title class_">Image</span>($rawfile(<span class="hljs-string">'[hsp].icon.png'</span>))</li><li>
</li><li>       <span class="hljs-comment">// 使用变量获取资源</span></li><li>       <span class="hljs-title class_">Text</span>($r(<span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>))</li><li>         .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fontSize</span>))</li><li>         .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fontColor</span>))</li><li>
</li><li>       <span class="hljs-title class_">Image</span>($r(<span class="hljs-variable language_">this</span>.<span class="hljs-property">image</span>))</li><li>
</li><li>       <span class="hljs-title class_">Image</span>($rawfile(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rawfile</span>))</li><li>     }</li><li>   }</li><li> }</li></ol></pre></div></div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>hsp包名必须写在[]内，rawfile下有多层目录，需要从rawfile下面第一个目录开始写，如$rawfile('[hsp].oneDir/twoDir/icon.png')，使用$r和$rawfile跨包访问HSP包资源无法提供编译时的资源校验，需要开发者自行保证使用资源存在于对应包中。</p>        </div></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="系统资源">系统资源<i class="anchor-icon anchor-icon-link" anchorid="系统资源" tips="复制节点链接"></i></h3>          <p>开发者可以通过<a href="https://developer.huawei.com/consumer/cn/design/harmonyos-symbol/" target="_blank">主题图标库</a>获取系统symbol图标资源信息、通过<a href="https://gitcode.com/openharmony/docs/blob/master/zh-cn/design/ux-design/design-resources.md" target="_blank">系统资源分层设计表</a>获取系统颜色、间距、圆角等资源信息。此外，系统颜色资源还可以通过<a href="https://developer.huawei.com/consumer/cn/doc/design-guides/color-0000001776857164#section17672143841113" target="_blank">系统色彩全量表</a>获取，系统色彩全量表与系统资源分层设计表内的资源不重合，均为推荐使用的系统颜色资源。</p>     <p>获取的symbol图标资源可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-symbolglyph" target="_blank">SymbolGlyph</a>对图标颜色等进一步设置。</p>     <p>对于系统资源，可以通过$r('sys.type.name')的形式访问。其中，sys表示系统资源，type为资源类型，取值包括“color”、“float”、“string”、“media”、“symbol”，name为资源名称。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>上述表格中未列出的其他系统资源均为系统组件和底层能力参数，推荐开发者优先使用上述表格中提供的系统资源。</p></li>        <li>         <p>对于系统预置应用，建议使用系统资源；对于三方应用，可以根据需要选择使用系统资源或自定义应用资源。</p></li>        <li>         <p>仅声明式开发范式支持使用系统资源。</p></li>        <li>         <p>当前，界面显示时默认使用的系统字体是鸿蒙黑体（HarmonyOS Sans），支持的字符范围是<a href="https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=A1931A578FE14957104988029B0833D3" target="_blank">中文编码字符集GB18030-2022（级别一/级别二）</a>。若要显示的字符不在鸿蒙黑体支持的字符范围内，系统会在其他支持该字符的字体中选择优先级最高的字体用来显示。关于系统字体的优先级顺序，可以查看设备上的配置文件system/etc/fontconfig.json。</p></li>       </ul>      </div></div></div>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello'</span>)</li><li>  .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_emphasize'</span>))</li><li>  .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_headline1'</span>))</li><li>  .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_medium'</span>))</li><li>  .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_palette_aux1'</span>))</li><li>
</li><li><span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'sys.media.ohos_app_icon'</span>))</li><li>  .<span class="hljs-title function_">border</span>({</li><li>    <span class="hljs-attr">color</span>: $r(<span class="hljs-string">'sys.color.ohos_id_color_palette_aux1'</span>),</li><li>    <span class="hljs-attr">radius</span>: $r(<span class="hljs-string">'sys.float.ohos_id_corner_radius_button'</span>), <span class="hljs-attr">width</span>: <span class="hljs-number">2</span></li><li>  })</li><li>  .<span class="hljs-title function_">margin</span>({</li><li>    <span class="hljs-attr">top</span>: $r(<span class="hljs-string">'sys.float.ohos_id_elements_margin_horizontal_m'</span>),</li><li>    <span class="hljs-attr">bottom</span>: $r(<span class="hljs-string">'sys.float.ohos_id_elements_margin_horizontal_l'</span>)</li><li>  })</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="资源匹配">资源匹配<i class="anchor-icon anchor-icon-link" anchorid="资源匹配" tips="复制节点链接"></i></h2>          <p>应用使用某资源时，系统会根据当前设备状态优先从相匹配的限定词目录中寻找该资源。只有当resources目录中没有与设备状态匹配的限定词目录，或者在限定词目录中找不到该资源时，才会去base目录中查找。rawfile和resfile是原始文件目录，不会根据设备状态去匹配资源。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>在编译构建时，AppScope目录下的资源文件会合入到模块下面的资源文件中，如果两个目录下的相同资源目录和资源组目录下存在重名资源，编译打包后只会保留AppScope目录下的资源。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="限定词目录与设备状态的匹配规则" class="firsth2">限定词目录与设备状态的匹配规则<i class="anchor-icon anchor-icon-link" anchorid="限定词目录与设备状态的匹配规则" tips="复制节点链接"></i></h3>          <ul>      <li>       <p>在为设备匹配对应的资源文件时，限定词目录匹配的优先级从高到低依次为：移动国家码和移动网络码 &gt; 区域（可选组合：语言、语言_文字、语言_国家或地区、语言_文字_国家或地区）&gt; 横竖屏 &gt; 设备类型 &gt; 颜色模式 &gt; 屏幕密度。</p></li>      <li>       <p>如果限定词目录中包含移动国家码和移动网络码、语言、文字、横竖屏、设备类型、颜色模式限定词，则对应限定词的取值必须与当前的设备状态完全一致，该目录才能够参与设备的资源匹配。例如，限定词目录zh_CN-car-ldpi不能参与en_US设备的资源匹配。</p></li>      <li>       <p>如果存在多个屏幕密度限定词目录，则优先向上匹配最接近的屏幕密度限定词目录，否则向下匹配最为接近的屏幕密度限定词目录。例如，假设存在限定词目录xldpi和xxldpi，设备屏幕密度为xxldpi，则会匹配xxldpi限定词目录。</p></li>     </ul>     <p>关于应用界面加载资源的更多规则，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/i18n-l10n">国际化和本地化</a>文档。</p>    </div>    <div class="tiledSection">     <h3 id="获取指定配置的资源">获取指定配置的资源<i class="anchor-icon anchor-icon-link" anchorid="获取指定配置的资源" tips="复制节点链接"></i></h3>          <p><strong>基本概念</strong></p>     <p>开发者可以在工程的resources目录下添加限定词目录，满足多语言、深浅色模式等不同类型的系统设置。然而，在获取资源时，由于限定词目录匹配规则，只能筛选出最匹配的资源，无法获取其它目录资源。</p>     <p>应用如果有获取指定配置的资源的诉求，可以通过以下方法进行获取。</p>     <p><strong>接口说明</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.3.1.1" valign="top" width="50%">接口名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#getoverrideresourcemanager12" target="_blank">getOverrideResourceManager</a>(configuration?: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#configuration" target="_blank">Configuration</a>) : <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#resourcemanager" target="_blank">ResourceManager</a></td>         <td class="cellrowborder" valign="top" width="50%">获取可以加载指定配置的资源的资源管理对象，使用同步方式返回。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#getoverrideconfiguration12" target="_blank">getOverrideConfiguration</a>() : <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#configuration" target="_blank">Configuration</a></td>         <td class="cellrowborder" valign="top" width="50%">获取指定的配置，使用同步方式返回。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#updateoverrideconfiguration12" target="_blank">updateOverrideConfiguration</a>(configuration: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#configuration" target="_blank">Configuration</a>) : void</td>         <td class="cellrowborder" valign="top" width="50%">更新指定的配置。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong></p>     <p>以获取非当前系统语言的资源为例，说明如何获取指定配置的资源。假设工程中定义了中文、英文、日文的同名资源如下：</p>     <ul>      <li>entry/src/main/resources/zh_CN/element/string.json</li>     </ul>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"string"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"greetings"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"你好，世界"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <ul>      <li>entry/src/main/resources/en_US/element/string.json</li>     </ul>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"string"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"greetings"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello, world"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <ul>      <li>entry/src/main/resources/ja_JP/element/string.json</li>     </ul>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"string"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"greetings"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"こんにちは、世界"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p>在Index.ets中，分别获取三种语言的资源并显示在文本框中，运行设备当前系统语言为中文，entry/src/main/ets/pages/Index.ets的代码如下：</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">englishString</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">japaneseString</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-title function_">getString</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">let</span> resMgr = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-keyword">if</span> (!resMgr) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">currentLanguageString</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> resId = $r(<span class="hljs-string">'app.string.greetings'</span>).<span class="hljs-property">id</span>;</li><li>
</li><li>      <span class="hljs-comment">//获取符合当前系统语言地区、颜色模式、分辨率等配置的资源</span></li><li>      currentLanguageString = resMgr.<span class="hljs-title function_">getStringSync</span>(resId);</li><li>
</li><li>      <span class="hljs-comment">//获取符合当前系统颜色模式、分辨率等配置的英文资源</span></li><li>      <span class="hljs-keyword">let</span> overrideConfig = resMgr.<span class="hljs-title function_">getOverrideConfiguration</span>();</li><li>      overrideConfig.<span class="hljs-property">locale</span> = <span class="hljs-string">"en_US"</span>; <span class="hljs-comment">//指定资源的语言为英语，地区为美国</span></li><li>      <span class="hljs-keyword">let</span> overrideResMgr = resMgr.<span class="hljs-title function_">getOverrideResourceManager</span>(overrideConfig);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">englishString</span> = overrideResMgr.<span class="hljs-title function_">getStringSync</span>(resId);</li><li>
</li><li>      <span class="hljs-comment">//获取符合当前系统颜色模式、分辨率等配置的日文资源</span></li><li>      overrideConfig.<span class="hljs-property">locale</span> = <span class="hljs-string">"ja_JP"</span>; <span class="hljs-comment">//指定资源的语言为日文，地区为日本</span></li><li>      overrideResMgr.<span class="hljs-title function_">updateOverrideConfiguration</span>(overrideConfig); <span class="hljs-comment">//等效于resMgr.updateOverrideConfiguration(overrideConfig)</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">japaneseString</span> = overrideResMgr.<span class="hljs-title function_">getStringSync</span>(resId);</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">const</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>      <span class="hljs-keyword">const</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get override resource failed, error code: <span class="hljs-subst">${code}</span>, error msg: <span class="hljs-subst">${message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> currentLanguageString;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getString</span>())</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">englishString</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">japaneseString</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="overlay机制">overlay机制<i class="anchor-icon anchor-icon-link" anchorid="overlay机制" tips="复制节点链接"></i></h2>          <p>overlay是一种资源替换机制，针对不同品牌、产品的显示风格，开发者可以在不重新打包HAP的情况下，通过配置和使用overlay资源包，实现应用界面风格变换。overlay资源包只包含资源文件、资源索引文件和配置文件。</p>    </div>    <div class="tiledSection">     <h3 id="动态overlay使用方式" class="firsth2">动态overlay使用方式<i class="anchor-icon anchor-icon-link" anchorid="动态overlay使用方式" tips="复制节点链接"></i></h3>          <ol>      <li>对应的overlay资源包需要放在对应应用安装路径下。如应用com.example.overlay的安装路径为data/app/el1/bundle/public/com.example.overlay/。</li>      <li>应用通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#addresource10" target="_blank">addResource(path)</a>，实现资源覆盖；通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#removeresource10" target="_blank">removeResource(path)</a>，实现overlay删除。overlay资源路径需经过元能力的getContext().bundleCodeDir获取此应用对应的沙箱根目录，由应用的沙箱根目录与overlay资源包名称拼接而成。如：let path = getContext().bundleCodeDir + "overlay资源包名称"，其对应沙箱路径为/data/storage/el1/bundle/overlay资源包名称。</li>     </ol>    </div>    <div class="tiledSection">     <h3 id="静态overlay配置方式">静态overlay配置方式<i class="anchor-icon anchor-icon-link" anchorid="静态overlay配置方式" tips="复制节点链接"></i></h3>          <p>该功能默认使能，使能及去使能请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-overlay" target="_blank">包管理接口</a>。</p>     <p>包内overlay资源包中的配置文件app.json5中支持的字段：</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"app"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"bundleName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.example.myapplication.overlay"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"vendor"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"example"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"versionCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1000000"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"versionName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0.1"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$media:app_icon"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$string:app_name"</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p>包内overlay资源包中的配置文件module.json5中支持的字段：</p>     <div _ngcontent-kic-c106="" class="highlight-div"><div _ngcontent-kic-c106="" class="highlight-div-header"><div _ngcontent-kic-c106="" class="highlight-div-header-left"><div _ngcontent-kic-c106="" class="handle-button expand-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kic-c106="" class="highlight-div-header-right"><div _ngcontent-kic-c106="" class="handle-button ai-button"></div><div _ngcontent-kic-c106="" class="handle-button line-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kic-c106="" class="handle-button theme-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kic-c106="" class="handle-button copy-button"><div _ngcontent-kic-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kic-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry_overlay_module_name"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"shared"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$string:entry_overlay_desc"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"deviceTypes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-string">"default"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-string">"tablet"</span></li><li>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"deliverywithInstall"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"targetModuleName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry_module_name"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"targetPriority"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>targetModuleName: 字符串类型，指定要overlay的应用中的目标module。</p></li>        <li>         <p>targetPriority： 整数类型，指定overlay优先级。</p></li>        <li>         <p>不支持Ability、ExtensionAbility、Permission等其他字段的配置。</p></li>        <li>         <p>overlay不支持json类型的图片配置。</p></li>       </ul>      </div></div></div>     <p>在DevEco Studio中创建应用工程时，module的配置文件module.json5中包含targetModuleName和targetPriority字段时，该module将会在安装阶段被识别为overlay特征的module。overlay特征的module一般是为设备上存在的非overlay特征的module提供覆盖的资源文件，以便于targetModuleName指向的module在运行阶段可以使用overlay资源文件展示不同的颜色，标签，主题等等。</p>    </div>   </div></div>