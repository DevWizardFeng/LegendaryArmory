<h1 _ngcontent-wxy-c119="" class="doc-title ng-star-inserted" title="通过API异步获取系统信息属性"> 通过API异步获取系统信息属性 </h1>

<div _ngcontent-wxy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section11499142413313">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section11499142413313" tips="复制节点链接"></i></h2><p>Scenario Fusion Kit提供获取系统信息属性API，调用该接口可以获取设备、网络状态、屏幕、语言、主题等系统信息属性。</p> </div> <div class="tiledSection"><h2 id="section48851060459">约束和限制<i class="anchor-icon anchor-icon-link" anchorid="section48851060459" tips="复制节点链接"></i></h2><p>场景化API支持Phone、Tablet和2in1设备，并且从5.1.0(18)版本开始，新增支持Wearable和TV设备。</p> </div> <div class="tiledSection"><h2 id="section9316122131317">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section9316122131317" tips="复制节点链接"></i></h2><p>以下是使用Promise异步回调获取系统信息属性的接口说明，更多接口及使用方法请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice" target="_blank">atomicService（融合场景化API）</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="53.72%"><p>接口名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="46.28%"><p>描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="53.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section17779133174510" target="_blank">getSystemInfo</a>(properties?: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section994220537517" target="_blank">SystemInfoType</a>&gt;): Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section6926144111527" target="_blank">SystemInfo</a>&gt;</p> </td> <td class="cellrowborder" valign="top" width="46.28%"><p>获取系统信息属性的方法，支持获取设备、网络状态、屏幕、语言、主题等系统信息的请求对象，包含请求参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section75173341436">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section75173341436" tips="复制节点链接"></i></h2><ol><li><span>导入Scenario Fusion Kit模块以及相关公共模块。</span><p></p><div _ngcontent-wxy-c106="" class="highlight-div"><div _ngcontent-wxy-c106="" class="highlight-div-header"><div _ngcontent-wxy-c106="" class="highlight-div-header-left"><div _ngcontent-wxy-c106="" class="handle-button expand-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wxy-c106="" class="highlight-div-header-right"><div _ngcontent-wxy-c106="" class="handle-button ai-button"></div><div _ngcontent-wxy-c106="" class="handle-button line-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wxy-c106="" class="handle-button theme-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wxy-c106="" class="handle-button copy-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wxy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { atomicService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScenarioFusionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li></ol></pre></div></div> <p></p></li><li><span>传入属性参数，调用接口获取对应属性值，代码如下：</span><p></p><div _ngcontent-wxy-c106="" class="highlight-div"><div _ngcontent-wxy-c106="" class="highlight-div-header"><div _ngcontent-wxy-c106="" class="highlight-div-header-left"><div _ngcontent-wxy-c106="" class="handle-button expand-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wxy-c106="" class="highlight-div-header-right"><div _ngcontent-wxy-c106="" class="handle-button ai-button"></div><div _ngcontent-wxy-c106="" class="handle-button line-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wxy-c106="" class="handle-button theme-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wxy-c106="" class="handle-button copy-button"><div _ngcontent-wxy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wxy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">stateArray</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">atomicService</span>.<span class="hljs-title class_">SystemInfoType</span>&gt; =</li><li>  [<span class="hljs-string">'brand'</span>, <span class="hljs-string">'deviceModel'</span>, <span class="hljs-string">'screenWidth'</span>, <span class="hljs-string">'screenHeight'</span>, <span class="hljs-string">'statusBarHeight'</span>, <span class="hljs-string">'screenSafeArea'</span>, <span class="hljs-string">'language'</span>, <span class="hljs-string">'osFullName'</span>,</li><li>    <span class="hljs-string">'fontSizeSetting'</span>, <span class="hljs-string">'sdkApiVersion'</span>, <span class="hljs-string">'bluetoothEnabled'</span>, <span class="hljs-string">'wifiEnabled'</span>, <span class="hljs-string">'locationEnabled'</span>, <span class="hljs-string">'deviceOrientation'</span>,</li><li>    <span class="hljs-string">'theme'</span>, <span class="hljs-string">'windowWidth'</span>, <span class="hljs-string">'windowHeight'</span>];</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">atomicService</span>.<span class="hljs-title function_">getSystemInfo</span>(<span class="hljs-variable">stateArray</span>).<span class="hljs-title function_">then</span>((<span class="hljs-variable">data</span>: <span class="hljs-title class_">atomicService</span>.<span class="hljs-title class_">SystemInfo</span>) =&gt; {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'succeeded in getting system info asynchronously'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">brand</span>: <span class="hljs-title class_">string</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">brand</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">deviceModel</span>: <span class="hljs-title class_">string</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">deviceModel</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">screenWidth</span>: <span class="hljs-title class_">number</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">screenWidth</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">screenHeight</span>: <span class="hljs-title class_">number</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">screenHeight</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">statusBarHeight</span>: <span class="hljs-title class_">number</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">statusBarHeight</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">screenSafeArea</span>: <span class="hljs-title class_">window</span>.<span class="hljs-title class_">AvoidArea</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">screenSafeArea</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">language</span>: <span class="hljs-title class_">string</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">language</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">osFullName</span>: <span class="hljs-title class_">string</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">osFullName</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">fontSizeSetting</span>: <span class="hljs-title class_">number</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">fontSizeSetting</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">sdkApiVersion</span>: <span class="hljs-title class_">number</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">sdkApiVersion</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bluetoothEnabled</span>: <span class="hljs-title class_">boolean</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">bluetoothEnabled</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">wifiEnabled</span>: <span class="hljs-title class_">boolean</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">wifiEnabled</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">locationEnabled</span>: <span class="hljs-title class_">boolean</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">locationEnabled</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">deviceOrientation</span>: <span class="hljs-title class_">string</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">deviceOrientation</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">theme</span>: <span class="hljs-title class_">ColorMode</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">theme</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">windowWidth</span>: <span class="hljs-title class_">number</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">windowWidth</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">windowHeight</span>: <span class="hljs-title class_">number</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">data</span>.<span class="hljs-variable">windowHeight</span>;</li><li>  }).<span class="hljs-keyword">catch</span>((<span class="hljs-variable">error</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Promise error: %{public}d %{public}s'</span>, <span class="hljs-variable">error</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">error</span>.<span class="hljs-variable">message</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">error</span>) {</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'failReason: %{public}d %{public}s'</span>, <span class="hljs-variable">error</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">error</span>.<span class="hljs-variable">message</span>);</li><li>}</li></ol></pre></div></div> <p></p></li></ol> </div> </div> <div></div></div>