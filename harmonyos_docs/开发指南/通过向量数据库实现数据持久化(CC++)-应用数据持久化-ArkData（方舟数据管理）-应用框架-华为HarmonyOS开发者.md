<h1 _ngcontent-xux-c119="" class="doc-title ng-star-inserted" title="通过向量数据库实现数据持久化 (C/C++)"> 通过向量数据库实现数据持久化 (C/C++) </h1>

<div _ngcontent-xux-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="场景介绍">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="场景介绍" tips="复制节点链接"></i></h2>          <p>向量数据库是一种支持存储、管理和检索向量数据的数据库，也支持标量的关系型数据处理。数据类型"floatvector"用来存储数据向量化的结果，从而实现对这些数据的快速检索和相似性搜索‌。</p>     <p>从API version 18开始，支持通过向量数据库实现数据持久化。</p>    </div>    <div class="tiledSection">     <h2 id="基本概念">基本概念<i class="anchor-icon anchor-icon-link" anchorid="基本概念" tips="复制节点链接"></i></h2>          <ul>      <li><strong>结果集</strong>：指用户查询之后的结果集合，可以对数据进行访问。结果集提供了灵活的数据访问方式，可以更方便地拿到用户想要的数据。</li>      <li><strong>floatvector</strong>：该数据类型表示向量数据，例如[1.0, 3.0, 2.4, 5.1, 6.2, 11.7]。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="约束限制">约束限制<i class="anchor-icon anchor-icon-link" anchorid="约束限制" tips="复制节点链接"></i></h2>          <ul>      <li>       <p>系统默认日志方式是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-terminology#wal模式">WAL</a>（Write Ahead Log）模式，系统默认落盘方式是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-terminology#full模式">FULL模式</a>。</p></li>      <li>       <p>数据库中默认有4个读连接和1个写连接，线程获取到空闲读连接时，即可进行读取操作。当没有空闲读连接时，会创建新的读连接。</p></li>      <li>       <p>为保证数据的准确性，数据库同一时间只能支持一个写操作，并发的写操作会串行执行。</p></li>      <li>       <p>当应用被卸载完成后，设备上的相关数据库文件及临时文件会被自动清除。</p></li>      <li>       <p>为保证插入并读取数据成功，建议一条数据不要超过2M。超出该大小，插入成功，读取失败。</p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="规格限制">规格限制<i class="anchor-icon anchor-icon-link" anchorid="规格限制" tips="复制节点链接"></i></h2>          <p>详情见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-vector-store#规格限制">规格限制</a>。</p>    </div>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>详细的接口说明请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb" target="_blank">RDB</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.1" valign="top" width="50%">接口名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.3.1.2" valign="top" width="50%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="50%">int OH_Rdb_SetDbType(OH_Rdb_ConfigV2 *config, int dbType)</td>         <td class="cellrowborder" valign="top" width="50%">设置数据库类型。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">OH_Rdb_Store *OH_Rdb_CreateOrOpen(const OH_Rdb_ConfigV2 *config, int *errCode)</td>         <td class="cellrowborder" valign="top" width="50%">获得一个相关的OH_Rdb_Store实例(调用OH_Rdb_SetDbType设置dbType为RDB_CAYLEY)，操作向量数据库。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">int OH_Rdb_ExecuteV2(OH_Rdb_Store *store, const char *sql, const OH_Data_Values *args, OH_Data_Value **result)</td>         <td class="cellrowborder" valign="top" width="50%">执行有返回值的SQL语句，用来执行写操作，支持参数绑定，语句中的各种表达式和操作符之间的关系操作符号(例如=、&gt;、&lt;)不超过1000个。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">int OH_Rdb_ExecuteByTrxId(OH_Rdb_Store *store, int64_t trxId, const char *sql)</td>         <td class="cellrowborder" valign="top" width="50%">使用指定的事务ID执行无返回值的SQL语句，事务ID为0时不使用事务。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">OH_Cursor *OH_Rdb_ExecuteQuery(OH_Rdb_Store *store, const char *sql)</td>         <td class="cellrowborder" valign="top" width="50%">根据指定SQL语句查询数据库中的数据。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">OH_Cursor *OH_Rdb_ExecuteQueryV2(OH_Rdb_Store *store, const char *sql, const OH_Data_Values *args)</td>         <td class="cellrowborder" valign="top" width="50%">根据指定SQL语句查询数据库中的数据，支持参数绑定，语句中的各种表达式和操作符之间的关系操作符号(例如=、&gt;、&lt;)不超过1000个。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">int OH_Rdb_DeleteStoreV2(const OH_Rdb_ConfigV2 *config)</td>         <td class="cellrowborder" valign="top" width="50%">删除数据库。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">int OH_Cursor_GetFloatVectorCount(OH_Cursor *cursor, int32_t columnIndex, size_t *length)</td>         <td class="cellrowborder" valign="top" width="50%">获取当前行中指定列的浮点数数组大小。</td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="50%">int OH_Cursor_GetFloatVector(OH_Cursor *cursor, int32_t columnIndex, float *val, size_t inLen, size_t *outLen)</td>         <td class="cellrowborder" valign="top" width="50%">以浮点数数组的形式获取当前行中指定列的值，其中inLen不能小于实际的数组大小。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="开发步骤">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="开发步骤" tips="复制节点链接"></i></h2>          <p><strong>添加动态链接库</strong></p>     <p>CMakeLists.txt中添加以下lib。</p>     <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="txt prettyprint linenums hljs language-plaintext" hw-language="txt" data-highlighted="yes"><ol class="linenums"><li>libnative_rdb_ndk.z.so</li></ol></pre></div></div>     <p><strong>头文件</strong></p>     <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;database/data/oh_data_values.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;database/rdb/oh_cursor.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;database/rdb/relational_store.h&gt;</span></span></li></ol></pre></div></div>     <ol>      <li>       <p>判断当前系统是否支持向量数据库，若不支持，则表示当前系统不具备向量数据库能力。示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> numType = <span class="hljs-number">0</span>;</li><li><span class="hljs-comment">// 如果numType为2则支持向量数据库，为1则不支持向量数据库</span></li><li>OH_Rdb_GetSupportedDbType(&amp;numType);</li></ol></pre></div></div></li>      <li>       <p>当前系统支持向量数据库时，获取OH_Rdb_Store实例。示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建OH_Rdb_Config对象</span></li><li>OH_Rdb_ConfigV2 *config = OH_Rdb_CreateConfig();</li><li><span class="hljs-comment">// 该路径为应用沙箱路径</span></li><li>OH_Rdb_SetDatabaseDir(config, <span class="hljs-string">"xxx"</span>);</li><li><span class="hljs-comment">// 数据库文件名</span></li><li>OH_Rdb_SetStoreName(config, <span class="hljs-string">"rdb_vector_test.db"</span>);</li><li><span class="hljs-comment">// 应用包名</span></li><li>OH_Rdb_SetBundleName(config, <span class="hljs-string">"xxx"</span>);</li><li><span class="hljs-comment">// 数据库是否加密</span></li><li>OH_Rdb_SetEncrypted(config, <span class="hljs-literal">false</span>);</li><li><span class="hljs-comment">// 数据库文件安全等级</span></li><li>OH_Rdb_SetSecurityLevel(config,   OH_Rdb_SecurityLevel::S1);</li><li><span class="hljs-comment">// 数据库文件存放的安全区域</span></li><li>OH_Rdb_SetArea(config, RDB_SECURITY_AREA_EL1);</li><li><span class="hljs-comment">// 数据库类型</span></li><li>OH_Rdb_SetDbType(config, RDB_CAYLEY);</li><li>
</li><li><span class="hljs-comment">// 获取OH_Rdb_Store实例</span></li><li><span class="hljs-type">int</span> errCode = <span class="hljs-number">0</span>;</li><li>OH_Rdb_Store *store_ = OH_Rdb_CreateOrOpen(config, &amp;errCode);</li></ol></pre></div></div></li>      <li>       <p>获取到OH_Rdb_Store后，建表并插入数据。</p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>向量数据库没有显式的flush操作实现持久化，数据插入即保存在持久化文件。</p>        </div></div></div>       <p>示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">char</span> createTableSql[] = <span class="hljs-string">"CREATE TABLE test (id INTEGER PRIMARY KEY AUTOINCREMENT, data1 floatvector(2));"</span>;</li><li><span class="hljs-comment">// 执行建表语句</span></li><li>OH_Rdb_ExecuteByTrxId(store_, <span class="hljs-number">0</span>, createTableSql);</li><li>
</li><li><span class="hljs-comment">// 不使用参数绑定插入数据</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"INSERT INTO test (id, data1) VALUES (0, '[3.4, 4.5]');"</span>, nullptr, nullptr);</li><li><span class="hljs-comment">// 使用参数绑定插入数据</span></li><li>OH_Data_Values *values = OH_Values_Create();</li><li>OH_Values_PutInt(values, <span class="hljs-number">1</span>);</li><li><span class="hljs-type">float</span> test[] = { <span class="hljs-number">1.2</span>, <span class="hljs-number">2.3</span> };</li><li><span class="hljs-type">size_t</span> len = <span class="hljs-keyword">sizeof</span>(test) / <span class="hljs-keyword">sizeof</span>(test[<span class="hljs-number">0</span>]);</li><li>OH_Values_PutFloatVector(values, test, len);</li><li><span class="hljs-type">char</span> insertSql[] = <span class="hljs-string">"INSERT INTO test (id, data1)   VALUES (?, ?);"</span>;</li><li>OH_Rdb_ExecuteV2(store_, insertSql, values, nullptr);</li><li>OH_Values_Destroy(values);</li></ol></pre></div></div></li>      <li>       <p>获取到OH_Rdb_Store后，修改或删除数据。示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 不使用参数绑定修改数据</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"update test set data1 = '[5.1, 6.1]' where id = 0;"</span>, nullptr, nullptr);</li><li>
</li><li><span class="hljs-comment">// 使用参数绑定修改数据</span></li><li><span class="hljs-type">float</span> test1[<span class="hljs-number">2</span>] = { <span class="hljs-number">5.5</span>, <span class="hljs-number">6.6</span> };</li><li>OH_Data_Values *values1 = OH_Values_Create();</li><li>OH_Values_PutFloatVector(values1, test1, <span class="hljs-number">2</span>);</li><li>OH_Values_PutInt(values1, <span class="hljs-number">1</span>);</li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"update test set data1 = ? where id = ?"</span>, values1, nullptr);</li><li>OH_Values_Destroy(values1);</li><li>
</li><li><span class="hljs-comment">// 不使用参数绑定删除数据</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"delete from test where id = 0"</span>, nullptr, nullptr);</li><li>
</li><li><span class="hljs-comment">// 使用参数绑定删除数据</span></li><li>OH_Data_Values *values2 = OH_Values_Create();</li><li>OH_Values_PutInt(values2, <span class="hljs-number">1</span>);</li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"delete from test where id = ?"</span>, values2, nullptr);</li><li>OH_Values_Destroy(values2);</li></ol></pre></div></div></li>      <li>       <p>获取到OH_Rdb_Store后，查询数据。</p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>当应用完成查询数据操作，不再使用结果集（OH_Cursor）时，请及时调用destroy方法关闭结果集，释放系统为其分配的内存。</p>        </div></div></div>       <p>示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 不使用参数绑定查询数据</span></li><li>OH_Cursor *cursor = OH_Rdb_ExecuteQueryV2(store_, <span class="hljs-string">"select * from test where id = 1;"</span>, nullptr);</li><li><span class="hljs-keyword">if</span> (cursor == <span class="hljs-literal">NULL</span>) {</li><li>   OH_LOG_ERROR(LOG_APP, <span class="hljs-string">"Query failed."</span>);</li><li>   <span class="hljs-keyword">return</span>;</li><li>}</li><li><span class="hljs-type">int</span> rowCount = <span class="hljs-number">0</span>;</li><li>cursor-&gt;getRowCount(cursor, &amp;rowCount);</li><li>cursor-&gt;goToNextRow(cursor);</li><li><span class="hljs-type">size_t</span> count = <span class="hljs-number">0</span>;</li><li><span class="hljs-comment">// floatvector数组是第二列数据</span></li><li>OH_Cursor_GetFloatVectorCount(cursor, <span class="hljs-number">1</span>, &amp;count);</li><li><span class="hljs-type">float</span> test2[count];</li><li><span class="hljs-type">size_t</span> outLen;</li><li>OH_Cursor_GetFloatVector(cursor, <span class="hljs-number">1</span>, test2, count, &amp;outLen);</li><li>cursor-&gt;destroy(cursor);</li><li>
</li><li><span class="hljs-comment">// 使用参数绑定查询数据</span></li><li><span class="hljs-type">char</span> querySql[] = <span class="hljs-string">"select * from test where id = ?;"</span>;</li><li>OH_Data_Values *values3 = OH_Values_Create();</li><li>OH_Values_PutInt(values3, <span class="hljs-number">1</span>);</li><li>cursor = OH_Rdb_ExecuteQueryV2(store_, querySql, values3);</li><li><span class="hljs-keyword">if</span> (cursor == <span class="hljs-literal">NULL</span>) {</li><li>   OH_LOG_ERROR(LOG_APP, <span class="hljs-string">"Query failed."</span>);</li><li>   <span class="hljs-keyword">return</span>;</li><li>}</li><li>OH_Values_Destroy(values3);</li><li>cursor-&gt;destroy(cursor);</li><li>
</li><li><span class="hljs-comment">// 子查询，创建第二张表</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"CREATE TABLE IF NOT EXISTS test1(id text PRIMARY KEY);"</span>, nullptr, nullptr);</li><li>cursor = OH_Rdb_ExecuteQueryV2(store_, <span class="hljs-string">"select * from test where id in (select id from test1);"</span>, nullptr);</li><li><span class="hljs-keyword">if</span> (cursor == <span class="hljs-literal">NULL</span>) {</li><li>   OH_LOG_ERROR(LOG_APP, <span class="hljs-string">"Query failed."</span>);</li><li>   <span class="hljs-keyword">return</span>;</li><li>}</li><li>cursor-&gt;destroy(cursor);</li><li>
</li><li><span class="hljs-comment">// 聚合查询</span></li><li>cursor = OH_Rdb_ExecuteQueryV2(store_, <span class="hljs-string">"select * from test where data1 &lt;-&gt; '[1.0, 1.0]' &gt; 0 group by id having max(data1 &lt;=&gt; '[1.0, 1.0]');"</span>, nullptr);</li><li><span class="hljs-keyword">if</span> (cursor == <span class="hljs-literal">NULL</span>) {</li><li>   OH_LOG_ERROR(LOG_APP, <span class="hljs-string">"Query failed."</span>);</li><li>   <span class="hljs-keyword">return</span>;</li><li>}</li><li>cursor-&gt;destroy(cursor);</li><li>
</li><li><span class="hljs-comment">// 多表查询</span></li><li>cursor = OH_Rdb_ExecuteQueryV2(store_, <span class="hljs-string">"select id, data1 &lt;-&gt; '[1.5, 5.6]' as distance from test union select id, data1 &lt;-&gt; '[1.5, 5.6]' as distance from test order by distance limit 5;"</span>, nullptr);</li><li><span class="hljs-keyword">if</span> (cursor == <span class="hljs-literal">NULL</span>) {</li><li>   OH_LOG_ERROR(LOG_APP, <span class="hljs-string">"Query failed."</span>);</li><li>   <span class="hljs-keyword">return</span>;</li><li>}</li><li>cursor-&gt;destroy(cursor);</li></ol></pre></div></div></li>      <li>       <p>创建视图并执行查询。示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"CREATE VIEW v1 as select * from test where id &gt; 0;"</span>, nullptr, nullptr);</li><li>OH_Cursor *cursor = OH_Rdb_ExecuteQueryV2(store_, <span class="hljs-string">"select * from v1;"</span>, nullptr);</li><li><span class="hljs-keyword">if</span> (cursor == <span class="hljs-literal">NULL</span>) {</li><li>   OH_LOG_ERROR(LOG_APP, <span class="hljs-string">"Query failed."</span>);</li><li>   <span class="hljs-keyword">return</span>;</li><li>}</li><li>cursor-&gt;destroy(cursor);</li></ol></pre></div></div></li>      <li>       <p>‌使用向量索引进行查询，提升查询效率。</p>       <p>向量数据库索引‌是一种以向量作为键的索引机制，旨在提供高效且快速的搜索能力。</p>       <p>当前支持的向量索引基础语法和扩展语法如下：</p>       <ul>        <li>         <p>基础语法如下：</p>         <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="sql prettyprint linenums hljs language-sql" hw-language="sql" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-operator">/</span><span class="hljs-operator">/</span> index_name为索引名称，index_type是索引类型，dist_function是索引距离度量类型</li><li><span class="hljs-keyword">CREATE</span> INDEX [IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>] index_name <span class="hljs-keyword">ON</span> table_name <span class="hljs-keyword">USING</span> index_type (column_name dist_function);</li><li>
</li><li><span class="hljs-keyword">DROP</span> INDEX table_name.index_name;</li></ol></pre></div></div></li>        <li>         <p>扩展语法如下：</p>         <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="sql prettyprint linenums hljs language-sql" hw-language="sql" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">CREATE</span> INDEX [基础语法] [<span class="hljs-keyword">WITH</span>(<span class="hljs-keyword">parameter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">value</span> [, ...])];</li></ol></pre></div></div></li>       </ul>       <p><strong>表1</strong> 索引类型(index_type)</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.6.1.3.1.1" valign="top" width="50%">类型</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.6.1.3.1.2" valign="top" width="50%">备注说明</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="50%">gsdiskann</td>           <td class="cellrowborder" valign="top" width="50%">适用于处理高维稠密向量数据，如文本嵌入、图像特征等。</td>          </tr>                 </tbody></table></div>       </div>       <p><strong>表2</strong> 索引距离度量类型(dist_function)</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.8.1.4.1.1" valign="top" width="33.33333333333333%">类型</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.8.1.4.1.2" valign="top" width="33.33333333333333%">计算符号</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.8.1.4.1.3" valign="top" width="33.33333333333333%">备注说明</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">L2</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;-&gt;</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">欧式距离。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">COSINE</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">&lt;=&gt;</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">余弦距离。</td>          </tr>                 </tbody></table></div>       </div>       <p><strong>表3</strong> 扩展语法参数(parameter)</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.10.1.4.1.1" valign="top" width="33.33333333333333%">参数名称</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.10.1.4.1.2" valign="top" width="33.33333333333333%">取值范围和约束</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.7.10.1.4.1.3" valign="top" width="33.33333333333333%">备注说明</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">QUEUE_SIZE</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">设置范围是[10, 1000]，默认值 20。</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">代表创建索引搜索近邻的时候候选队列的长度，queue_size越大，构建速度降低，召回率有略微提升。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">OUT_DEGREE</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">设置范围是[1, 1200] ，默认值 60。</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">邻居节点出度数量。out_degree与pageSize也有关系，out_degree的数量超过pageSize的存储范围将报错GRD_INVALID_ARGS。</td>          </tr>                 </tbody></table></div>       </div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ul>          <li>           <p>删除索引的时候需要指定表名称，即Drop Index table.index_name。</p></li>          <li>           <p>随表一起创建的索引不能删除，如建表时创建的主键。</p></li>          <li>           <p>向量索引的命中条件。必须是ORDER BY + LIMIT类型的查询，ORDER BY只有一个排序条件，这个条件是向量距离条件；ORDER BY与DESC连用，不会使用向量索引；查询距离度量与创建索引时的度量需要保持一致，例如创建向量索引时使用L2，在查询时使用&lt;-&gt;进行度量才可以命中索引。</p></li>         </ul>        </div></div></div>       <p>示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 基础用法，创建的索引名称为diskann_l2_idx，索引列为repr，类型为gsdiskann，距离度量类型为L2</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"CREATE INDEX diskann_l2_idx ON test USING GSDISKANN(data1 L2);"</span>, nullptr, nullptr);</li><li>
</li><li><span class="hljs-comment">// 删除表test中的diskann_l2_idx索引</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"DROP INDEX test.diskann_l2_idx;"</span>, nullptr, nullptr);</li><li>
</li><li><span class="hljs-comment">// 扩展语法，设置QUEUE_SIZE为20，OUT_DEGREE为50</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"CREATE INDEX diskann_l2_idx ON test USING GSDISKANN(repr L2) WITH (queue_size=20, out_degree=50);"</span>, nullptr, nullptr);</li></ol></pre></div></div></li>      <li>       <p>配置数据老化功能。当应用的数据需要定期清理时，可以按时间或空间配置数据老化策略，从而实现数据的自动化清理。</p>       <p>语法如下所示：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="sql prettyprint linenums hljs language-sql" hw-language="sql" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> table_name(column_name type [, ...]) [<span class="hljs-keyword">WITH</span>(<span class="hljs-keyword">parameter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">value</span> [, ...])];</li></ol></pre></div></div>       <p>其中，parameter为可配置的参数，value为对应取值，具体情况见下表。</p>       <p><strong>表4</strong> 数据老化策略参数(parameter)</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.8.6.1.4.1.1" valign="top" width="33.33333333333333%">参数名称</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.8.6.1.4.1.2" valign="top" width="33.33333333333333%">必填</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.8.6.1.4.1.3" valign="top" width="33.33333333333333%">取值范围和使用说明</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">time_col</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">是</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">列名。类型必须为整数且不为空。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">interval</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">老化任务线程的执行间隔时间，超过该时间后执行写操作，触发老化任务，删除符合老化条件的数据；若在间隔时间内执行写操作，不会触发老化任务。取值范围是[5 second, 1 year]，时间单位支持second、minute、hour、day、month、year，不区分大小写或复数形式(1 hour和1 hours均可)，默认是1 day。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">ttl</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">数据保留时间。取值范围是[1 hour, 1 year]，时间单位支持second、minute、hour、day、month、year，不区分大小写或复数形式(1 hour和1 hours均可)，默认是3 month。</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="33.33333333333333%">max_num</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">否</td>           <td class="cellrowborder" valign="top" width="33.33333333333333%">数据量限制。取值范围是[100, 1024]，默认是1024。老化任务在执行完过期数据删除后，如剩余表内数据超过max_num行，则会找到距离过期时间最近的时间点，删除该时间点对应的所有数据，直到数据量少于max_num。</td>          </tr>                 </tbody></table></div>       </div>       <p>时间相关参数会按数值换算为秒作为原子单位，取值规则如下所示：</p>       <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.8.8.1.3.1.1" valign="top" width="50%">单位</th>           <th align="left" class="cellrowborder" id="mcps1.3.6.7.8.8.1.3.1.2" valign="top" width="50%">向下换算为秒取值</th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="50%">year</td>           <td class="cellrowborder" valign="top" width="50%">365 * 24 * 60 * 60</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">month</td>           <td class="cellrowborder" valign="top" width="50%">30 * 24 * 60 * 60</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">day</td>           <td class="cellrowborder" valign="top" width="50%">24 * 60 * 60</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">hour</td>           <td class="cellrowborder" valign="top" width="50%">60 * 60</td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="50%">minute</td>           <td class="cellrowborder" valign="top" width="50%">60</td>          </tr>                 </tbody></table></div>       </div>       <p>例如配置ttl = '3 months'，实际ttl会被换算为3 * (30 * 24 * 60 * 60) = 7776000 seconds。</p>       <p>示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 每隔五分钟执行写操作后，会触发数据老化任务</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"CREATE TABLE test2(rec_time integer not null) WITH (time_col = 'rec_time', interval = '5 minute');"</span>, nullptr, nullptr);</li></ol></pre></div></div></li>      <li>       <p>配置数据压缩功能。该功能在建表时配置，可以压缩数据类型为text的列数据。</p>       <p>从API version 20开始，支持数据压缩功能。</p>       <p>语法如下所示：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="sql prettyprint linenums hljs language-sql" hw-language="sql" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> table_name(content text [, ...]) [<span class="hljs-keyword">WITH</span>(compress_col <span class="hljs-operator">=</span> <span class="hljs-string">'content'</span>)];</li></ol></pre></div></div>       <p>其中，compress_col为必填参数，value是类型为text的数据列名，可以与数据老化功能同时配置。</p>       <p>示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// content列配置了数据压缩，并且配置了数据老化。</span></li><li>OH_Rdb_ExecuteV2(store_, <span class="hljs-string">"CREATE TABLE IF NOT EXISTS test3 (time integer not null, content text) with (time_col = 'time', interval = '5 minute', compress_col = 'content');"</span>, nullptr, nullptr);</li></ol></pre></div></div></li>      <li>       <p>删除数据库。示例代码如下：</p>       <div _ngcontent-xux-c106="" class="highlight-div"><div _ngcontent-xux-c106="" class="highlight-div-header"><div _ngcontent-xux-c106="" class="highlight-div-header-left"><div _ngcontent-xux-c106="" class="handle-button expand-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xux-c106="" class="highlight-div-header-right"><div _ngcontent-xux-c106="" class="handle-button ai-button"></div><div _ngcontent-xux-c106="" class="handle-button line-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xux-c106="" class="handle-button theme-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xux-c106="" class="handle-button copy-button"><div _ngcontent-xux-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xux-c106="" class="highlight-scroll-div"><pre class="c prettyprint linenums hljs language-c" hw-language="c" data-highlighted="yes"><ol class="linenums"><li>OH_Rdb_CloseStore(store_);</li><li>OH_Rdb_DeleteStoreV2(config);</li></ol></pre></div></div></li>     </ol>    </div>   </div>   <div></div></div>