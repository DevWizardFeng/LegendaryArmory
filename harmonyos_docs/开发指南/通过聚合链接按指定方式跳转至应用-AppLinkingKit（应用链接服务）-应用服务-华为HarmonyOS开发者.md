<h1 _ngcontent-vcy-c119="" class="doc-title ng-star-inserted" title="通过聚合链接按指定方式跳转至应用"> 通过聚合链接按指定方式跳转至应用 </h1>

<div _ngcontent-vcy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section49303557216">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section49303557216" tips="复制节点链接"></i></h2><p>从6.0.0(20)版本开始，新增支持聚合链接能力。</p> <p>可用于实现在HarmonyOS系统的设备上点击链接后，按照指定的方式进行跳转。当用户打开链接时，聚合链接会引导用户跳转到HarmonyOS平台预览页、应用市场详情页、自定义网址、深度链接地址等页面。</p> <p>聚合链接主要用于直接向用户发送应用推广信息，例如通过短信/邮件/社交分享链接发送产品优惠活动或应用推广活动。</p> </div> <div class="tiledSection"><h2 id="section149221015144215">前提条件<i class="anchor-icon anchor-icon-link" anchorid="section149221015144215" tips="复制节点链接"></i></h2><p>已<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-enable-applinking">开通App Linking服务</a>。</p> </div> <div class="tiledSection"><h2 id="section18252132105216">开发流程<i class="anchor-icon anchor-icon-link" anchorid="section18252132105216" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" colspan="2" id="mcps1.3.3.2.1.4.1.1" valign="top"><p>角色</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" valign="top"><p>操作步骤</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" rowspan="4" valign="top" width="12.19%"><p>目标方</p> </td> <td class="cellrowborder" valign="top" width="20.32%"><p>云端开发</p> </td> <td class="cellrowborder" valign="top" width="67.49000000000001%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-enable-applinking">开通App Linking服务</a>。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>云端开发</p> </td> <td class="cellrowborder" valign="top"><p>先在AGC<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section17487350112015">申请链接前缀</a>并<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section95571012226">添加网址允许清单</a>，然后<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section759794318231">创建聚合链接</a>。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>客户端开发</p> </td> <td class="cellrowborder" valign="top"><p><a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section2446143184813">在module.json5中配置聚合链接</a>。</p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p>客户端开发</p> </td> <td class="cellrowborder" valign="top"><p><a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section1620481746">处理拉起方应用传入的链接</a>。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="12.19%"><p>拉起方</p> </td> <td class="cellrowborder" valign="top" width="20.32%"><p>客户端开发</p> </td> <td class="cellrowborder" valign="top" width="67.49000000000001%"><p><a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section10388164920620">通过openLink接口</a>或者<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section3736124874513">通过系统浏览器或ArkWeb</a>拉起目标方应用。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section6516103518384">目标方应用配置聚合链接能力<i class="anchor-icon anchor-icon-link" anchorid="section6516103518384" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section17487350112015" class="firsth2">申请链接前缀<i class="anchor-icon anchor-icon-link" anchorid="section17487350112015" tips="复制节点链接"></i></h3><p>链接前缀是指聚合链接地址中包含的网址，其格式为“https://域名”。创建聚合链接前，需要申请链接前缀。</p> <ol><li>登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>，点击“开发与服务”。</li><li>在项目列表中点击HarmonyOS应用所在的项目。</li><li>在左侧导航栏中选择“增长 &gt; App Linking”，选择“链接前缀”页签，点击“添加链接前缀”。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>如果界面未展示“链接前缀”页签，请在右侧的“自定义配置”中勾选。</p> </div></div></div> <p><span><img originheight="190" originwidth="1409" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.10133782978304425169832970456251:50001231000000:2800:A3968D179A477CBF166798B24AA13FEAFC3192B7A06CE37BB250EBF34072221C.png" width="920" height="124.05961674946771"></span></p> </li><li>在AGC提供的免费域名（例如中国站点的域名：drcn.agconnect.link）前再设置一个前缀字符串，前缀字符串仅支持小写字母和数字，且必须确保此前缀唯一。设置完成后点击“下一步”。<p><span><img originheight="580" originwidth="1347" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.39007668977364473399815514656312:50001231000000:2800:1E28ADFE076001B090F69D581A8B514B2B721BB1B13B4900BECBB9375A695D7F.png" width="920" height="396.13956941351154"></span></p> </li><li>等待域名地址验证通过后，页面将显示完整域名。<p><span><img originheight="449" originwidth="1369" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.31285221170297117679384195494397:50001231000000:2800:9A732A14CC85174A5DDA4AE07E942947525473E5FE73F41C7ECB90BF02622D3E.png" width="920" height="301.73849525200876"></span></p> </li></ol> </div> <div class="tiledSection"><h3 id="section95571012226">添加网址允许清单<i class="anchor-icon anchor-icon-link" anchorid="section95571012226" tips="复制节点链接"></i></h3><p>创建聚合链接前，需要添加网址允许清单来指定深度链接地址和自定义网址中允许使用的网址格式。设置后，聚合链接仅允许重定向到符合允许清单规则的网址，从而防止网站诱骗。</p> <ol><li>登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>，点击“开发与服务”。</li><li>在项目列表中点击HarmonyOS应用所在的项目。</li><li>在左侧导航栏中选择“增长 &gt; App Linking”，选择“网址允许清单”页签，点击“添加允许清单规则”。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>如果界面未展示“网址允许清单”页签，请在右侧的“自定义配置”中勾选。</p> </div></div></div> <p><span><img originheight="232" originwidth="1419" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.39852403135025228909493386894924:50001231000000:2800:EF56C1AEABD0630459E7A6BFFAC3E133CD962F62E3346A2A8EF6471051EDC5E4.png" width="920" height="150.415785764623"></span></p> </li><li>使用正则表达式设置允许清单规则，设置完成后点击右上角的“发布”。<p><span><img originheight="318" originwidth="1351" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.79524361980535232393282087725660:50001231000000:2800:909BBA6ED3CC61629AD16A7BF2EBD1CE68FBB0A621ECB4C9A5DDC1DDC40C73FD.png" width="920" height="216.55070318282753"></span></p> </li></ol> </div> <div class="tiledSection"><h3 id="section759794318231">创建聚合链接<i class="anchor-icon anchor-icon-link" anchorid="section759794318231" tips="复制节点链接"></i></h3><p>配置聚合链接，按照指定的方式进行跳转。</p> <ol><li>登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>，点击“开发与服务”。</li><li>在项目列表中点击HarmonyOS应用所在的项目。</li><li>在左侧导航栏中选择“增长 &gt; App Linking”，选择“聚合链接”页签，点击“创建聚合链接”。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>如果界面未展示“聚合链接”页签，请在右侧的“自定义配置”中勾选。</p> </div></div></div> <p><span><img originheight="196" originwidth="1452" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.23202165099948249512632877460524:50001231000000:2800:D7D4C37040777C77EF37A10EB11617F9F067FEA21BA4F073845BB4C893168D19.png" width="920" height="124.18732782369145"></span></p> </li><li>设置短链接，完成后点击“下一步”。<p><span><img originheight="683" originwidth="1451" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.56862317145575400889715299826069:50001231000000:2800:19473FF440271B368ABB14D607FC53935ED385FB0AD20926D724E3EB39F0BD87.png" width="920" height="433.053066850448"></span></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.4.2.1.3.1.1" valign="top" width="27.189999999999998%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.4.2.1.3.1.2" valign="top" width="72.81%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="27.189999999999998%"><p>链接前缀</p> </td> <td class="cellrowborder" valign="top" width="72.81%"><p>聚合链接的前缀。如果还未申请链接前缀，请参见<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section17487350112015">申请链接前缀</a>。</p> <p>“链接前缀”下方的文本框中可设置聚合链接的短链接后缀字符串，默认由AGC自动生成。如果需要自行定义，请确保该字符串唯一。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="27.189999999999998%"><p>链接预览</p> </td> <td class="cellrowborder" valign="top" width="72.81%"><p>聚合链接向用户发送的短链接地址。</p> </td> </tr>  </tbody></table></div> </div> </li><li id="zh-cn_topic_0000002414086764_zh-cn_topic_0000002409550078_li13663141012470">设置深度链接，完成后点击“下一步”。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>深度链接地址中使用的域名需满足“网址允许清单”要求。</li><li>深度链接地址不允许设置为可执行文件格式。</li></ul> </div></div></div> <p><span><img originheight="550" originwidth="1137" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.76133002280031605539600181860548:50001231000000:2800:A9D0841D480AB464C20FCFCE1A4C160CE8017FEF9016E43E0E5E6B54FB52EFB0.png" width="920" height="445.0307827616535"></span></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.5.3.1.3.1.1" valign="top" width="30.4%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.5.3.1.3.1.2" valign="top" width="69.6%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="30.4%"><p>链接名称</p> </td> <td class="cellrowborder" valign="top" width="69.6%"><p>配置聚合链接的自定义名称。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="30.4%"><p>深度链接地址（默认）</p> </td> <td class="cellrowborder" valign="top" width="69.6%"><p>应用将打开的深度链接地址。</p> <p>如果未设置HarmonyOS深度链接地址(api&gt;=12)，则会默认打开此链接。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="30.4%"><p>（可选）HarmonyOS深度链接地址(api&gt;=12)</p> </td> <td class="cellrowborder" valign="top" width="69.6%"><p>如果设置了HarmonyOS深度链接地址(api&gt;=12)，则在HarmonyOS平台优先打开此链接。</p> </td> </tr>  </tbody></table></div> </div> </li><li id="zh-cn_topic_0000002414086764_zh-cn_topic_0000002409550078_li1761311182013">设置聚合链接在HarmonyOS系统的链接行为，完成后点击“下一步”。<p><span><img originheight="238" originwidth="1103" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114518.99945687451341393814590034810791:50001231000000:2800:0CB333D50441DEE8A6B8A33BDD91E890A083070420468B313E70C7633DBE5A21.png" width="920" height="198.51314596554852"></span></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.6.2.1.3.1.1" valign="top" width="27%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.6.2.1.3.1.2" valign="top" width="73%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="27%"><p>设置在HarmonyOS系统的链接行为(api&gt;=12)</p> </td> <td class="cellrowborder" valign="top" width="73%"><ol><li>选择“在HarmonyOS应用中打开”，表示用户点击链接会跳转到HarmonyOS应用中的深度链接地址。</li><li>选择或添加需要配置深度链接地址的HarmonyOS应用。</li></ol> </td> </tr> <tr><td class="cellrowborder" valign="top" width="27%"><p>未安装应用时，则重定向到</p> </td> <td class="cellrowborder" valign="top" width="73%"><p>如果用户未安装HarmonyOS应用，可通过此选项将用户引导到“华为应用市场页面详情页”或“自定义网址”。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>如果选择“自定义网址”，链接不允许设置为可执行文件格式。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </li><li>（可选）在“设置跟踪参数”页面，设置广告跟踪参数，可用于广告、流量跟踪。<p><span><img originheight="292" originwidth="792" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114519.81317177480825573651970147491406:50001231000000:2800:1A2C4797A7426BC0BE189D960FAF5FF153C2EF7DFE5CD13DD3D99E5AD34EEE7F.png" width="792" height="292"></span></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.7.2.1.3.1.1" valign="top" width="25.22%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.7.2.1.3.1.2" valign="top" width="74.78%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25.22%"><p>广告系列来源</p> </td> <td class="cellrowborder" valign="top" width="74.78%"><p>广告渠道，如Huawei，也可自定义。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25.22%"><p>广告系列媒介</p> </td> <td class="cellrowborder" valign="top" width="74.78%"><p>广告媒介的标识，如pic 、email。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25.22%"><p>广告系列名称</p> </td> <td class="cellrowborder" valign="top" width="74.78%"><p>特定的推广活动描述，如“双11推广”。</p> </td> </tr>  </tbody></table></div> </div> </li><li>（可选）设置社交分享标识，可用于社交软件之间的分享，设置完成后点击“下一步”。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>设置了社交分享标识参数后，可通过<a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agc-applinking-socialdescription-0000001055261926" target="_blank">社交分享标识说明</a>了解设置效果。</p> </div></div></div> <p><span><img originheight="635" originwidth="1571" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114519.96056859053777266422259609696022:50001231000000:2800:02CD5642E00EB4B12578C38B17ECE3C0E577E12EA1E9546B973576A79EC5F648.png" width="920" height="371.8650541056652"></span></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.8.3.1.3.1.1" valign="top" width="25.2%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.8.3.1.3.1.2" valign="top" width="74.8%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25.2%"><p>标题</p> </td> <td class="cellrowborder" valign="top" width="74.8%"><p>聚合链接在社交平台上分享时展示的标题名称。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25.2%"><p>图片URL</p> </td> <td class="cellrowborder" valign="top" width="74.8%"><p>聚合链接在社交平台上分享时展示的图片地址。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25.2%"><p>描述说明</p> </td> <td class="cellrowborder" valign="top" width="74.8%"><p>聚合链接在社交平台上分享时展示的说明信息。</p> </td> </tr>  </tbody></table></div> </div> </li><li>（可选）设置预览页，可以将用户引导至合适的目标位置。<p><span><img originheight="851" originwidth="945" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114519.21589109610166611987836876682303:50001231000000:2800:0C6D65F1AE8E3ADDEA7960B87DAFE5AA6873A0FF9FD2366EA2A7AE278EE314CB.png" width="920" height="828.4867724867725"></span></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.9.2.1.3.1.1" valign="top" width="25.22%"><p>参数</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.9.2.1.3.1.2" valign="top" width="74.78%"><p>参数说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25.22%"><p>显示预览页</p> </td> <td class="cellrowborder" valign="top" width="74.78%"><p>应用未安装，点击聚合链接时，预览页的显示情况。</p> <ul><li>勾选：在点击聚合链接时，应用如果未安装，则在重定向到应用市场详情页前优先显示预览页。</li><li>不勾选（默认）：在点击时，应用如果未安装，则会根据浏览器的类型，尽可能地优先拉起应用市场详情页。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>目前仅支持华为浏览器。</p> </div></div></div> </li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25.22%"><p>预览页信息来源</p> </td> <td class="cellrowborder" valign="top" width="74.78%"><p>勾选“显示预览页”后，可以选择预览页信息展示的内容。</p> <ul><li>“分享标识内容”：采用分享标识信息构建预览页。</li><li>“应用市场应用信息”：采用AGC中配置的应用信息构建预览页。</li></ul> </td> </tr>  </tbody></table></div> </div> </li><li>全部设置完成后，点击右上角的“发布”，页签中将展示已发布的聚合链接列表。<ul><li>点击网址中的二维码图标，或对应操作栏下方的“二维码下载”，可以下载该聚合链接的二维码图片。<p><span><img originheight="238" originwidth="1442" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114519.94820511271978507119883688037741:50001231000000:2800:84B965CA1B59148C7B50B03CA3B468F59898D1887D2B7721FFF734C34E74E32B.png" width="920" height="151.84466019417476"></span></p> <p>点击对应操作栏下方的“链接详情”，可以查看该聚合链接的详情，包括深度链接地址、HarmonyOS应用包名、短链接地址等。</p> <p><span><img originheight="519" originwidth="1147" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114519.04184920691705831705894016025372:50001231000000:2800:1602D86C52899931C37B978F4537C0C71E3564DCD351C3EF483128AE77CBF2EF.png" width="920" height="416.2859633827376"></span></p> </li></ul> </li></ol> </div> <div class="tiledSection"><h3 id="section103391318173215">（可选）归档聚合链接<i class="anchor-icon anchor-icon-link" anchorid="section103391318173215" tips="复制节点链接"></i></h3><p>创建聚合链接后，如果不想继续管理该链接，而又不希望影响用户较长一段时间内的使用，可以选择归档聚合链接。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><ul><li>归档7天后的聚合链接将被隐藏，开发者无法通过AGC查看或撤销归档。</li><li>归档后的聚合链接默认从归档时起1年内有效，请谨慎操作。</li></ul> </div></div></div> <ol><li>登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>，点击“开发与服务”。</li><li>在项目列表中点击HarmonyOS应用所在的项目。</li><li>在左侧导航栏中选择“增长 &gt; App Linking”。</li><li>选择“聚合链接”页签，对已创建的聚合链接进行归档。<ul><li>单条归档：在聚合链接列表，选择待归档聚合链接对应“操作”列下方的“归档”。<p><span><img originheight="510" originwidth="1437" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114519.26002352633650151672107492290812:50001231000000:2800:6767E3AF7DC6FCE3A322890E5FDE9E869B1A334B178A21F31ADB9D352896646E.png" width="920" height="326.51356993736954"></span></p> </li><li>批量归档：在列表，勾选多条待归档，选择右上角“批量操作”的下拉选项中的“归档”。<p><span><img originheight="556" originwidth="1430" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114519.53983546747217531784796187072184:50001231000000:2800:8374D3EDBE886393646B7E9337398AF0528F3384173159F57509FBEC84309BC3.png" width="920" height="357.7062937062937"></span></p> </li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>可以通过时间筛选，选择查看“7天内已归档”的聚合链接。还可以点击“操作”列下方的“撤销归档”，将已归档的聚合链接恢复原状。</p> </div></div></div> </li></ol> </div> <div class="tiledSection"><h3 id="section2446143184813">在module.json5中配置聚合链接<i class="anchor-icon anchor-icon-link" anchorid="section2446143184813" tips="复制节点链接"></i></h3><p>在HarmonyOS应用的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file" target="_blank">module.json5文件</a>中进行如下配置，用于接收聚合链接，以获取聚合链接中传递的数据。</p> <ul><li>"entities"列表中必须包含"entity.system.browsable"。</li><li>"actions"列表中必须包含"ohos.want.action.viewData"。</li><li>"uris"列表中必须包含"scheme"为"https"且"host"为域名地址的元素，可选属性包含"path"、"pathStartWith"和"pathRegex"，具体请参见“<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-uri-config#uris标签说明" target="_blank">uris标签说明</a>”。</li><li>"domainVerify"设置为true，表示开启域名校验开关。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>skills标签下默认包含一个skill对象，用于标识应用入口。应用跳转链接不能在该skill对象中配置，需要创建独立的skill对象。</p> <p>如果存在多个跳转场景，需要在skills标签下创建不同的skill对象，否则会导致配置无法生效。</p> </div></div></div> <p>例如，聚合链接的域名是example.drcn.agconnect.link，则需进行如下配置。</p> <div _ngcontent-vcy-c106="" class="highlight-div"><div _ngcontent-vcy-c106="" class="highlight-div-header"><div _ngcontent-vcy-c106="" class="highlight-div-header-left"><div _ngcontent-vcy-c106="" class="handle-button expand-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vcy-c106="" class="highlight-div-header-right"><div _ngcontent-vcy-c106="" class="handle-button ai-button"></div><div _ngcontent-vcy-c106="" class="handle-button line-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vcy-c106="" class="handle-button theme-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vcy-c106="" class="handle-button copy-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vcy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-string">"abilities"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>        <span class="hljs-string">"srcEntry"</span>: <span class="hljs-string">"./ets/entryability/EntryAbility.ets"</span>,</li><li>        <span class="hljs-string">"icon"</span>: <span class="hljs-string">"$media:icon"</span>,</li><li>        <span class="hljs-string">"label"</span>: <span class="hljs-string">"$string:EntryAbility_label"</span>,</li><li>        <span class="hljs-comment">// 请将exported配置为true；如果exported为false，仅具有权限的系统应用能够拉起该应用，否则无法拉起应用</span></li><li>        <span class="hljs-string">"exported"</span>: <span class="hljs-literal">true</span>,</li><li>        <span class="hljs-string">"startWindowIcon"</span>: <span class="hljs-string">"$media:icon"</span>,</li><li>        <span class="hljs-string">"startWindowBackground"</span>: <span class="hljs-string">"$color:start_window_background"</span>,</li><li>        <span class="hljs-string">"skills"</span>: [</li><li>          {</li><li>            <span class="hljs-string">"entities"</span>: [</li><li>              <span class="hljs-string">"entity.system.home"</span></li><li>            ],</li><li>            <span class="hljs-string">"actions"</span>: [</li><li>              <span class="hljs-string">"ohos.want.action.home"</span></li><li>            ]</li><li>          },</li><li>          {</li><li>            <span class="hljs-string">"entities"</span>: [</li><li>              <span class="hljs-comment">// entities必须包含"entity.system.browsable"</span></li><li>              <span class="hljs-string">"entity.system.browsable"</span></li><li>            ],</li><li>            <span class="hljs-string">"actions"</span>: [</li><li>              <span class="hljs-comment">// actions必须包含"ohos.want.action.viewData"</span></li><li>              <span class="hljs-string">"ohos.want.action.viewData"</span></li><li>            ],</li><li>            <span class="hljs-string">"uris"</span>: [</li><li>              {</li><li>                <span class="hljs-comment">// scheme须配置为https</span></li><li>                <span class="hljs-string">"scheme"</span>: <span class="hljs-string">"https"</span>,</li><li>                <span class="hljs-comment">// host须配置为聚合链接的域名</span></li><li>                <span class="hljs-string">"host"</span>: <span class="hljs-string">"example.drcn.agconnect.</span><strong><span class="hljs-string">link</span></strong><span class="hljs-string">"</span>,</li><li>                <span class="hljs-comment">// path可选，表示聚合链接的短链接后缀字符串，例如</span><strong><span class="hljs-comment">example.drcn.agconnect.link/AIYx</span></strong><span class="hljs-comment">中的AIYx</span></li><li>                <span class="hljs-comment">// 如果应用只能处理部分特定的path，则此处应该配置应用所支持的path，避免出现应用不能处理的path链接也被引流到应用中的问题</span></li><li>                <span class="hljs-string">"path"</span>: <span class="hljs-string">"AIYx"</span></li><li>              }</li><li>            ],</li><li>            <span class="hljs-comment">// domainVerify须设置为true</span></li><li>           <span class="hljs-string">"domainVerify"</span>: <span class="hljs-literal">true</span></li><li>          }</li><li>          <span class="hljs-comment">// 若有其他跳转能力，如推送消息跳转、NFC跳转，可新增一个skill对象，防止与App Linking业务冲突</span></li><li>        ]</li><li>      }</li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1620481746">处理拉起方应用传入的链接<i class="anchor-icon anchor-icon-link" anchorid="section1620481746" tips="复制节点链接"></i></h3><p>在HarmonyOS应用的Ability（如EntryAbility）的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#oncreate" target="_blank">onCreate()</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onnewwant" target="_blank">onNewWant()</a>生命周期回调中添加如下代码，以处理传入的链接。</p> <div _ngcontent-vcy-c106="" class="highlight-div"><div _ngcontent-vcy-c106="" class="highlight-div-header"><div _ngcontent-vcy-c106="" class="highlight-div-header-left"><div _ngcontent-vcy-c106="" class="handle-button expand-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vcy-c106="" class="highlight-div-header-right"><div _ngcontent-vcy-c106="" class="handle-button ai-button"></div><div _ngcontent-vcy-c106="" class="handle-button line-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vcy-c106="" class="handle-button theme-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vcy-c106="" class="handle-button copy-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vcy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { url } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 从want中获取传入的链接信息。</span></li><li>    <span class="hljs-comment">// 如传入的url为：https://example.drcn.agconnect.link/AIYx，开发者可根据自己的业务需求进行后续的处理。</span></li><li>    <span class="hljs-keyword">let</span> uri = want?.<span class="hljs-property">uri</span>;</li><li>    <span class="hljs-keyword">if</span> (uri) {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> urlObject = url.<span class="hljs-property">URL</span>.<span class="hljs-title function_">parseURL</span>(want?.<span class="hljs-property">uri</span>);</li><li>        <span class="hljs-keyword">if</span> (urlObject.<span class="hljs-title function_">toString</span>() === <span class="hljs-string">"https://example.drcn.agconnect.link/AIYx"</span>){</li><li>          <span class="hljs-comment">// ...</span></li><li>        }</li><li>        <span class="hljs-comment">// ...</span></li><li>      } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to parse url.`</span>);</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p>若要根据链接参数启动UIAbility的指定页面组件，请参考“<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-intra-device-interaction#启动uiability的指定页面" target="_blank">启动UIAbility的指定页面</a>”。</p> </div> <div class="tiledSection"><h2 id="section19309144874511">拉起方应用跳转实现<i class="anchor-icon anchor-icon-link" anchorid="section19309144874511" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section10388164920620" class="firsth2">通过openLink接口拉起<i class="anchor-icon anchor-icon-link" anchorid="section10388164920620" tips="复制节点链接"></i></h3><p>拉起方应用可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#openlink12" target="_blank">UIAbilityContext.openLink()</a>接口，并将appLinkingOnly参数设为false或者不传，以App Linking优先的方式打开应用。</p> <ol><li>在“entry/src/main/ets/common”目录下添加GlobalContext.ets文件，开发初始化和获取应用上下文的接口。<div _ngcontent-vcy-c106="" class="highlight-div"><div _ngcontent-vcy-c106="" class="highlight-div-header"><div _ngcontent-vcy-c106="" class="highlight-div-header-left"><div _ngcontent-vcy-c106="" class="handle-button expand-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vcy-c106="" class="highlight-div-header-right"><div _ngcontent-vcy-c106="" class="handle-button ai-button"></div><div _ngcontent-vcy-c106="" class="handle-button line-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vcy-c106="" class="handle-button theme-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vcy-c106="" class="handle-button copy-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vcy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalContext</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span>;</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">initContext</span>(<span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">context</span> = context;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getContext</span>(): common.<span class="hljs-property">UIAbilityContext</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-property">context</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </li><li>在“entry/src/main/ets/entryability/EntryAbility.ets”文件中导入GlobalContext，在onCreate方法中使用GlobalContext.initContext(this.context)初始化全局应用上下文。</li><li>在“entry/src/main/ets/pages/Index.ets”文件中，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#openlink12" target="_blank">UIAbilityContext.openLink()</a>接口配置聚合链接。<div _ngcontent-vcy-c106="" class="highlight-div"><div _ngcontent-vcy-c106="" class="highlight-div-header"><div _ngcontent-vcy-c106="" class="highlight-div-header-left"><div _ngcontent-vcy-c106="" class="handle-button expand-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vcy-c106="" class="highlight-div-header-right"><div _ngcontent-vcy-c106="" class="handle-button ai-button"></div><div _ngcontent-vcy-c106="" class="handle-button line-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vcy-c106="" class="handle-button theme-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vcy-c106="" class="handle-button copy-button"><div _ngcontent-vcy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vcy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GlobalContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/GlobalContext'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">'start link'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>, <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span> })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'87%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'5%'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-string">'12vp'</span> })</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> context = <span class="hljs-title class_">GlobalContext</span>.<span class="hljs-title function_">getContext</span>();</li><li>        <span class="hljs-comment">// 如下link请填写开发者实际跳转的url</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">link</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"https://example.drcn.agconnect.link/AIYx"</span>;</li><li>        context.<span class="hljs-title function_">openLink</span>(link, { <span class="hljs-attr">appLinkingOnly</span>: <span class="hljs-literal">false</span> })</li><li>          .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in opening link.`</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to open link, code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>          })</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div> </li><li>安装拉起方应用，点击拉起方应用中的跳转按钮。<p>此时目标方应用未安装，若有聚合链接匹配的应用，点击链接会按照<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#section759794318231">创建聚合链接</a>时指定的方式进行跳转，例如跳转到HarmonyOS平台预览页、应用市场下载详情页、自定义网址等；若无聚合链接匹配的应用，则继续尝试以浏览器打开链接的方式打开应用。</p> </li><li>安装目标方应用后，首次启动时会跳转到深度链接指定的内容详情页面。</li></ol> </div> <div class="tiledSection"><h3 id="section3736124874513">通过系统浏览器或ArkWeb拉起<i class="anchor-icon anchor-icon-link" anchorid="section3736124874513" tips="复制节点链接"></i></h3><p>ArkWeb深度集成了App Linking的能力，当用户在系统浏览器或者集成ArkWeb的应用网页上点击某个链接时，若有聚合链接匹配的应用，会通过App Linking能力优先拉起目标方应用。此机制有如下限制：</p> <ul><li>如果该聚合链接配置了<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#zh-cn_topic_0000002414086764_zh-cn_topic_0000002409550078_li1761311182013">在HarmonyOS系统的链接行为</a>，会跳转到HarmonyOS平台预览页，引导用户打开或下载应用。</li><li>如果该聚合链接仅配置了<a href="/consumer/cn/doc/harmonyos-guides/applinking-cross-platform#zh-cn_topic_0000002414086764_zh-cn_topic_0000002409550078_li13663141012470">深度链接</a>，会跳转到深度链接指定的内容详情页面。</li></ul> </div> </div> <div></div></div>