<h1 _ngcontent-thx-c119="" class="doc-title ng-star-inserted" title="配置CPP"> 配置CPP </h1>

<div _ngcontent-thx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div id="body0000001733922376">    <p id="ZH-CN_TOPIC_0000002478334380__p8060118">Hvigor集成cmake，ninja为cpp代码的构建工具。在初始状态下，无需额外配置，您也可以添加以下自定义配置，定制cpp代码编译。</p>    <p id="ZH-CN_TOPIC_0000002478334380__p1698165825413">CPP配置包含externalNativeOptions和nativeLib，除特殊说明外，在工程级和模块级build-profile.json5文件中均支持配置，工程级配置会与模块级配置进行合并，模块级配置优先，具体合并规则和优先级请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-compilation-options-customizing-guide#section1727865610255">合并编译选项规则</a>。</p>    <div class="tiledSection">     <h2 id="section0721057575">externalNativeOptions<i class="anchor-icon anchor-icon-link" anchorid="section0721057575" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334380__p336212495258">externalNativeOptions是Native编译配置项。</p>     <div class="tablenoborder">      <div class="tbBox"><table id="table181571791310" class="layoutFixed idpTab">       <caption>        <b>表1 </b>externalNativeOptions字段说明       </caption>       <thead>        <tr id="ZH-CN_TOPIC_0000002478334380__row4815191714135">         <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.1" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p19751124171318">字段名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.2" valign="top" width="18.47%">          <p id="ZH-CN_TOPIC_0000002478334380__p16751132491317">类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.3" valign="top" width="17.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p57519244139">可选/必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.5.1.4" valign="top" width="39.04%">          <p id="ZH-CN_TOPIC_0000002478334380__p10751122412139">含义</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002478334380__row481511178134">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p24778333357"><span style="color: rgb(48,48,48);">path</span></p></td>         <td class="cellrowborder" valign="top" width="18.47%">          <p id="ZH-CN_TOPIC_0000002478334380__p193621349172513">字符串</p></td>         <td class="cellrowborder" valign="top" width="17.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p71293319715">可选</p></td>         <td class="cellrowborder" valign="top" width="39.04%">          <p id="ZH-CN_TOPIC_0000002478334380__p5362184952518">CMake构建脚本地址，即CMakeLists.txt文件地址。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row981515171137">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p94771733133516"><span style="color: rgb(48,48,48);">abiFilters</span></p></td>         <td class="cellrowborder" valign="top" width="18.47%">          <p id="ZH-CN_TOPIC_0000002478334380__p173621049142516">字符串数组</p></td>         <td class="cellrowborder" valign="top" width="17.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p131297311720">可选</p></td>         <td class="cellrowborder" valign="top" width="39.04%">          <p id="ZH-CN_TOPIC_0000002478334380__p6362104952517">HarmonyOS当前支持的ABI编译环境，包括：</p>          <ul id="ZH-CN_TOPIC_0000002478334380__ul139951934152814">           <li id="li11838244112814">arm64-v8a</li>           <li id="li105521752162810">x86_64</li>          </ul>          <p id="ZH-CN_TOPIC_0000002478334380__p17166112935612">如不配置该参数，编译时默认为arm64-v8a。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row15815191751315">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p147723316357"><span style="color: rgb(48,48,48);">arguments</span></p></td>         <td class="cellrowborder" valign="top" width="18.47%">          <p id="ZH-CN_TOPIC_0000002478334380__p153628498257">字符串/字符串数组</p></td>         <td class="cellrowborder" valign="top" width="17.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p6129173113711">可选</p></td>         <td class="cellrowborder" valign="top" width="39.04%">          <p id="ZH-CN_TOPIC_0000002478334380__p836264962511">CMake编译参数。</p>          <p id="ZH-CN_TOPIC_0000002478334380__p1451517268517">Hvigor将会把此处的自定义参数传递给cmake构建工具，您可通过cmake官方文档查找您所需的编译参数，同时它也将覆盖默认同名参数。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row3816161716131">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p204771733143515"><span style="color: rgb(48,48,48);">cppFlags</span></p></td>         <td class="cellrowborder" valign="top" width="18.47%">          <p id="ZH-CN_TOPIC_0000002478334380__p1436224972519">字符串</p></td>         <td class="cellrowborder" valign="top" width="17.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p131297311076">可选</p></td>         <td class="cellrowborder" valign="top" width="39.04%">          <p id="ZH-CN_TOPIC_0000002478334380__p153623498258">C++编译器参数。</p>          <p id="ZH-CN_TOPIC_0000002478334380__p860001633720">从DevEco Studio 6.0.1 Beta1版本开始，新增"-iclang"参数，提升编译效率，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-experimental-properties#section324586847">通过IClang提升C++增量编译效率</a>。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row14507161754715">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p1950814178475">cFlags</p></td>         <td class="cellrowborder" valign="top" width="18.47%">          <p id="ZH-CN_TOPIC_0000002478334380__p117641819172312">字符串</p></td>         <td class="cellrowborder" valign="top" width="17.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p1676461917233">可选</p></td>         <td class="cellrowborder" valign="top" width="39.04%">          <p id="ZH-CN_TOPIC_0000002478334380__p3764181932319">C编译参数。仅模块级build-profile.json5文件支持配置。</p>          <p id="ZH-CN_TOPIC_0000002478334380__p125219498381">从DevEco Studio 6.0.1 Beta1版本开始，新增"-iclang"参数，提升编译效率，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-experimental-properties#section324586847">通过IClang提升C++增量编译效率</a>。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row45089171472">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p1750814171470"><span style="color: rgb(48,48,48);">targets</span></p></td>         <td class="cellrowborder" valign="top" width="18.47%">          <p id="ZH-CN_TOPIC_0000002478334380__p1648995731514">字符串数组</p></td>         <td class="cellrowborder" valign="top" width="17.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p0664852133217">可选</p></td>         <td class="cellrowborder" valign="top" width="39.04%">          <p id="ZH-CN_TOPIC_0000002478334380__p1048915717151">指定hvigor应构建的CMake项目中的库和可执行目标。仅模块级build-profile.json5文件支持配置。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section15889929155720">nativeLib<i class="anchor-icon anchor-icon-link" anchorid="section15889929155720" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334380__p9702175632612">nativeLib是Native库（.so）相关配置。</p>     <div class="tablenoborder">      <div class="tbBox"><table id="table181833559242" class="layoutFixed idpTab">       <caption>        <b>表2 </b>nativeLib字段说明       </caption>       <thead>        <tr id="ZH-CN_TOPIC_0000002478334380__row151831255192418">         <th align="left" class="cellrowborder" id="mcps1.3.4.3.2.5.1.1" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p133701369558">字段名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.2.5.1.2" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p1437066145516">类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.2.5.1.3" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p123701617551">可选/必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.2.5.1.4" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p113707645516">含义</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002478334380__row1218319554241">         <td class="cellrowborder" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p1018313553243"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp#section17675528161517">filter</a></p></td>         <td class="cellrowborder" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p4791561282">对象</p></td>         <td class="cellrowborder" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p12129133113715">可选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p37912062289">Native 库（.so）文件的筛选选项。配置后优先级高于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-profile-app#section1488712919295">napiLibFilterOption</a>。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row1318318550247">         <td class="cellrowborder" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p15183455102411"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp#section2182144382320">debugSymbol</a></p></td>         <td class="cellrowborder" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p2468165316281">对象</p></td>         <td class="cellrowborder" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p612913311176">可选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p1346916531286">移除.so文件中的符号表、调试信息。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row418345510249">         <td class="cellrowborder" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p21894315320">headerPath</p></td>         <td class="cellrowborder" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p191896314536">字符串/字符串数组</p></td>         <td class="cellrowborder" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p1113011311079">可选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p25291534403">指定要导出的头文件路径。</p>          <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">            <p id="ZH-CN_TOPIC_0000002478334380__p10664244114712">请勿将源码等文件放置在该路径下，可能会被打包到产物中，请谨慎配置。</p>           </div></div></div></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row1718314558246">         <td class="cellrowborder" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p73671346872">collectAllLibs</p>          <p id="ZH-CN_TOPIC_0000002478334380__p1837274610714"></p></td>         <td class="cellrowborder" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p53671467717">布尔值</p></td>         <td class="cellrowborder" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p193670461074">可选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p163681346271">对libs目录收集打包时，是否收集所有后缀的文件。</p>          <ul id="ZH-CN_TOPIC_0000002478334380__ul16368194611714">           <li id="li1336813465710">true：不限制后缀，即收集所有文件（包括无后缀文件）。</li>           <li id="li1136894618718">false（缺省默认值）：限制后缀为.so，即只收集后缀为.so的文件。</li>          </ul></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row101841455192412">         <td class="cellrowborder" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p170912593813">excludeFromHar</p></td>         <td class="cellrowborder" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p734411196384">布尔值</p></td>         <td class="cellrowborder" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p83441619123817">可选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p5344101983820">构建HAR时，是否排除依赖HAR模块中的.so文件，排除时，依赖HAR模块的.so文件不会被打包到产物中。</p>          <ul id="ZH-CN_TOPIC_0000002478334380__ul18905161311396">           <li id="li10905191343914">true（缺省默认值）：排除。</li>           <li id="li1855823485216">false：不排除。</li>          </ul>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p id="ZH-CN_TOPIC_0000002478334380__p1164811985619">仅针对HAR模块生效。</p>           </div></div></div></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row1118485510245">         <td class="cellrowborder" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p121031675149">excludeSoFromInterfaceHar</p></td>         <td class="cellrowborder" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p1721295717138">布尔值</p></td>         <td class="cellrowborder" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p13212165781317">可选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p49671925151416"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hsp#section67683213597">编译HSP模块</a>时，打包的HAR产物是否排除.so文件，减少.tgz包体积大小。</p>          <ul id="ZH-CN_TOPIC_0000002478334380__ul1373614516411">           <li id="li773675114114">true：排除。HAR产物不包含.so文件，HSP产物包含.so文件。</li>           <li id="li01049148410">false（缺省默认值）：不排除。HAR产物和HSP产物都包含.so文件。</li>          </ul>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <ul id="ZH-CN_TOPIC_0000002478334380__ul1747202415424">             <li id="li97475245427">仅针对HSP模块生效。</li>             <li id="li970993611429">当HSP模块的工程级或模块级build-profile.json5文件中配置headerPath字段时，excludeSoFromInterfaceHar字段不生效。</li>            </ul>           </div></div></div></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row116610895120">         <td class="cellrowborder" valign="top" width="27.93%">          <p id="ZH-CN_TOPIC_0000002478334380__p161661885511"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp#section969845819510">librariesInfo</a></p></td>         <td class="cellrowborder" valign="top" width="14.64%">          <p id="ZH-CN_TOPIC_0000002478334380__p729585114127">对象数组</p></td>         <td class="cellrowborder" valign="top" width="11.799999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p16295175141215">可选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p229565111210">声明so的透传依赖信息。仅模块级build-profile.json5文件支持配置。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section17675528161517" class="firsth2">filter<i class="anchor-icon anchor-icon-link" anchorid="section17675528161517" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334380__p187411355163013">filter是Native 库（.so）文件的筛选选项。配置后优先级高于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-profile-app#section1488712919295">napiLibFilterOption</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table id="table46613917208" class="layoutFixed idpTab">       <caption>        <b>表3 </b>filter字段说明       </caption>       <thead>        <tr id="ZH-CN_TOPIC_0000002478334380__row5671139112013">         <th align="left" class="cellrowborder" id="mcps1.3.5.3.2.5.1.1" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p1997075952410">字段名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.2.5.1.2" valign="top" width="13.58%">          <p id="ZH-CN_TOPIC_0000002478334380__p397095982420">类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.2.5.1.3" valign="top" width="14.17%">          <p id="ZH-CN_TOPIC_0000002478334380__p20970105915249">可选/必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.2.5.1.4" valign="top" width="47.25%">          <p id="ZH-CN_TOPIC_0000002478334380__p1597018595243">含义</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002478334380__row167939152017">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p852011043910">excludes</p></td>         <td class="cellrowborder" valign="top" width="13.58%">          <p id="ZH-CN_TOPIC_0000002478334380__p01925269463">字符串数组</p></td>         <td class="cellrowborder" valign="top" width="14.17%">          <p id="ZH-CN_TOPIC_0000002478334380__p9129163116716">可选</p></td>         <td class="cellrowborder" valign="top" width="47.25%">          <p id="ZH-CN_TOPIC_0000002478334380__p12818182503920">根据正则表达式排除匹配到的.so文件，匹配到的so文件将不会被打包。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row0674391202">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p85201210103910">pickFirsts</p></td>         <td class="cellrowborder" valign="top" width="13.58%">          <p id="ZH-CN_TOPIC_0000002478334380__p1281892503915">字符串数组</p></td>         <td class="cellrowborder" valign="top" width="14.17%">          <p id="ZH-CN_TOPIC_0000002478334380__p12129183110713">可选</p></td>         <td class="cellrowborder" valign="top" width="47.25%">          <p id="ZH-CN_TOPIC_0000002478334380__p13818192515396">按照.so文件的<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp#li143214241919">优先级顺序</a>，打包最高优先级的.so文件。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row967183914207">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p95203106395">pickLasts</p></td>         <td class="cellrowborder" valign="top" width="13.58%">          <p id="ZH-CN_TOPIC_0000002478334380__p10818625133915">字符串数组</p></td>         <td class="cellrowborder" valign="top" width="14.17%">          <p id="ZH-CN_TOPIC_0000002478334380__p71293310717">可选</p></td>         <td class="cellrowborder" valign="top" width="47.25%">          <p id="ZH-CN_TOPIC_0000002478334380__p188185259396">按照.so文件的<a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp#li143214241919">优先级顺序</a>，打包最低优先级的.so文件。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row167339132013">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p45202010193919">enableOverride</p></td>         <td class="cellrowborder" valign="top" width="13.58%">          <p id="ZH-CN_TOPIC_0000002478334380__p181812593910">布尔值</p></td>         <td class="cellrowborder" valign="top" width="14.17%">          <p id="ZH-CN_TOPIC_0000002478334380__p13129183112715">可选</p></td>         <td class="cellrowborder" valign="top" width="47.25%">          <p id="ZH-CN_TOPIC_0000002478334380__p4818525203910">是否允许当.so文件重名冲突时，使用高优先级的.so文件覆盖低优先级的.so文件：</p>          <ul id="ZH-CN_TOPIC_0000002478334380__ul88181251394">           <li id="li1581842511397">true：允许。</li>           <li id="li281852516398">false（缺省默认值）：不允许。</li>          </ul></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row1168143912012">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p14665125882912"><a href="/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp#li1737916541996">select</a></p></td>         <td class="cellrowborder" valign="top" width="13.58%">          <p id="ZH-CN_TOPIC_0000002478334380__p36650580295">对象数组</p></td>         <td class="cellrowborder" valign="top" width="14.17%">          <p id="ZH-CN_TOPIC_0000002478334380__p966595811293">可选</p></td>         <td class="cellrowborder" valign="top" width="47.25%">          <p id="ZH-CN_TOPIC_0000002478334380__p5173445132113">select提供native产物的精准选择能力，根据包名、版本、产物名称等，选择打包或排除native产物到HAP/HSP/HAR产物。</p>          <p id="ZH-CN_TOPIC_0000002478334380__p666545815296">select的优先级高于excludes、pickFirsts等配置项。</p></td>        </tr>             </tbody></table></div>     </div>     <ul id="ZH-CN_TOPIC_0000002478334380__ul63212416913">      <li id="li143214241919"><strong>库文件so的优先级</strong>       <p id="ZH-CN_TOPIC_0000002478334380__p5541353101013">库文件so的优先级选择，可以通过pickFirsts，pickLasts选项来选择，其中pickFirsts选择高优先级的库文件，pickLasts选择低优先级的库文件。</p>       <p id="ZH-CN_TOPIC_0000002478334380__p205435318102">这个优先级是由本模块所依赖模块或三方包的收集顺序决定的，本模块的依赖在oh-package.json5文件的dependencies配置中声明，收集顺序按照广度优先的遍历方式来收集依赖。</p>       <p id="ZH-CN_TOPIC_0000002478334380__p115435320101">如下图，优先级顺序为current &gt; library0 &gt; library1 &gt; library5 &gt; library2 &gt; library3 &gt; library4。</p>       <div class="fignone" id="fig5542533105">        <span class="figcap"><b>图1 </b></span>        <br><span><img height="328.003935" originheight="2638" originwidth="2769" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104915.99443224920525364138125836357824:50001231000000:2800:1C84E47B131AABA53E30E349C7D648B98A80513DF7B52DB87E55A43055BE834C.png" title="点击放大" width="344.13750000000005"></span>       </div></li>      <li id="li1737916541996"><strong>select</strong>       <div class="tablenoborder">        <div class="tbBox"><table id="table1144771551112" class="layoutFixed idpTab">         <caption>          <b>表4 </b>select字段说明         </caption>         <thead>          <tr id="ZH-CN_TOPIC_0000002478334380__row13447915181112">           <th align="left" class="cellrowborder" id="mcps1.3.5.4.2.2.2.5.1.1" valign="top" width="16.37%">            <p id="ZH-CN_TOPIC_0000002478334380__p104476155113">字段名称</p></th>           <th align="left" class="cellrowborder" id="mcps1.3.5.4.2.2.2.5.1.2" valign="top" width="16.689999999999998%">            <p id="ZH-CN_TOPIC_0000002478334380__p64477159115">类型</p></th>           <th align="left" class="cellrowborder" id="mcps1.3.5.4.2.2.2.5.1.3" valign="top" width="18.15%">            <p id="ZH-CN_TOPIC_0000002478334380__p1844771581119">可选/必选</p></th>           <th align="left" class="cellrowborder" id="mcps1.3.5.4.2.2.2.5.1.4" valign="top" width="48.79%">            <p id="ZH-CN_TOPIC_0000002478334380__p744711156114">含义</p></th>          </tr>         </thead>                   <tbody><tr id="ZH-CN_TOPIC_0000002478334380__row5447615181115">           <td class="cellrowborder" valign="top" width="16.37%">            <p id="ZH-CN_TOPIC_0000002478334380__p19447181571119">package</p></td>           <td class="cellrowborder" valign="top" width="16.689999999999998%">            <p id="ZH-CN_TOPIC_0000002478334380__p1244861591111">字符串</p></td>           <td class="cellrowborder" valign="top" width="18.15%">            <p id="ZH-CN_TOPIC_0000002478334380__p7448161561110">可选</p></td>           <td class="cellrowborder" valign="top" width="48.79%">            <p id="ZH-CN_TOPIC_0000002478334380__p4448615101113">包名。</p></td>          </tr>          <tr id="ZH-CN_TOPIC_0000002478334380__row104481015161115">           <td class="cellrowborder" valign="top" width="16.37%">            <p id="ZH-CN_TOPIC_0000002478334380__p17448151513114">version</p></td>           <td class="cellrowborder" valign="top" width="16.689999999999998%">            <p id="ZH-CN_TOPIC_0000002478334380__p444871521117">字符串</p></td>           <td class="cellrowborder" valign="top" width="18.15%">            <p id="ZH-CN_TOPIC_0000002478334380__p174481315181119">可选</p></td>           <td class="cellrowborder" valign="top" width="48.79%">            <p id="ZH-CN_TOPIC_0000002478334380__p19448191519116">包版本。</p></td>          </tr>          <tr id="ZH-CN_TOPIC_0000002478334380__row165318114465">           <td class="cellrowborder" valign="top" width="16.37%">            <p id="ZH-CN_TOPIC_0000002478334380__p3532181184610">includePattern</p></td>           <td class="cellrowborder" valign="top" width="16.689999999999998%">            <p id="ZH-CN_TOPIC_0000002478334380__p9532191124610">字符串数组</p></td>           <td class="cellrowborder" valign="top" width="18.15%">            <p id="ZH-CN_TOPIC_0000002478334380__p853212113467">可选</p></td>           <td class="cellrowborder" valign="top" width="48.79%">            <p id="ZH-CN_TOPIC_0000002478334380__p557475174017">当依赖的多个包中存在重名的native产物时，指定需要打包的native产物，支持glob语法。</p>            <p id="ZH-CN_TOPIC_0000002478334380__p9532131174610">从DevEco Studio 6.0.0 Beta2版本开始支持。</p></td>          </tr>          <tr id="ZH-CN_TOPIC_0000002478334380__row0532181154618">           <td class="cellrowborder" valign="top" width="16.37%">            <p id="ZH-CN_TOPIC_0000002478334380__p1753271111468">excludePattern</p></td>           <td class="cellrowborder" valign="top" width="16.689999999999998%">            <p id="ZH-CN_TOPIC_0000002478334380__p1253215115461">字符串数组</p></td>           <td class="cellrowborder" valign="top" width="18.15%">            <p id="ZH-CN_TOPIC_0000002478334380__p1053241114466">可选</p></td>           <td class="cellrowborder" valign="top" width="48.79%">            <p id="ZH-CN_TOPIC_0000002478334380__p195321211154611">指定排除的native产物，默认打包所有产物，支持glob语法。excludePattern优先级比includePattern高。</p>            <p id="ZH-CN_TOPIC_0000002478334380__p471145411409">从DevEco Studio 6.0.0 Beta2版本开始支持。</p></td>          </tr>          <tr id="ZH-CN_TOPIC_0000002478334380__row74483159110">           <td class="cellrowborder" valign="top" width="16.37%">            <p id="ZH-CN_TOPIC_0000002478334380__p1544841521117">include</p></td>           <td class="cellrowborder" valign="top" width="16.689999999999998%">            <p id="ZH-CN_TOPIC_0000002478334380__p1448131515119">字符串数组</p></td>           <td class="cellrowborder" valign="top" width="18.15%">            <p id="ZH-CN_TOPIC_0000002478334380__p11448121512114">可选</p></td>           <td class="cellrowborder" valign="top" width="48.79%">            <p id="ZH-CN_TOPIC_0000002478334380__p344818156113">当依赖的多个包中存在重名的native产物时，指定需要打包的native产物。</p>            <p id="ZH-CN_TOPIC_0000002478334380__p17198131313018">从DevEco Studio 6.0.0 Beta2版本开始，字段标记为废弃，推荐使用includePattern字段。</p></td>          </tr>          <tr id="ZH-CN_TOPIC_0000002478334380__row8448115161118">           <td class="cellrowborder" valign="top" width="16.37%">            <p id="ZH-CN_TOPIC_0000002478334380__p444813154116">exclude</p></td>           <td class="cellrowborder" valign="top" width="16.689999999999998%">            <p id="ZH-CN_TOPIC_0000002478334380__p64487154118">字符串数组</p></td>           <td class="cellrowborder" valign="top" width="18.15%">            <p id="ZH-CN_TOPIC_0000002478334380__p17448121571118">可选</p></td>           <td class="cellrowborder" valign="top" width="48.79%">            <p id="ZH-CN_TOPIC_0000002478334380__p244813154111">指定排除的native产物，默认打包所有产物。</p>            <p id="ZH-CN_TOPIC_0000002478334380__p18211111710011">从DevEco Studio 6.0.0 Beta2版本开始，字段标记为废弃，推荐使用excludePattern字段。</p></td>          </tr>                 </tbody></table></div>       </div>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p id="ZH-CN_TOPIC_0000002478334380__p11991625114416">includePattern/excludePattern字段和include/exclude字段不能同时配置。</p>        </div></div></div>       <p id="ZH-CN_TOPIC_0000002478334380__p878016258147"><strong>示例一：</strong>entry模块依赖har包@ohos/curl和har1包@ohos/curl1，har包和har1包中的.so文件如下，两个包中存在重名的libcurl.so，可通过includePattern选择需要打包的libcurl.so，同时通过excludePattern排除不需要的产物。</p>       <div _ngcontent-thx-c106="" class="highlight-div"><div _ngcontent-thx-c106="" class="highlight-div-header"><div _ngcontent-thx-c106="" class="highlight-div-header-left"><div _ngcontent-thx-c106="" class="handle-button expand-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thx-c106="" class="highlight-div-header-right"><div _ngcontent-thx-c106="" class="handle-button ai-button"></div><div _ngcontent-thx-c106="" class="handle-button line-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thx-c106="" class="handle-button theme-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thx-c106="" class="handle-button copy-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334380__screen199145801517" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// har包@ohos/curl的目录结构</span></li><li><span class="hljs-variable">└──</span> <span class="hljs-variable">har</span></li><li>    <span class="hljs-variable">└──</span> <span class="hljs-variable">libs</span></li><li>        <span class="hljs-variable">└──</span> <span class="hljs-variable">x86_64</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl</span>.<span class="hljs-variable">so</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl1</span>.<span class="hljs-variable">so</span></li><li>        <span class="hljs-variable">└──</span> <span class="hljs-variable">arm64</span>-<span class="hljs-variable">v8a</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl2</span>.<span class="hljs-variable">so</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl3</span>.<span class="hljs-variable">so</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl4</span>.<span class="hljs-variable">so</span></li><li><span class="hljs-comment">// har1包@ohos/curl1的目录结构</span></li><li><span class="hljs-variable">└──</span> <span class="hljs-variable">har1</span></li><li>    <span class="hljs-variable">└──</span> <span class="hljs-variable">libs</span></li><li>        <span class="hljs-variable">└──</span> <span class="hljs-variable">x86_64</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl</span>.<span class="hljs-variable">so</span></li><li><span class="hljs-comment">// build-profile.json5</span></li><li>{</li><li>  <span class="hljs-variable">buildOption</span>: {</li><li>    <span class="hljs-variable">nativeLib</span>: {</li><li>      <span class="hljs-variable">filter</span>: {</li><li>        <span class="hljs-variable">select</span>: [ <span class="hljs-comment">// select的优先级高于excludes、pickFirsts等配置项</span></li><li>          {</li><li>            <span class="hljs-keyword">package</span>: <span class="hljs-string">"@ohos/curl"</span>, <span class="hljs-comment">// 包名</span></li><li>            <span class="hljs-variable">version</span>: <span class="hljs-string">"1.3.5"</span>, <span class="hljs-comment">// 包版本</span></li><li>            <span class="hljs-variable">excludePattern</span>: [<span class="hljs-string">'**/arm64-v8a/**'</span>],    <span class="hljs-comment">// 排除har包arm64-v8a目录下的所有.so文件</span></li><li>           },</li><li>          {</li><li>            <span class="hljs-keyword">package</span>: <span class="hljs-string">"@ohos/curl1"</span>, <span class="hljs-comment">// 包名</span></li><li>            <span class="hljs-variable">version</span>: <span class="hljs-string">"1.3.5"</span>, <span class="hljs-comment">// 包版本</span></li><li>            <span class="hljs-variable">includePattern</span>: [<span class="hljs-string">'**/x86_64/libcurl.so'</span>],  <span class="hljs-comment">// 针对重名的libcurl.so，指定打包har1包中的libcurl.so</span></li><li>            <span class="hljs-comment">// include: ["libcurl.so"]  // 针对重名的libcurl.so，指定打包har1包中的libcurl.so</span></li><li>           },</li><li>        ]</li><li>      }</li><li>    }</li><li>  }</li><li>}</li><li><span class="hljs-comment">// 打包后hap包的目录结构</span></li><li><span class="hljs-variable">└──</span> <span class="hljs-variable">entry</span>-<span class="hljs-variable">default</span>.<span class="hljs-variable">hap</span></li><li>    <span class="hljs-variable">└──</span> <span class="hljs-variable">libs</span></li><li>        <span class="hljs-variable">└──</span> <span class="hljs-variable">x86_64</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl</span>.<span class="hljs-variable">so</span>    <span class="hljs-comment">// 来自har1包</span></li><li>            <span class="hljs-variable">└──</span> <span class="hljs-variable">libcurl1</span>.<span class="hljs-variable">so</span>   <span class="hljs-comment">// 来自har包</span></li></ol></pre></div></div>       <p id="ZH-CN_TOPIC_0000002478334380__p19811306287"><strong>示例二：</strong>har包中存在多个.so文件，需要打包其中的libcurl1.so和libcurl2.so。</p>       <div _ngcontent-thx-c106="" class="highlight-div"><div _ngcontent-thx-c106="" class="highlight-div-header"><div _ngcontent-thx-c106="" class="highlight-div-header-left"><div _ngcontent-thx-c106="" class="handle-button expand-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thx-c106="" class="highlight-div-header-right"><div _ngcontent-thx-c106="" class="handle-button ai-button"></div><div _ngcontent-thx-c106="" class="handle-button line-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thx-c106="" class="handle-button theme-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thx-c106="" class="handle-button copy-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" id="ZH-CN_TOPIC_0000002478334380__screen1091415620286" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// har包@ohos/curl的目录结构</span></li><li>└── <span class="hljs-selector-tag">libs</span></li><li>    └── <span class="hljs-selector-tag">arm64-v8a</span></li><li>        └── <span class="hljs-selector-tag">libcurl</span><span class="hljs-selector-class">.so</span></li><li>        └── <span class="hljs-selector-tag">libcurl1</span><span class="hljs-selector-class">.so</span></li><li>        └── <span class="hljs-selector-tag">libcurl2</span><span class="hljs-selector-class">.so</span></li><li><span class="hljs-comment">// build-profile.json5</span></li><li>{</li><li>  buildOption: {</li><li>    nativeLib: {</li><li>      <span class="hljs-attribute">filter</span>: {</li><li>        <span class="hljs-attribute">select</span>: [  <span class="hljs-comment">// select的优先级高于excludes、pickFirsts等配置项</span></li><li>          {</li><li>            <span class="hljs-attribute">package</span>: <span class="hljs-string">"@ohos/curl"</span>, <span class="hljs-comment">// 包名</span></li><li>            <span class="hljs-attribute">version</span>: <span class="hljs-string">"1.3.5"</span>, <span class="hljs-comment">// 包版本</span></li><li>            <span class="hljs-attribute">includePattern</span>: [],</li><li>            <span class="hljs-attribute">excludePattern</span>: [<span class="hljs-string">'**/arm64-v8a/!(*(libcurl1|libcurl2).so*)'</span>], <span class="hljs-comment">// 打包arm64-v8a目录下的libcurl1.so和libcurl2.so</span></li><li>            <span class="hljs-comment">// include: [],</span></li><li>            <span class="hljs-comment">// exclude: ["libcurl.so"] // 打包arm64-v8a目录下的libcurl1.so和libcurl2.so</span></li><li>           }</li><li>        ]</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section2182144382320">debugSymbol<i class="anchor-icon anchor-icon-link" anchorid="section2182144382320" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334380__p13841192432416">debugSymbol用于移除.so文件中的符号表、调试信息。</p>     <div class="tablenoborder">      <div class="tbBox"><table id="table1062319632416" class="layoutFixed idpTab">       <caption>        <b>表5 </b>debugSymbol字段说明       </caption>       <thead>        <tr id="ZH-CN_TOPIC_0000002478334380__row146230692419">         <th align="left" class="cellrowborder" id="mcps1.3.6.3.2.5.1.1" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p860701162415">字段名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.2.5.1.2" valign="top" width="13.74%">          <p id="ZH-CN_TOPIC_0000002478334380__p16607141142410">类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.2.5.1.3" valign="top" width="14.760000000000002%">          <p id="ZH-CN_TOPIC_0000002478334380__p96078111249">可选/必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.2.5.1.4" valign="top" width="46.5%">          <p id="ZH-CN_TOPIC_0000002478334380__p10607191182417">含义</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002478334380__row186248652418">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p272018412384">strip</p></td>         <td class="cellrowborder" valign="top" width="13.74%">          <p id="ZH-CN_TOPIC_0000002478334380__p13720174193815">布尔值</p></td>         <td class="cellrowborder" valign="top" width="14.760000000000002%">          <p id="ZH-CN_TOPIC_0000002478334380__p91292311878">可选</p></td>         <td class="cellrowborder" valign="top" width="46.5%">          <p id="ZH-CN_TOPIC_0000002478334380__p5720144103815">是否移除.so文件中的符号表、调试信息。</p>          <ul id="ZH-CN_TOPIC_0000002478334380__ul7641244162515">           <li id="li16419447258">true（缺省默认值）：移除。</li>           <li id="li156416447251">false：不移除。</li>          </ul>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p id="ZH-CN_TOPIC_0000002478334380__p324223411312">从DevEco Studio NEXT Developer Beta2（5.0.3.502）版本开始，缺省默认值由false改为true。</p>           </div></div></div></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row116249682412">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p163713603918">exclude</p></td>         <td class="cellrowborder" valign="top" width="13.74%">          <p id="ZH-CN_TOPIC_0000002478334380__p337203610398">字符串数组</p></td>         <td class="cellrowborder" valign="top" width="14.760000000000002%">          <p id="ZH-CN_TOPIC_0000002478334380__p813063115717">可选</p></td>         <td class="cellrowborder" valign="top" width="46.5%">          <p id="ZH-CN_TOPIC_0000002478334380__p466219541326">需要排除的.so文件，支持正则表达式写法。</p>          <ul id="ZH-CN_TOPIC_0000002478334380__ul49146425333">           <li id="li1542719448331">如果strip配置为true，匹配的.so文件将不会执行strip。</li>           <li id="li2914184273313">如果strip配置为false，只有匹配的.so文件会执行strip。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section969845819510">librariesInfo<i class="anchor-icon anchor-icon-link" anchorid="section969845819510" tips="复制节点链接"></i></h3>          <p id="ZH-CN_TOPIC_0000002478334380__p1120129145520">librariesInfo用于声明so的透传依赖信息。仅模块级build-profile.json5文件支持配置。</p>     <div class="tablenoborder">      <div class="tbBox"><table id="table2493128145216" class="layoutFixed idpTab">       <caption>        <b>表6 </b>       </caption>       <thead>        <tr id="ZH-CN_TOPIC_0000002478334380__row12494158185210">         <th align="left" class="cellrowborder" id="mcps1.3.7.3.2.5.1.1" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p16831412185217">字段名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.2.5.1.2" valign="top" width="14.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p968441215522">类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.2.5.1.3" valign="top" width="14.879999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p20684111225220">可选/必选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.2.5.1.4" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p18684212135210">含义</p></th>        </tr>       </thead>               <tbody><tr id="ZH-CN_TOPIC_0000002478334380__row749418865220">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p6123559161211">name</p></td>         <td class="cellrowborder" valign="top" width="14.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p1012317593126">字符串</p></td>         <td class="cellrowborder" valign="top" width="14.879999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p2123205914124">必选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p11234597129">本模块so库的名称。</p></td>        </tr>        <tr id="ZH-CN_TOPIC_0000002478334380__row549413875213">         <td class="cellrowborder" valign="top" width="25%">          <p id="ZH-CN_TOPIC_0000002478334380__p06793321315">linkLibraries</p></td>         <td class="cellrowborder" valign="top" width="14.49%">          <p id="ZH-CN_TOPIC_0000002478334380__p9679173191310">字符串数组</p></td>         <td class="cellrowborder" valign="top" width="14.879999999999999%">          <p id="ZH-CN_TOPIC_0000002478334380__p18679736135">必选</p></td>         <td class="cellrowborder" valign="top" width="45.629999999999995%">          <p id="ZH-CN_TOPIC_0000002478334380__p9679143101311">so库的依赖信息，格式为"依赖包名::依赖so名称"。</p></td>        </tr>             </tbody></table></div>     </div>     <p id="ZH-CN_TOPIC_0000002478334380__p1827883813260">如果需要声明库之间的依赖关系，例如entry依赖curl，可在模块内build-profile.json5中配置librariesInfo。</p>     <div _ngcontent-thx-c106="" class="highlight-div"><div _ngcontent-thx-c106="" class="highlight-div-header"><div _ngcontent-thx-c106="" class="highlight-div-header-left"><div _ngcontent-thx-c106="" class="handle-button expand-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thx-c106="" class="highlight-div-header-right"><div _ngcontent-thx-c106="" class="handle-button ai-button"></div><div _ngcontent-thx-c106="" class="handle-button line-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thx-c106="" class="handle-button theme-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thx-c106="" class="handle-button copy-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334380__screen1660961215405" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-string">"buildOption"</span></span><span class="">: </span>{</li><li>  <span class=""><span class="hljs-string">"nativeLib"</span></span><span class="">: </span>{</li><li>    <span class=""><span class="hljs-string">"librariesInfo"</span></span><span class="">: </span>[</li><li>      {</li><li>        <span class=""><span class="hljs-string">"name"</span></span><span class="">: </span><span class=""><span class="hljs-string">"libentry.so"</span></span><span class="">,</span></li><li>        <span class=""><span class="hljs-string">"linkLibraries"</span></span><span class="">: </span>[<span class=""><span class="hljs-string">"curl::curl"</span></span>]</li><li>      }</li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div>     <p id="ZH-CN_TOPIC_0000002478334380__p199681413115912">当其他模块依赖声明了依赖透传的模块并使用libentry.so时，libentry.so会将依赖curl::curl添加到参数INTERFACE_LINK_LIBRARIES，开发者无需关注它的依赖。</p>     <div _ngcontent-thx-c106="" class="highlight-div"><div _ngcontent-thx-c106="" class="highlight-div-header"><div _ngcontent-thx-c106="" class="highlight-div-header-left"><div _ngcontent-thx-c106="" class="handle-button expand-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thx-c106="" class="highlight-div-header-right"><div _ngcontent-thx-c106="" class="handle-button ai-button"></div><div _ngcontent-thx-c106="" class="handle-button line-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thx-c106="" class="handle-button theme-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thx-c106="" class="handle-button copy-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334380__screen141862048" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-title function_">add_library</span></span>(<span class="hljs-variable">library</span>::<span class="hljs-title class_">library</span> <span class="hljs-title class_">SHARED</span> <span class=""><span class="hljs-title class_">IMPORTED</span></span>)</li><li><span class=""><span class="hljs-title function_">set_target_properties</span></span>(<span class="hljs-variable">library</span>::<span class="hljs-title class_">library</span> <span class="hljs-title class_">PROPERTIES</span></li><li>    <span class=""><span class="hljs-variable">IMPORTED_LOCATION</span> </span><span class=""><span class="hljs-string">"/path/to/file"</span></span></li><li>    <span class=""><span class="hljs-variable">INTERFACE_LINK_LIBRARIES</span> </span><span class=""><span class="hljs-string">"curl::curl"</span></span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section813742919594">配置字段示例<i class="anchor-icon anchor-icon-link" anchorid="section813742919594" tips="复制节点链接"></i></h2>          <p id="ZH-CN_TOPIC_0000002478334380__p19728171473820">以模块级build-profile.json5为例：</p>    </div>    <div _ngcontent-thx-c106="" class="highlight-div"><div _ngcontent-thx-c106="" class="highlight-div-header"><div _ngcontent-thx-c106="" class="highlight-div-header-left"><div _ngcontent-thx-c106="" class="handle-button expand-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thx-c106="" class="highlight-div-header-right"><div _ngcontent-thx-c106="" class="handle-button ai-button"></div><div _ngcontent-thx-c106="" class="handle-button line-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thx-c106="" class="handle-button theme-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thx-c106="" class="handle-button copy-button"><div _ngcontent-thx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334380__screen20574205617504" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  ...</li><li>  <span class="hljs-string">"buildOptionSet"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"release"</span>,</li><li>      <span class="hljs-string">"arkOptions"</span>: {</li><li>        <span class="hljs-string">"obfuscation"</span>: {</li><li>          <span class="hljs-string">"ruleOptions"</span>: {</li><li>            <span class="hljs-string">"enable"</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-string">"files"</span>: [</li><li>              <span class="hljs-string">"./obfuscation-rules.txt"</span></li><li>            ]</li><li>          }</li><li>        }</li><li>      },</li><li>      <span class="hljs-string">"externalNativeOptions"</span>: {</li><li>        <span class="hljs-string">"path"</span>: <span class="hljs-string">"./src/main/cpp/CMakeLists.txt"</span>, <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义</span></span><span class=""><span class="hljs-comment">cmake</span></span><span class=""><span class="hljs-comment">配置脚本</span></span><span class=""><span class="hljs-comment">CMakeLists.txt</span></span><span class=""><span class="hljs-comment">的位置，它是以模块根目录为起始位置的相对路径</span></span></li><li>        <span class="hljs-string">"arguments"</span>: [<span class="hljs-string">"-DCMAKE_BUILD_TYPE=Debug"</span>], <span class=""><span class="hljs-comment">// Hvigor</span></span><span class=""><span class="hljs-comment">将会把此处的自定义参数传递给</span></span><span class=""><span class="hljs-comment">cmake</span></span><span class=""><span class="hljs-comment">构建工具，您可通过</span></span><span class=""><span class="hljs-comment">cmake</span></span><span class=""><span class="hljs-comment">官方文档查找您所需的编译参数，同时它也将覆盖默认同名参数</span></span></li><li>        <span class="hljs-string">"cppFlags"</span>: <span class="hljs-string">"-g"</span>, <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义</span></span><span class=""><span class="hljs-comment">cpp flags</span></span><span class=""><span class="hljs-comment">参数</span></span></li><li>        <span class="hljs-string">"abiFilters"</span>: [<span class="hljs-string">"arm64-v8a"</span>] <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义</span></span><span class=""><span class="hljs-comment">cpp</span></span><span class=""><span class="hljs-comment">编译架构，默认编译架构为</span></span><span class=""><span class="hljs-comment">arm64-v8a</span></span></li><li>      },</li><li>      <span class="hljs-string">"nativeLib"</span>: {</li><li>        <span class="hljs-string">"debugSymbol"</span>: { <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">可通过此配置对</span></span><span class=""><span class="hljs-comment">cpp</span></span><span class=""><span class="hljs-comment">编译产物</span></span><span class=""><span class="hljs-comment">so</span></span><span class=""><span class="hljs-comment">执行</span></span><span class=""><span class="hljs-comment">strip</span></span><span class=""><span class="hljs-comment">，移除</span></span><span class=""><span class="hljs-comment">so</span></span><span class=""><span class="hljs-comment">中的调试信息与符号表等</span></span></li><li>          <span class="hljs-string">"strip"</span>: <span class="hljs-keyword">true</span>, <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">执行</span></span><span class=""><span class="hljs-comment">strip</span></span></li><li>          <span class="hljs-string">"exclude"</span>: [] <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">执行</span></span><span class=""><span class="hljs-comment">strip</span></span><span class=""><span class="hljs-comment">的过滤正则表达式规则</span></span></li><li>        },</li><li>        <span class="hljs-string">"filter"</span>: { <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">可通过此选项自定义此</span></span><span class=""><span class="hljs-comment">cpp</span></span><span class=""><span class="hljs-comment">产物</span></span><span class=""><span class="hljs-comment">so</span></span><span class=""><span class="hljs-comment">是否打包到应用包中</span></span></li><li>          <span class="hljs-string">"excludes"</span>: [ <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">根据正则表达式排除匹配到的.so文件，匹配到的so文件将不会被打包，可用于打包时缩小包体积</span></span></li><li><span class="">            <span class="hljs-string">"**/3.so"</span></span>, <span class=""><span class="hljs-comment">// 排除所有名称为“3”的so文件</span></span></li><li><span class="">            <span class="hljs-string">"**/x86_64/*.so"</span></span> <span class=""><span class="hljs-comment">// 排除所有x86_64架构的so文件</span></span></li><li>          ], </li><li>          <span class="hljs-string">"pickFirsts"</span>: [<span class="hljs-string">"**/1.so"</span>], <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">按照</span></span><span class=""><span class="hljs-comment">.so</span></span><span class=""><span class="hljs-comment">文件的优先级顺序，打包最高优先级的</span></span><span class=""><span class="hljs-comment">.so</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li>          <span class="hljs-string">"pickLasts"</span>: [<span class="hljs-string">"**/2.so"</span>], <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">按照</span></span><span class=""><span class="hljs-comment">.so</span></span><span class=""><span class="hljs-comment">文件的优先级顺序，打包最低优先级的</span></span><span class=""><span class="hljs-comment">.so</span></span><span class=""><span class="hljs-comment">文件</span></span></li><li>          <span class="hljs-string">"enableOverride"</span>: <span class="hljs-keyword">true</span>, <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">当</span></span><span class=""><span class="hljs-comment">.so</span></span><span class=""><span class="hljs-comment">重名冲突时，</span></span><span class="hljs-comment">使用高优先级的.so文件覆盖低优先级的.so文件</span></li><li>        },</li><li>        <span class="hljs-string">"headerPath"</span>: <span class="hljs-string">"./src/main/cpp/include"</span>, <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">声明模块打包共享的</span></span><span class=""><span class="hljs-comment">c/cpp</span></span><span class=""><span class="hljs-comment">接口</span></span></li><li>        <span class="hljs-string">"librariesInfo"</span>:[</li><li>          {</li><li>             <span class=""><span class="hljs-string">"name"</span></span><span class="">: </span><span class=""><span class="hljs-string">"libentry.so"</span></span><span class="">,</span></li><li>             <span class=""><span class="hljs-string">"linkLibraries"</span></span><span class="">: </span>[<span class=""><span class="hljs-string">"curl::curl"</span></span>]</li><li>          }</li><li>        ]</li><li>      },</li><li>    },</li><li>  ],</li><li>  ...</li><li>}</li></ol></pre></div></div>   </div>   <div></div></div>