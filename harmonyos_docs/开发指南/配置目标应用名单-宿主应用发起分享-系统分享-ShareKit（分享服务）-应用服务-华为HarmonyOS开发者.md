<h1 _ngcontent-slu-c119="" class="doc-title ng-star-inserted" title="配置目标应用名单"> 配置目标应用名单 </h1>

<div _ngcontent-slu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section10878835152718">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section10878835152718" tips="复制节点链接"></i></h2><p>6.0.1(21)版本开始，支持宿主应用配置目标应用名单列表（最多支持50个应用）。配置成功后，仅名单内的目标可出现在系统分享面板的分享推荐区和分享方式区。</p> </div> <div class="tiledSection"><h2 id="section0297644182719">申请权限<i class="anchor-icon anchor-icon-link" anchorid="section0297644182719" tips="复制节点链接"></i></h2><p>当前能力受限开放，需要申请受限开放权限ohos.permission.SET_SYSTEMSHARE_APPLAUNCHTRUSTLIST。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>该权限用于限制应用分享范围，仅支持企业应用限制内部数据分享到企业集团信任的应用。</p> <p>申请方式请参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions-in-acl" target="_blank">申请使用受限权限</a>。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section1760755462716">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section1760755462716" tips="复制节点链接"></i></h2><ol><li>应用必须在module.json5配置文件的requestPermissions标签中声明权限。参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions" target="_blank">声明权限</a>。<div _ngcontent-slu-c106="" class="highlight-div"><div _ngcontent-slu-c106="" class="highlight-div-header"><div _ngcontent-slu-c106="" class="highlight-div-header-left"><div _ngcontent-slu-c106="" class="handle-button expand-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-slu-c106="" class="highlight-div-header-right"><div _ngcontent-slu-c106="" class="handle-button ai-button"></div><div _ngcontent-slu-c106="" class="handle-button line-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-slu-c106="" class="handle-button theme-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-slu-c106="" class="handle-button copy-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-slu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"requestPermissions"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.SET_SYSTEMSHARE_APPLAUNCHTRUSTLIST"</span>,</li><li>        <span class="hljs-string">"reason"</span>: <span class="hljs-string">'$string:permission_reason_set_system_share_app_launch_trust_list'</span></li><li>      },</li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div> </li><li>启动分享面板时，通过配置appLaunchTrustInfo参数，指定目标应用的范围。<div _ngcontent-slu-c106="" class="highlight-div"><div _ngcontent-slu-c106="" class="highlight-div-header"><div _ngcontent-slu-c106="" class="highlight-div-header-left"><div _ngcontent-slu-c106="" class="handle-button expand-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-slu-c106="" class="highlight-div-header-right"><div _ngcontent-slu-c106="" class="handle-button ai-button"></div><div _ngcontent-slu-c106="" class="handle-button line-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-slu-c106="" class="handle-button theme-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-slu-c106="" class="handle-button copy-button"><div _ngcontent-slu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-slu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">common</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">systemShare</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">uniformTypeDescriptor</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">utd</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-variable">export</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ShareAppTrustInfo</span> {</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Button</span>(<span class="hljs-string">'share'</span>).<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>      <span class="hljs-keyword">this</span>.<span class="hljs-title function_">share</span>();</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">share</span>() {</li><li>    <span class="hljs-comment">// 构造ShareData，需配置一条有效数据信息</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">data</span>: <span class="hljs-title class_">systemShare</span>.<span class="hljs-title class_">SharedData</span> = <span class="hljs-variable">new</span> <span class="hljs-variable">systemShare</span>.<span class="hljs-title function_">SharedData</span>({</li><li>      <span class="hljs-variable">utd</span>: <span class="hljs-title class_">utd</span>.<span class="hljs-title class_">UniformDataType</span>.<span class="hljs-title class_">PLAIN_TEXT</span>,</li><li>      <span class="hljs-variable">content</span>: <span class="hljs-string">'Hello HarmonyOS'</span></li><li>    });</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>    <span class="hljs-comment">// 构建ShareController</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">controller</span>: <span class="hljs-title class_">systemShare</span>.<span class="hljs-title class_">ShareController</span> = <span class="hljs-variable">new</span> <span class="hljs-variable">systemShare</span>.<span class="hljs-title function_">ShareController</span>(<span class="hljs-variable">data</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">context</span>: <span class="hljs-title class_">common</span>.<span class="hljs-title class_">UIAbilityContext</span> = <span class="hljs-variable">uiContext</span>.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">common</span>.<span class="hljs-variable">UIAbilityContext</span>;</li><li>    <span class="hljs-comment">// 进行分享面板显示</span></li><li>    <span class="hljs-variable">controller</span>.<span class="hljs-title function_">show</span>(<span class="hljs-variable">context</span>, {</li><li>      <span class="hljs-variable">previewMode</span>: <span class="hljs-title class_">systemShare</span>.<span class="hljs-title class_">SharePreviewMode</span>.<span class="hljs-title class_">DEFAULT</span>,</li><li>      <span class="hljs-variable">selectionMode</span>: <span class="hljs-title class_">systemShare</span>.<span class="hljs-title class_">SelectionMode</span>.<span class="hljs-title class_">SINGLE</span>,</li><li>      <span class="hljs-variable">appLaunchTrustInfo</span>: [<span class="hljs-string">'5765880207853060000'</span>, <span class="hljs-string">'1171817433862770000'</span>], <span class="hljs-comment">// 此值仅为示例. 目标应用 appidentifier</span></li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div> </li></ol> </div> </div> <div></div></div>