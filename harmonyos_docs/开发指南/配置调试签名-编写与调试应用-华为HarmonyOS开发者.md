<h1 _ngcontent-axl-c119="" class="doc-title ng-star-inserted" title="配置调试签名"> 配置调试签名 </h1>

<div _ngcontent-axl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001587684945"><p id="ZH-CN_TOPIC_0000002478334392__p8732174024014">针对开发调试场景，DevEco Studio为开发者提供了<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section18815157237">自动签名</a>方案，帮助开发者高效进行调试。此外，也可以选择<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section297715173233">手动签名</a>方式生成调试签名。</p> <div class="tiledSection"><h2 id="section54361623194519">使用场景说明<i class="anchor-icon anchor-icon-link" anchorid="section54361623194519" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002478334392__ul105705715411"><li id="li1410410371352">自动签名仅用于调试场景，方便开发者进行应用的调试。部分调试场景下必须使用手动签名：<ul id="ZH-CN_TOPIC_0000002478334392__ul1799172113617"><li id="li1868612583610">当需要进行跨设备调试、跨应用交互调试、断网情况下调试或者多用户共同开发且需要共享密钥时，必须使用<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section297715173233">手动签名</a>。</li><li id="li1483917116410">如果开发过程中使用到需要审批的权限时，例如：<ul id="ZH-CN_TOPIC_0000002478334392__ul662912171748"><li id="li9686115153611">使用部分不支持自动签名的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/restricted-permissions" target="_blank">受限开放权限</a>时，必须使用<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section297715173233">手动签名</a>。支持自动签名的ACL权限清单请参见<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section5301916183411">自动签名支持的ACL权限</a>。</li><li id="li67278123568">需要华为业务方审核的权限时（例如华为账号一键登录等），必须使用手动签名。</li></ul> </li><li id="li33001947152112">若kit需要配置指纹，建议使用手动签名。</li></ul> </li><li id="li8220746173419">发布场景必须使用手动签名。</li></ul> </div> <div class="tiledSection"><h2 id="section18815157237">自动签名<i class="anchor-icon anchor-icon-link" anchorid="section18815157237" tips="复制节点链接"></i></h2></div> <p id="ZH-CN_TOPIC_0000002478334392__p10218429143215">从DevEco Studio 6.0.0 Beta5版本开始，应用的自动签名分为关联注册应用进行签名和未关联注册应用进行签名两种。</p> <ul id="ZH-CN_TOPIC_0000002478334392__ul15145192611323"><li id="li1693817591734">关联注册应用进行签名：与应用市场（AppGallery Connect，简称AGC）的应用绑定，可在DevEco Studio开通<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-create-app-0000002247955506#section1817619495251" target="_blank">开放能力</a>。</li><li id="li1214510262325">未关联注册应用进行签名：未与应用市场的应用绑定，不支持在DevEco Studio开通开放能力。</li></ul> <div class="tiledSection"><h3 id="section341949115713" class="firsth2">约束与限制<i class="anchor-icon anchor-icon-link" anchorid="section341949115713" tips="复制节点链接"></i></h3><ul id="ZH-CN_TOPIC_0000002478334392__ul3238205525713"><li id="li92385552570">关联注册应用进行签名，该功能仅支持中国境内（香港特别行政区、澳门特别行政区、中国台湾除外）。</li><li id="li22381855115715">元服务的自动签名是关联注册应用进行签名，该功能仅支持中国境内（香港特别行政区、澳门特别行政区、中国台湾除外）。</li><li id="li1723815515573">使用自动签名前，请确保本地系统时间与北京时间（UTC/GMT+08:00）保持一致。如果不一致，将导致签名失败。</li></ul> </div> <div class="tiledSection"><h3 id="section20943184413328">关联注册应用进行签名<i class="anchor-icon anchor-icon-link" anchorid="section20943184413328" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334392__p111051552610"><strong>操作步骤</strong></p> <ol id="ZH-CN_TOPIC_0000002478334392__ol103390512267"><li id="li0339155111262">连接真机设备或模拟器，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-run-device">使用本地真机运行应用/元服务</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-run-emulator">使用模拟器运行应用/元服务</a>，真机连接成功后如下图所示：<p id="ZH-CN_TOPIC_0000002478334392__p2987532193418"><span><img originheight="328" originwidth="377" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.88264890313296435819299835406429:50001231000000:2800:08BB8AE85B47B7869B2F2B04FA158EA2CF446B0A23F342F7519C452F55FD9A5A.png" width="377" height="328"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334392__p917062311716">如果同时连接多个设备，则使用自动化签名时，会同时将这多个设备的信息写到证书文件中。</p> </div></div></div> </li><li id="li50153911296">进入<strong>File &gt; Project Structure... &gt; Project &gt; Signing Configs</strong>界面，勾选“<strong>Associate with registered application</strong>”。如果未登录，请先点击<strong>Sign In</strong>进行登录。<div class="p" id="ZH-CN_TOPIC_0000002478334392__p175358422573"><span><img height="523.916925" originheight="600" originwidth="963" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.74309668511085177099339495078822:50001231000000:2800:C6D67677E16345B371736DF639DB1A888EF3BACA3ECB981217B698474AD20E02.png" title="点击放大" width="840.8925"></span><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478334392__ul9684112310217"><li id="li719154815412">点击<strong>Team</strong>下拉框，可以切换团队账号。</li><li id="li168419233219">开始签名后，DevEco Studio根据Bundle name查询该团队在AGC上的同包名应用。若在AGC查询到应用，则进行自动签名；若在AGC未查询到应用或应用冲突，请根据提示信息修改后重新自动签名，具体修改请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-faqs/faqs-signature-service-18" target="_blank">常见问题</a>。</li></ul> </div></div></div> </div> </li><li id="li62235304416">点击<strong>Enable open capabilities</strong>，在DevEco Studio上开通<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-create-app-0000002247955506#section1817619495251" target="_blank">开放能力</a>。当前支持开通如下四种开放能力：Push Kit（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-kit-introduction" target="_blank">推送服务</a>）、Device status detection（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/devicesecurity-deviceverify-develop" target="_blank">应用设备状态检测</a>）、Map Kit（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/map-introduction" target="_blank">地图服务</a>）、Safety Detect（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/devicesecurity-safetydetect-develop" target="_blank">安全检测服务</a>），应用根据需要进行勾选。<p id="ZH-CN_TOPIC_0000002478334392__p10515122985616"><span><img originheight="591" originwidth="954" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.88336445744524268807076565807893:50001231000000:2800:5976BB305945A344AAEBCCDB66A4AC54ABE81AA931E4BB946FDF8F84E4E1AEC1.png" width="920" height="569.937106918239"></span></p> </li><li id="li12651123915818">（可选）在配置文件中添加ACL权限信息，ACL权限清单请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section5301916183411">自动签名支持的ACL权限</a>。<div class="p" id="ZH-CN_TOPIC_0000002478334392__p944718448811">在需要使用权限的模块的module.json5/config.json文件中添加“requestPermissions”/“reqPermissions”字段，并在字段下添加对应的权限名等信息，以在Stage模型工程中增加"ohos.permission.ACCESS_DDK_USB"权限为例。<div _ngcontent-axl-c106="" class="highlight-div"><div _ngcontent-axl-c106="" class="highlight-div-header"><div _ngcontent-axl-c106="" class="highlight-div-header-left"><div _ngcontent-axl-c106="" class="handle-button expand-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-axl-c106="" class="highlight-div-header-right"><div _ngcontent-axl-c106="" class="handle-button ai-button"></div><div _ngcontent-axl-c106="" class="handle-button line-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-axl-c106="" class="handle-button theme-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-axl-c106="" class="handle-button copy-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-axl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334392__screen387514438613" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    ...</li><li>    <span class="hljs-string">"requestPermissions"</span>: [{</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.ACCESS_DDK_USB"</span>,</li><li>    }],</li><li>    ...</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334392__p2578183771113"><span><img originheight="264" originwidth="414" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.60593835441215576832755158271600:50001231000000:2800:FAA8A14BF4B5298C9C1A2E78932A0247BCE0558FBAE14756130FEEE1F637AA0D.png" width="414" height="264"></span></p> <p id="ZH-CN_TOPIC_0000002478334392__p1651535613512">修改配置文件后，若应用已在AGC申请该权限，点击<strong>OK</strong>继续签名。若应用未申请该权限，会导致签名失败，点击Notice弹窗中"<strong>submit a permission request in AppGallery Connect</strong>"或"<strong>Submit</strong>"，跳转至AGC申请权限，然后返回DevEco Studio界面重新签名。</p> <p id="ZH-CN_TOPIC_0000002478334392__p1251510561558"><span><img height="311.138205" originheight="604" originwidth="966" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.77069454018188071071987604386961:50001231000000:2800:83AC5E13683B84D1998CE7293DA965FC476AB0D44F2DFA4593D5FA5CEFA56B2A.png" title="点击放大" width="493.76250000000005"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478334392__ul1351516561052"><li id="li151510569510">申请ACL前注意事项：<ul id="ZH-CN_TOPIC_0000002478334392__ul1451517561553"><li id="li151516561958">在申请ACL权限前，请审视是否符合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/restricted-permissions" target="_blank">受限权限的使用场景</a>。当前仅少量符合特殊场景的应用可在通过审批后，使用受限权限。申请方式请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions-in-acl" target="_blank">申请使用受限权限</a>。</li><li id="li05151569514">涉及受限权限的应用，在上架时，应用市场（AGC）将根据应用的使用场景审核是否可以使用对应的受限权限。如不符合，应用的上架申请将被驳回，审核方式请见<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-release-app-0000002271695230" target="_blank">发布HarmonyOS应用</a>。</li></ul> </li></ul> <ul id="ZH-CN_TOPIC_0000002478334392__ul551512561352"><li id="li145150561959">申请ACL后Profile证书说明：<ul id="ZH-CN_TOPIC_0000002478334392__ul1351595611518"><li id="li851520566516">在ACL权限申请审批完成前，可获得一个有效期较短的临时Profile证书，使应用完成签名。临时证书到期后，若申请仍未审批通过，签名时需再次申请和再次获取临时证书。</li><li id="li105151756959">在ACL权限申请审批完成后，可获取一个有效期较长的正式Profile证书。</li></ul> </li></ul> </div></div></div> </li><li id="li029411665418">签名完成后，将鼠标悬置Provisioning Profile: DevEco Managed Profile后<span><img originheight="25" originwidth="26" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.50632817493114807870821549264138:50001231000000:2800:F1F790B0739C46902B2010F0E095ED1E5710228BCD10A0BB96C48735DB573F95.png" class="IconPic notEnlarge" width="26" height="25"></span>，可查看证书有效期、包名（bundle name）、企业名称（common name）、ACL权限（acl）、开放能力（capability）相关信息。</li></ol> </div> <div class="tiledSection"><h3 id="section151231211105010">未关联注册应用进行签名<i class="anchor-icon anchor-icon-link" anchorid="section151231211105010" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334392__p17624193918354"><strong>操作步骤</strong></p> <ol id="ZH-CN_TOPIC_0000002478334392__ol15587125120161"><li id="li758713517169"><span>连接真机设备或模拟器，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-run-device">使用本地真机运行应用/元服务</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-run-emulator">使用模拟器运行应用/元服务</a>，真机连接成功后如下图所示：</span><p></p><div class="p" id="ZH-CN_TOPIC_0000002478334392__p131314619216"><span><img originheight="328" originwidth="377" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.61858910263753044917065079669103:50001231000000:2800:1BDC44DDF5849D70A2C51E5D8E50547D9AADD2B3F21CE690FDF7B3AE42718131.png" width="377" height="328"></span><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334392__p1788815612117">如果同时连接多个设备，则使用自动化签名时，会同时将这多个设备的信息写到证书文件中。</p> </div></div></div> </div> <p></p></li><li id="li185871351191614"><span>进入<strong>File &gt; Project Structure... &gt; Project &gt; Signing Configs</strong>界面，勾选“<strong>Automatically generate signature</strong>”，即可完成签名。如果未登录，请先单击<strong>Sign In</strong>进行登录，然后自动完成签名。</span><p></p><p id="ZH-CN_TOPIC_0000002478334392__p15866466577"><span><img height="326.1825" originheight="596" originwidth="955" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.30174175098782633012422711990446:50001231000000:2800:43F7690C2D590397F31E37BF76149B78A6278E7C1CD98B675798DD5266D798E7.png" title="点击放大" width="523.6875"></span></p> <p></p></li><li id="li174671829122315"><span>（可选）在配置文件中添加ACL权限信息，ACL权限清单请参考<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section5301916183411">自动签名支持的ACL权限</a>。</span><p></p><div class="p" id="ZH-CN_TOPIC_0000002478334392__p140202313289">在需要使用权限的模块的module.json5/config.json文件中添加“requestPermissions”/“reqPermissions”字段，并在字段下添加对应的权限名等信息，以在Stage模型工程中增加"ohos.permission.ACCESS_DDK_USB"权限为例。<div _ngcontent-axl-c106="" class="highlight-div"><div _ngcontent-axl-c106="" class="highlight-div-header"><div _ngcontent-axl-c106="" class="highlight-div-header-left"><div _ngcontent-axl-c106="" class="handle-button expand-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-axl-c106="" class="highlight-div-header-right"><div _ngcontent-axl-c106="" class="handle-button ai-button"></div><div _ngcontent-axl-c106="" class="handle-button line-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-axl-c106="" class="handle-button theme-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-axl-c106="" class="handle-button copy-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-axl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334392__screen1240212352810" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    ...</li><li>    <span class="hljs-string">"requestPermissions"</span>: [{</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.ACCESS_DDK_USB"</span>,</li><li>    }],</li><li>    ...</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334392__p940242312286"><span><img originheight="264" originwidth="414" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104801.35861672911161562907369726748715:50001231000000:2800:B36CD2D57317B59DF151D3335E9F6D6AC8D8B1DBA889B7A13A8C9F967C87E2A1.png" width="414" height="264"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478334392__ul20261112262812"><li id="li351112563414">调试时，在配置文件中添加ACL权限后，签名时不会强校验。</li><li id="li77703266325">涉及受限权限的应用，上架时，应用市场（AGC）将根据应用的使用场景审核是否可以使用对应的受限权限，如不符合，应用的上架申请将被驳回。在配置ACL权限前，请审视是否符合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/restricted-permissions" target="_blank">受限权限的使用场景</a>。当前仅少量符合特殊场景的应用可在通过审批后，使用受限权限，申请方式请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions-in-acl" target="_blank">申请使用受限权限</a>。</li></ul> </div></div></div> <p></p></li><li id="li46881486584"><span>签名完成后，将鼠标悬置Provisioning Profile: DevEco Managed Profile后<span><img originheight="25" originwidth="26" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.45331111445035276412301953064001:50001231000000:2800:396346740A5CEEDF4D1D956E19C46F2B5998B9595F7DF4993FE645F8692A6957.png" class="IconPic notEnlarge" width="26" height="25"></span>，可查看证书有效期、包名（bundle name）、企业名称（common name）、ACL权限（acl）、开放能力（capability）相关信息。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334392__p4236134616114">Associate with registered application，当前仅在中国境内（香港特别行政区、澳门特别行政区、中国台湾除外）提供服务。</p> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334392__p10578431811"><span><img height="464.88793400000003" originheight="601" originwidth="962" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.90391412697576518345409943286115:50001231000000:2800:5C32AB080E9E3AFE2BFAC00D6DEAEDED61862AC6E7C6EA7138389DEC23638CF0.png" title="点击放大" width="744.135"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section297715173233">手动签名<i class="anchor-icon anchor-icon-link" anchorid="section297715173233" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002478334392__p1083218112414">HarmonyOS应用/元服务通过数字证书（.cer文件）和Profile文件（.p7b文件）来保证应用/元服务的完整性。首先，需要通过DevEco Studio来生成密钥（存储在格式为.p12的密钥库文件中）和证书请求文件（.csr文件）；然后，申请调试数字证书和调试Profile文件；最后，将密钥（.p12）文件、数字证书（.cer）文件和Profile（.p7b）文件配置到工程中。</p> <div class="p" id="ZH-CN_TOPIC_0000002478334392__p18590923112714"><strong>基本概念</strong><ul id="ZH-CN_TOPIC_0000002478334392__ul1759012320279"><li id="l8ad4dce5e97c4c2ea652059aa2d46354"><strong>密钥</strong>：格式为.p12，包含非对称加密中使用的公钥和私钥，存储在密钥库文件中，公钥和私钥用于数字签名和验证。</li><li id="l9e4676b07dbc4fdeab009902661177c4"><strong>证书请求文件</strong>：格式为.csr，全称为Certificate Signing Request，包含密钥对中的公钥和公共名称、组织名称、组织单位等信息，用于向AppGallery Connect申请数字证书。</li><li id="l35375c226c7e44368df2f455a44ff165"><strong>数字证书</strong>：格式为.cer，由华为AppGallery Connect颁发。</li><li id="li95901923202716"><strong>Profile文件</strong>：格式为.p7b，包含HarmonyOS应用/元服务的包名、数字证书信息、描述应用/元服务允许申请的证书权限列表，以及允许应用/元服务调试的设备列表（如果应用/元服务类型为Release类型，则设备列表为空）等内容，每个应用/元服务包中均必须包含一个Profile文件。</li></ul> </div> </div> <div class="tiledSection"><h3 id="section462703710326" class="firsth2">生成密钥和证书请求文件<i class="anchor-icon anchor-icon-link" anchorid="section462703710326" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002478334392__oe87ac8c0057a4581982d46ccdb188ed0"><li id="zh-cn_topic_0000001058015911_l71106db9434e4f08b1556a1b0563939e"><span>在主菜单栏单击<strong>Build &gt; Generate Key</strong> <strong>and CSR</strong>。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334392__zh-cn_topic_0000001058015911_a40545d3d638c45b88339f9f15a9f8b29">如果本地已有对应的密钥，无需新生成密钥，可以在<strong>Generate Key</strong>界面中单击下方的Skip跳过密钥生成过程，直接使用已有密钥生成证书请求文件。</p> </div></div></div> <p></p></li><li id="zh-cn_topic_0000001058015911_li1463962225219"><span>在<strong>Key store file</strong>中，可以单击<strong>Choose Existing</strong>选择已有的密钥库文件（存储有密钥的.p12文件）；如果没有密钥库文件，单击<strong>New</strong>进行创建。下面以新创建密钥库文件为例进行说明。</span><p></p><p id="ZH-CN_TOPIC_0000002478334392__zh-cn_topic_0000001058015911_p2638112265216"><span><img originheight="141" originwidth="520" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.32811319942919399886714503905837:50001231000000:2800:A97739CD946256912A4F13310E2B556D96901CF94C38F30A1178F94F5FF7E96B.png" width="520" height="141"></span></p> <p></p></li><li id="zh-cn_topic_0000001058015911_l77d9295a43f443b9a3c933b8914bdd17"><span>在<strong>Create Key Store</strong>窗口中，填写密钥库信息后，单击<strong>OK</strong>。</span><p></p><ul id="ZH-CN_TOPIC_0000002478334392__zh-cn_topic_0000001058015911_u9709651544bd4d7aa839be5d5a876cc0"><li id="zh-cn_topic_0000001058015911_lc8550019f2fb49cb87930fd8129711b6"><strong>Key store file</strong>：设置密钥库文件存储路径，并填写p12文件名。</li><li id="zh-cn_topic_0000001058015911_lf22f34a87c35490bae148482eaff97d9"><strong>Password</strong>：设置密钥库密码，必须由大写字母、小写字母、数字和特殊符号中的两种以上字符的组合，长度至少为8位。请记住该密码，后续签名配置需要使用。</li><li id="zh-cn_topic_0000001058015911_lbc0c422b780144e18b7598d74751594b"><strong>Confirm password</strong>：再次输入密钥库密码。</li></ul> <p id="ZH-CN_TOPIC_0000002478334392__zh-cn_topic_0000001058015911_a16453c2ee03f4c03919497b638c87808"><span><img originheight="152" originwidth="436" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.02764042369984658531621048311344:50001231000000:2800:B518CE1592732EE33C729C210E276A9C74238DE5DB9A13858B6AE279D8FF3DE1.png" width="436" height="152"></span></p> <p></p></li><li id="zh-cn_topic_0000001058015911_l14fd717d0a104c988da2bd4ec7501bb9"><span>在<strong>Generate Key</strong><strong> and CSR</strong>界面中，继续填写密钥信息后，单击<strong>Next</strong>。</span><p></p><ul id="ZH-CN_TOPIC_0000002478334392__zh-cn_topic_0000001058015911_udac01c1ed2614b95ab14ea19d6f0e22f"><li id="zh-cn_topic_0000001058015911_l58d3b339d0344502adeb2deea28e577e"><strong>Alias</strong>：密钥的别名信息，用于标识密钥名称。请记住该别名，后续签名配置需要使用。</li><li id="zh-cn_topic_0000001058015911_l4cd66cfa934b4cceba50ca657bf2b56f"><strong>Password</strong>：密钥对应的密码，与密钥库密码保持一致，无需手动输入。</li></ul> <p id="ZH-CN_TOPIC_0000002478334392__zh-cn_topic_0000001058015911_a15fa783fdf2d4af693ef9cbd69c828fc"><span><img originheight="370" originwidth="519" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.48857358340526496476429169533989:50001231000000:2800:3268FE744BD3CA364B7CDBDD9D34CB717CC1E9BBAC060BD1D5821B50540CDB0D.png" width="519" height="370"></span></p> <p></p></li><li id="zh-cn_topic_0000001058015911_l360beffb091d401c8f3dbf9bc083147e"><span>在<strong>Generate Key</strong><strong> and CSR</strong>界面，设置CSR文件存储路径和CSR文件名。</span><p></p><p id="ZH-CN_TOPIC_0000002478334392__zh-cn_topic_0000001058015911_a6b77c8b0ae7e42c4b55a189b0c6b0b44"><span><img originheight="266" originwidth="520" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.57750195241126364463581704136111:50001231000000:2800:9F8BA623ABBA8FCEECA0FEB3EA7E599AD4A9B551C114D07C81B22081D70307F0.png" width="520" height="266"></span></p> <p></p></li><li id="zh-cn_topic_0000001058015911_l3b6f4fbfd7a549819b4cd907a5bc8ee6"><span>单击<strong>Finish</strong>，创建CSR文件成功，可以在存储路径下获取生成的密钥库文件（.p12）、证书请求文件（.csr）和material文件夹（存放签名方案相关材料，如密码、证书等）。</span><p></p><p id="ZH-CN_TOPIC_0000002478334392__p1276875315317"><span><img originheight="142" originwidth="257" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.64887647243819482572853390166225:50001231000000:2800:F45E59B5A0DC7A67F4AC6EC10EA043439D711009F1A779E99E2A87A95293F637.png" class="notEnlarge" width="257" height="142"></span></p> <p></p></li></ol> </div> <div class="tiledSection"><h3 id="section081822416419">申请调试证书<i class="anchor-icon anchor-icon-link" anchorid="section081822416419" tips="复制节点链接"></i></h3><div class="p" id="ZH-CN_TOPIC_0000002478334392__p1979524120406">在AGC中申请和下载调试证书，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-debug-cert-0000002283256797" target="_blank">申请调试证书</a>。<div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002478334392__p16119646173319">如您未在AGC中注册该应用，申请前需要在AGC中注册，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-create-app-0000002247955506" target="_blank">创建HarmonyOS应用</a>。</p> </div></div></div> </div> </div> <div class="tiledSection"><h3 id="section89479413571">申请Profile文件和添加权限信息<i class="anchor-icon anchor-icon-link" anchorid="section89479413571" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002478334392__ol185625600"><li id="li3396156183416"><span><span style="color: rgb(36,39,40);">（可选）如需使用ACL权限，在AGC中</span><a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-apply-acl-0000002394212138" target="_blank">申请ACL权限</a>。同时，在DevEco Studio配置文件中添加权限信息。</span><p></p><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478334392__ul1920885520343"><li id="li1677218573458">ACL权限申请仅支持中国境内（香港特别行政区、澳门特别行政区、中国台湾除外）。</li><li id="li1920813553341">若应用因特殊场景要求使用受限开放权限，请务必在此步骤进行申请，否则应用将在审核时被驳回。受限开放权限可申请的特殊场景请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/restricted-permissions" target="_blank">受限开放权限</a>。</li><li id="li1920920553349">确保应用申请受限开放权限时提供的场景和功能信息准确。如果应用内使用的受限开放权限超出您申请的范围，或申请权限后使用的功能和场景超出可使用的范围，将影响应用上架。</li></ul> </div></div></div> <div class="p" id="ZH-CN_TOPIC_0000002478334392__p5209125523420">在需要使用权限的模块的module.json5/config.json文件中添加“requestPermissions”/“reqPermissions”字段，并在字段下添加对应的权限名等信息，以在Stage模型工程中增加"ohos.permission.ACCESS_DDK_USB"权限为例。<div _ngcontent-axl-c106="" class="highlight-div"><div _ngcontent-axl-c106="" class="highlight-div-header"><div _ngcontent-axl-c106="" class="highlight-div-header-left"><div _ngcontent-axl-c106="" class="handle-button expand-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-axl-c106="" class="highlight-div-header-right"><div _ngcontent-axl-c106="" class="handle-button ai-button"></div><div _ngcontent-axl-c106="" class="handle-button line-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-axl-c106="" class="handle-button theme-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-axl-c106="" class="handle-button copy-button"><div _ngcontent-axl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-axl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002478334392__screen22091555113410" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    ...</li><li>    <span class="hljs-string">"requestPermissions"</span>: [{</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.ACCESS_DDK_USB"</span>,</li><li>    }],</li><li>    ...</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <p id="ZH-CN_TOPIC_0000002478334392__p16209455203411"><span><img originheight="264" originwidth="414" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.61543059661532940448492990883642:50001231000000:2800:989E2BE1F9A027B5596D271B461F242C9B2A14E658CE2015D842081000CE4B88.png" width="414" height="264"></span></p> <p></p></li><li id="li8853251204"><span>在AGC中申请和下载Profile文件，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-debug-profile-0000002248181278" target="_blank">申请调试Profile</a>。</span></li></ol> </div> <div class="tiledSection"><h3 id="section1240072619462">配置签名信息<i class="anchor-icon anchor-icon-link" anchorid="section1240072619462" tips="复制节点链接"></i></h3><ol id="ZH-CN_TOPIC_0000002478334392__ol4701915549"><li id="li87016145410">连接真机设备，确保<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-run-device">DevEco Studio与真机设备已连接</a>。<p id="ZH-CN_TOPIC_0000002478334392__p97018111543"><span><img originheight="123" originwidth="588" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.47647621817665429472753306938549:50001231000000:2800:A4485CDFA190B249C3A8ACC475DC7FEA00F805DCAF7156EE37CC58B79F856376.png" width="588" height="123"></span></p> </li><li id="li75301614206">在<strong>File &gt; </strong><strong>Project Structure &gt; </strong><strong>Project &gt; Signing Configs</strong>窗口中，取消勾选“Automatically generate signature”和“Associate with registered application”，分别配置密钥(.p12文件)、Profile(.p7b文件)和数字证书(.cer文件)的路径等信息，配置完毕后点击<strong>Apply</strong>。<ul id="ZH-CN_TOPIC_0000002478334392__ul1246325044812"><li id="li20463115017482"><strong>Store file</strong>：选择密钥库文件，文件后缀为.p12，该文件为<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section462703710326">生成密钥和证书请求文件</a>中生成的.p12文件。</li><li id="li4463105017483"><strong>Store password</strong>：输入密钥库密码，该密码与<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section462703710326">生成密钥和证书请求文件</a>中填写的密钥库密码保持一致。</li><li id="li104631450174812"><strong>Key alias</strong>：输入密钥的别名信息，与<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section462703710326">生成密钥和证书请求文件</a>中填写的别名保持一致。</li><li id="li1463115034818"><strong>Key password</strong>：输入密钥的密码，与<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section462703710326">生成密钥和证书请求文件</a>中填写的<strong>Store Password</strong>保持一致。</li><li id="li1146315054810"><strong>Sign alg</strong>：签名算法，固定为SHA256withECDSA。</li><li id="li0463155010482"><strong>Profile file</strong>：选择<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section89479413571">申请Profile文件和添加权限信息</a>中生成的Profile文件，文件后缀为.p7b。</li><li id="li246315505487"><strong>Certpath file</strong>：选择<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section081822416419">申请调试证书</a>中生成的数字证书文件，文件后缀为.cer。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul id="ZH-CN_TOPIC_0000002478334392__ul164191448174719"><li id="li16419194894717">Store file，Profile file，Certpath file三个字段支持配置相对路径，以项目根目录为起点，配置文件所在位置的路径名称。</li><li id="li9419194813474">密钥库文件、密钥库密码、密钥别名、密钥密码、Profile文件、数字证书文件必须配套使用，否则会导致签名失败。若失败请根据报错信息进行修改，再进行签名。</li></ul> </div></div></div> <p id="ZH-CN_TOPIC_0000002478334392__p168478137300"><span><img height="343.14000000000004" originheight="626" originwidth="953" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.09484128760771921166984932433146:50001231000000:2800:0A0694A8A7CDDC261CAECBA3AF22936A9F559F87F1B0CF41859E31389C23B684.png" title="点击放大" width="523.6875"></span></p> <p id="ZH-CN_TOPIC_0000002478334392__p152913154017">配置完成后，将鼠标悬置<strong>Provisioning Profile: DevEco Manage Profile</strong>后<span><img originheight="25" originwidth="26" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.00490368814050269745911701013659:50001231000000:2800:CBD135761B532F6FF4122B68CAB7E97630CDD7ACF8257D3F7DEB4F4CEFAA8DC2.png" class="IconPic notEnlarge" width="26" height="25"></span>，可查看证书有效期、包名（bundle name）、企业名称（common name）、ACL权限（acl）、开放能力（capability）相关信息；或者进入工程级build-profile.json5文件，在“signingConfigs”下可查看到配置成功的签名信息。</p> <p id="ZH-CN_TOPIC_0000002478334392__p67012115414"><span><img height="326.1825" originheight="728" originwidth="1166" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104802.51523995064043600241587477915153:50001231000000:2800:8B60313AC8D5733239BFD3C8C4E990FA7C2E9396E0BA922FC6C6D654A8C1CCCD.png" title="点击放大" width="523.6875"></span></p> <p id="ZH-CN_TOPIC_0000002478334392__p19990251173017"></p> </li><li id="li193074203115">进入工程级build-profile.json5文件，在“signingConfigs”下可查看到配置成功的签名信息，点击右上角的“Run”按钮运行应用/元服务。<p id="ZH-CN_TOPIC_0000002478334392__p1191965533017"><span><img originheight="431" originwidth="1342" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104803.88884882749515269268777954235910:50001231000000:2800:EBDF67B9A3A5DF89567F2CF48ADF8AD570B7736A128D25A150DC8A45E20E9DD6.png" width="920" height="295.4694485842027"></span></p> </li></ol> </div> <div class="tiledSection"><h2 id="section12214105753015">附录<i class="anchor-icon anchor-icon-link" anchorid="section12214105753015" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section5301916183411" class="firsth2">自动签名支持的ACL权限<i class="anchor-icon anchor-icon-link" anchorid="section5301916183411" tips="复制节点链接"></i></h3><p id="ZH-CN_TOPIC_0000002478334392__p103031619340">自动签名当前支持申请的ACL权限的清单如下所示。执行<a href="/consumer/cn/doc/harmonyos-guides/ide-signing#section18815157237">操作步骤</a>后，DevEco Studio将校验配置的ACL权限，然后通过应用市场（AGC）申请对应的Profile文件，用于签名打包，从而避免繁琐的手动签名步骤。</p> <p id="ZH-CN_TOPIC_0000002478334392__p208081145410"></p> <p id="ZH-CN_TOPIC_0000002478334392__p1884424617395"><strong>6.0.0 Beta3</strong></p> <p id="ZH-CN_TOPIC_0000002478334392__p79008488392">新增权限</p> <ul id="ZH-CN_TOPIC_0000002478334392__ul183106244406"><li id="li23101624184012">ohos.permission.CUSTOMIZE_SAVE_BUTTON</li><li id="li13310192416408">ohos.permission.GET_ABILITY_INFO</li><li id="li331014249404">ohos.permission.LINKTURBO</li><li id="li231042414400">ohos.permission.GET_WIFI_LOCAL_MAC</li><li id="li1310122418405">ohos.permission.GET_ETHERNET_LOCAL_MAC</li><li id="li931002424014">ohos.permission.USE_FLOAT_BALL</li><li id="li19310122411408">ohos.permission.READ_LOCAL_DEVICE_NAME</li><li id="li11310162418407">ohos.permission.ACCESS_NET_TRACE_INFO</li><li id="li143103247404">ohos.permission.KEEP_BACKGROUND_RUNNING_SYSTEM</li><li id="li123101824204013">ohos.permission.atomicService.MANAGE_STORAGE</li><li id="li193105242409">ohos.permission.MANAGE_SCREEN_TIME_GUARD</li></ul> <p id="ZH-CN_TOPIC_0000002478334392__p12871847133910"></p> <p id="ZH-CN_TOPIC_0000002478334392__p249624373510"><strong>5.1.0 Release</strong></p> <p id="ZH-CN_TOPIC_0000002478334392__p135606225395">新增权限</p> <ul id="ZH-CN_TOPIC_0000002478334392__ul3183114043917"><li id="li618364014391">ohos.permission.ACCESS_DDK_USB_SERIAL</li><li id="li5183740103919">ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</li><li id="li18183240183917">ohos.permission.USE_FRAUD_APP_PICKER</li></ul> <p id="ZH-CN_TOPIC_0000002478334392__p10734102763919"></p> <p id="ZH-CN_TOPIC_0000002478334392__p5602111223514"><strong>5.0.5 Release</strong></p> <p id="ZH-CN_TOPIC_0000002478334392__p783611253519">新增权限</p> <ul id="ZH-CN_TOPIC_0000002478334392__ul19108401359"><li id="li17101340203513">ohos.permission.kernel.DISABLE_GOTPLT_RO_PROTECTION</li><li id="li1710134011356">ohos.permission.MANAGE_APN_SETTING</li></ul> <p id="ZH-CN_TOPIC_0000002478334392__p13258923103513"></p> <p id="ZH-CN_TOPIC_0000002478334392__p1545355110336"><strong>5.0.3 Release</strong></p> <p id="ZH-CN_TOPIC_0000002478334392__p4982125823316">新增权限</p> <ul id="ZH-CN_TOPIC_0000002478334392__ul6860545193419"><li id="li4860145143410">ohos.permission.READ_WRITE_USB_DEV</li><li id="li1386084520347">ohos.permission.USE_FRAUD_CALL_LOG_PICKER</li><li id="li3860134512348">ohos.permission.USE_FRAUD_MESSAGES_PICKER</li><li id="li1586024583410">ohos.permission.ACCESS_DISK_PHY_INFO</li><li id="li128601045163420">ohos.permission.SET_PAC_URL</li><li id="li486024583420">ohos.permission.PERSONAL_MANAGE_RESTRICTIONS</li><li id="li186054510346">ohos.permission.START_PROVISIONING_MESSAGE</li><li id="li1886064511347">ohos.permission.PRELOAD_FILE</li><li id="li1586064543412">ohos.permission.kernel.ALLOW_WRITABLE_CODE_MEMORY</li><li id="li18860134510348">ohos.permission.kernel.DISABLE_CODE_MEMORY_PROTECTION</li><li id="li9861245113420">ohos.permission.kernel.ALLOW_EXECUTABLE_FORT_MEMORY</li><li id="li108611045183413">ohos.permission.GET_WIFI_PEERS_MAC</li><li id="li1286119451341">ohos.permission.READ_WRITE_DESKTOP_DIRECTORY</li><li id="li8861545133417">ohos.permission.MANAGE_PASTEBOARD_APP_SHARE_OPTION</li><li id="li12861104573419">ohos.permission.MANAGE_UDMF_APP_SHARE_OPTION</li><li id="li12861445103410">ohos.permission.READ_WRITE_USER_FILE</li></ul> <p id="ZH-CN_TOPIC_0000002478334392__p1234115118343"></p> <p id="ZH-CN_TOPIC_0000002478334392__p12960132202911"><strong>5.0.0 Release</strong></p> <p id="ZH-CN_TOPIC_0000002478334392__p18775417333">支持权限</p> <ul id="ZH-CN_TOPIC_0000002478334392__ul1420781453319"><li id="li4207161413331">ohos.permission.READ_CONTACTS</li><li id="li72071147339">ohos.permission.WRITE_CONTACTS</li><li id="li20207814103320">ohos.permission.READ_AUDIO</li><li id="li1820721413320">ohos.permission.WRITE_AUDIO</li><li id="li620781413311">ohos.permission.READ_IMAGEVIDEO</li><li id="li6207201411338">ohos.permission.READ_PASTEBOARD</li><li id="li1820761416339">ohos.permission.WRITE_IMAGEVIDEO</li><li id="li1220817149334">ohos.permission.ACCESS_DDK_USB</li><li id="li320819140331">ohos.permission.ACCESS_DDK_HID</li><li id="li1920819141331">ohos.permission.SYSTEM_FLOAT_WINDOW</li><li id="li32088146338">ohos.permission.FILE_ACCESS_PERSIST</li><li id="li142086141336">ohos.permission.INPUT_MONITORING</li><li id="li1920817148338">ohos.permission.INTERCEPT_INPUT_EVENT</li><li id="li10208171473310">ohos.permission.SHORT_TERM_WRITE_IMAGEVIDEO</li></ul> </div> </div></div>