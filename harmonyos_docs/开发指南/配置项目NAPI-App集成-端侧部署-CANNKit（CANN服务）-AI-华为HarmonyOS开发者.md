<h1 _ngcontent-uix-c119="" class="doc-title ng-star-inserted" title="配置项目NAPI"> 配置项目NAPI </h1>

<div _ngcontent-uix-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>编译HAP时，NAPI层的so需要编译依赖NDK中的libneural_network_core.so和libhiai_foundation.so。</p> <div class="tiledSection"><h2 id="section832963855914">头文件引用<i class="anchor-icon anchor-icon-link" anchorid="section832963855914" tips="复制节点链接"></i></h2><p>按需引用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-neuralnetworkruntime" target="_blank">NNCore</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cannkit-hiai-aipp-param-8h" target="_blank">CANN Kit</a>的头文件。</p> <div _ngcontent-uix-c106="" class="highlight-div"><div _ngcontent-uix-c106="" class="highlight-div-header"><div _ngcontent-uix-c106="" class="highlight-div-header-left"><div _ngcontent-uix-c106="" class="handle-button expand-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uix-c106="" class="highlight-div-header-right"><div _ngcontent-uix-c106="" class="handle-button ai-button"></div><div _ngcontent-uix-c106="" class="handle-button line-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uix-c106="" class="handle-button theme-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uix-c106="" class="handle-button copy-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uix-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"neural_network_runtime/neural_network_core.h"</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"CANNKit/hiai_options.h"</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1050910106545">编写CMakeLists.txt<i class="anchor-icon anchor-icon-link" anchorid="section1050910106545" tips="复制节点链接"></i></h2><p>CMakeLists.txt示例代码如下。</p> <div _ngcontent-uix-c106="" class="highlight-div"><div _ngcontent-uix-c106="" class="highlight-div-header"><div _ngcontent-uix-c106="" class="highlight-div-header-left"><div _ngcontent-uix-c106="" class="handle-button expand-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uix-c106="" class="highlight-div-header-right"><div _ngcontent-uix-c106="" class="handle-button ai-button"></div><div _ngcontent-uix-c106="" class="handle-button line-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uix-c106="" class="handle-button theme-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uix-c106="" class="handle-button copy-button"><div _ngcontent-uix-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uix-c106="" class="highlight-scroll-div"><pre class="make prettyprint linenums hljs language-makefile" hw-language="make" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment"># the minimum version of CMake.</span></li><li>cmake_minimum_required(VERSION 3.4.1)</li><li>project(CANNDemo)</li><li>
</li><li>set(NATIVERENDER_ROOT_PATH ${CMAKE_CURRENT_SOURCE_DIR})</li><li>
</li><li>include_directories(${NATIVERENDER_ROOT_PATH}</li><li>                    ${NATIVERENDER_ROOT_PATH}/<span class="hljs-keyword">include</span>)</li><li>
</li><li>include_directories(${HMOS_SDK_NATIVE}/sysroot/usr/lib)</li><li>FIND_LIBRARY(cann_lib hiai_foundation)</li><li>
</li><li>add_library(entry SHARED Classification.cpp HIAIModelManager.cpp)</li><li>
</li><li>target_link_libraries(entry PUBLIC libace_napi.z.so</li><li>    libhilog_ndk.z.so</li><li>    librawfile.z.so</li><li>    ${cann-lib}</li><li>    libneural_network_core.so</li><li>    )</li></ol></pre></div></div> </div> </div> <div></div></div>