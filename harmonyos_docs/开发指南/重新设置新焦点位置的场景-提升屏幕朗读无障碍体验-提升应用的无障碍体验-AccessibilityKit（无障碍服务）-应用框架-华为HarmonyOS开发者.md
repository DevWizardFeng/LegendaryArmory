<h1 _ngcontent-juk-c119="" class="doc-title ng-star-inserted" title="重新设置新焦点位置的场景"> 重新设置新焦点位置的场景 </h1>

<div _ngcontent-juk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1736319443313">设计场景<i class="anchor-icon anchor-icon-link" anchorid="section1736319443313" tips="复制节点链接"></i></h2><p>当前焦点所在的控件消失或者隐藏后，需要重新设置新的焦点位置。一般情况下，新焦点应该在原控件位置的下一个控件上，不应该跳变到前面的控件。应用可以调用主动聚焦的接口对想要聚焦的组件进行主动聚焦。</p> <p>主动聚焦接口相关参数说明</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b><strong>EventInfo 说明</strong></caption><tbody><tr><th class="firstcol" id="mcps1.3.1.4.2.5.1.1" valign="top" width="25%"><p>属性</p> </th> <td class="cellrowborder" valign="top" width="25%"><p>类型</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>说明</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>例</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.1.4.2.5.2.1" valign="top" width="25%"><p>type</p> </th> <td class="cellrowborder" valign="top" width="25%"><p>EventType</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>主动聚焦事件类型</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>requestFocusForAccessibility</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.1.4.2.5.3.1" valign="top" width="25%"><p>bundleName</p> </th> <td class="cellrowborder" valign="top" width="25%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>目标应用名</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>当前应用包名</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.1.4.2.5.4.1" valign="top" width="25%"><p>triggerAction</p> </th> <td class="cellrowborder" valign="top" width="25%"><p>Action</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>触发事件的Action</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>click或其他都不会有任何影响</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.1.4.2.5.5.1" valign="top" width="25%"><p>customId</p> </th> <td class="cellrowborder" valign="top" width="25%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>组件id</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>abc345</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section137001614201410">开发实例<i class="anchor-icon anchor-icon-link" anchorid="section137001614201410" tips="复制节点链接"></i></h2><div _ngcontent-juk-c106="" class="highlight-div"><div _ngcontent-juk-c106="" class="highlight-div-header"><div _ngcontent-juk-c106="" class="highlight-div-header-left"><div _ngcontent-juk-c106="" class="handle-button expand-button"><div _ngcontent-juk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-juk-c106="" class="highlight-div-header-right"><div _ngcontent-juk-c106="" class="handle-button ai-button"></div><div _ngcontent-juk-c106="" class="handle-button line-button"><div _ngcontent-juk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-juk-c106="" class="handle-button theme-button"><div _ngcontent-juk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-juk-c106="" class="handle-button copy-button"><div _ngcontent-juk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-juk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">accessibility </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos.accessibility'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-meta">@Entry</span></span></li><li><span class=""><span class="hljs-meta">@Component</span></span></li><li><span class="hljs-keyword">export</span> struct <span class=""><span class="hljs-title class_">Rule</span>_2_1_12 </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">title</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'Rule 2.1.12'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-attr">eventInfo</span></span><span class="">: </span><span class="">accessibility</span><span class="">.</span><span class=""><span class="hljs-property">EventInfo</span> </span><span class="">= </span><span class="">(</span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">type</span></span><span class="">: </span><span class=""><span class="hljs-string">'requestFocusForAccessibility'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">bundleName</span></span><span class="">: </span><span class=""><span class="hljs-string">'com.example.pagesrouter'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">triggerAction</span></span><span class="">: </span><span class=""><span class="hljs-string">'common'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">customId</span></span><span class="">: </span><span class=""><span class="hljs-string">'button1'</span></span></li><li>  <span class="">}</span><span class="">)</span><span class="">;</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">build</span></span><span class="">(<span class="hljs-params"></span>) </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title class_">NavDestination</span></span><span class="">() </span><span class="">{</span></li><li>      <span class=""><span class="hljs-title class_">Column</span></span><span class="">() </span><span class="">{</span></li><li>        <span class=""><span class="hljs-title class_">Blank</span></span><span class="">()</span></li><li>        <span class=""><span class="hljs-title class_">Button</span></span><span class="">(</span><span class=""><span class="hljs-string">'button1'</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">accessibilityText</span></span><span class="">(</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">点击聚焦到</span></span><span class=""><span class="hljs-string">button2'</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">align</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Alignment</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">fontSize</span></span><span class="">(</span><span class=""><span class="hljs-number">20</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">id</span></span><span class="">(</span><span class=""><span class="hljs-string">'button1'</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">onClick</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">eventInfo</span></span><span class="">.</span><span class=""><span class="hljs-property">customId</span> </span><span class="">= </span><span class=""><span class="hljs-string">'button2'</span></span><span class="">;</span></li><li>            <span class="">accessibility</span><span class="">.</span><span class=""><span class="hljs-title function_">sendAccessibilityEvent</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">eventInfo</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>              <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">`Succeeded in send event, eventInfo is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-variable language_">this</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">eventInfo</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>          <span class="">}</span><span class="">)</span></li><li>        <span class=""><span class="hljs-title class_">Blank</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'10px'</span></span><span class="">)</span></li><li>        <span class=""><span class="hljs-title class_">Button</span></span><span class="">(</span><span class=""><span class="hljs-string">'button2'</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">accessibilityText</span></span><span class="">(</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">点击聚焦到</span></span><span class=""><span class="hljs-string">button1'</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">align</span></span><span class="">(</span><span class=""><span class="hljs-title class_">Alignment</span></span><span class="">.</span><span class=""><span class="hljs-property">Center</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">fontSize</span></span><span class="">(</span><span class=""><span class="hljs-number">20</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">id</span></span><span class="">(</span><span class=""><span class="hljs-string">'button2'</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">onClick</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>            <span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">eventInfo</span></span><span class="">.</span><span class=""><span class="hljs-property">customId</span> </span><span class="">= </span><span class=""><span class="hljs-string">'button1'</span></span><span class="">;</span></li><li>            <span class="">accessibility</span><span class="">.</span><span class=""><span class="hljs-title function_">sendAccessibilityEvent</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">eventInfo</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>              <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">`Succeeded in send event, eventInfo is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">stringify</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">(</span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-variable language_">this</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">eventInfo</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">)</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span><span class="">;</span></li><li>          <span class="">}</span><span class="">)</span></li><li>        <span class=""><span class="hljs-title class_">Blank</span></span><span class="">()</span></li><li>      <span class="">}</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>    <span class="">}</span></li><li>    <span class="">.</span><span class=""><span class="hljs-title function_">title</span></span><span class="">(</span><span class="hljs-variable language_">this</span><span class="">.</span><span class=""><span class="hljs-property">title</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div></div></div>