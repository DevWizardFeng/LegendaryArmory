<h1 _ngcontent-pif-c119="" class="doc-title ng-star-inserted" title="音频卡顿事件介绍"> 音频卡顿事件介绍 </h1>

<div _ngcontent-pif-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section151678526146">简介<i class="anchor-icon anchor-icon-link" anchorid="section151678526146" tips="复制节点链接"></i></h2><p>从API version 21开始，支持订阅音频卡顿事件。音频卡顿事件是指音频流卡顿导致的音频播放不流畅，音频卡顿发生场景可以分为应用进程问题卡顿、系统问题卡顿。当出现音频长时间无数据时被定义为音频卡顿事件，并生成HiAppEvent日志，供应用开发者分析。如何使用HiAppEvent提供订阅音频卡顿事件的接口可参见以下文档：</p> <ul><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-cpu-usage-high-event" target="_blank">订阅音频卡顿事件（ArkTS）</a></li><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-audio-jank-event-c" target="_blank">订阅音频卡顿事件（C/C++）</a></li></ul> </div> <div class="tiledSection"><h2 id="section4331112511519">检测原理<i class="anchor-icon anchor-icon-link" anchorid="section4331112511519" tips="复制节点链接"></i></h2><ul><li><strong>应用卡顿</strong>：通过检测应用将音频数据写入音频引擎的共享缓冲区超时异常，来判断是否为<strong>应用进程问题导致卡顿</strong>。当应用长达到120ms未传入音频数据时，将触发上报音频卡顿事件。</li></ul> <ul><li><strong>系统卡顿：</strong>通过检测音频引擎周期性处理数据超时异常，来判断是否为<strong>系统进程问题导致卡顿</strong>。当单次音频引擎处理时长达到200ms时触发上报音频卡顿事件。</li></ul> </div> <div class="tiledSection"><h2 id="section969071661818">params字段说明<i class="anchor-icon anchor-icon-link" anchorid="section969071661818" tips="复制节点链接"></i></h2> <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><tbody><tr><td class="cellrowborder" valign="top" width="19.428057194280573%"><p>参数名</p> </td> <td class="cellrowborder" valign="top" width="24.147585241475852%"><p>参数类型</p> </td> <td class="cellrowborder" valign="top" width="56.42435756424358%"><p>参数说明</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.428057194280573%"><p>time</p> </td> <td class="cellrowborder" valign="top" width="24.147585241475852%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="56.42435756424358%"><p>音频卡顿事件生成时间，单位为ms。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.428057194280573%"><p>bundle_version</p> </td> <td class="cellrowborder" valign="top" width="24.147585241475852%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="56.42435756424358%"><p>音频卡顿应用版本名称。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.428057194280573%"><p>bundle_name</p> </td> <td class="cellrowborder" valign="top" width="24.147585241475852%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="56.42435756424358%"><p>音频卡顿应用包名。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.428057194280573%"><p>max</p> </td> <td class="cellrowborder" valign="top" width="24.147585241475852%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="56.42435756424358%"><p>音频卡顿丢帧时长，单位为ms。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.428057194280573%"><p>happen_time</p> </td> <td class="cellrowborder" valign="top" width="24.147585241475852%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="56.42435756424358%"><p>音频卡顿丢帧开始时间，单位为ms。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.428057194280573%"><p>fault_type</p> </td> <td class="cellrowborder" valign="top" width="24.147585241475852%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="56.42435756424358%"><p>故障类型。</p> <p>“application”表示应用卡顿；</p> <p>“system” 表示系统卡顿。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>