<h1 _ngcontent-kcg-c119="" class="doc-title ng-star-inserted" title="预构建库快速链接"> 预构建库快速链接 </h1>

<div _ngcontent-kcg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div id="body0000001835990101"><p id="ZH-CN_TOPIC_0000002510294385__p17237125218515">在工程中使用依赖模块时，如果希望使用依赖模块中native相关的so库与接口文件（.h/.hpp），Hvigor提供了快速链接功能。</p> <div class="tiledSection"><h2 id="section2036033212">头文件<i class="anchor-icon anchor-icon-link" anchorid="section2036033212" tips="复制节点链接"></i></h2><ul id="ZH-CN_TOPIC_0000002510294385__ul41181691120"><li id="li5844122141013">对于共享包：<p id="ZH-CN_TOPIC_0000002510294385__p17926143131017">在共享包中include目录下如存在.h等接口文件，Hvigor会自动将此目录添加到CMake接口目录中，无需手动添加。</p> </li><li id="li2011812917112">对于本地依赖模块：<div class="p" id="ZH-CN_TOPIC_0000002510294385__p191181291219">在本地依赖模块中如存在.h等接口文件，可通过在build-profile.json5文件buildOption/nativeLib/headerPath中指定接口文件目录。<div _ngcontent-kcg-c106="" class="highlight-div"><div _ngcontent-kcg-c106="" class="highlight-div-header"><div _ngcontent-kcg-c106="" class="highlight-div-header-left"><div _ngcontent-kcg-c106="" class="handle-button expand-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcg-c106="" class="highlight-div-header-right"><div _ngcontent-kcg-c106="" class="handle-button ai-button"></div><div _ngcontent-kcg-c106="" class="handle-button line-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcg-c106="" class="handle-button theme-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcg-c106="" class="handle-button copy-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294385__screen16118099112" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"buildOption"</span>: {</li><li>  <span class="hljs-string">"nativeLib"</span>: {</li><li>    <span class="hljs-string">"headerPath"</span>: <span class=""><span class="hljs-string">"src/main/cpp/include"</span></span></li><li>  }</li><li>}</li></ol></pre></div></div> </div> </li></ul> </div> <div class="tiledSection"><h2 id="section312617131919">预构建库<i class="anchor-icon anchor-icon-link" anchorid="section312617131919" tips="复制节点链接"></i></h2><p id="ZH-CN_TOPIC_0000002510294385__p8856191865118">在工程中引用了共享包/本地依赖模块中的so库，编译时，Hvigor会生成cmake <a href="https://cmake.org/cmake/help/latest/manual/cmake-packages.7.html#config-file-packages" target="_blank">Config-file Packages</a>，自动通过cmake <a href="https://cmake.org/cmake/help/latest/command/find_package.html#find-package" target="_blank">find_package</a>引入这些so。开发者只需根据此依赖模块的模块名、so库名，在CMakeLists.txt脚本中以${moduleName::soName}库名称的形式来声明链接。</p> <p id="ZH-CN_TOPIC_0000002510294385__p6691120105512">例如工程依赖了curl共享包，共享包中存在libcurl.so，在oh-package.json5中添加依赖。</p> <div _ngcontent-kcg-c106="" class="highlight-div"><div _ngcontent-kcg-c106="" class="highlight-div-header"><div _ngcontent-kcg-c106="" class="highlight-div-header-left"><div _ngcontent-kcg-c106="" class="handle-button expand-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcg-c106="" class="highlight-div-header-right"><div _ngcontent-kcg-c106="" class="handle-button ai-button"></div><div _ngcontent-kcg-c106="" class="handle-button line-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcg-c106="" class="handle-button theme-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcg-c106="" class="handle-button copy-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000002510294385__screen19660151516517" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// oh-package.json5</span></span></li><li><span class="hljs-string">"dependencies"</span>: { </li><li>  <span class="hljs-string">"curl"</span>: <span class=""><span class="hljs-string">"1.0.0"</span></span> </li><li>}</li></ol></pre></div></div> <p id="ZH-CN_TOPIC_0000002510294385__p9580540948"><span><img originheight="222" originwidth="309" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251212104916.18781517267989930363437931666573:50001231000000:2800:4061D6CBCFB11A20D99CB3D89B9895CB01E0797F4196675DF626DFA06DFE0F93.png" width="309" height="222"></span></p> <p id="ZH-CN_TOPIC_0000002510294385__p13276135245510">在工程的CMakeLists.txt脚本中声明链接：</p> <div _ngcontent-kcg-c106="" class="highlight-div"><div _ngcontent-kcg-c106="" class="highlight-div-header"><div _ngcontent-kcg-c106="" class="highlight-div-header-left"><div _ngcontent-kcg-c106="" class="handle-button expand-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcg-c106="" class="highlight-div-header-right"><div _ngcontent-kcg-c106="" class="handle-button ai-button"></div><div _ngcontent-kcg-c106="" class="handle-button line-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcg-c106="" class="handle-button theme-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcg-c106="" class="handle-button copy-button"><div _ngcontent-kcg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" id="ZH-CN_TOPIC_0000002510294385__screen482317104816" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// CMakeLists.txt</span></span></li><li><span class="hljs-built_in">add_library</span>(entry SHARED napi_init.cpp)</li><li># ${moduleName::soName}.</li><li><span class="hljs-built_in">target_link_libraries</span>(entry PUBLIC curl::curl)</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p id="ZH-CN_TOPIC_0000002510294385__p17181142184118">对于本地模块，HAR仅暴露本模块构建的so库，HSP暴露本模块构建及所依赖的so库。</p> </div></div></div> </div> </div> <div></div></div>