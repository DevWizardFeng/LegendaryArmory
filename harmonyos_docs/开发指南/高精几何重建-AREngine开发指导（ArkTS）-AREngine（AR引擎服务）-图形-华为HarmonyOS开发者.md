<h1 _ngcontent-ehf-c119="" class="doc-title ng-star-inserted" title="高精几何重建"> 高精几何重建 </h1>

<div _ngcontent-ehf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section203335618439">概要<i class="anchor-icon anchor-icon-link" anchorid="section203335618439" tips="复制节点链接"></i></h2>          <p>从6.0.0(20)开始，AR Engine支持高精几何重建能力。</p>     <p>本章节通过AR Engine高精几何重建能力来识别空间中的立方体物体或者嵌入式立方体空间，计算出被识别物体或空间的长、宽、高以及体积。可以用于测量立方体体积以及嵌入式空间的大小。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>本功能仅提供能力，接入该功能不构成对产品的质量保证或任何承诺，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arengine-appendix#section68356131976">AR Engine高精几何重建功能技术局限性及免责声明</a>。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section165353417441">接口说明<i class="anchor-icon anchor-icon-link" anchorid="section165353417441" tips="复制节点链接"></i></h2>          <p>高精几何重建主要依赖<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section137161158185414" target="_blank">ARSemanticDenseData</a>，以下接口为高精几何重建的相关接口。详细接口和说明，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-arkts-api" target="_blank">AR Engine API参考</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.3.1.1" valign="top" width="49.94%">          <p>接口名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.3.1.3.1.2" valign="top" width="50.06%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="49.94%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section114051108916" target="_blank">ARSession.getFrame</a></p></td>         <td class="cellrowborder" valign="top" width="50.06%">          <p>获取AR Engine处理后的一帧数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="49.94%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section945690181710" target="_blank">ARFrame.acquireSemanticDense</a></p></td>         <td class="cellrowborder" valign="top" width="50.06%">          <p>返回当前帧的高精几何重建对象数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="49.94%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section1458368561" target="_blank">ARSemanticDenseData.acquireCubeData</a></p></td>         <td class="cellrowborder" valign="top" width="50.06%">          <p>返回一个高精几何重建对象的立方体数据信息的列表。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="49.94%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section13749838482" target="_blank">ARSemanticDenseData.release</a></p></td>         <td class="cellrowborder" valign="top" width="50.06%">          <p>释放高精几何重建对象数据。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section171161453144613">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section171161453144613" tips="复制节点链接"></i></h2>          <p>对于使用ArkTS的任何AR应用，首先需要创建一个AR会话<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arviewcontroller#section12681656121519" target="_blank">ARViewContext</a>，用于管理AR Engine的系统状态。AR会话<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arviewcontroller#section12681656121519" target="_blank">ARViewContext</a>的创建可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arengine-arsession">管理AR会话</a>章节。</p>    </div>    <div class="tiledSection">     <h3 id="section7494111510448" class="firsth2">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section7494111510448" tips="复制节点链接"></i></h3>          <div class="p">      高精几何重建能力所需要导入的模块如下：      <div _ngcontent-ehf-c106="" class="highlight-div"><div _ngcontent-ehf-c106="" class="highlight-div-header"><div _ngcontent-ehf-c106="" class="highlight-div-header-left"><div _ngcontent-ehf-c106="" class="handle-button expand-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehf-c106="" class="highlight-div-header-right"><div _ngcontent-ehf-c106="" class="handle-button ai-button"></div><div _ngcontent-ehf-c106="" class="handle-button line-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehf-c106="" class="handle-button theme-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehf-c106="" class="handle-button copy-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { arEngine, <span class="hljs-title class_">ARView</span>, arViewController } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AREngine'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Node</span>, <span class="hljs-title class_">Scene</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section57509123317">定义变量<i class="anchor-icon anchor-icon-link" anchorid="section57509123317" tips="复制节点链接"></i></h3>          <p>定义变量cubeVertexData接收立方体顶点数据，定义变量cubeConfidence接收识别出立方体的置信度数据，定义变量cubeLabel接收立方体的语义信息。</p>     <div _ngcontent-ehf-c106="" class="highlight-div"><div _ngcontent-ehf-c106="" class="highlight-div-header"><div _ngcontent-ehf-c106="" class="highlight-div-header-left"><div _ngcontent-ehf-c106="" class="handle-button expand-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehf-c106="" class="highlight-div-header-right"><div _ngcontent-ehf-c106="" class="handle-button ai-button"></div><div _ngcontent-ehf-c106="" class="handle-button line-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehf-c106="" class="handle-button theme-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehf-c106="" class="handle-button copy-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cubeVertexData</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt;;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cubeConfidence</span>: <span class="hljs-built_in">number</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cubeLabel</span>: arEngine.<span class="hljs-property">ARSemanticPlaneLabel</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1867811585405">显示预览流<i class="anchor-icon anchor-icon-link" anchorid="section1867811585405" tips="复制节点链接"></i></h3>          <p>首先初始化AR会话和AR场景，可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arengine-arsession#section3391814131611">初始化AR会话和AR场景</a>章节。</p>     <p>更改semanticDenseMode为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section162053411246" target="_blank">ARSemanticDenseMode</a>.CUBE_VOLUME，启用体积测量识别能力。</p>     <div class="p">      在设备界面上显示识别到的几何数据信息，使用重复调用函数方法在设备界面上实时更新识别到的几何数据信息。      <div _ngcontent-ehf-c106="" class="highlight-div"><div _ngcontent-ehf-c106="" class="highlight-div-header"><div _ngcontent-ehf-c106="" class="highlight-div-header-left"><div _ngcontent-ehf-c106="" class="handle-button expand-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehf-c106="" class="highlight-div-header-right"><div _ngcontent-ehf-c106="" class="handle-button ai-button"></div><div _ngcontent-ehf-c106="" class="handle-button line-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehf-c106="" class="handle-button theme-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehf-c106="" class="handle-button copy-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ARSemanticDenseBuilder</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-title class_">ARSemanticDense</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ARSemanticDense</span> {</li><li>  <span class="hljs-meta">@State</span> arContext?: arViewController.<span class="hljs-property">ARViewContext</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-comment">// 平面类型</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">intervalId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>  <span class="hljs-comment">// 重复调用函数时间间隔为33ms，即设定为30fps</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">delayInterval</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">33</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">RelativeContainer</span>() {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">arContext</span>) {</li><li>          <span class="hljs-title class_">ARView</span>({ <span class="hljs-attr">context</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">arContext</span> })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>            .<span class="hljs-title function_">alignRules</span>({</li><li>              <span class="hljs-attr">center</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span> },</li><li>              <span class="hljs-attr">middle</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span> }</li><li>            })</li><li>        }</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initARView</span>();</li><li>      <span class="hljs-comment">// 设定在30fps下更新获取物体体积信息</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">intervalId</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>       }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">delayInterval</span>);</li><li>    })</li><li>    .<span class="hljs-title function_">onWillDisappear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-comment">// 退出setInterval函数</span></li><li>      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">intervalId</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopARView</span>();</li><li>    })</li><li>    .<span class="hljs-title function_">onShown</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resumeARView</span>();</li><li>    })</li><li>    .<span class="hljs-title function_">onHidden</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pauseARView</span>();</li><li>    })</li><li>    .<span class="hljs-title function_">hideTitleBar</span>(<span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">hideBackButton</span>(<span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">hideToolBar</span>(<span class="hljs-literal">true</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">initARView</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">scene</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">viewContext</span>: arViewController.<span class="hljs-property">ARViewContext</span> = <span class="hljs-keyword">new</span> arViewController.<span class="hljs-title class_">ARViewContext</span>();</li><li>      viewContext.<span class="hljs-property">scene</span> = scene;</li><li>      viewContext.<span class="hljs-property">callback</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ARViewCallbackImpl</span>();</li><li>      viewContext.<span class="hljs-property">config</span> = {</li><li>        <span class="hljs-attr">type</span>: arEngine.<span class="hljs-property">ARType</span>.<span class="hljs-property">WORLD</span>,</li><li>        <span class="hljs-attr">planeFindingMode</span>: arEngine.<span class="hljs-property">ARPlaneFindingMode</span>.<span class="hljs-property">HORIZONTAL_AND_VERTICAL</span>,</li><li>        <span class="hljs-attr">powerMode</span>: arEngine.<span class="hljs-property">ARPowerMode</span>.<span class="hljs-property">NORMAL</span>,</li><li>        <span class="hljs-attr">semanticDenseMode</span>: arEngine.<span class="hljs-property">ARSemanticDenseMode</span>.<span class="hljs-property">CUBE_VOLUME</span>, <span class="hljs-comment">// 开启体积测量</span></li><li>        <span class="hljs-attr">poseMode</span>: arEngine.<span class="hljs-property">ARPoseMode</span>.<span class="hljs-property">GRAVITY</span>,</li><li>        <span class="hljs-attr">depthMode</span>: arEngine.<span class="hljs-property">ARDepthMode</span>.<span class="hljs-property">DISABLED</span>,</li><li>        <span class="hljs-attr">meshMode</span>: arEngine.<span class="hljs-property">ARMeshMode</span>.<span class="hljs-property">DISABLED</span>,</li><li>        <span class="hljs-attr">focusMode</span>: arEngine.<span class="hljs-property">ARFocusMode</span>.<span class="hljs-property">AUTO</span></li><li>      }</li><li>      viewContext.<span class="hljs-title function_">init</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">arContext</span> = viewContext;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in initializing ARView.'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to init ARView. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>      })</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">stopARView</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resumeARView</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">pauseARView</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section36435113214">获取立方体体积数据<i class="anchor-icon anchor-icon-link" anchorid="section36435113214" tips="复制节点链接"></i></h3>          <div class="p">      调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arviewcontroller#section9396615174614" target="_blank">ARViewCallback</a>，使用其中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arviewcontroller#section52341758194715" target="_blank">onFrameUpdate</a>方法进行帧数据更新，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section114051108916" target="_blank">ARSession.getFrame</a>方法获取当前帧，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section945690181710" target="_blank">ARFrame.acquireSemanticDense</a>获得当前帧的高精几何重建对象数据，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arengine-api-arengine#section1458368561" target="_blank">ARSemanticDenseData.acquireCubeData</a>从高精几何重建对象数据中获取识别到的立方体体积数据，相关变量定义参考<a href="/consumer/cn/doc/harmonyos-guides/arengine-volume-measurement#section57509123317">定义变量</a>。      <div _ngcontent-ehf-c106="" class="highlight-div"><div _ngcontent-ehf-c106="" class="highlight-div-header"><div _ngcontent-ehf-c106="" class="highlight-div-header-left"><div _ngcontent-ehf-c106="" class="handle-button expand-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ehf-c106="" class="highlight-div-header-right"><div _ngcontent-ehf-c106="" class="handle-button ai-button"></div><div _ngcontent-ehf-c106="" class="handle-button line-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ehf-c106="" class="handle-button theme-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ehf-c106="" class="handle-button copy-button"><div _ngcontent-ehf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ehf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" hw-language="typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ARViewCallbackImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">arViewController.ARViewCallback</span> {</li><li>  <span class="hljs-title function_">onAnchorAdd</span>(<span class="hljs-attr">ctx</span>: arViewController.<span class="hljs-property">ARViewContext</span>, <span class="hljs-attr">node</span>: <span class="hljs-title class_">Node</span>, <span class="hljs-attr">anchor</span>: arEngine.<span class="hljs-property">ARAnchor</span>): <span class="hljs-built_in">void</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onAnchorUpdate</span>(<span class="hljs-attr">ctx</span>: arViewController.<span class="hljs-property">ARViewContext</span>, <span class="hljs-attr">node</span>: <span class="hljs-title class_">Node</span>, <span class="hljs-attr">anchor</span>: arEngine.<span class="hljs-property">ARAnchor</span>): <span class="hljs-built_in">void</span> {</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onFrameUpdate</span>(<span class="hljs-attr">ctx</span>: arViewController.<span class="hljs-property">ARViewContext</span>, <span class="hljs-attr">sysBootTs</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>    <span class="hljs-keyword">if</span> (!ctx.<span class="hljs-property">session</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">arSession</span>: arEngine.<span class="hljs-property">ARSession</span> = ctx.<span class="hljs-property">session</span>;</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">frame</span>: arEngine.<span class="hljs-property">ARFrame</span> = arSession.<span class="hljs-title function_">getFrame</span>();</li><li>      <span class="hljs-keyword">if</span> (frame) {</li><li>        <span class="hljs-keyword">let</span> semanticData : arEngine.<span class="hljs-property">ARSemanticDenseData</span> = frame.<span class="hljs-title function_">acquireSemanticDense</span>();</li><li>        <span class="hljs-keyword">if</span>(semanticData){</li><li>          <span class="hljs-keyword">if</span>(semanticData.<span class="hljs-property">cubeDataSize</span>&gt;<span class="hljs-number">0</span>){</li><li>            <span class="hljs-comment">// 获取第一个Cube的体积数据</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">semanticCubeData</span>: arEngine.<span class="hljs-property">ARSemanticDenseCubeData</span> = semanticData.<span class="hljs-title function_">acquireCubeData</span>()[<span class="hljs-number">0</span>];</li><li>            cubeVertexData = semanticCubeData.<span class="hljs-property">vertexData</span>;</li><li>            cubeConfidence = semanticCubeData.<span class="hljs-property">confidence</span>;</li><li>            cubeLabel = semanticCubeData.<span class="hljs-property">label</span>;</li><li>          }</li><li>          semanticData.<span class="hljs-title function_">release</span>();</li><li>        }</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update data. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     </div>    </div>   </div>   <div></div></div>