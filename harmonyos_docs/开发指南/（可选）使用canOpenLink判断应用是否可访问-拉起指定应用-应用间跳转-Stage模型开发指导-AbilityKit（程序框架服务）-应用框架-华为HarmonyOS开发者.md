<h1 _ngcontent-yso-c119="" class="doc-title ng-star-inserted" title="（可选）使用canOpenLink判断应用是否可访问"> （可选）使用canOpenLink判断应用是否可访问 </h1>

<div _ngcontent-yso-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="使用场景">使用场景<i class="anchor-icon anchor-icon-link" anchorid="使用场景" tips="复制节点链接"></i></h2>          <p>在应用A想要拉起应用B的场景中，应用A可先调用canOpenLink接口判断应用B是否可访问，如果可访问，再拉起应用B。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>canOpenLink接口不支持判断以App Linking方式跳转的目标应用是否可访问。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="约束限制">约束限制<i class="anchor-icon anchor-icon-link" anchorid="约束限制" tips="复制节点链接"></i></h2>          <p>在entry模块的module.json5文件中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">querySchemes</a>字段中，从API version 21开始，最多允许配置200个URL scheme。API version 20及之前的版本，最多允许配置50个URL scheme。</p>    </div>    <div class="tiledSection">     <h2 id="接口说明">接口说明<i class="anchor-icon anchor-icon-link" anchorid="接口说明" tips="复制节点链接"></i></h2>          <p>canOpenLink是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-bundlemanager#bundlemanagercanopenlink12" target="_blank">bundleManager</a>提供的支持判断目标应用是否可访问的接口。</p>     <p>匹配规则请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/explicit-implicit-want-mappings">显式Want与隐式Want匹配规则</a>。</p>    </div>    <div class="tiledSection">     <h2 id="操作步骤">操作步骤<i class="anchor-icon anchor-icon-link" anchorid="操作步骤" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="调用方操作步骤" class="firsth2">调用方操作步骤<i class="anchor-icon anchor-icon-link" anchorid="调用方操作步骤" tips="复制节点链接"></i></h3>          <ol>      <li>       <p>在entry模块的module.json5文件中配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file">querySchemes</a>属性，声明想要查询的URL scheme。</p>       <div _ngcontent-yso-c106="" class="highlight-div"><div _ngcontent-yso-c106="" class="highlight-div-header"><div _ngcontent-yso-c106="" class="highlight-div-header-left"><div _ngcontent-yso-c106="" class="handle-button expand-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yso-c106="" class="highlight-div-header-right"><div _ngcontent-yso-c106="" class="handle-button ai-button"></div><div _ngcontent-yso-c106="" class="handle-button line-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yso-c106="" class="handle-button theme-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yso-c106="" class="handle-button copy-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yso-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">//...</span></li><li>    <span class="hljs-attr">"querySchemes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-string">"app1Scheme"</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div></li>      <li>       <p>导入ohos.bundle.bundleManager模块。</p></li>      <li>       <p>调用canOpenLink接口。</p>       <div _ngcontent-yso-c106="" class="highlight-div"><div _ngcontent-yso-c106="" class="highlight-div-header"><div _ngcontent-yso-c106="" class="highlight-div-header-left"><div _ngcontent-yso-c106="" class="handle-button expand-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yso-c106="" class="highlight-div-header-right"><div _ngcontent-yso-c106="" class="handle-button ai-button"></div><div _ngcontent-yso-c106="" class="handle-button line-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yso-c106="" class="handle-button theme-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yso-c106="" class="handle-button copy-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yso-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" hw-language="ts" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { bundleManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> link = <span class="hljs-string">'app1Scheme://test.example.com/home'</span>;</li><li>  <span class="hljs-keyword">let</span> canOpen = bundleManager.<span class="hljs-title function_">canOpenLink</span>(link);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'canOpenLink successfully: %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(canOpen));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'canOpenLink failed: %{public}s'</span>, message);</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="目标方操作步骤">目标方操作步骤<i class="anchor-icon anchor-icon-link" anchorid="目标方操作步骤" tips="复制节点链接"></i></h3>          <p>在module.json5文件中配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#skills标签">uris</a>属性。</p>     <div _ngcontent-yso-c106="" class="highlight-div"><div _ngcontent-yso-c106="" class="highlight-div-header"><div _ngcontent-yso-c106="" class="highlight-div-header-left"><div _ngcontent-yso-c106="" class="handle-button expand-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yso-c106="" class="highlight-div-header-right"><div _ngcontent-yso-c106="" class="handle-button ai-button"></div><div _ngcontent-yso-c106="" class="handle-button line-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yso-c106="" class="handle-button theme-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yso-c106="" class="handle-button copy-button"><div _ngcontent-yso-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yso-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-comment">//...</span></li><li>    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>      <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-comment">//...</span></li><li>        <span class="hljs-attr">"skills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>          <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-comment">// actions不能为空，actions为空会造成目标方匹配失败</span></li><li>            <span class="hljs-attr">"actions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-string">"ohos.want.action.home"</span></li><li>            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"uris"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>              <span class="hljs-punctuation">{</span></li><li>                <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app1Scheme"</span><span class="hljs-punctuation">,</span></li><li>                <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test.example.com"</span><span class="hljs-punctuation">,</span></li><li>                <span class="hljs-attr">"pathStartWith"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"home"</span></li><li>              <span class="hljs-punctuation">}</span></li><li>            <span class="hljs-punctuation">]</span></li><li>          <span class="hljs-punctuation">}</span></li><li>        <span class="hljs-punctuation">]</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="faq">FAQ<i class="anchor-icon anchor-icon-link" anchorid="faq" tips="复制节点链接"></i></h2>          <ol>      <li>       <p>为什么限制querySchemes中配置的URL scheme个数？</p>       <p>canOpenLink()接口提供了判断应用是否可以访问的能力。通过该能力，应用可以间接获取到指定应用是否安装等信息。</p>       <p>为了保护系统安全和用户隐私，避免恶意应用扫描应用安装列表等行为，要求开发者在使用canOpenLink()接口时必须配置querySchemes属性，从API version 21开始，最多允许配置200个URL scheme。API version 20及之前的版本，最多允许配置50个URL scheme。</p></li>     </ol>    </div>   </div>   <div></div></div>