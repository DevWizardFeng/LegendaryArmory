<h1 _ngcontent-woy-c119="" class="doc-title ng-star-inserted" title="（可选）开发消息回执"> （可选）开发消息回执 </h1>

<div _ngcontent-woy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section614813216300">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section614813216300" tips="复制节点链接"></i></h2>          <p>消息回执是指Push Kit服务端将消息推送到用户终端之后，端侧会给Push服务端反馈送达结果，与此同时，Push服务端会将消息送达状态以回执消息形式发送给您的应用回执服务端，方便您获取消息下达端侧后的状态，定位问题等。</p>     <p>受网络环境以及消息量的影响，消息回执在Push服务端收到端侧响应后发送，会存在一些延迟现象，如果较长时间无法收到回执，可能是设备处于离线状态。</p>    </div>    <div class="tiledSection">     <h2 id="section188936576225">回执服务开发<i class="anchor-icon anchor-icon-link" anchorid="section188936576225" tips="复制节点链接"></i></h2>          <p>请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-api-msg-receipt" target="_blank">消息回执API</a>开发您的回执服务器代码，服务接口地址将作为<a href="/consumer/cn/doc/harmonyos-guides/push-msg-receipt#section462935643010">配置回执参数</a>中的回调地址。</p>    </div>    <div class="tiledSection">     <h2 id="section86338111648">开通回执权益<i class="anchor-icon anchor-icon-link" anchorid="section86338111648" tips="复制节点链接"></i></h2>          <ol>      <li><span>登录<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>网站，选择“开发与服务”，在项目列表中选择对应的项目，左侧导航栏选择“项目设置”。</span>       <p></p>       <p></p>       <p></p>       <p></p></li>      <li><span>在项目列表中找到您的项目，通过“增长 &gt; 推送服务 &gt; 配置”导航到“配置”页签。在该页面可以选择配置项目级回执或者应用级回执，需要注意的是项目级回执消息接收URL地址，对该项目下所有应用生效。如果您同时配置了项目级回执和应用级回执地址，则优先获取应用级回执地址信息。</span>       <p></p>       <p><span><img height="519.336405" originheight="709" originwidth="1069" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114625.12079766267757652552582375554770:50001231000000:2800:9B5919E138AAD65E817FACB21877D68C25FBC6EC48D40377D17D5CFC43BB1206.png" title="点击放大" width="783.0375"></span></p>       <p></p>       <p></p></li>      <li><span>这里以应用级回执举例，选择需要配置回执的应用，点击“开通”应用回执状态。</span>       <p></p>       <p><span><img height="515.533935" originheight="706" originwidth="1060" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114625.30494934771647875292001475819961:50001231000000:2800:CECD51F9BAE82131F6FFAE86FB39398F0B4DD63AC994AE35A74BFAB42D5CCD52.png" title="点击放大" width="774.0600000000001"></span></p>       <p></p>       <p></p></li>      <li><span>进入回执参数配置，可以选择已有回执或者新建回执。</span>       <p></p>       <p><span><img height="333.995984" originheight="385" originwidth="660" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114625.12687356992080422377116402813361:50001231000000:2800:72BE608094CA529A52B7604BFFC7D644F0E488F6571088D25C593EB42F2424C4.png" title="点击放大" width="572.565"></span></p>       <p></p>       <p></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section462935643010">配置回执参数<i class="anchor-icon anchor-icon-link" anchorid="section462935643010" tips="复制节点链接"></i></h2>          <p>点击“新建回执”后，需要配置如下参数：</p>     <p><span><img height="404.18806400000005" originheight="450" originwidth="643" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114625.80030360121275329975741572912771:50001231000000:2800:ACC48922AEC14A404D9FE96E0348C686228547D5D4E0B83EE9288FA4FA6FAF38.png" title="点击放大" width="577.5525"></span></p>     <p></p>     <ol>      <li>配置消息回执的名称和回调地址。       <p>回调地址配置完成后，Push Kit服务器会校验回执服务器（接收回执消息的应用服务器）提供的证书是否为商用CA签发证书。</p>       <ul>        <li>商用CA提示：         <p><span><img height="82.327532" originheight="73" originwidth="482" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114625.47846892119549259703188652050501:50001231000000:2800:71BD664694AE54E66FEEB13702DE99156F326A7DD2B5212864FCB20E92BE9DC3.png" title="点击放大" width="543.6375"></span></p>         <p></p></li>        <li>自签CA提示：         <p><span><img height="169.617959" originheight="152" originwidth="480" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114625.79158397418628286121694505918272:50001231000000:2800:D0AFC4FEE0E466F581AB386D393998897C279A421A61E8C39C4070EEEB1AC7A4.png" title="点击放大" width="535.6575"></span></p>         <p></p>         <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">           <p>证书过期将导致您无法接收消息回执，请及时更换回执服务器证书。</p>          </div></div></div></li>       </ul></li>      <li>配置回调用户名（可选，下文描述为userName）和回调密钥（可选，下文描述为secret）进行身份验证。回调密钥支持自动生成。       <ol>        <li>从回执消息的请求Header中获取X-HUAWEI-CALLBACK-ID，举例如下：         <div _ngcontent-woy-c106="" class="highlight-div"><div _ngcontent-woy-c106="" class="highlight-div-header"><div _ngcontent-woy-c106="" class="highlight-div-header-left"><div _ngcontent-woy-c106="" class="handle-button expand-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-woy-c106="" class="highlight-div-header-right"><div _ngcontent-woy-c106="" class="handle-button ai-button"></div><div _ngcontent-woy-c106="" class="handle-button line-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-woy-c106="" class="handle-button theme-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-woy-c106="" class="handle-button copy-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-woy-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li>X-HUAWEI-CALLBACK-ID<span class="hljs-punctuation">:</span> </li><li>timestamp=<span class="hljs-number">1563</span>*****<span class="hljs-number">1261</span>;nonce=a07bfa17<span class="hljs-number">-6</span>d82<span class="hljs-number">-4</span>b53-a9a2<span class="hljs-number">-07</span>c*****eef1;value=E4YeO*********************QXF+c=</li></ol></pre></div></div>         <p>其中timestamp为回执消息的时间戳（毫秒级时间戳），nonce为UUID随机数，value为签名信息，签名方法为：Base64(HMAC-SHA256(secret, timestamp+nonce+userName))。</p></li>        <li id="li6429181516577">开发者可以根据timestamp、nonce、userName、secret参考示例生成签名，与value的值比较进行签名验证。开发者也可点击网页提供的“生成密钥”自动生成回调密钥。         <p>生成签名示例（以下为java代码）：</p>         <div _ngcontent-woy-c106="" class="highlight-div"><div _ngcontent-woy-c106="" class="highlight-div-header"><div _ngcontent-woy-c106="" class="highlight-div-header-left"><div _ngcontent-woy-c106="" class="handle-button expand-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-woy-c106="" class="highlight-div-header-right"><div _ngcontent-woy-c106="" class="handle-button ai-button"></div><div _ngcontent-woy-c106="" class="handle-button line-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-woy-c106="" class="handle-button theme-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-woy-c106="" class="handle-button copy-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-woy-c106="" class="highlight-scroll-div"><pre class="java prettyprint linenums hljs language-java" hw-language="java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">StringBuilder</span> <span class="hljs-variable">buf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(); </li><li>buf.append(timestamp); </li><li>buf.append(nonce); </li><li><span class="hljs-comment">// 在回执配置中的回调用户名</span></li><li>buf.append(userName); </li><li><span class="hljs-comment">// 在回执配置中的回调密钥</span></li><li><span class="hljs-type">String</span> <span class="hljs-variable">secret</span> <span class="hljs-operator">=</span> <span class="hljs-string">"your secret"</span>; </li><li><span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>; </li><li><span class="hljs-keyword">try</span> { </li><li>  <span class="hljs-type">Mac</span> <span class="hljs-variable">mac</span> <span class="hljs-operator">=</span> Mac.<em>getInstance</em>(<span class="hljs-string">"HmacSHA256"</span>);</li><li>  <span class="hljs-comment">// 老旧版本的回执配置密钥使用secret.getBytes(UTF_8)，新的回执配置密钥使用base64编码</span></li><li>  <span class="hljs-type">SecretKeySpec</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecretKeySpec</span>(Base64.getDecoder().decode(secret), <span class="hljs-string">"HmacSHA256"</span>); </li><li>  mac.init(key); </li><li>  <span class="hljs-type">byte</span>[] encodeV = mac.doFinal(buf.toString().getBytes(UTF_8));  </li><li>  signature = Base64.<em>getEncoder</em>().encodeToString(encodeV); </li><li>} <span class="hljs-keyword">catch</span> (NoSuchAlgorithmException | InvalidKeyException e) {  </li><li>  <span class="hljs-comment">// 打印错误日志 </span></li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre></div></div></li>       </ol></li>      <li>配置回执支持版本       <p><span><img height="60.932221" originheight="70" originwidth="636" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211114625.37844039209664137127204171017389:50001231000000:2800:8CCC182B1F74C91244A00008277743833FD7DDE91434EEB9B5B64BD644F88520.png" title="点击放大" width="553.6125000000001"></span></p>       <p></p>       <p>V1回执不支持场景化消息发送，请使用V2回执。</p></li>      <li>“测试回执”可以对回执地址进行功能测试，点击“提交”完成回执的创建。       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <ul>          <li>华为Push服务器和接收回执消息的应用服务器之间使用HTTPS协议，华为Push服务器会校验应用服务器提供证书的合法性，请使用商用CA签发的HTTPS证书。</li>          <li>如果您的回执配置正确，点击“测试回执”后，您的回执服务器将收到由华为Push服务器发送的测试消息，同一回执版本该消息内容固定，仅供测试使用。</li>         </ul>        </div></div></div>       <p><strong>示例报文：</strong></p>       <p>消息到达回执：</p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>除卡片刷新场景外的其他场景化消息均支持消息到达回执。</p>        </div></div></div>       <div _ngcontent-woy-c106="" class="highlight-div"><div _ngcontent-woy-c106="" class="highlight-div-header"><div _ngcontent-woy-c106="" class="highlight-div-header-left"><div _ngcontent-woy-c106="" class="handle-button expand-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-woy-c106="" class="highlight-div-header-right"><div _ngcontent-woy-c106="" class="handle-button ai-button"></div><div _ngcontent-woy-c106="" class="handle-button line-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-woy-c106="" class="handle-button theme-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-woy-c106="" class="handle-button copy-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-woy-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li> <span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"statuses"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"biTag"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bi**62"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"pushType"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MsDZmCSyuS+Gd***********ZLs8Es"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"169802**1701"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"appPackageName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.**.**"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"deliveryStatus"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1697741455082</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>       <p>卡片刷新回执：</p>       <div _ngcontent-woy-c106="" class="highlight-div"><div _ngcontent-woy-c106="" class="highlight-div-header"><div _ngcontent-woy-c106="" class="highlight-div-header-left"><div _ngcontent-woy-c106="" class="handle-button expand-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-woy-c106="" class="highlight-div-header-right"><div _ngcontent-woy-c106="" class="handle-button ai-button"></div><div _ngcontent-woy-c106="" class="handle-button line-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-woy-c106="" class="handle-button theme-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-woy-c106="" class="handle-button copy-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-woy-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"statuses"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>    <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"biTag"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bi**62"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"pushType"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MsDZmCSyuS+Gd***********ZLs8Es"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"169802**1701"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"appPackageName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.**.**"</span><span class="hljs-punctuation">,</span></li><li>      <span class="hljs-attr">"formStatus"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>        <span class="hljs-attr">"formId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10086</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1698027152082</span></li><li>      <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>       <p>您的回执服务器必须返回成功的响应，才能测试通过，再点击“提交”完成回执的创建。</p>       <p>成功响应：</p>       <div _ngcontent-woy-c106="" class="highlight-div"><div _ngcontent-woy-c106="" class="highlight-div-header"><div _ngcontent-woy-c106="" class="highlight-div-header-left"><div _ngcontent-woy-c106="" class="handle-button expand-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-woy-c106="" class="highlight-div-header-right"><div _ngcontent-woy-c106="" class="handle-button ai-button"></div><div _ngcontent-woy-c106="" class="handle-button line-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-woy-c106="" class="handle-button theme-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-woy-c106="" class="handle-button copy-button"><div _ngcontent-woy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-woy-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span> </li><li>     <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0"</span><span class="hljs-punctuation">,</span> </li><li>     <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span> </li><li> <span class="hljs-punctuation">}</span></li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section19100519195717">回执状态码<i class="anchor-icon anchor-icon-link" anchorid="section19100519195717" tips="复制节点链接"></i></h2>          <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <div class="p">        通过回执状态码定位问题之前，请优先检查<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-struct" target="_blank">消息推送接口</a>URL（https://push-api.cloud.huawei.com/<strong>v3</strong>/<strong>[projectId]</strong>/messages:send）是否正确：        <ul>         <li>请使用v3版本的推送接口URL，不要使用v1或v2版本的推送接口URL，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-faq-8">场景化消息中的请求URL版本问题</a>。</li>         <li>请检查推送接口地址中的projectId，确保与您当前应用所属的项目保持一致，若不一致请更新推送接口URL中的projectId，并重新<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-jwt-token">生成鉴权令牌</a>，应用重新<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-get-token">获取Push Token</a>，再进行消息推送。</li>        </ul>       </div>      </div></div></div>     <p>您可以基于接收到的消息回执码进行数据统计和分析，回执状态码如下表所示：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.1" valign="top" width="12.24%">          <p>回执状态码</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.2" valign="top" width="23.44%">          <p>状态码描述</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.3" valign="top" width="64.32%">          <p>原因及处理</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>0</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>成功送达</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>不涉及。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>2</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>Token无效，应用卸载</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>成功发送到设备后发现应用不存在，通常表示应用已卸载。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>5</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>Token无效，Token不匹配</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>终端收到应用的Push消息，但Push消息带的Token与本地应用的Token不一致。请排查以下几种原因：</p>          <ul>           <li>终端用户清除了本地应用数据。</li>           <li>终端用户通过卸载再安装的方式更新了本地应用。</li>           <li>您在应用中调用pushService.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-pushservice#section108761115154914" target="_blank">deleteToken</a>()方法删除了本地应用的Token。</li>           <li>您在应用中调用了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-aaid-api#section4466259194220" target="_blank">deleteAAID</a>()，该方法删除AAID的同时也会删除本地应用的Token。</li>           <li>终端设备恢复出厂设置后终端用户重新进入预安装应用或者重新安装并进入应用。</li>          </ul>          <div class="p">           终端收到应用的Push消息，但检查本地数据存储中并没有应用的Token。请排查以下原因：           <ul>            <li>应用未激活。</li>           </ul>          </div>          <p>若您的问题仍无法解决，请通过<a href="https://developer.huawei.com/consumer/cn/support/feedback/#/" target="_blank">在线提单</a>提交问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>6</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>通知消息不展示</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>请排查以下三种原因：</p>          <ul>           <li>用户关闭了设备上的系统通知总开关。</li>           <li>用户关闭了本应用的通知渠道开关。</li>           <li>用户开启了未成年模式。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>10</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>非活跃设备</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>设备为非活跃设备（终端设备未接入网络达30天），消息不进行下发。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>14</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>其它错误</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>系统内部网络异常。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>15</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>离线用户消息管控</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <ol>           <li>设置了离线用户消息覆盖（服务端API中的collapseKey）功能，消息被覆盖掉了，未下发到设备。</li>           <li>离线消息最多缓存120条，超过后旧消息被新消息覆盖。</li>          </ol></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>22</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>目标用户不匹配</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>下发消息时Push Token归属的用户与当前终端设备上的本地用户不匹配。请排查Push Token是否是当前本地用户下申请的。</p>          <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">            <p>如您在进入隐私空间前的本地用户为用户A，点击进入隐私空间后，系统会将本地用户切换为用户B，如果此刻您使用归属用户A下的Push Token推送消息，则会返回该回执状态码。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>27</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>应用进程不在，后台消息被缓存</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>在终端设备上目标应用进程不存在导致后台消息被缓存。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>31</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>目标应用中不存在指向的页面</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-send-alert#section697519219136">点击消息动作</a>检查应用skills标签配置和消息请求体中的clickAction字段。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>51</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>终端设备处于开机未解锁状态</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>用户重启终端设备后，点亮屏幕未解锁。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>102</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>消息频控丢弃</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>系统会根据现网使用场景和流量进行管控，不合理的使用场景系统会进行频控。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>144</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>profileId不存在</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>发送下行消息时请检查场景化消息payload中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section17371529101117" target="_blank">profileId</a>字段。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>151</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>推送消息未展示或卡片formId不存在</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <ol>           <li>请检查卡片是否已经添加到终端设备桌面。</li>           <li>请检查卡片刷新消息中指定的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section6471174713249" target="_blank">formId</a>是否存在。</li>          </ol></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>155</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>实况窗通知更新失败</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>请检查您的通知是否未创建或已经过期。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>156</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>实况窗通知消息乱序更新</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>实况窗通知消息携带<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section66881469306" target="_blank">version</a>小于当前版本，更新失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>158</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>创建的实况窗已存在</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>在设备中已存在通过Live View Kit创建的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section66881469306" target="_blank">activityId</a>相同的实况窗。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>188</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>拉起应用失败</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>请稍后重试。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>191</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>角标更新失败</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>系统内部设置角标异常。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>256</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>消息频次限制</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>频次限制请参考消息发送<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-msg-freq-control#section551882820368" target="_blank">频次限制</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>259</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>消息被拒绝</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <ol>           <li>发送消息中存在违规内容。</li>           <li>存在不安全的url。</li>          </ol>          <p>请更换消息体内容或url。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>261</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>卡片不存在</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>卡片刷新消息被Push服务端管控不下发（管控周期30天），建议做过滤处理减少无效推送。原因：不存在卡片刷新消息中指定<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section6471174713249" target="_blank">formId</a>的卡片。</p>          <p>建议填写已分配过的formId，避免后续formId分配后，对应的卡片刷新消息被管控导致管控周期内无法下发。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>262</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>卡片刷新次数达上限</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>卡片刷新消息被Push服务端管控不下发（管控周期1天），建议做过滤处理减少无效推送。原因：终端设备上对应的卡片刷新次数达到上限(未被Push服务端频次限制)。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>264</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>消息未订阅</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>发送的订阅消息，但实际未订阅。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>265</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>实况窗通知更新被管控</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>发送的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section66881469306" target="_blank">activityId</a>对应的实况窗通知不存在，限制发送该activityId的实况窗通知消息24小时。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>268</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>未携带status字段</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>通过Push Kit创建的实况窗，在对该实况窗更新时未携带<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section66881469306" target="_blank">status</a>字段。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="12.24%">          <p>269</p></td>         <td class="cellrowborder" valign="top" width="23.44%">          <p>重复创建实况窗</p></td>         <td class="cellrowborder" valign="top" width="64.32%">          <p>通过Push Kit创建的实况窗重复（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-scenariozed-api-request-param#section66881469306" target="_blank">activityId</a>相同）。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>您需要对上述状态中的2、5、6、10做过滤处理，减少对这些用户的无效推送。</p>      </div></div></div>    </div>   </div>   <div></div></div>