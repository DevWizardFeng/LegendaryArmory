<h1 _ngcontent-jug-c119="" class="doc-title ng-star-inserted" title="PC/2in1异形窗口"> PC/2in1异形窗口 </h1>

<div _ngcontent-jug-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section77015184289">概述<i class="anchor-icon anchor-icon-link" anchorid="section77015184289" tips="复制节点链接"></i></h2></div> <p>一般情况下，UI开发都是在矩形窗口上操作，但在PC/2in1设备上，应用还可以使用各类异形窗口来展现交互内容。这里的异形是指除默认矩形以外的形状，包括但不限于圆形、三角形以及其他不规则的形状等。开发者通过使用这些异形形状的窗口，结合窗口中的内容展示UI交互的多样性，一定程度上能够提升应用体验。类似的示例有：文字应用中的放大镜、带指示箭头的气泡框、提供辅助功能的悬浮窗等。</p> <p>本文主要介绍在PC/2in1设备上实现异形窗口。根据窗口的形状类别，可分为以下场景：</p> <ul><li><a href="/consumer/cn/doc/best-practices/bpta-2in1-window-shape#section6137113512381">图形形状窗口</a></li><li><a href="/consumer/cn/doc/best-practices/bpta-2in1-window-shape#section42071254407">不规则形状窗口</a></li></ul> <div class="tiledSection"><h2 id="section638203042813">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section638203042813" tips="复制节点链接"></i></h2><p>在创建窗口时，ArkUI以宽、高为参数描绘窗口初始大小，其形状默认为矩形，可以通过设置掩码改变窗口最终呈现的形状。</p> <p>该掩码是一个二维数组，其大小对应初始窗口的宽和高，所以可以把该数组中的元素与窗口中的像素一一对应起来；数组中的每一项值只能是0或1，其中数字0表示窗口对应位置的像素是透明的，数字1代表对应像素不透明。</p> <p>简单来说，掩码即是由数字1描绘的窗口形状点阵图。具体使用可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#setwindowmask12" target="_blank">setWindowMask()</a>接口。</p> </div> <div class="tiledSection"><h3 id="section15969249122114" class="firsth2">开发流程<i class="anchor-icon anchor-icon-link" anchorid="section15969249122114" tips="复制节点链接"></i></h3></div> <ol><li>创建异形子窗口或悬浮窗，设置窗口的位置、大小等属性，设置窗口加载的page页面。</li><li>根据待实现的异形形状，计算出与其对应的二维数组掩码，对目标窗口设置该掩码。</li><li>根据逻辑需要，显示目标异形窗口。</li></ol> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>掩码windowMask二维数组的大小需要与窗口初始宽、高一致，且每项值只能是0或1，否则设置的形状不会生效。</p> </div></div></div> <div class="tiledSection"><h2 id="section6137113512381">图形形状窗口<i class="anchor-icon anchor-icon-link" anchorid="section6137113512381" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section4826459102111" class="firsth2">场景案例<i class="anchor-icon anchor-icon-link" anchorid="section4826459102111" tips="复制节点链接"></i></h3></div> <p>待开发的异形窗口，其形状是具有一定规则的几何图形，通过描述语言能得到精确且唯一的形状。本节以下面两种形状的实现为例进行说明：直径为500的圆形；底500、高500的等腰三角形。</p> <div class="tiledSection"><h3 id="section10343161441819">创建子窗口<i class="anchor-icon anchor-icon-link" anchorid="section10343161441819" tips="复制节点链接"></i></h3><p>在得到异形窗口前，需要先创建一个默认的矩形窗口，开发步骤如下：</p> <ol><li><span>为使用setWindowMask()等接口，需要额外<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/syscap#加入自定义syscap" target="_blank">配置syscap.json文件</a>，在模块/src/main目录下，创建syscap.json文件，填入以下内容：</span><p></p><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// entry/src/main/syscap.json</span></li><li>{</li><li>  <span class="hljs-string">"devices"</span>: {</li><li>    <span class="hljs-string">"general"</span>: [</li><li>      <span class="hljs-string">"2in1"</span></li><li>    ]</li><li>  },</li><li>  <span class="hljs-string">"development"</span>: {</li><li>    <span class="hljs-string">"addedSysCaps"</span>: [</li><li>      <span class="hljs-string">"SystemCapability.Window.SessionManager"</span></li><li>    ]</li><li>  }</li><li>}</li></ol></pre></div></div> <p></p></li><li><span>具体代码中，使用createSubWindow()创建子窗口（参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-window-stage#设置应用子窗口" target="_blank">设置应用子窗口</a>），或使用createWindow()接口创建悬浮窗（参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-window-stage#设置全局悬浮窗受限开放" target="_blank">设置悬浮窗受限开放</a>），设置窗口的位置、大小及其他属性等，然后使用setUIContent()接口设置窗口加载的page页面。</span><p></p><div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/pages/Index.ets#L39-L71" data-highlighted="yes"><ol class="linenums"><li>windowStage = AppStorage.<span class="hljs-keyword">get</span>(<span class="hljs-string">'windowStage'</span>);</li><li><span class="hljs-keyword">if</span> (windowStage === <span class="hljs-literal">null</span>) {</li><li>  hilog.error(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'Sample'</span>, <span class="hljs-string">'Failed to create the subwindow. Cause: windowStage is null'</span>);</li><li>  <span class="hljs-keyword">return</span>;</li><li>}</li><li><span class="hljs-keyword">const</span> windowWidth = <span class="hljs-number">500</span>;</li><li><span class="hljs-keyword">const</span> windowHeight = <span class="hljs-number">500</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  subWindow = <span class="hljs-keyword">await</span> windowStage!.createSubWindow(<span class="hljs-string">'mySubWindow'</span>);</li><li>  subWindow.moveWindowTo(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);</li><li>  subWindow.resize(windowWidth, windowHeight);</li><li>  subWindow.setUIContent(<span class="hljs-string">'pages/SubPage'</span>);</li><li>  <span class="hljs-comment">// ...</span></li><li>  subWindow.showWindow();</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  hilog.error(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'Sample'</span>, <span class="hljs-string">'Failed to create sub window. Cause: '</span> + JSON.stringify(exception));</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/pages/Index.ets#L39-L71" target="_blank">Index.ets</a></div></div></div></div> <p></p></li></ol> </div> <div class="tiledSection"><h3 id="section11782172712220">设置窗口形状<i class="anchor-icon anchor-icon-link" anchorid="section11782172712220" tips="复制节点链接"></i></h3></div> <ol><li><span>根据要实现的异形窗口形状，计算二维数组掩码windowMask。</span><p></p><ul><li>以下是以原矩形中点为圆心、直径为500的圆。最终效果见圆形子窗口效果。<div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L40-L56" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">function</span> <span class="hljs-title function_">fillCircle</span>(<span class="hljs-variable">array</span>: <span class="hljs-title class_">number</span>[][], <span class="hljs-variable">x</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">y</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">radius</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">void</span> {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable">i</span> = <span class="hljs-variable">x</span> - <span class="hljs-variable">radius</span>; <span class="hljs-variable">i</span> &lt;= <span class="hljs-title class_">x</span> + <span class="hljs-title class_">radius</span>; <span class="hljs-title class_">i</span>++) {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable">j</span> = <span class="hljs-variable">y</span> - <span class="hljs-variable">radius</span>; <span class="hljs-variable">j</span> &lt;= <span class="hljs-title class_">y</span> + <span class="hljs-title class_">radius</span>; <span class="hljs-title class_">j</span>++) {</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-variable">distSquared</span> = (<span class="hljs-variable">i</span> - <span class="hljs-variable">x</span>)**<span class="hljs-number">2</span> + (<span class="hljs-variable">j</span> - <span class="hljs-variable">y</span>)**<span class="hljs-number">2</span>;</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable">distSquared</span> &lt;= <span class="hljs-title class_">radius</span>**<span class="hljs-number">2</span> &amp;&amp; <span class="hljs-title class_">i</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable">j</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable">i</span> &lt; <span class="hljs-title class_">array</span>.<span class="hljs-title class_">length</span> &amp;&amp; <span class="hljs-title class_">j</span> &lt; <span class="hljs-title class_">array</span>[<span class="hljs-number">0</span>].<span class="hljs-title class_">length</span>) {</li><li>        <span class="hljs-title class_">array</span>[<span class="hljs-title class_">i</span>][<span class="hljs-title class_">j</span>] = <span class="hljs-number">1</span>;</li><li>      }</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-variable">async</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">getCircleMask</span>(<span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">number</span>[][]&gt; {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">radius</span> = <span class="hljs-variable">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable">width</span>, <span class="hljs-variable">height</span>) / <span class="hljs-number">2</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">maskArray</span>: <span class="hljs-title class_">number</span>[][] = <span class="hljs-variable">new</span> <span class="hljs-title function_">Array</span>(<span class="hljs-variable">height</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-variable">null</span>).<span class="hljs-title function_">map</span>(() =&gt; <span class="hljs-variable">new</span> <span class="hljs-title function_">Array</span>(<span class="hljs-variable">width</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));</li><li>  <span class="hljs-title function_">fillCircle</span>(<span class="hljs-variable">maskArray</span>, <span class="hljs-variable">height</span> / <span class="hljs-number">2</span>, <span class="hljs-variable">width</span> / <span class="hljs-number">2</span>, <span class="hljs-variable">radius</span>);</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable">maskArray</span>;</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L40-L56" target="_blank">WindowUtils.ets</a></div></div></div></div> </li><li>以下以原矩形宽为底边、原矩形高为高的等腰三角形。最终效果见三角形子窗口效果。<div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L21-L36" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">function</span> <span class="hljs-title function_">fillTriangle</span>(<span class="hljs-variable">array</span>: <span class="hljs-title class_">number</span>[][], <span class="hljs-variable">base</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">void</span> {</li><li>  <span class="hljs-comment">// i &lt; height-10 in order to remove the round corner</span></li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable">i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">i</span> &lt; <span class="hljs-title class_">height</span> - <span class="hljs-number">10</span>; <span class="hljs-title class_">i</span>++) {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable">j</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">j</span> &lt; <span class="hljs-title class_">base</span>; <span class="hljs-title class_">j</span>++) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable">j</span> &gt;= <span class="hljs-variable">base</span> / <span class="hljs-number">2</span> - <span class="hljs-variable">base</span> / <span class="hljs-number">2</span> * <span class="hljs-variable">i</span> / <span class="hljs-variable">height</span> &amp;&amp; <span class="hljs-variable">j</span> &lt;= <span class="hljs-title class_">base</span> / <span class="hljs-number">2</span> + <span class="hljs-title class_">base</span> / <span class="hljs-number">2</span> * <span class="hljs-title class_">i</span> / <span class="hljs-title class_">height</span>) {</li><li>        <span class="hljs-variable">array</span>[<span class="hljs-variable">i</span>][<span class="hljs-variable">j</span>] = <span class="hljs-number">1</span>;</li><li>      }</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-variable">async</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">getTriangleMask</span>(<span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">number</span>[][]&gt; {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">maskArray</span>: <span class="hljs-title class_">number</span>[][] = <span class="hljs-variable">new</span> <span class="hljs-title function_">Array</span>(<span class="hljs-variable">height</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-variable">null</span>).<span class="hljs-title function_">map</span>(() =&gt; <span class="hljs-variable">new</span> <span class="hljs-title function_">Array</span>(<span class="hljs-variable">width</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));</li><li>  <span class="hljs-title function_">fillTriangle</span>(<span class="hljs-variable">maskArray</span>, <span class="hljs-variable">width</span>, <span class="hljs-variable">height</span>);</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable">maskArray</span>;</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L21-L36" target="_blank">WindowUtils.ets</a></div></div></div></div> </li></ul> <p></p></li><li><span>使用setWindowMask(windowMask)接口，设置窗口形状。</span><p></p><div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L83-L116" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">async</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">setWindowShape</span>(<span class="hljs-variable">win</span>: <span class="hljs-title class_">window</span>.<span class="hljs-title class_">Window</span>, <span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span>,</li><li>  <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">getMaskFunc</span>: (<span class="hljs-variable">w</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">h</span>: <span class="hljs-title class_">number</span>, <span class="hljs-title class_">picPath</span>?: <span class="hljs-title class_">string</span>) =&gt; <span class="hljs-variable">Promise</span>&lt;<span class="hljs-title class_">number</span>[][]&gt;,</li><li>  <span class="hljs-variable">picPath</span>?: <span class="hljs-title class_">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">void</span>&gt; {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">windowMask</span> = <span class="hljs-variable">await</span> <span class="hljs-title function_">getMaskFunc</span>(<span class="hljs-variable">width</span>, <span class="hljs-variable">height</span>, <span class="hljs-variable">picPath</span>);</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.Window.SessionManager'</span>)) {</li><li>    <span class="hljs-variable">win</span>.<span class="hljs-title function_">setWindowMask</span>(<span class="hljs-variable">windowMask</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'Simple'</span>, <span class="hljs-string">'can not use SessionManager syscap'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * Set the window with circle shape</span></li><li><span class="hljs-comment"> * @param win The target window</span></li><li><span class="hljs-comment"> * @param width The original window width</span></li><li><span class="hljs-comment"> * @param height The original window height</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-variable">export</span> <span class="hljs-variable">async</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">setWindowCircleShape</span>(<span class="hljs-variable">win</span>: <span class="hljs-title class_">window</span>.<span class="hljs-title class_">Window</span>, <span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span>,</li><li>  <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">void</span>&gt; {</li><li>  <span class="hljs-title function_">setWindowShape</span>(<span class="hljs-variable">win</span>, <span class="hljs-variable">width</span>, <span class="hljs-variable">height</span>, <span class="hljs-variable">getCircleMask</span>)</li><li>}</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * Set the window with triangle shape</span></li><li><span class="hljs-comment"> * @param win The target window</span></li><li><span class="hljs-comment"> * @param width The original window width</span></li><li><span class="hljs-comment"> * @param height The original window height</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-variable">export</span> <span class="hljs-variable">async</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">setWindowTriangleShape</span>(<span class="hljs-variable">win</span>: <span class="hljs-title class_">window</span>.<span class="hljs-title class_">Window</span>, <span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span>,</li><li>  <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">void</span>&gt; {</li><li>  <span class="hljs-title function_">setWindowShape</span>(<span class="hljs-variable">win</span>, <span class="hljs-variable">width</span>, <span class="hljs-variable">height</span>, <span class="hljs-variable">getTriangleMask</span>)</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L83-L116" target="_blank">WindowUtils.ets</a></div></div></div></div> <p></p></li><li><span>使用showWindow()接口显示异形子窗口。</span><p></p><div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/pages/Index.ets#L67-L67" data-highlighted="yes"><ol class="linenums"><li>subWindow<span class="hljs-selector-class">.showWindow</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/pages/Index.ets#L67-L67" target="_blank">Index.ets</a></div></div></div></div> <p></p></li></ol> <div class="tiledSection"><h3 id="section7279124442211">实现效果<i class="anchor-icon anchor-icon-link" anchorid="section7279124442211" tips="复制节点链接"></i></h3></div> <div class="fignone"><span class="figcap"><b>图1 </b>圆形子窗口效果</span><br><span><img height="228.70680000000002" originheight="325" originwidth="378" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163020.75310382619641900336486749098315:50001231000000:2800:993229813ED34FFE7CB47619E7BC42BF0E159FF3C2DDF42134FCF4FCB5C43DD5.png" title="点击放大" width="266"></span></div> <div class="fignone"><span class="figcap"><b>图2 </b>三角形子窗口效果</span><br><span><img height="233.56130000000002" originheight="360" originwidth="410" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163020.59273757942099844646200621595854:50001231000000:2800:A39394E58BE397C836509A88B10A7AB20E1E946CB920D8F64132A4EA5A0BBD03.png" title="点击放大" width="266"></span></div> <div class="tiledSection"><h2 id="section42071254407">不规则形状窗口<i class="anchor-icon anchor-icon-link" anchorid="section42071254407" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section9413105472214" class="firsth2">场景案例<i class="anchor-icon anchor-icon-link" anchorid="section9413105472214" tips="复制节点链接"></i></h3></div> <p>待开发的异形窗口，呈现出不规则的形状。这种情况通常先由设计人员提供图形文件，开发人员以文件为输入，基于ArkUI提供的图片处理能力，转化为相应的形状掩码，最后实现不规则的窗口形状。</p> <div class="fignone"><span class="figcap"><b>图3 </b>不规则示例图</span><br><span><img originheight="192" originwidth="192" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163020.48119999572888892989508825109587:50001231000000:2800:07B7A1A3A4C6146D2B9704B1B9F0C1D215C6654A4CA15EFC59CFA392E4A77D73.png" class="notEnlarge" width="192" height="192"></span></div> <p>本节以上图为例说明不规则形状窗口的实现过程。</p> <div class="tiledSection"><h3 id="section27392162314">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section27392162314" tips="复制节点链接"></i></h3><p>首先同样需要先<a href="/consumer/cn/doc/best-practices/bpta-2in1-window-shape#section10343161441819">创建子窗口</a>，然后再依以下步骤开发。</p> </div> <ol><li><span>读取图片文件，将其转化为pixelMap数据。</span><p></p><div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/ImageUtils.ets#L21-L34" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * Convert image to PixelMap object</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-variable">export</span> <span class="hljs-variable">async</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">image2PixelMap</span>(<span class="hljs-variable">Context</span>: <span class="hljs-title class_">Context</span>, <span class="hljs-variable">icon</span>: <span class="hljs-title class_">string</span>, <span class="hljs-variable">w</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">h</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">image</span>.<span class="hljs-title class_">PixelMap</span>&gt; {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">rawFileDescriptor</span>: <span class="hljs-title class_">resourceManager</span>.<span class="hljs-title class_">RawFileDescriptor</span> = <span class="hljs-variable">Context</span>.<span class="hljs-variable">resourceManager</span>.<span class="hljs-title function_">getRawFdSync</span>(<span class="hljs-variable">icon</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">imageSource</span>: <span class="hljs-title class_">image</span>.<span class="hljs-title class_">ImageSource</span> = <span class="hljs-variable">image</span>.<span class="hljs-title function_">createImageSource</span>(<span class="hljs-variable">rawFileDescriptor</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">pixelMap</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">PixelMap</span>&gt; = <span class="hljs-variable">imageSource</span>.<span class="hljs-title function_">createPixelMap</span>({</li><li>    <span class="hljs-variable">editable</span>: <span class="hljs-keyword">false</span>,</li><li>    <span class="hljs-variable">desiredPixelFormat</span>: <span class="hljs-title class_">image</span>.<span class="hljs-title class_">PixelMapFormat</span>.<span class="hljs-title class_">BGRA_8888</span>,</li><li>    <span class="hljs-variable">desiredSize</span>: { <span class="hljs-variable">width</span>: <span class="hljs-title class_">w</span>, <span class="hljs-variable">height</span>: <span class="hljs-title class_">h</span> }</li><li>  });</li><li>  <span class="hljs-variable">imageSource</span>.<span class="hljs-title function_">release</span>()</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable">pixelMap</span>;</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/ImageUtils.ets#L21-L34" target="_blank">ImageUtils.ets</a></div></div></div></div> <p></p></li><li><span>从pixelMap数据中取出颜色信息数组，将每个像素的透明度单独提取至allPixels，再转化生成为对应形状的二维数组掩码maskArray。</span><p></p><div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L60-L79" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">export</span> <span class="hljs-variable">async</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">getPicMask</span>(<span class="hljs-variable">Context</span>: <span class="hljs-title class_">Context</span>,<span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">picPath</span>: <span class="hljs-title class_">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">number</span>[][]&gt; {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">maskArray</span>: <span class="hljs-title class_">number</span>[][] = <span class="hljs-variable">new</span> <span class="hljs-title function_">Array</span>(<span class="hljs-variable">height</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-variable">null</span>).<span class="hljs-title function_">map</span>(() =&gt; <span class="hljs-variable">new</span> <span class="hljs-title function_">Array</span>(<span class="hljs-variable">width</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">pixelMap</span>: <span class="hljs-title class_">image</span>.<span class="hljs-title class_">PixelMap</span> = <span class="hljs-variable">await</span> <span class="hljs-title function_">image2PixelMap</span>(<span class="hljs-variable">Context</span>, <span class="hljs-variable">picPath</span>, <span class="hljs-variable">width</span>, <span class="hljs-variable">height</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">pixelArrayBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">ArrayBuffer</span>(<span class="hljs-variable">width</span> * <span class="hljs-variable">height</span> * <span class="hljs-number">4</span>);</li><li>  <span class="hljs-variable">await</span> <span class="hljs-variable">pixelMap</span>.<span class="hljs-title function_">readPixelsToBuffer</span>(<span class="hljs-variable">pixelArrayBuffer</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">allPixels</span>: <span class="hljs-title class_">number</span>[] = [];</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-variable">unit8Pixels</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">Uint8Array</span>(<span class="hljs-variable">pixelArrayBuffer</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable">i</span> = <span class="hljs-number">0</span>, <span class="hljs-variable">j</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">i</span> &lt; <span class="hljs-title class_">unit8Pixels</span>.<span class="hljs-title class_">length</span>; <span class="hljs-title class_">i</span> += <span class="hljs-number">4</span>, <span class="hljs-title class_">j</span>++) {</li><li>    <span class="hljs-comment">// unit8Pixels[i+3] is alpha channel of BGRA_8888</span></li><li>    <span class="hljs-variable">allPixels</span>[<span class="hljs-variable">j</span>] = <span class="hljs-variable">unit8Pixels</span>[<span class="hljs-variable">i</span> + <span class="hljs-number">3</span>] &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;</li><li>  }</li><li>  <span class="hljs-variable">pixelMap</span>.<span class="hljs-title function_">release</span>()</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">k</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable">i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">i</span> &lt; <span class="hljs-title class_">width</span>; <span class="hljs-title class_">i</span>++) {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable">j</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">j</span> &lt; <span class="hljs-title class_">height</span>; <span class="hljs-title class_">j</span>++) {</li><li>      <span class="hljs-variable">maskArray</span>[<span class="hljs-variable">i</span>][<span class="hljs-variable">j</span>] = <span class="hljs-variable">allPixels</span>[<span class="hljs-variable">k</span>++];</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-variable">maskArray</span>;</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L60-L79" target="_blank">WindowUtils.ets</a></div></div></div></div> <p></p></li><li><span>使用setWindowMask(windowMask)接口，设置窗口形状。</span><p></p><div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L84-L132" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setWindowShape</span>(<span class="hljs-params">win: <span class="hljs-variable language_">window</span>.Window, width: <span class="hljs-built_in">number</span>,</span></li><li><span class="hljs-params">  height: <span class="hljs-built_in">number</span>, getMaskFunc: (w: <span class="hljs-built_in">number</span>, h: <span class="hljs-built_in">number</span>, picPath?: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">number</span>[][]&gt;,</span></li><li><span class="hljs-params">  picPath?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-keyword">const</span> windowMask = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getMaskFunc</span>(width, height, picPath);</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.Window.SessionManager'</span>)) {</li><li>    win.<span class="hljs-title function_">setWindowMask</span>(windowMask);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'Simple'</span>, <span class="hljs-string">'can not use SessionManager syscap'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * Set the window with pic shape</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> win The target window</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> width The original window width</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> height The original window height</span></li><li><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> picPath The pic path in rawfile</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setWindowPicShape</span>(<span class="hljs-params">win: <span class="hljs-variable language_">window</span>.Window, Context: Context, width: <span class="hljs-built_in">number</span>,</span></li><li><span class="hljs-params">  height: <span class="hljs-built_in">number</span>, picPath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-title function_">setWindowShape</span>(win, width, height, <span class="hljs-function">(<span class="hljs-params">w, h, picPath</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getPicMask</span>(<span class="hljs-title class_">Context</span>,w, h, picPath!)</li><li>  }, picPath)</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/utils/WindowUtils.ets#L84-L132" target="_blank">WindowUtils.ets</a></div></div></div></div> <p></p></li><li><span>使用showWindow()接口显示异形子窗口。</span><p></p><div class="screenLinkPre"><div _ngcontent-jug-c106="" class="highlight-div"><div _ngcontent-jug-c106="" class="highlight-div-header"><div _ngcontent-jug-c106="" class="highlight-div-header-left"><div _ngcontent-jug-c106="" class="handle-button expand-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jug-c106="" class="highlight-div-header-right"><div _ngcontent-jug-c106="" class="handle-button ai-button"></div><div _ngcontent-jug-c106="" class="handle-button line-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jug-c106="" class="handle-button theme-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jug-c106="" class="handle-button copy-button"><div _ngcontent-jug-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jug-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/pages/Index.ets#L67-L67" data-highlighted="yes"><ol class="linenums"><li>subWindow<span class="hljs-selector-class">.showWindow</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/special-window-shape/blob/master/entry/src/main/ets/pages/Index.ets#L67-L67" target="_blank">Index.ets</a></div></div></div></div> <p></p></li></ol> <div class="tiledSection"><h3 id="section154074911233">实现效果<i class="anchor-icon anchor-icon-link" anchorid="section154074911233" tips="复制节点链接"></i></h3></div> <div class="fignone"><span class="figcap"><b>图4 </b>不规则形状子窗口效果</span><br><span><img height="193.7278" originheight="193" originwidth="265" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163020.10918526400897677627696513143198:50001231000000:2800:510F8F84E8AD5C545789111114DC8ECBA0B7548746754EB85EC1F8851B33F424.png" width="266" class="notEnlarge"></span></div> <div class="tiledSection"><h2 id="section62254820291"><strong>示例代码</strong><i class="anchor-icon anchor-icon-link" anchorid="section62254820291" tips="复制节点链接"></i></h2></div> <ul><li><a href="https://gitee.com/harmonyos_samples/special-window-shape" target="_blank">实现PC/2in1异形窗口</a></li></ul> </div> <div></div></div>