<h1 _ngcontent-spk-c119="" class="doc-title ng-star-inserted" title="Tabs选项卡常见开发场景"> Tabs选项卡常见开发场景 </h1>

<div _ngcontent-spk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section126181321717">概述<i class="anchor-icon anchor-icon-link" anchorid="section126181321717" tips="复制节点链接"></i></h2></div> <p>在日常开发中，开发者经常遇到使用Tabs作为导航的场景，包括多层嵌套的Tabs、自定义Tabs样式、Tabs数据加载和动态变更显示的Tabs等。</p> <p>开发者在实际开发中往往需要处理多个功能点的配合，以及与其他组件或数据的互动。为了帮助开发者更直观和全面地理解Tabs组件，本文通过将这些场景整合到一个应用首页的具体实例中，展示Tabs组件的各项功能及其协同效果，以及与其他组件或数据的联动。</p> <p>本文将从以下几个方面进行介绍。</p> <ul><li><a href="/consumer/cn/doc/best-practices/bpta-development-scenarios-for-tabs#section166991845192018">Tabs显示排版</a></li><li><a href="/consumer/cn/doc/best-practices/bpta-development-scenarios-for-tabs#section16601444172310">Tabs滑动</a></li><li><a href="/consumer/cn/doc/best-practices/bpta-development-scenarios-for-tabs#section1731618032613">Tabs页签加载/更新</a></li><li><a href="/consumer/cn/doc/best-practices/bpta-development-scenarios-for-tabs#section595454372613">Tabs切换动效</a></li></ul> <div class="tiledSection"><h2 id="section166991845192018">Tabs显示排版<i class="anchor-icon anchor-icon-link" anchorid="section166991845192018" tips="复制节点链接"></i></h2><p>在Tabs组件的应用场景中，开发者通常会自定义Tabs的布局和样式。本章节将介绍Tabs组件提供的几种常用的布局和样式功能。</p> </div> <div class="tiledSection"><h3 id="section824082116217" class="firsth2">Tabs导航样式<i class="anchor-icon anchor-icon-link" anchorid="section824082116217" tips="复制节点链接"></i></h3></div> <p>常见的应用页签导航效果包括底部导航、顶部导航和侧边导航。</p> <p><span><img height="313.295864" originheight="4163" originwidth="9450" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162926.24770827324548909907308493770437:50001231000000:2800:3391C1AA39CE9A343CBE27FA182816179FBA28D70732E6D740EBDDC4638FDC25.png" title="点击放大" width="711.2175000000001"></span></p> <p>底部导航栏通常用于应用的主导航，其标签数量相对固定，不涉及TabBar滑动。作为应用的主导航，开发者通常会自定义TabBar的样式。底部导航栏可通过设置Tabs的barPosition参数来实现，需将barPosition设置为BarPosition.End。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L73-L121" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Tabs</span>({</li><li>  <span class="hljs-variable">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-title class_">End</span>,</li><li>  <span class="hljs-comment">// ...</span></li><li>}) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L73-L121" target="_blank">OutTabsComponent.ets</a></div></div></div></div> <p>顶部导航栏主要用于主栏目的二级导航。由于二级导航可能包含较多的页签项，其TabBar通常设计为可滚动显示，并能动态调整所显示的页签。同样地，顶部导航栏通过将Tabs的barPosition参数设置为BarPosition.Start来实现。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L234-L355" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Tabs</span>({</li><li>  <span class="hljs-variable">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-title class_">Start</span>,</li><li>  <span class="hljs-comment">// ...</span></li><li>}) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L234-L355" target="_blank">InTabsComponent.ets</a></div></div></div></div> <p>侧边导航栏常见于横屏界面的导航。由于横屏界面尺寸规格的差异，导航条的页签需要适配宽度和高度，以确保更佳的显示效果。侧边导航栏的实现方式有所不同，需要将Tabs的vertical属性设置为true，而Tabs的barPosition参数则用于控制导航栏显示在左侧或右侧。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L74-L127" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">Tabs</span>({</li><li>  // ...</li><li>}) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-selector-class">.vertical</span>(false) <span class="hljs-comment">// true to make the tab bar in side</span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L74-L127" target="_blank">OutTabsComponent.ets</a></div></div></div></div> <p>详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-tabs" target="_blank">选项卡 (Tabs)</a>。</p> <div class="tiledSection"><h3 id="section576212341212">页签对齐方式<i class="anchor-icon anchor-icon-link" anchorid="section576212341212" tips="复制节点链接"></i></h3></div> <p>当页签数量不足，无法铺满屏幕宽度或高度，或者铺满后影响到UI美观时，Tabs提供了自定义导航条页签对齐方式的API。例如，在应用的二级导航中，如果页签较少，可以考虑将页签居左对齐。</p> <p><span><img height="459.37269" originheight="7075" originwidth="11138" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162927.87310181067900990384718555150515:50001231000000:2800:52F70C5453604FC0DB35A1E11732B295F7D2214EF8897FA3D111AD01F5FCF72A.png" title="点击放大" width="723.1875"></span></p> <p><strong>实现原理</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabsoptions15" target="_blank">barModifier</a>属性设置tabBar的align参数，可以实现页签对齐布局效果。类似于文本对齐，开发者可以自行设置居中、居上、居下、居左或者居右对齐。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>只有在TabBar的barMode为BarMode.Scrollable时，这些设置才会生效。除此之外，还可以通过barModifier参数设置一系列的通用属性，具体参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabsoptions15" target="_blank">TabsOptions</a>。</li><li>居上居下对齐仅在侧边导航栏中生效。若要控制顶部和底部导航栏中页签与顶部的距离，同样可以使用barModifier设置padding属性，以保持页签与TabBar顶部的特定间距。</li></ul> </div></div></div> <p><strong>开发步骤</strong></p> <p>定义tabBarModifier属性，并将其作为参数构造Tabs，然后通过tabBarModifier设置对齐方式。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L28-L422" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export default struct InTabsComponent {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">tabBarModifier</span>: CommonModifier = new CommonModifier();</li><li>  <span class="hljs-comment">// ...</span></li><li>  async <span class="hljs-built_in">aboutToAppear</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>    this<span class="hljs-selector-class">.tabBarModifier</span><span class="hljs-selector-class">.margin</span>({ right: <span class="hljs-number">56</span> })<span class="hljs-selector-class">.align</span>(Alignment.Start);</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>            <span class="hljs-built_in">Tabs</span>({</li><li>              // ...</li><li>              barModifier: this.tabBarModifier</li><li>            }) {</li><li>              <span class="hljs-comment">// ...</span></li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L28-L422" target="_blank">InTabsComponent.ets</a></div></div></div></div> <div class="tiledSection"><h3 id="section11683353172120">自定义页签<i class="anchor-icon anchor-icon-link" anchorid="section11683353172120" tips="复制节点链接"></i></h3></div> <p>对于底部导航栏，通常用于应用主页面的功能区分。为了更好的用户体验，开发者通常会自定义页签样式。开发者可以使用Tabs组件提供的定制页签样式的API，将页签自定义为图标加文字标题的形式，并且在选中和非选中的状态下，提供不同的样式。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162928.49623556411250530786040317931580:50001231000000:2800:A20EAB1B8FF026519C253758B13A2E64373AE5D08CC24D1BD97B3F97E16A603B.gif" title="点击放大" width="266"></span></p> <p><strong>实现原理</strong></p> <p>Tabs组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent#tabbar" target="_blank">tabBar()</a>方法接受联合类型的参数，可以将由@Builder修饰的UI构建函数作为参数传入，以自定义TabBar的样式。因此，开发者可以定义一个UI构建函数tabBuilder()，作为参数传递给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent#tabbar" target="_blank">tabBar()</a>方法。由于选中的页签和未选中的页签需要不同的样式，还需定义一个由@State修饰的数值型变量currentIndex，用于在tabBuilder()函数中判断当前页签是否被选中。当currentIndex发生变化时，能够触发tabBar样式的更新。最后，注册Tabs组件的onchange函数，在该函数中更新currentIndex的值。</p> <p><strong>开发步骤</strong></p> <ol><li>定义currentIndex属性。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L22-L155" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">@Component</span></li><li>export default struct OutTabsComponent {</li><li>  <span class="hljs-variable">@State</span> <span class="hljs-attribute">currentIndex</span>: number = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L22-L155" target="_blank">OutTabsComponent.ets</a></div></div></div></div> </li><li>定义@Builder装饰器修饰的自定义样式构建方法tabBuilder()。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L43-L69" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">@Builder</span></li><li><span class="hljs-built_in">tabBuilder</span>(<span class="hljs-attribute">index</span>: number, <span class="hljs-attribute">name</span>: string | Resource, <span class="hljs-attribute">icon</span>: Resource) {</li><li>  <span class="hljs-selector-tag">Column</span>() {</li><li>    <span class="hljs-comment">// set special styles if selected</span></li><li>
</li><li>    <span class="hljs-selector-tag">SymbolGlyph</span>(icon)<span class="hljs-selector-class">.fontColor</span>([this.currentIndex === index</li><li>      ? $<span class="hljs-built_in">r</span>(<span class="hljs-string">'app.color.out_tab_bar_font_active_color'</span>)</li><li>      : $<span class="hljs-built_in">r</span>(<span class="hljs-string">'app.color.out_tab_bar_font_inactive_color'</span>)])</li><li>      <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">25</span>)</li><li>
</li><li>    <span class="hljs-selector-tag">Text</span>(name)</li><li>      <span class="hljs-selector-class">.margin</span>({ <span class="hljs-attribute">top</span>: <span class="hljs-number">4</span> })</li><li>      <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">10</span>)</li><li>      <span class="hljs-selector-class">.fontColor</span>(this.currentIndex === index</li><li>        ? $<span class="hljs-built_in">r</span>(<span class="hljs-string">'app.color.out_tab_bar_font_active_color'</span>)</li><li>        : $<span class="hljs-built_in">r</span>(<span class="hljs-string">'app.color.out_tab_bar_font_inactive_color'</span>))</li><li>  }</li><li>  .<span class="hljs-built_in">justifyContent</span>(FlexAlign.Center)</li><li>  .<span class="hljs-built_in">height</span>(Constants.FULL_<span class="hljs-attribute">HEIGHT</span>)</li><li>  .<span class="hljs-built_in">width</span>(Constants.FULL_<span class="hljs-attribute">WIDTH</span>)</li><li>  .<span class="hljs-built_in">padding</span>({ <span class="hljs-attribute">bottom</span>: <span class="hljs-number">60</span> })</li><li>  <span class="hljs-comment">// .backgroundColor($r('app.color.out_tab_bar_background_color'))</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L43-L69" target="_blank">OutTabsComponent.ets</a></div></div></div></div> </li><li>将tabBuilder()方法传入Tabs，并在Tabs注册onChange()函数，并在其中更新currentIndex属性。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L75-L138" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-selector-tag">Tabs</span>({</li><li>  <span class="hljs-comment">// ...</span></li><li>}) {</li><li>  <span class="hljs-selector-tag">TabContent</span>() {</li><li>    <span class="hljs-selector-tag">InTabsComponent</span>({ switchNext: this.switchNext })</li><li>  }.<span class="hljs-built_in">tabBar</span>(this.<span class="hljs-built_in">tabBuilder</span>(<span class="hljs-number">0</span>, $<span class="hljs-built_in">r</span>(<span class="hljs-string">'app.string.out_bar_text_home'</span>), $<span class="hljs-built_in">r</span>(<span class="hljs-string">'sys.symbol.house'</span>)))</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>.<span class="hljs-built_in">onChange</span>((<span class="hljs-attribute">index</span>: number) =&gt; {</li><li>  this.currentIndex = index;</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L75-L138" target="_blank">OutTabsComponent.ets</a></div></div></div></div> </li></ol> <div class="tiledSection"><h3 id="section105116160234">Tabs吸顶<i class="anchor-icon anchor-icon-link" anchorid="section105116160234" tips="复制节点链接"></i></h3></div> <p>在一些二级导航栏页面中，二级页签的内容上方通常会放置一些banner位或其他优先级较高的内容，并且在向上滑动时会退出显示区域。为了提供更好的用户体验，建议在上划的过程中，导航条能够吸附在顶部，便于用户进行内容切换。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162929.51511248427228745200979540020914:50001231000000:2800:C528461E340B45B24B352A162D40C67C5DF608D6012410D82F2C1B8D85583475.gif" title="点击放大" width="266"></span></p> <p><strong>实现原理</strong></p> <p>开发者可以通过设置滑动组件的属性<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#nestedscroll10" target="_blank">nestedScroll</a>来控制父子组件的滑动顺序，从而实现吸顶效果。具体而言，需确保TabContent内容是可滑动的，并且Tabs的上层父组件也必须是可滑动的。为内容组件添加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#nestedscroll10" target="_blank">nestedScroll</a>属性，设置为当向上滑动时父组件先动，而向下滑动时自己先动，从而实现滑动吸顶效果。</p> <p><strong>开发步骤</strong></p> <div class="p">在Tabs父组件上嵌套Scroll组件，TabContent中的List组件显示内容，List组件本身是可滑动的，仅需设置其滑动触发行为即可。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L179-L405" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Scroll</span>() {</li><li>  <span class="hljs-title function_">Column</span>() {</li><li>    <span class="hljs-title function_">BannerComponent</span>()</li><li>
</li><li>    <span class="hljs-title function_">Stack</span>({ <span class="hljs-variable">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-title class_">TopEnd</span> }) {</li><li>      <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-title function_">Tabs</span>({</li><li>          <span class="hljs-comment">// ...</span></li><li>        }) {</li><li>          <span class="hljs-comment">// bind selected tabs to ui</span></li><li>          <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">selectTabsViewModel</span>.<span class="hljs-variable">selectedTabs</span>, (<span class="hljs-variable">tab</span>: <span class="hljs-title class_">TabItemViewModel</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable">index</span> === <span class="hljs-keyword">this</span>.<span class="hljs-variable">selectTabsViewModel</span>.<span class="hljs-variable">selectedTabs</span>.<span class="hljs-variable">length</span> - <span class="hljs-number">1</span>) {</li><li>              <span class="hljs-title function_">TabContent</span>() {</li><li>                <span class="hljs-title function_">List</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">10</span> }) {</li><li>                  <span class="hljs-comment">// ...</span></li><li>                }</li><li>                <span class="hljs-comment">// ...</span></li><li>                <span class="hljs-comment">// set the sliding behavior to move up parent first, and move down self first</span></li><li>                .<span class="hljs-title function_">nestedScroll</span>({</li><li>                  <span class="hljs-variable">scrollForward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-title class_">PARENT_FIRST</span>,</li><li>                  <span class="hljs-variable">scrollBackward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-title class_">SELF_FIRST</span></li><li>                })</li><li>              }</li><li>              <span class="hljs-comment">// ...</span></li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-comment">// ...</span></li><li>            }</li><li>          }, (<span class="hljs-variable">tab</span>: <span class="hljs-title class_">TabItemViewModel</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; <span class="hljs-variable">index</span> + <span class="hljs-string">'_'</span> + <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">tab</span>))</li><li>        }</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-variable">Constants</span>.<span class="hljs-variable">FULL_WIDTH</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-variable">Constants</span>.<span class="hljs-variable">FULL_HEIGHT</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.color.out_tab_bar_background_color'</span>))</li><li>    }</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L179-L405" target="_blank">InTabsComponent.ets</a></div></div></div></div> </div> <div class="tiledSection"><h3 id="section17705163115238">TabsBar显示效果<i class="anchor-icon anchor-icon-link" anchorid="section17705163115238" tips="复制节点链接"></i></h3></div> <p>在某些UI设计风格中，可能需要为TabBar采用特殊样式，比如首页导航栏的毛玻璃背景效果等。</p> <ul><li>通过设置Tabs组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#baroverlap10" target="_blank">barOverlap</a>属性，可以实现TabBar变模糊并叠加在TabContent之上，并且配合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#barbackgroundblurstyle11" target="_blank">barBackgroundBlurStyle</a>属性实现毛玻璃效果。详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/architecture-guides/tab_bar_blur-0000002257193008" target="_blank">TabBar背景模糊效果</a>。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/OutTabComponent.ets#L62-L119" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">Tabs</span>({</li><li>  // ...</li><li>}) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-selector-class">.barOverlap</span>(true)</li><li><span class="hljs-selector-class">.barBackgroundBlurStyle</span>(BlurStyle.Thin)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/OutTabComponent.ets#L62-L119" target="_blank">OutTabComponent.ets</a></div></div></div></div> <p>底部导航栏覆盖在内容上方，并具有毛玻璃效果。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162929.80543068682470608264353490698095:50001231000000:2800:E4C09342D9091DE4B81EA5A1C5324E8118F7177233F95CFEFDC866CCBF5833A9.gif" title="点击放大" width="266"></span></p> </li><li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabsoptions15" target="_blank">barModifier</a>设置tabBar的clip属性，实现页签超出tabBar区域显示效果。详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#示例15页签超出tabbar区域显示" target="_blank">页签超出TabBar区域显示</a>。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/OutTabComponent.ets#L21-L128" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">OutTabComponent</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TabsController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabsController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabBarModifier</span>.<span class="hljs-title function_">clip</span>(<span class="hljs-literal">false</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Tabs</span>({</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-attr">barModifier</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabBarModifier</span></li><li>      }) {</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>
</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'calc(100% + 60vp)'</span>)</li><li>    .<span class="hljs-title function_">expandSafeArea</span>([<span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">SYSTEM</span>], [<span class="hljs-title class_">SafeAreaEdge</span>.<span class="hljs-property">BOTTOM</span>])</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/OutTabComponent.ets#L21-L128" target="_blank">OutTabComponent.ets</a></div></div></div></div> <p>底层导航栏图标可超出导航条范围。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162929.95464371148481464397226858068228:50001231000000:2800:C905EB96840A6E507C58E8EA1A02323C2E0EE2A8A108E1401C42305DED1A5322.gif" title="点击放大" width="266"></span></p> </li><li>通过配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#fadingedge10" target="_blank">fadingEdge</a>(true)实现TabBar边缘渐隐。详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#示例5设置tabbar渐隐" target="_blank">设置TabBar渐隐</a>。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/InTabComponent.ets#L113-L129" data-highlighted="yes"><ol class="linenums"><li>Tabs({controller: <span class="hljs-keyword">this</span>.subController}){</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.fadingEdge(<span class="hljs-keyword">this</span>.isFadingEdge) <span class="hljs-comment">// true set tab bar edge fade</span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/InTabComponent.ets#L113-L129" target="_blank">InTabComponent.ets</a></div></div></div></div> <p>顶部导航栏页签靠近两侧会模糊化。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162929.94140816180938764555297894423125:50001231000000:2800:E1B5B425A3ABCB6B8DBDC617B07434AA34580201CCE7667324FE626FE6F705CE.gif" title="点击放大" width="266"></span></p> </li><li>通过TabsController的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#settabbartranslate13" target="_blank">setTabBarTranslate()</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#settabbaropacity13" target="_blank">setTabBarOpacity()</a>方法可以设置TabBar偏移量及透明度。详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#示例12设置tabbar平移距离和不透明度" target="_blank">设置TabBar平移距离和不透明度</a>。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/InTabComponent.ets#L18-L136" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export default struct InTabComponent {</li><li>  <span class="hljs-comment">// ...</span></li><li>  private subController: TabsController = new <span class="hljs-built_in">TabsController</span>();</li><li>
</li><li>  <span class="hljs-built_in">onDidBuild</span>(): void {</li><li>    if (this.isSetTabBarTranslateAndOpacity) {</li><li>      this<span class="hljs-selector-class">.subController</span><span class="hljs-selector-class">.setTabBarTranslate</span>({x:-<span class="hljs-number">20</span>,y:<span class="hljs-number">30</span>});</li><li>      this<span class="hljs-selector-class">.subController</span><span class="hljs-selector-class">.setTabBarOpacity</span>(<span class="hljs-number">0.5</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">Tabs</span>({controller: this.subController}){</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-selector-class">.barMode</span>(BarMode.Scrollable)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/InTabComponent.ets#L18-L136" target="_blank">InTabComponent.ets</a></div></div></div></div> <p>顶部导航栏位置向左下偏移，并且呈现半透明效果。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162929.80505498357775354962812093826165:50001231000000:2800:5C6E651EC3F859C101CCEA5EA6B06DC27271B3D70D10B331D1F34270D5782C11.gif" title="点击放大" width="266"></span></p> </li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>在以下情况下，该设置无法生效：当显示内容过长时，通常会将其置于可滚动容器组件中，并在向上滑动时隐藏TabBar，向下滑动时显示。此时，会使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#bindtabstoscrollable13" target="_blank">bindTabsToScrollable</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#bindtabstonestedscrollable13" target="_blank">bindTabsToNestedScrollable</a>等接口将Tabs组件与可滚动容器组件绑定。由于TabBar的控制与滚动组件联动，通过setTabBarOpacity接口设置的TabBar偏移量和不透明度将不再生效。</p> </div></div></div> <div class="tiledSection"><h2 id="section16601444172310">Tabs滑动<i class="anchor-icon anchor-icon-link" anchorid="section16601444172310" tips="复制节点链接"></i></h2><p>Tabs组件在用户交互方面提供了丰富的特性，其中与滑动动作相关的交互尤为常见。下文将介绍几种与Tabs和滑动动作相关的特性。</p> </div> <div class="tiledSection"><h3 id="section171011357192310" class="firsth2">双层Tabs嵌套滑动<i class="anchor-icon anchor-icon-link" anchorid="section171011357192310" tips="复制节点链接"></i></h3></div> <p>在应用开发中，开发者经常遇到多层Tabs嵌套使用的场景。如果父子Tabs组件均需滑动切换时，开发者需要对父子Tabs的滑动切换行为进行约束，以避免冲突。通常做法是，让滑动操作优先切换子Tabs页签，当子Tabs页签切换到最后一个后，再触发父Tabs的页签切换。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162929.37620914001634220794710449579945:50001231000000:2800:6F74D40E47F2A641979EA94337B9EFBEE5595C1CE5E8B27DFE754CBF4356B941.gif" title="点击放大" width="266"></span></p> <p><strong>实现原理</strong></p> <p>可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture" target="_blank">PanGesture</a>结合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabscontroller" target="_blank">TabsController</a>的changeIndex()方法实现双层Tabs的切换。具体操作为：开启子Tabs的滑动切换功能，同时关闭父Tabs的滑动切换。在子Tabs的第一个或者最后一个页面上添加PanGesture事件处理函数，用于判断滑动方向，并根据滑动方向使用TabsController的changeIndex()方法切换到父Tabs的相应页签。这样一来，子Tabs的中间页签滑动时，仅会触发子Tabs页签的切换，而最后一个页签的滑动则会通过changeIndex()方法间接触发父Tabs页签的切换。</p> <p><span><img height="429.50754" originheight="4256" originwidth="7087" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162929.53829664929963394828056211881756:50001231000000:2800:35130533AAFE2821C9405EEA9C53FC62DD53220BD0B98F7BFCA0308FFC5528A1.png" title="点击放大" width="715.2075"></span></p> <p><strong>开发步骤</strong></p> <ol><li>外层Tabs组件中定义<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabscontroller" target="_blank">TabsController</a>属性，以及内层Tabs双向绑定的状态属性变量switchNext及其监听函数。当监听到需要切换页签时，利用TabsController切换到对应页签。因为本示例外层Tabs和内层Tabs封装到不同的自定义组件中了，所以需要@Link修饰的switchNext变量作为父子组件的交互媒介。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L21-L154" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>export default struct OutTabsComponent {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-meta">@Watch(<span class="hljs-string">'onchangeSwitchNext'</span>)</span> switchNext: boolean = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>  onchangeSwitchNext() {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.switchNext) {</li><li>      <span class="hljs-keyword">this</span>.switchNext = <span class="hljs-literal">false</span>;</li><li>      <span class="hljs-keyword">this</span>.tabsController.changeIndex(<span class="hljs-number">1</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  build() {</li><li>    Tabs({</li><li>      <span class="hljs-comment">// ...</span></li><li>      controller: <span class="hljs-keyword">this</span>.tabsController,</li><li>    }) {</li><li>      TabContent() {</li><li>        InTabsComponent({ switchNext: <span class="hljs-keyword">this</span>.switchNext })</li><li>      }.tabBar(<span class="hljs-keyword">this</span>.tabBuilder(<span class="hljs-number">0</span>, $r(<span class="hljs-string">'app.string.out_bar_text_home'</span>), $r(<span class="hljs-string">'sys.symbol.house'</span>)))</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L21-L154" target="_blank">OutTabsComponent.ets</a></div></div></div></div> </li><li>内层Tabs组件在最后一个TabContent中注册滑动事件处理函数，监听向左滑动作，触发时修改switchNext变量值传递给外层Tabs组件触发切换。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L30-L424" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">InTabsComponent</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">switchNext</span>: <span class="hljs-built_in">boolean</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>            <span class="hljs-title class_">Tabs</span>({</li><li>              <span class="hljs-comment">// ...</span></li><li>            }) {</li><li>              <span class="hljs-comment">// bind selected tabs to ui</span></li><li>              <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectTabsViewModel</span>.<span class="hljs-property">selectedTabs</span>, <span class="hljs-function">(<span class="hljs-params">tab: TabItemViewModel, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (index === <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectTabsViewModel</span>.<span class="hljs-property">selectedTabs</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>                  <span class="hljs-title class_">TabContent</span>() {</li><li>                    <span class="hljs-comment">// ...</span></li><li>                  }</li><li>                  .<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(index, tab))</li><li>                  .<span class="hljs-title function_">gesture</span>(<span class="hljs-title class_">PanGesture</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PanGestureOptions</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">PanDirection</span>.<span class="hljs-property">Left</span> })).<span class="hljs-title function_">onActionStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">switchNext</span> = <span class="hljs-literal">true</span>;</li><li>                  }))</li><li>                  <span class="hljs-comment">// ...</span></li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-comment">// ...</span></li><li>                }</li><li>              }, <span class="hljs-function">(<span class="hljs-params">tab: TabItemViewModel, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> index + <span class="hljs-string">'_'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(tab))</li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L30-L424" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li><li>注意滑动切换在自定义切换动画场景下失效，故需要注释掉切换动画函数注册。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L229-L367" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Tabs</span>({</li><li>  <span class="hljs-variable">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-title class_">Start</span>,</li><li>  <span class="hljs-variable">controller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">subsController</span>,</li><li>  <span class="hljs-variable">barModifier</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">tabBarModifier</span></li><li>}) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// add animation function</span></li><li>.<span class="hljs-title function_">customContentTransition</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">customContentTransition</span>) <span class="hljs-comment">// comment out to slide to switch</span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L229-L367" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li></ol> <div class="tiledSection"><h3 id="section7842176172416">可滚动Tabs页签栏+更多按钮<i class="anchor-icon anchor-icon-link" anchorid="section7842176172416" tips="复制节点链接"></i></h3></div> <p>可滚动页签栏通常设置在顶部或侧边导航栏，当内容分类较多，屏幕显示区域无法完全展示所有分类页签时，该页签栏允许用户通过滚动来访问隐藏的页签内容。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162930.32681813741313022573292218553865:50001231000000:2800:569DE1E0119FA1985711C87DD897FFF527444EA389DA1D081A09387E37B78E93.gif" title="点击放大" width="266"></span></p> <p><strong>实现原理</strong></p> <p>通过将Tabs组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#barmode" target="_blank">barMode</a>属性设置为BarMode.Scrollable，可以实现可滚动的页签栏。若要实现添加更多按钮的效果，可以通过Stack布局结合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabsoptions15" target="_blank">barModifier</a>功能实现。具体做法是在Tabs组件的TabBar位置的末端上层利用Stack布局添加更多按钮，并且点击该按钮时可以弹出窗口，在弹窗中自定义需要显示的页签。</p> <p><strong>开发步骤</strong></p> <p>设置barMode属性为BarMode.Scrollable，并利用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-stack-layout" target="_blank">Stack</a>布局在TabBar右上角添加更多按钮。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L184-L402" data-highlighted="yes"><ol class="linenums"><li>Stack({ alignContent: Alignment.TopEnd }) {</li><li>  Row() {</li><li>    Image($r(<span class="hljs-string">'app.media.more'</span>))</li><li>      <span class="hljs-comment">// ...</span></li><li>      .onClick(() =&gt; {</li><li>        <span class="hljs-keyword">this</span>.showSelectTabsComponent = !<span class="hljs-keyword">this</span>.showSelectTabsComponent;</li><li>      })</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  .zIndex(<span class="hljs-number">1</span>)</li><li>  .bindSheet($$<span class="hljs-keyword">this</span>.showSelectTabsComponent, <span class="hljs-keyword">this</span>.sheetBuilder(), {</li><li>    detents: [SheetSize.MEDIUM, SheetSize.MEDIUM, <span class="hljs-number">500</span>],</li><li>    preferType: SheetType.BOTTOM,</li><li>    title: { title: $r(<span class="hljs-string">'app.string.bind_sheet_title'</span>) },</li><li>    onWillDismiss: (dismissSheetAction: DismissSheetAction) =&gt; {</li><li>      <span class="hljs-comment">// update tab when closing modal box</span></li><li>      <span class="hljs-keyword">this</span>.selectTabsViewModel.updateSelectedTabs();</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectTabsViewModel.selectedTabs.length &gt; <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-keyword">this</span>.subsController.changeIndex(<span class="hljs-number">0</span>);</li><li>      }</li><li>      dismissSheetAction.dismiss();</li><li>    }</li><li>  })</li><li>  Column() {</li><li>    Tabs({</li><li>      <span class="hljs-comment">// ...</span></li><li>    }) {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>    .barMode(BarMode.Scrollable)</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  .width(Constants.FULL_WIDTH)</li><li>  .height(Constants.FULL_HEIGHT)</li><li>  .backgroundColor($r(<span class="hljs-string">'app.color.out_tab_bar_background_color'</span>))</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L184-L402" target="_blank">InTabsComponent.ets</a></div></div></div></div> <div class="tiledSection"><h3 id="section83577301247">禁用TabContent左右滑动<i class="anchor-icon anchor-icon-link" anchorid="section83577301247" tips="复制节点链接"></i></h3></div> <p>默认情况下，导航栏支持滑动切换。当存在多级导航栏嵌套或导航栏中的其他组件需要占用滑动动作时，为避免滑动响应冲突，开发者可选择禁用Tabs组件的滑动切换功能。通过将Tabs组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#scrollable" target="_blank">scrollable</a>属性设置为false，可以禁止通过滑动TabContent来切换页签。同样，若想禁用边缘回弹效果，可将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#edgeeffect12" target="_blank">edgeEffect</a>的值设置为EdgeEffect.None。</p> <p>示例代码：</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L69-L151" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">build</span>() {</li><li>  <span class="hljs-built_in">Tabs</span>({</li><li>    // ...</li><li>  }) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-selector-class">.scrollable</span>(true) <span class="hljs-comment">// false to disable scroll to switch</span></li><li>  <span class="hljs-comment">// .edgeEffect(EdgeEffect.None) // disables edge springback</span></li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L69-L151" target="_blank">OutTabsComponent.ets</a></div></div></div></div> <div class="tiledSection"><h2 id="section1731618032613">Tabs页签加载/更新<i class="anchor-icon anchor-icon-link" anchorid="section1731618032613" tips="复制节点链接"></i></h2><p>在使用Tabs组件进行开发时，特别是当Tabs组件作为二级导航使用时，业务需求往往需要对Tabs的标签页进行更精细的控制。下文将介绍几种定制标签页显示逻辑的场景。</p> </div> <div class="tiledSection"><h3 id="section144997720266" class="firsth2">显示指定页签与预加载<i class="anchor-icon anchor-icon-link" anchorid="section144997720266" tips="复制节点链接"></i></h3></div> <p>Tabs组件的TabContent默认在首次切换到该标签页时加载。如果TabContent中的内容或初始化逻辑较为复杂，加载速度较慢，则会影响标签页切换的流畅性，进而影响用户体验。此时，如果应用能在切换前预加载相应的标签页，将显著提升使用流畅度。</p> <p><span><img height="354.183389" originheight="4963" originwidth="10888" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162930.09737139329503667559375931629570:50001231000000:2800:7CADF985E9407BD82C11F11E6C68513685806BAD4EB30E1AD271E9D26C081510.png" title="点击放大" width="777.0525"></span></p> <p><strong>实现原理</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabscontroller" target="_blank">TabController</a>的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#preloaditems12" target="_blank">preloadItem()</a>方法可以预加载指定子节点。该方法参数为需要预加载的index数组，无参调用此方法时，会一次性加载所有指定的子节点。因此，为了性能考虑，建议分批加载子节点。代码示例这里做法是当切换到某页签时，预加载所选页签左右两侧的页签内容。</p> <p><strong>开发步骤</strong></p> <p>定义subsController属性，并在Tabs的onChange函数中调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#preloaditems12" target="_blank">preloadItem()</a>预加载当前页签两侧页签。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L29-L423" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">InTabsComponent</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">subsController</span>: <span class="hljs-title class_">TabsController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabsController</span>();</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>            <span class="hljs-title class_">Tabs</span>({</li><li>              <span class="hljs-comment">// ...</span></li><li>              <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">subsController</span>,</li><li>              <span class="hljs-comment">// ...</span></li><li>            }) {</li><li>              <span class="hljs-comment">// ...</span></li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>            .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">focusIndex</span> = index;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabBarItemScroller</span>.<span class="hljs-title function_">scrollToIndex</span>(index, <span class="hljs-literal">true</span>, <span class="hljs-title class_">ScrollAlign</span>.<span class="hljs-property">CENTER</span>);</li><li>              <span class="hljs-comment">// preload the left and right item</span></li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">preloadItems</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>              <span class="hljs-keyword">if</span> (index - <span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span>) {</li><li>                preloadItems.<span class="hljs-title function_">push</span>(index - <span class="hljs-number">1</span>);</li><li>              }</li><li>              <span class="hljs-keyword">if</span> (index + <span class="hljs-number">1</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectTabsViewModel</span>.<span class="hljs-property">selectedTabs</span>.<span class="hljs-property">length</span>) {</li><li>                preloadItems.<span class="hljs-title function_">push</span>(index + <span class="hljs-number">1</span>);</li><li>              }</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">subsController</span>.<span class="hljs-title function_">preloadItems</span>(preloadItems);</li><li>            })</li><li>            <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L29-L423" target="_blank">InTabsComponent.ets</a></div></div></div></div> <div class="tiledSection"><h3 id="section783181812266">切换到指定页签<i class="anchor-icon anchor-icon-link" anchorid="section783181812266" tips="复制节点链接"></i></h3></div> <p>Tabs组件除了自带的滑动切换和点击切换功能外，还提供了两种可编程方式来切换页签。第一种是通过调用TabsController的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#changeindex" target="_blank">changeIndex()</a>方法，切换到指定的index；第二种是定义一个由@State修饰的变量currentIndex，并将其绑定到Tabs，通过修改currentIndex的值来触发页签切换。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162931.60774841327663055046588601636712:50001231000000:2800:AF38999C3BD5F9FDCEB2DA3198A679549343AC8D54B209CAB7ECC91DEB907BE4.gif" title="点击放大" width="266"></span></p> <p><strong>开发步骤</strong></p> <p>定义currentIndex变量和tabController属性，并绑定到Tabs。在按钮onClick函数中，调用tabController.changeIndex()或者直接修改currentIndex变量切换页签。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/SwitchTabComponent.ets#L18-L112" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">SwitchTabComponent</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">tabController</span>: <span class="hljs-title class_">TabsController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabsController</span>();</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Previous Tab'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabController</span>.<span class="hljs-title function_">changeIndex</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> + <span class="hljs-number">3</span>) % <span class="hljs-number">4</span>); <span class="hljs-comment">// call tabController.changeIndex() to switch tab</span></li><li>          })</li><li>           <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Next Tab'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> + <span class="hljs-number">1</span>) % <span class="hljs-number">4</span>; <span class="hljs-comment">// change currentIndex to switch tab</span></li><li>          })</li><li>           <span class="hljs-comment">// ...</span></li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Tabs</span>({</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabController</span>,</li><li>        <span class="hljs-attr">index</span>: $$this.<span class="hljs-property">currentIndex</span> <span class="hljs-comment">// use $$ for two-way data binding</span></li><li>      }) {</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>    }</li><li>
</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/PureTabsExt/entry/src/main/ets/view/SwitchTabComponent.ets#L18-L112" target="_blank">SwitchTabComponent.ets</a></div></div></div></div> <p>此外，Tabs可注册切换前的处理函数，进一步控制切换行为。详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-tabs#切换至指定页签" target="_blank">切换至指定页签</a>。</p> <div class="tiledSection"><h3 id="section1821912251263">增删Tabs页签<i class="anchor-icon anchor-icon-link" anchorid="section1821912251263" tips="复制节点链接"></i></h3></div> <p>在日常的应用开发中，经常需要实现用户自定义选择频道的功能。通常，这些自定义选择的频道会通过Tabs组件来展示，因此需要动态地更新Tabs的页签。本示例设计了一对父子组件来演示这一功能。父组件负责显示页签及其内容，并在页签栏的最右侧设置一个“更多”按钮。点击此按钮会弹出一个窗口，供用户选择需要显示的页签。该弹窗内容由子组件提供，关闭弹窗后，父组件的页签将被更新。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162931.21825946867925137980565436793450:50001231000000:2800:68B45574B52EB516F2B62D415DAE55733B553B3C39503FE69562E9541FFFE596.gif" title="点击放大" width="266"></span></p> <p><strong>实现原理</strong></p> <p>定义selectTabsViewModel对象，其中的数组allTabs表示所有可选择页签，数组selectedTabs表示选中的需要显示的页签，并通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-link" target="_blank">@Link</a>绑定到父组件InTabComponent和子组件SelectTabsComponent中。子组件SelectTabsComponent作为一个弹窗用于选择需要显示的页签。选择完成后，关闭弹窗并更新 selectTabsViewModel对象中的选中页签数组 selectedTabs，以触发父组件InTabComponent的页签更新。</p> <p><span><img height="417.94651500000003" originheight="4631" originwidth="10113" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162931.13985541161384412743893979893272:50001231000000:2800:EE4AC5DF017DB4326A96110ADBCC490310F7E23293EF04E6D943E4D0420CF7E6.png" title="点击放大" width="912.7125000000001"></span></p> <p><strong>开发步骤</strong></p> <ol><li>定义SelectTabsViewModel类，包含所有可选择页签数组allTabs属性，和需要显示的页签数组selectedTabs属性，及更新显示页签数组的方法updateSelectedTabs()。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/viewmodel/SelectTabsViewModel.ets#L20-L58" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Observed</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TabItemArray</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Array</span>&lt;<span class="hljs-title class_">TabItemViewModel</span>&gt; {</li><li>}</li><li>
</li><li><span class="hljs-meta">@Observed</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SelectTabsViewModel</span> {</li><li>  <span class="hljs-attr">allTabs</span>: <span class="hljs-title class_">TabItemArray</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabItemArray</span>();</li><li>  <span class="hljs-attr">selectedTabs</span>: <span class="hljs-title class_">TabItemArray</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabItemArray</span>();</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadTabs</span>(<span class="hljs-params">ctx: Context</span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// apply changes to the selected tabs</span></li><li>  <span class="hljs-title function_">updateSelectedTabs</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">tempTabs</span>: <span class="hljs-title class_">TabItemViewModel</span>[] = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> tab <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">allTabs</span>) {</li><li>      <span class="hljs-keyword">if</span> (tab.<span class="hljs-property">isChecked</span>) {</li><li>        tempTabs.<span class="hljs-title function_">push</span>(tab);</li><li>      }</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedTabs</span> = tempTabs;</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/viewmodel/SelectTabsViewModel.ets#L20-L58" target="_blank">SelectTabsViewModel.ets</a></div></div></div></div> </li><li>在InTabsComponent中定义selectTabsViewModel属性，并且在aboutToAppear()方法中初始化。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L31-L425" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">InTabsComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">selectTabsViewModel</span>: <span class="hljs-title class_">SelectTabsViewModel</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SelectTabsViewModel</span>();</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>
</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectTabsViewModel</span>.<span class="hljs-title function_">loadTabs</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>);</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L31-L425" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li><li>利用ForEach组件将selectTabsViewModel.selectedTabs属性绑定到Tabs的页签上。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L231-L362" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Tabs</span>({</li><li>  <span class="hljs-comment">// ...</span></li><li>}) {</li><li>  <span class="hljs-comment">// bind selected tabs to ui</span></li><li>  <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectTabsViewModel</span>.<span class="hljs-property">selectedTabs</span>, <span class="hljs-function">(<span class="hljs-params">tab: TabItemViewModel, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (index === <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectTabsViewModel</span>.<span class="hljs-property">selectedTabs</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>      <span class="hljs-title class_">TabContent</span>() {</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>      .<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(index, tab))</li><li>      <span class="hljs-comment">// ...</span></li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>  }, <span class="hljs-function">(<span class="hljs-params">tab: TabItemViewModel, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> index + <span class="hljs-string">'_'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(tab))</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L231-L362" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li><li>在更多按钮的弹窗中初始化SelectTabsComponent，并将selectTabsViewModel属性作为双向绑定属性传入。在关闭弹窗处理函数中调用selectTabsViewModel.updateSelectedTabs()方法，更新需要显示的组件。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L166-L418" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li>sheetBuilder() {</li><li>  <span class="hljs-comment">//select tabs to show</span></li><li>  SelectTabsComponent({ selectTabsViewModel: <span class="hljs-keyword">this</span>.selectTabsViewModel })</li><li>}</li><li>build() {</li><li>  Scroll() {</li><li>    Column() {</li><li>      BannerComponent()</li><li>
</li><li>      Stack({ alignContent: Alignment.TopEnd }) {</li><li>        Row() {</li><li>          Image($r(<span class="hljs-string">'app.media.more'</span>))</li><li>            <span class="hljs-comment">// ...</span></li><li>            .onClick(() =&gt; {</li><li>              <span class="hljs-keyword">this</span>.showSelectTabsComponent = !<span class="hljs-keyword">this</span>.showSelectTabsComponent;</li><li>            })</li><li>        }</li><li>        <span class="hljs-comment">// ...</span></li><li>        .zIndex(<span class="hljs-number">1</span>)</li><li>        .bindSheet($$<span class="hljs-keyword">this</span>.showSelectTabsComponent, <span class="hljs-keyword">this</span>.sheetBuilder(), {</li><li>          detents: [SheetSize.MEDIUM, SheetSize.MEDIUM, <span class="hljs-number">500</span>],</li><li>          preferType: SheetType.BOTTOM,</li><li>          title: { title: $r(<span class="hljs-string">'app.string.bind_sheet_title'</span>) },</li><li>          onWillDismiss: (dismissSheetAction: DismissSheetAction) =&gt; {</li><li>            <span class="hljs-comment">// update tab when closing modal box</span></li><li>            <span class="hljs-keyword">this</span>.selectTabsViewModel.updateSelectedTabs();</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectTabsViewModel.selectedTabs.length &gt; <span class="hljs-number">0</span>) {</li><li>              <span class="hljs-keyword">this</span>.subsController.changeIndex(<span class="hljs-number">0</span>);</li><li>            }</li><li>            dismissSheetAction.dismiss();</li><li>          }</li><li>        })</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L166-L418" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li><li>在SelectTabsComponent中将selectTabsViewModel.allTabs属性渲染成toggle组件，并且注册toggle组件的切换处理函数onChange()，在其中修改该页签的选择状态isChecked属性，供更新显示页签方法selectTabsViewModel.updateSelectedTabs()使用。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/SelectTabsComponent.ets#L21-L68" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">SelectTabsComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">checkedChange</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">selectTabsViewModel</span>: <span class="hljs-title class_">SelectTabsViewModel</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Grid</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectTabsViewModel</span>.<span class="hljs-property">allTabs</span>, <span class="hljs-function">(<span class="hljs-params">tab: TabItemViewModel</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">GridItem</span>() {</li><li>          <span class="hljs-title class_">Row</span>() {</li><li>            <span class="hljs-title class_">Toggle</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ToggleType</span>.<span class="hljs-property">Button</span>, <span class="hljs-attr">isOn</span>: tab.<span class="hljs-property">isChecked</span> }) {</li><li>              <span class="hljs-comment">// ...</span></li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>            .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">isOn: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>              tab.<span class="hljs-property">isChecked</span> = isOn;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">checkedChange</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">checkedChange</span>;</li><li>            })</li><li>          }</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">tab: TabItemViewModel, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> index + <span class="hljs-string">'_'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(tab))</li><li>    }</li><li>    .<span class="hljs-title function_">columnsTemplate</span>((<span class="hljs-string">'1fr 1fr 1fr 1fr'</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-title class_">Constants</span>.<span class="hljs-property">FULL_HEIGHT</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/SelectTabsComponent.ets#L21-L68" target="_blank">SelectTabsComponent.ets</a></div></div></div></div> </li></ol> <div class="tiledSection"><h2 id="section595454372613">Tabs切换动效<i class="anchor-icon anchor-icon-link" anchorid="section595454372613" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section534794910267" class="firsth2">TabContent切换动画<i class="anchor-icon anchor-icon-link" anchorid="section534794910267" tips="复制节点链接"></i></h3></div> <p>Tabs 自带的页签切换动画为平移动画。若开发者需实现更高级的动画效果，可通过Tabs提供的API实现自定义动画。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162932.71629621256678602477477503117750:50001231000000:2800:9E2595645DF1CF6C5706DCD6D41BDE5B010CFAC6AB798C616B79E3EB299471EC.gif" title="点击放大" width="266"></span></p> <p><strong>实现原理</strong></p> <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#customcontenttransition11" target="_blank">customContentTransition()</a>函数来自定义Tabs页面的切换动画。本场景采用属性动画实现，开发者可以定义由@State修饰的可动画属性，并在build()方法中将这些属性绑定到对应的页签上。这里，淡入淡出动画选用了TabContent的尺寸属性scale和透明度属性opacity作为生成动画属性。然后，在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#customcontenttransition11" target="_blank">customContentTransition()</a>函数中，设置动画的起始帧和结束帧对应的可动画属性值，系统将自动补全中间帧从而生成动画。关于属性动画详情可参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-attribute-animation-apis" target="_blank">实现属性动画</a>。</p> <p><span><img height="298.33629" originheight="3488" originwidth="9306" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162933.32581086691941416031993046256032:50001231000000:2800:DC654C19BED642461B2D547EF0DBDF4115334925069ABD2FDDA17480F7A901C4.png" title="点击放大" width="796.005"></span></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>使用自定义切换动画时，Tabs组件的默认切换动画将被禁用，且页面将无法通过手势滑动切换。</li><li>将customContentTransition设置为undefined表示不使用自定义切换动画，继续使用组件自带的默认切换动画。</li><li>当前自定义切换动画不支持中途打断。</li><li>目前，自定义切换动画仅支持以下两种触发场景：点击页签或通过调用TabsController.changeIndex()方法。</li></ul> </div></div></div> <p><strong>开发步骤</strong></p> <ol><li>定义动画所需用到的属性数组。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L32-L426" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">@Component</span></li><li>export default struct InTabsComponent {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-variable">@State</span> <span class="hljs-attribute">scaleList</span>: number[] = [];</li><li>  <span class="hljs-variable">@State</span> <span class="hljs-attribute">opacityList</span>: number[] = [];</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L32-L426" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li><li>将属性数组绑定到对应的页签上。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L232-L363" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Tabs</span>({</li><li>  <span class="hljs-comment">// ...</span></li><li>}) {</li><li>  <span class="hljs-comment">// bind selected tabs to ui</span></li><li>  <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">selectTabsViewModel</span>.<span class="hljs-variable">selectedTabs</span>, (<span class="hljs-variable">tab</span>: <span class="hljs-title class_">TabItemViewModel</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">index</span> === <span class="hljs-keyword">this</span>.<span class="hljs-variable">selectTabsViewModel</span>.<span class="hljs-variable">selectedTabs</span>.<span class="hljs-variable">length</span> - <span class="hljs-number">1</span>) {</li><li>      <span class="hljs-title function_">TabContent</span>() {</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-comment">// bind animation properties</span></li><li>      .<span class="hljs-title function_">opacity</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">opacityList</span>[<span class="hljs-variable">index</span>])</li><li>      .<span class="hljs-title function_">scale</span>({</li><li>        <span class="hljs-variable">x</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">scaleList</span>[<span class="hljs-title class_">index</span>], <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">scaleList</span>[<span class="hljs-title class_">index</span>]</li><li>      })</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>  }, (<span class="hljs-variable">tab</span>: <span class="hljs-title class_">TabItemViewModel</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; <span class="hljs-variable">index</span> + <span class="hljs-string">'_'</span> + <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">tab</span>))</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L232-L363" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li><li>定义Tabs的自定义转场函数。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L33-L427" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">InTabsComponent</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">scaleList</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">opacityList</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">animateDuration</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1000</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">animateTimeout</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1000</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">customContentTransition</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">from</span>: <span class="hljs-built_in">number</span>, to: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">TabContentAnimatedTransition</span> =</li><li>    <span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">from</span>: <span class="hljs-built_in">number</span>, to: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> tabContentAnimatedTransition = {</li><li>        <span class="hljs-attr">timeout</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">animateTimeout</span>,</li><li>        <span class="hljs-attr">transition</span>: <span class="hljs-function">(<span class="hljs-params">proxy: TabContentTransitionProxy</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// start frame</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleList</span>[<span class="hljs-keyword">from</span>] = <span class="hljs-number">1.0</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleList</span>[to] = <span class="hljs-number">0.5</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacityList</span>[<span class="hljs-keyword">from</span>] = <span class="hljs-number">1.0</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacityList</span>[to] = <span class="hljs-number">0.5</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">animateTo</span>({</li><li>            <span class="hljs-attr">duration</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">animateDuration</span>,</li><li>            <span class="hljs-attr">onFinish</span>: <span class="hljs-function">() =&gt;</span> {</li><li>              proxy.<span class="hljs-title function_">finishTransition</span>();</li><li>            }</li><li>          }, <span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-comment">// end frame</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleList</span>[<span class="hljs-keyword">from</span>] = <span class="hljs-number">0.5</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleList</span>[to] = <span class="hljs-number">1.0</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacityList</span>[<span class="hljs-keyword">from</span>] = <span class="hljs-number">0.5</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacityList</span>[to] = <span class="hljs-number">1.0</span>;</li><li>          });</li><li>        }</li><li>      } <span class="hljs-keyword">as</span> <span class="hljs-title class_">TabContentAnimatedTransition</span>;</li><li>      <span class="hljs-keyword">return</span> tabContentAnimatedTransition;</li><li>    };</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L33-L427" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li><li>将转场函数作为参数传递给Tabs的customContentTransition()方法。<div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L233-L366" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Tabs</span>({</li><li>  <span class="hljs-variable">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-title class_">Start</span>,</li><li>  <span class="hljs-variable">controller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">subsController</span>,</li><li>  <span class="hljs-variable">barModifier</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">tabBarModifier</span></li><li>}) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// add animation function</span></li><li>.<span class="hljs-title function_">customContentTransition</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">customContentTransition</span>) <span class="hljs-comment">// comment out to slide to switch</span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/InTabsComponent.ets#L233-L366" target="_blank">InTabsComponent.ets</a></div></div></div></div> </li></ol> <div class="tiledSection"><h3 id="section162423017278">自定义Tabs页签切换联动<i class="anchor-icon anchor-icon-link" anchorid="section162423017278" tips="复制节点链接"></i></h3></div> <p>在自定义页签样式中，页签的选中和非选中状态显示样式不同时，页签的样式依赖于Tabs组件的切换动作。这种情况下，需要实现Tabs页签的联动，页签切换时，页签样式自动变更。</p> <p><span><img height="567.7504" originheight="1080" originwidth="506" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162933.36771517688121955428019886677754:50001231000000:2800:D6CFBAC6D435AE5C0CCA42D9EF3EE9A3A6DC2C93FF2D2667E62672F2F95D5203.gif" title="点击放大" width="266"></span></p> <p><strong>实现原理</strong></p> <p>可以通过onChange事件，在切换页签时自定义TabBar和TabContent的联动效果。具体做法是定义一个由@State修饰的变量currentIndex，用于标识当前显示的页签索引。然后，利用onChange()方法注册处理函数，并在处理函数中更新currentIndex，确保其与当前选择的页签的索引一致。在页签样式的实现中，通过判断currentIndex变量与各页签索引是否相等来决定显示的样式，同时currentIndex属性的变化会触发页签样式的更新。</p> <p><strong>开发步骤</strong></p> <p>定义currentIndex属性，tabBuilder方法，并在onChange函数中更新currentIndex属性值。</p> <div class="screenLinkPre"><div _ngcontent-spk-c106="" class="highlight-div"><div _ngcontent-spk-c106="" class="highlight-div-header"><div _ngcontent-spk-c106="" class="highlight-div-header-left"><div _ngcontent-spk-c106="" class="handle-button expand-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-spk-c106="" class="highlight-div-header-right"><div _ngcontent-spk-c106="" class="handle-button ai-button"></div><div _ngcontent-spk-c106="" class="handle-button line-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-spk-c106="" class="handle-button theme-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-spk-c106="" class="handle-button copy-button"><div _ngcontent-spk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-spk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L23-L156" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-variable">export</span> <span class="hljs-variable">default</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">OutTabsComponent</span> {</li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-variable">currentIndex</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>  @<span class="hljs-title function_">Builder</span></li><li>  <span class="hljs-title function_">tabBuilder</span>(<span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">name</span>: <span class="hljs-title class_">string</span> | <span class="hljs-title class_">Resource</span>, <span class="hljs-variable">icon</span>: <span class="hljs-title class_">Resource</span>) {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-comment">// set special styles if selected</span></li><li>
</li><li>      <span class="hljs-title function_">SymbolGlyph</span>(<span class="hljs-variable">icon</span>).<span class="hljs-title function_">fontColor</span>([<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentIndex</span> === <span class="hljs-variable">index</span></li><li>        ? $<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.color.out_tab_bar_font_active_color'</span>)</li><li>        : $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">color</span>.<span class="hljs-title class_">out_tab_bar_font_inactive_color</span>')])</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>)</li><li>
</li><li>      <span class="hljs-title function_">Text</span>(<span class="hljs-variable">name</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-variable">top</span>: <span class="hljs-number">4</span> })</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentIndex</span> === <span class="hljs-variable">index</span></li><li>          ? $<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.color.out_tab_bar_font_active_color'</span>)</li><li>          : $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">color</span>.<span class="hljs-title class_">out_tab_bar_font_inactive_color</span>'))</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Tabs</span>({</li><li>      <span class="hljs-comment">// ...</span></li><li>    }) {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>    .<span class="hljs-title function_">onChange</span>((<span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>      <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentIndex</span> = <span class="hljs-variable">index</span>;</li><li>    })</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/PureTabs/blob/master/entry/src/main/ets/view/OutTabsComponent.ets#L23-L156" target="_blank">OutTabsComponent.ets</a></div></div></div></div> <div class="tiledSection"><h2 id="section16580123143013">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section16580123143013" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section105111428193018" class="firsth2">如何实现页面懒加载效果<i class="anchor-icon anchor-icon-link" anchorid="section105111428193018" tips="复制节点链接"></i></h3></div> <p>Tabs页面不支持懒加载。 若要实现页面懒加载效果，可以通过自定义TabBar与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-looping" target="_blank">Swiper</a>组件结合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-rendering-control-lazyforeach" target="_blank">LazyForEach</a>来实现页面的懒加载和释放。在使用Tabs组件时，仅保留TabBar，TabContent部分留空，用Swiper组件替代TabContent以显示内容。定义一个数值属性currentIndex，利用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#tabscontroller" target="_blank">TabsController</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#swipercontroller" target="_blank">SwiperController</a>及onchange函数，使其同时绑定Tabs组件和Swiper组件，从而实现联动。这是因为Swiper组件内支持LazyForEach组件，而原生Tabs组件不支持。在Swiper中利用LazyForEach显示内容，以实现Tabs的懒加载效果。</p> <p><span><img height="508.38079600000003" originheight="3781" originwidth="4963" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162933.47220466638395602643010102746927:50001231000000:2800:883E6D376F3C1647B7A2F650E5EB1518CBDEC197D4035D16DC0803BF7FD5CD13.png" title="点击放大" width="667.3275"></span></p> <p>详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs#示例13页面懒加载和释放" target="_blank">页面懒加载和释放</a>。</p> <div class="tiledSection"><h2 id="section155341241113018">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section155341241113018" tips="复制节点链接"></i></h2></div> <ul><li><a href="https://gitee.com/harmonyos_samples/PureTabs" target="_blank">Tabs选项卡常见开发场景</a></li></ul> </div> <div></div></div>