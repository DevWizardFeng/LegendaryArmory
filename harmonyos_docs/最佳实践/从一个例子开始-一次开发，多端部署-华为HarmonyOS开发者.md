<h1 _ngcontent-mfp-c119="" class="doc-title ng-star-inserted" title="从一个例子开始"> 从一个例子开始 </h1>

<div _ngcontent-mfp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本章通过一个天气应用，介绍一多应用的整体开发过程，包括UX设计、工程管理及调试、页面开发等。</p> <div class="tiledSection"><h2 id="ux设计">UX设计<i class="anchor-icon anchor-icon-link" anchorid="ux设计" tips="复制节点链接"></i></h2><p>本示例中的天气应用包含主页、管理城市和添加城市三个页面，其中主页中又包含菜单和更新间隔两个弹窗，基本业务逻辑如下所示。</p> <p></p> <p><span><img height="1039.6211" originheight="1037" originwidth="910" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.10584484833748932458209507535508:50001231000000:2800:6828C78FE4A7174A71F09D88D816D45DB469F96F59AFF598C22F63BA7438DFD3.png" title="点击放大" width="912.7125000000001"></span></p> <p>“一多”建议从最初的设计阶段开始就拉通多设备综合考虑。考虑实际智能终端设备种类繁多，设计师无法针对每种具体设备各自出一份UX设计图。“一多”建议从设备屏幕宽度和屏幕高宽比两个维度，将设备划分类别。</p> <p>以应用窗口宽度为判断条件，建议划分为5个区间：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.7.1.3.1.1" valign="top" width="50%"><p>设备类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.7.1.3.1.2" valign="top" width="50%"><p>窗口宽度（vp）</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p>超小设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>(0, 320）</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>小设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>[320, 600)</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>中设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>[600, 840)</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>大设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>[840, 1440)</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>超大设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>[1440, +∞)</p> </td> </tr>  </tbody></table></div> </div> <p>根据应用窗口的高宽比进行判断，建议划分为3个区间：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.9.1.3.1.1" valign="top" width="50%"><p>设备类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.9.1.3.1.2" valign="top" width="50%"><p>高宽比</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p>小设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>(0, 0.8)</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>中设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>[0.8, 1.2)</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>大设备</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>[1.2, +∞)</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li><p>vp是virtual pixel（虚拟像素）的缩写，是常用的长度单位。</p> </li><li><p>此处基于设备屏幕宽度划分不同设备是为了方便理解。通常智能设备上的应用都是以全屏的形式运行，但随着移动技术的发展，当前部分智能设备支持应用以自由窗口模式运行（即用户可以通过拖拽等操作自由调整应用运行窗口的尺寸），故以应用窗口尺寸为基准进行划分更为合适，本文后续的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-responsive-layout">响应式布局</a>章节中将详细介绍相关内容。</p> </li></ul> </div></div></div> <p>默认设备和平板对应于小设备、中设备及大设备，本示例以这三类设备场景为例，介绍不同设备上的UX设计。天气主页在不同设备上的设计图如下所示。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.12.1.5.1.1" valign="top" width="7.75%">&nbsp;&nbsp;</th> <th align="left" class="cellrowborder" id="mcps1.3.2.12.1.5.1.2" valign="top" width="19.31%"><p>小设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.12.1.5.1.3" valign="top" width="31.97%"><p>中设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.12.1.5.1.4" valign="top" width="40.97%"><p>大设备</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="7.75%"><p>主页</p> </td> <td class="cellrowborder" valign="top" width="19.31%"><p></p> <p><span><img height="332.76413639999987" originheight="1560" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.19509299262155738603176422602089:50001231000000:2800:3D1343616688822FC84E3A0632BEF9336DDE580BDA0DC40F87AF6EC862AAC2D0.png" title="点击放大" width="153.65199999999996"></span></p> </td> <td class="cellrowborder" valign="top" width="31.97%"><p><span><img height="304.08458955555557" originheight="1526" originwidth="1354" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.24125947249443834262545548088569:50001231000000:2800:F6779D6167AB53CD0653214514936C373182250B66DF6A3A58F0A7E6055B8FE5.jpg" title="点击放大" width="270.12399999999997"></span></p> </td> <td class="cellrowborder" valign="top" width="40.97%"><p><span><img height="220.49515106666672" originheight="1600" originwidth="2560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.35812259104429591587599707097341:50001231000000:2800:64A87400A7E31A0440889018D8D3253A3505615E965B98BE20421530F91F3457.jpg" title="点击放大" width="352.92400000000004"></span></p> </td> </tr>  </tbody></table></div> </div> <p>另外，大设备中天气主页还允许用户开启或者隐藏侧边栏。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.14.1.3.1.1" valign="top" width="50%"><p>开启侧边栏</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.14.1.3.1.2" valign="top" width="50%"><p>隐藏侧边栏</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><span><img height="272.3982666666667" originheight="350" originwidth="560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.50197400538830444317772620225670:50001231000000:2800:F9910EDD45F1C9DE3636CD27F060BEE00C32E36203969CED5F057B82AE6BF307.jpg" title="点击放大" width="436"></span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p><span><img height="272.3982666666667" originheight="350" originwidth="560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.98889267823838087973472946624257:50001231000000:2800:A648EC9B98F1103B9B9333E7A9C9A7F4F14ED6F2F4BAA11CAA6C1A02D1595F02.jpg" title="点击放大" width="436"></span></p> </td> </tr>  </tbody></table></div> </div> <p>从天气应用在各设备上的UX设计图中，可以观察到如下UX的一些“规律”：</p> <ul><li><p>在不同的屏幕宽度下，应用的整体风格基本保持一致。</p> </li><li><p>在相近的屏幕宽度范围内，应用的布局基本不变；在不同的屏幕宽度范围内，应用的布局有较大差异。</p> </li><li><p>应用在小屏幕下显示的元素，是大屏幕中显示元素的子集。</p> <ul><li>考虑到屏幕尺寸及显示效果，大屏幕中可以显示的元素数量一定不少于小屏幕。</li><li>为充分利用屏幕尺寸优势，大屏幕可以有其独有的元素或设计（如本示例中的侧边栏）。</li></ul> </li></ul> <p>如此，既在各设备上体现了UX的一致性，也在各设备上体现了UX的差异性，从而既可以保障各设备上应用界面的体验，也可以最大程度复用界面代码。</p> </div> <div class="tiledSection"><h2 id="工程管理及调试">工程管理及调试<i class="anchor-icon anchor-icon-link" anchorid="工程管理及调试" tips="复制节点链接"></i></h2><p>完成UX设计后，接下来需要考虑如何将设计转化为实际可运行的工程，在本文<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-ide">多设备工程部署</a>中，将详细介绍一多的工程创建及管理等，本小节仅介绍最基础的工程创建及多设备预览调试。</p> </div> <div class="tiledSection"><h3 id="工程创建" class="firsth2">工程创建<i class="anchor-icon anchor-icon-link" anchorid="工程创建" tips="复制节点链接"></i></h3><p>一多应用的工程创建过程，与传统应用并无较大差异。只需在工程创建过程中，注意在“Device Type”选项中勾选所有该应用期望运行的目标设备类型，保证后续该应用可以在所有目标设备上正确安装即可。</p> <p><span><img height="513.5662" originheight="948" originwidth="1476" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.97503100509048236937040225682511:50001231000000:2800:E7CD5B8CFDA89D95151853420C5F800503201B4AAA7B396F5B7977AC51BF42B6.png" title="点击放大" width="798"></span></p> </div> <div class="tiledSection"><h3 id="预览调试">预览调试<i class="anchor-icon anchor-icon-link" anchorid="预览调试" tips="复制节点链接"></i></h3><p>在代码开发过程中，可以开启预览器，并打开“Multi-profile preview”开关，实时观察应用在不同设备下的表现。</p> <p><span><img height="266.78470000000004" originheight="342" originwidth="341" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.00481824680160286830916646867230:50001231000000:2800:4B07B573E15E7791105AE4FE162A89554587CA47DC0D6F53BE9E5E25F0986ECF.jpg" title="点击放大" width="266"></span></p> <p>特别的，还可以点击“+ New Profile”按钮，新增自定义预览器。</p> <p><span><img height="346.98720000000003" originheight="634" originwidth="1681" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163102.94318844250483538464904828955861:50001231000000:2800:16D40CF612E1498B5CB0BC9545DE240F0C89DEFF730AF940688B2225B7D30C38.jpg" title="点击放大" width="920"></span></p> </div> <div class="tiledSection"><h2 id="页面开发">页面开发<i class="anchor-icon anchor-icon-link" anchorid="页面开发" tips="复制节点链接"></i></h2><p>天气应用中涉及较多的页面和弹窗，本小节以天气主页为例，简单介绍不同设备下的页面实现思路。</p> <p>观察天气主页在不同设备上的UX设计图，可以进行如下设计：</p> <ul><li><p>将天气主页划分为9个基础区域，如：</p> <p><span><img height="686.0938000000001" originheight="2201" originwidth="2560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.68368722598226074068984716046983:50001231000000:2800:E97D26E4C8004931E57A933EFD0DDD6E489B8C70251C6EF7511B5D59A7ED1913.png" title="点击放大" width="798"></span></p> </li><li><p>基础区域9仅在大设备上显示，基础区域1-8虽然在各设备上始终展示但其尺寸及区域内的布局基本保持不变，可以结合<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout">自适应布局</a>能力以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components" target="_blank">自定义组件</a>的形式分别实现这9个基础区域。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.4.2.2.1.5.1.1" valign="top" width="6.832601268911665%">&nbsp;&nbsp;</th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.2.2.1.5.1.2" valign="top" width="15.441678867740363%"><p>小设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.2.2.1.5.1.3" valign="top" width="24.89995119570522%"><p>中设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.2.2.1.5.1.4" valign="top" width="52.825768667642755%"><p>大设备</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="6.832601268911665%"><p>主页</p> </td> <td class="cellrowborder" valign="top" width="15.441678867740363%"><p><span><img height="255.80216437286484" originheight="1560" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.67305373737915796189892493983703:50001231000000:2800:9EC02FE020259BBFD6B91F93CB0CAFC1AD687933F09F526634C5E0F3B6E865DD.png" title="点击放大" width="118.06344558321135"></span></p> </td> <td class="cellrowborder" valign="top" width="24.89995119570522%"><p><span><img height="231.13035063174448" originheight="1526" originwidth="1354" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.73420298704115778577108907455912:50001231000000:2800:6586B3C97F34DFA7FFA1CF7014B4D547D18ED8D82B380207450D8C22F29416C9.png" title="点击放大" width="205.07955100048804"></span></p> </td> <td class="cellrowborder" valign="top" width="52.825768667642755%"><p><span><img height="288.74816983894584" originheight="1600" originwidth="2560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.57906407830029106246805158984860:50001231000000:2800:64C7F32FD661B84AD8C6EB224FEB4F180CE429B8178F266A9B5CBE2CD6FE8CB8.png" title="点击放大" width="461.9970717423133"></span></p> </td> </tr>  </tbody></table></div> </div> </li><li><p>基础区域1-8之间的布局在不同设备上有较大差异，可以使用响应式布局中的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-responsive-layout#section1061332817545">栅格</a>能力实现组件间的布局效果。</p> </li><li><p>展开和隐藏侧边栏的功能可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-sidebarcontainer" target="_blank">侧边栏组件</a>来实现。侧边栏是大设备上独有的，借助响应式布局中的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-responsive-layout#section1950102518311">媒体查询</a>能力，控制仅在大设备上展示侧边栏即可。</p> </li></ul> </div> <div class="tiledSection"><h3 id="主页基础区域" class="firsth2">主页基础区域<i class="anchor-icon anchor-icon-link" anchorid="主页基础区域" tips="复制节点链接"></i></h3><p>天气主页中的9个基础区域介绍及实现方案如下表所示。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.1.4.1.1" valign="top" width="9.91%"><p>编号</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.4.1.2" valign="top" width="18.63%"><p>简介</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.4.1.3" valign="top" width="71.46000000000001%"><p>实现方案</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="9.91%"><p>1</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>标题栏</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>自适应布局拉伸能力。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>2</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>天气概览</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>Row和Column组件，并指定其子组件按照主轴起始方向对齐或居中对齐。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>3</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>每小时天气</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>自适应布局延伸能力。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>4</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>每日天气</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>自适应布局延伸能力。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>5</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>空气质量</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>Canvas画布组件绘制空气质量图，并使用Row组件和Column组件控制内部元素的布局。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>6</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>生活指数</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>自适应布局均分能力。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>7</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>日出日落</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>Canvas画布组件绘制日出日落图。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>8</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>应用信息</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>Row和Column组件，并指定其子组件居中对齐。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.91%"><p>9</p> </td> <td class="cellrowborder" valign="top" width="18.63%"><p>侧边导航栏</p> </td> <td class="cellrowborder" valign="top" width="71.46000000000001%"><p>综合运用自适应布局中的拉伸能力、占比能力和延伸能力。</p> </td> </tr>  </tbody></table></div> </div> <p>天气主页涉及的内容较多，因篇幅限制，本小节仅介绍区域3（每小时天气）的实现。</p> <p>延伸能力是指容器组件内的子组件，按照其在列表中的先后顺序，随容器组件尺寸变化显示或隐藏。随着可用显示区域的增加，用户可以看到的“每小时天气”信息也不断增加，故“每小时天气”可以通过延伸能力实现，其核心代码如下所示。</p> <div class="screenLinkPre"><div _ngcontent-mfp-c106="" class="highlight-div"><div _ngcontent-mfp-c106="" class="highlight-div-header"><div _ngcontent-mfp-c106="" class="highlight-div-header-left"><div _ngcontent-mfp-c106="" class="handle-button expand-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfp-c106="" class="highlight-div-header-right"><div _ngcontent-mfp-c106="" class="handle-button ai-button"></div><div _ngcontent-mfp-c106="" class="handle-button line-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfp-c106="" class="handle-button theme-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfp-c106="" class="handle-button copy-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/Weather/product/default/src/main/ets/pages/HoursWeather.ets#L17-L80" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Forecast</span>, getHoursData, <span class="hljs-title class_">MyDataSource</span>, <span class="hljs-title class_">Style</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'common'</span>;</li><li>
</li><li><span class="hljs-meta">@Preview</span></li><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> struct <span class="hljs-title class_">HoursWeather</span> {</li><li>  <span class="hljs-attr">hoursData</span>: <span class="hljs-title class_">Forecast</span>[] = <span class="hljs-title function_">getHoursData</span>(<span class="hljs-number">0</span>);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">hoursDataResource</span>: <span class="hljs-title class_">MyDataSource</span>&lt;<span class="hljs-title class_">Forecast</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDataSource</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">hoursData</span>);</li><li>  <span class="hljs-meta">@StorageLink</span>(<span class="hljs-string">'curBp'</span>) <span class="hljs-attr">curBp</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'lg'</span>;</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// Implement extensibility capability through list component.</span></li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">hoursDataResource</span>, <span class="hljs-function">(<span class="hljs-params">hoursItem: Forecast, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">HoursWeatherItem</span>(hoursItem,</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">curBp</span> === <span class="hljs-string">'lg'</span> ? <span class="hljs-title class_">Style</span>.<span class="hljs-property">WEATHER_ITEM_WIDTH</span> + <span class="hljs-number">2</span> : <span class="hljs-title class_">Style</span>.<span class="hljs-property">WEATHER_ITEM_WIDTH</span>)</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">hoursItem: Forecast, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(hoursItem) + index)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-title class_">Style</span>.<span class="hljs-property">CARD_HEIGHT</span>)</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-title class_">Style</span>.<span class="hljs-property">NORMAL_RADIUS</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Style</span>.<span class="hljs-property">CARD_BACKGROUND_COLOR</span>)</li><li>    .<span class="hljs-title function_">listDirection</span>(<span class="hljs-title class_">Axis</span>.<span class="hljs-property">Horizontal</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/Weather/product/default/src/main/ets/pages/HoursWeather.ets#L17-L80" target="_blank">HoursWeather.ets</a></div></div></div></div> </div> <div class="tiledSection"><h3 id="城市天气详情">城市天气详情<i class="anchor-icon anchor-icon-link" anchorid="城市天气详情" tips="复制节点链接"></i></h3><p>天气主页右侧的城市天气详情由区域1-8组成，区域1（标题栏）始终固定在页面顶部，区域2-8在不同设备下的布局不同且可以随页面上下滚动。本小节介绍如何实现城市天气详情中区域2~8的布局效果。</p> <p>设备屏幕可能无法一次性显示区域2-8的所有内容，故需要在外层增加滚动组件（即Scroll组件）以支持上下滚动。不同设备下区域2-8的相对位置一共有三套不同的布局，可以借助响应式布局中的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-responsive-layout#section1061332817545">栅格</a>实现这一效果。本示例中将栅格在不同场景下分别划分为4列、8列和12列，区域2-8在不同场景下的布局如下表所示。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.1" valign="top" width="20.06%"><p>小设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.2" valign="top" width="28.88%"><p>中设备 或 大设备（侧边栏显示状态）</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.3" valign="top" width="51.06%"><p>大设备（侧边栏隐藏状态）</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="20.06%"><p><span><img height="157.14829759999995" originheight="369" originwidth="377" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.08761037234631026919889298205334:50001231000000:2800:30DB7F2FF6F6B659E57AAEFFF0B94D7380907D67378B5618C60C039D8C83416F.png" title="点击放大" width="160.55199999999996"></span></p> </td> <td class="cellrowborder" valign="top" width="28.88%"><p><span><img height="89.13882755555555" originheight="208" originwidth="564" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.99458024048302499904952216106398:50001231000000:2800:34E81894383FFBC12E45111B7E824D534732F26983BAFDEF905B3E12901E9A5A.png" title="点击放大" width="241.69599999999997"></span></p> </td> <td class="cellrowborder" valign="top" width="51.06%"><p><span><img height="91.15628400000001" originheight="173" originwidth="846" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.38877112934268024018470934405714:50001231000000:2800:F637A8755ED192892B162A6992CCEC5D700B598AC3E5497FE39F9FE856037FCB.png" title="点击放大" width="445.75200000000007"></span></p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>为提升用户体验，大设备侧边栏隐藏状态下，每日天气与空气质量的相对顺序发生了改变。可以通过调整GridCol栅格子组件的order属性，实现目标效果。</p> </div></div></div> <div class="screenLinkPre"><div _ngcontent-mfp-c106="" class="highlight-div"><div _ngcontent-mfp-c106="" class="highlight-div-header"><div _ngcontent-mfp-c106="" class="highlight-div-header-left"><div _ngcontent-mfp-c106="" class="handle-button expand-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfp-c106="" class="highlight-div-header-right"><div _ngcontent-mfp-c106="" class="handle-button ai-button"></div><div _ngcontent-mfp-c106="" class="handle-button line-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfp-c106="" class="handle-button theme-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfp-c106="" class="handle-button copy-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/Weather/product/default/src/main/ets/pages/HomeContent.ets#L17-L142" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-package">AirQuality</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirQuality'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">HoursWeather</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HoursWeather'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">IndexHeader</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./IndexHeader'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">IndexEnd</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./IndexEnd'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">LifeIndex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./LifeIndex'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">MultidayWeather</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./MultidayWeather'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">SunCanvas</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./SunCanvas'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">CityListData</span>, <span class="hljs-variable">Style</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'common'</span>;</li><li>
</li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-variable">export</span> <span class="hljs-variable">default</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">HomeContent</span> {</li><li>  @<span class="hljs-title function_">Prop</span> <span class="hljs-variable">showSideBar</span>: <span class="hljs-title class_">boolean</span>;</li><li>  @<span class="hljs-title function_">StorageLink</span>(<span class="hljs-string">'titleText'</span>) <span class="hljs-variable">titleText</span>: <span class="hljs-title class_">string</span>[] = [];</li><li>  @<span class="hljs-title function_">StorageLink</span>(<span class="hljs-string">'swiperIndex'</span>) <span class="hljs-variable">swiperIndex</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0</span>;</li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-variable">headerOpacity</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-variable">cityListData</span>?: <span class="hljs-title class_">CityListData</span>;</li><li>  <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-variable">scroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">Scroller</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Scroll</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">scroller</span>) {</li><li>      <span class="hljs-title function_">GridRow</span>({</li><li>        <span class="hljs-variable">columns</span>: {</li><li>          <span class="hljs-variable">xs</span>: <span class="hljs-number">4</span>,</li><li>          <span class="hljs-variable">sm</span>: <span class="hljs-number">4</span>,</li><li>          <span class="hljs-variable">md</span>: <span class="hljs-number">8</span>,</li><li>          <span class="hljs-variable">lg</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">showSideBar</span> ? <span class="hljs-number">8</span> : <span class="hljs-number">12</span></li><li>        },</li><li>        <span class="hljs-variable">gutter</span>: { <span class="hljs-variable">x</span>: <span class="hljs-title class_">Style</span>.<span class="hljs-title class_">GRID_GUTTER</span>, <span class="hljs-variable">y</span>: <span class="hljs-title class_">Style</span>.<span class="hljs-title class_">GRID_GUTTER</span> },</li><li>        <span class="hljs-variable">breakpoints</span>: { <span class="hljs-variable">reference</span>: <span class="hljs-title class_">BreakpointsReference</span>.<span class="hljs-title class_">WindowSize</span> }</li><li>      }) {</li><li>        <span class="hljs-comment">// Weather overview.</span></li><li>        <span class="hljs-title function_">GridCol</span>({</li><li>          <span class="hljs-variable">span</span>: {</li><li>            <span class="hljs-variable">xs</span>: <span class="hljs-number">4</span>,</li><li>            <span class="hljs-variable">sm</span>: <span class="hljs-number">4</span>,</li><li>            <span class="hljs-variable">md</span>: <span class="hljs-number">8</span>,</li><li>            <span class="hljs-variable">lg</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">showSideBar</span> ? <span class="hljs-number">8</span> : <span class="hljs-number">12</span></li><li>          },</li><li>          <span class="hljs-variable">order</span>: <span class="hljs-number">0</span></li><li>        }) {</li><li>          <span class="hljs-title function_">IndexHeader</span>({ <span class="hljs-variable">headerDate</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityListData</span>!.<span class="hljs-title class_">header</span>, <span class="hljs-variable">index</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">index</span> })</li><li>            .<span class="hljs-title function_">opacity</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">headerOpacity</span>)</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">// Hourly weather.</span></li><li>        <span class="hljs-title function_">GridCol</span>({</li><li>          <span class="hljs-variable">span</span>: {</li><li>            <span class="hljs-variable">xs</span>: <span class="hljs-number">4</span>,</li><li>            <span class="hljs-variable">sm</span>: <span class="hljs-number">4</span>,</li><li>            <span class="hljs-variable">md</span>: <span class="hljs-number">8</span>,</li><li>            <span class="hljs-variable">lg</span>: <span class="hljs-number">8</span></li><li>          },</li><li>          <span class="hljs-variable">order</span>: <span class="hljs-number">1</span></li><li>        }) {</li><li>          <span class="hljs-title function_">HoursWeather</span>({ <span class="hljs-variable">hoursData</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityListData</span>!.<span class="hljs-title class_">hoursData</span> })</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">// Daily weather.</span></li><li>        <span class="hljs-title function_">GridCol</span>({</li><li>          <span class="hljs-variable">span</span>: <span class="hljs-number">4</span>,</li><li>          <span class="hljs-variable">order</span>: {</li><li>            <span class="hljs-variable">xs</span>: <span class="hljs-number">2</span>,</li><li>            <span class="hljs-variable">sm</span>: <span class="hljs-number">2</span>,</li><li>            <span class="hljs-variable">md</span>: <span class="hljs-number">2</span>,</li><li>            <span class="hljs-variable">lg</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">showSideBar</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">3</span></li><li>          }</li><li>        },) {</li><li>          <span class="hljs-title function_">MultidayWeather</span>({ <span class="hljs-variable">weekData</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityListData</span>!.<span class="hljs-title class_">weekData</span> })</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">// Air quality.</span></li><li>        <span class="hljs-title function_">GridCol</span>({</li><li>          <span class="hljs-variable">span</span>: <span class="hljs-number">4</span>,</li><li>          <span class="hljs-variable">order</span>: {</li><li>            <span class="hljs-variable">xs</span>: <span class="hljs-number">3</span>,</li><li>            <span class="hljs-variable">sm</span>: <span class="hljs-number">3</span>,</li><li>            <span class="hljs-variable">md</span>: <span class="hljs-number">3</span>,</li><li>            <span class="hljs-variable">lg</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">showSideBar</span> ? <span class="hljs-number">3</span> : <span class="hljs-number">2</span></li><li>          }</li><li>        }) {</li><li>          <span class="hljs-title function_">AirQuality</span>({ <span class="hljs-variable">airData</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityListData</span>!.<span class="hljs-title class_">airData</span>, <span class="hljs-variable">airIndexData</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityListData</span>!.<span class="hljs-title class_">airIndex</span> })</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">// Living index.</span></li><li>        <span class="hljs-title function_">GridCol</span>({ <span class="hljs-variable">span</span>: <span class="hljs-number">4</span>, <span class="hljs-variable">order</span>: <span class="hljs-number">4</span> }) {</li><li>          <span class="hljs-title function_">LifeIndex</span>({ <span class="hljs-variable">lifeData</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityListData</span>!.<span class="hljs-title class_">suitDate</span> })</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">// Sun canvas.</span></li><li>        <span class="hljs-title function_">GridCol</span>({ <span class="hljs-variable">span</span>: <span class="hljs-number">4</span>, <span class="hljs-variable">order</span>: <span class="hljs-number">5</span> }) {</li><li>          <span class="hljs-title function_">SunCanvas</span>()</li><li>        }</li><li>
</li><li>        <span class="hljs-comment">// Index end.</span></li><li>        <span class="hljs-title function_">GridCol</span>({</li><li>          <span class="hljs-variable">span</span>: {</li><li>            <span class="hljs-variable">xs</span>: <span class="hljs-number">4</span>,</li><li>            <span class="hljs-variable">sm</span>: <span class="hljs-number">4</span>,</li><li>            <span class="hljs-variable">md</span>: <span class="hljs-number">8</span>,</li><li>            <span class="hljs-variable">lg</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">showSideBar</span> ? <span class="hljs-number">8</span> : <span class="hljs-number">12</span></li><li>          },</li><li>          <span class="hljs-variable">order</span>: <span class="hljs-number">6</span></li><li>        }) {</li><li>          <span class="hljs-title function_">IndexEnd</span>()</li><li>        }</li><li>      }</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/Weather/product/default/src/main/ets/pages/HomeContent.ets#L17-L142" target="_blank">HomeContent.ets</a></div></div></div></div> </div> <div class="tiledSection"><h3 id="主页整体实现">主页整体实现<i class="anchor-icon anchor-icon-link" anchorid="主页整体实现" tips="复制节点链接"></i></h3><p>综合考虑各设备下的效果，天气主页的根节点使用侧边栏组件：</p> <ul><li><p>小设备和中设备既不展示侧边栏，也不提供控制侧边栏显示和隐藏的按钮。</p> </li><li><p>大设备默认展示侧边栏，同时提供控制侧边栏显示和隐藏的按钮。</p> </li></ul> <p>另外主页右侧的城市天气详情，支持左右滑动切换城市，可以使用Swiper组件实现目标效果：</p> <ul><li><p>小设备和中设备开启Swiper组件的导航点，引导用户通过左右滑动切换不同城市。</p> </li><li><p>大设备中用户通过点击侧边栏中的城市列表即可高效的切换不同城市，此时需要关闭Swiper组件的导航点。</p> </li></ul> <div class="screenLinkPre"><div _ngcontent-mfp-c106="" class="highlight-div"><div _ngcontent-mfp-c106="" class="highlight-div-header"><div _ngcontent-mfp-c106="" class="highlight-div-header-left"><div _ngcontent-mfp-c106="" class="handle-button expand-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfp-c106="" class="highlight-div-header-right"><div _ngcontent-mfp-c106="" class="handle-button ai-button"></div><div _ngcontent-mfp-c106="" class="handle-button line-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfp-c106="" class="handle-button theme-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfp-c106="" class="handle-button copy-button"><div _ngcontent-mfp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/Weather/product/default/src/main/ets/pages/Home.ets#L18-L138" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-package">HomeContent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HomeContent'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">IndexTitleBar</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./IndexTitleBar'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-package">SideContent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./SideContent'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">CityListData</span>, <span class="hljs-variable">Style</span>, <span class="hljs-variable">getBg</span>, <span class="hljs-variable">getCityListWeatherData</span>, <span class="hljs-variable">Logger</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'common'</span>;</li><li><span class="hljs-comment">// ...</span></li><li>
</li><li>@<span class="hljs-title function_">Entry</span></li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Home</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-variable">curBp</span>: <span class="hljs-title class_">string</span> = <span class="hljs-string">'md'</span>;</li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-variable">cityListWeatherData</span>: <span class="hljs-title class_">CityListData</span>[] = <span class="hljs-title function_">getCityListWeatherData</span>();</li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-variable">showSideBar</span>: <span class="hljs-title class_">boolean</span> = <span class="hljs-keyword">false</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">SideBarContainer</span>(<span class="hljs-variable">SideBarContainerType</span>.<span class="hljs-variable">Embed</span>) {</li><li>      <span class="hljs-comment">// Left sidebar.</span></li><li>      <span class="hljs-title function_">SideContent</span>({ <span class="hljs-variable">showSideBar</span>: $<span class="hljs-title class_">showSideBar</span> })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      <span class="hljs-comment">// Right content area.</span></li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-comment">// Title bar.</span></li><li>        <span class="hljs-title function_">IndexTitleBar</span>({ <span class="hljs-variable">showSideBar</span>: $<span class="hljs-title class_">showSideBar</span> })</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">56</span>)</li><li>        <span class="hljs-comment">// Weather details.</span></li><li>        <span class="hljs-title function_">Swiper</span>() {</li><li>          <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">cityListWeatherData</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">CityListData</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>            <span class="hljs-title function_">HomeContent</span>({ <span class="hljs-variable">showSideBar</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">showSideBar</span>, <span class="hljs-variable">cityListData</span>: <span class="hljs-title class_">item</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">index</span> })</li><li>          }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">CityListData</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">item</span>) + <span class="hljs-variable">index</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'swiper'</span>)</li><li>        .<span class="hljs-title function_">padding</span>({ <span class="hljs-variable">left</span>: <span class="hljs-title class_">Style</span>.<span class="hljs-title class_">NORMAL_PADDING</span>, <span class="hljs-variable">right</span>: <span class="hljs-title class_">Style</span>.<span class="hljs-title class_">NORMAL_PADDING</span> })</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-variable">index</span> =&gt; {</li><li>          <span class="hljs-keyword">this</span>.<span class="hljs-variable">swiperIndex</span> = <span class="hljs-variable">index</span>;</li><li>          <span class="hljs-variable">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'swiperIndex'</span>, <span class="hljs-keyword">this</span>.<span class="hljs-variable">swiperIndex</span>);</li><li>        })</li><li>        <span class="hljs-comment">// Disable navigation dots on lg width breakpoint.</span></li><li>        .<span class="hljs-title function_">indicator</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">curBp</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">new</span> <span class="hljs-title function_">DotIndicator</span>()</li><li>          .<span class="hljs-title function_">selectedColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>) : <span class="hljs-keyword">false</span></li><li>        )</li><li>        .<span class="hljs-title function_">index</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">swiperIndex</span>)</li><li>        .<span class="hljs-title function_">loop</span>(<span class="hljs-keyword">false</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">sideBarWidth</span>(<span class="hljs-string">'33.3%'</span>)</li><li>    .<span class="hljs-title function_">minSideBarWidth</span>(<span class="hljs-string">'33.3%'</span>)</li><li>    .<span class="hljs-title function_">maxSideBarWidth</span>(<span class="hljs-string">'33.3%'</span>)</li><li>    .<span class="hljs-title function_">showControlButton</span>(<span class="hljs-keyword">false</span>)</li><li>    .<span class="hljs-title function_">showSideBar</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">showSideBar</span>)</li><li>    .<span class="hljs-title function_">backgroundImageSize</span>(<span class="hljs-variable">ImageSize</span>.<span class="hljs-variable">Cover</span>)</li><li>    .<span class="hljs-title function_">backgroundImage</span>(<span class="hljs-title function_">getBg</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">cityListWeatherData</span>[<span class="hljs-keyword">this</span>.<span class="hljs-variable">swiperIndex</span>].<span class="hljs-variable">header</span>.<span class="hljs-variable">weatherType</span>))</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/Weather/product/default/src/main/ets/pages/Home.ets#L18-L138" target="_blank">Home.ets</a></div></div></div></div> <p>最终，天气首页的运行效果如下图所示。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" valign="top" width="25%"><p>小设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" valign="top" width="25%"><p>中设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" valign="top" width="25%"><p>大设备（隐藏侧边栏）</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" valign="top" width="25%"><p>大设备（显示侧边栏）</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%"><p><span><img originheight="448" originwidth="229" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.47617555658244095287321006997352:50001231000000:2800:D9EA5CED525E63FE2B1AD73E8BF6CF4919982C5D4E88D89DFA27BB04C5783514.jpg" class="notEnlarge" width="206" height="403.0043668122271"></span></p> </td> <td class="cellrowborder" valign="top" width="25%"><p><span><img originheight="448" originwidth="433" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163103.64618295858368600850352437803062:50001231000000:2800:AAFFBB564CB27A0C350AD7DC251F78B33E9AEB71DF549BEBB69C0DFEAD339EDF.jpg" width="206" height="213.13625866050808"></span></p> </td> <td class="cellrowborder" valign="top" width="25%"><p><span><img originheight="375" originwidth="560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163104.07070063090486970404808162458984:50001231000000:2800:F601154628053F2F3A245EA25015E4EE23FC8A2D379DCADC673DEF4DE757EFC1.png" width="206" height="137.94642857142858"></span></p> </td> <td class="cellrowborder" valign="top" width="25%"><p><span><img originheight="375" originwidth="560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163104.24112476087663021088135097791952:50001231000000:2800:CD0BB92AAC282AB086F8ECCF387A108F1B0F5235CD122DC6F075FB47FFD26A4A.jpg" width="206" height="137.94642857142858"></span></p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="功能开发">功能开发<i class="anchor-icon anchor-icon-link" anchorid="功能开发" tips="复制节点链接"></i></h2><p>应用开发不仅包含应用页面开发，还包括应用后端功能开发以及服务器端开发等。服务器端开发不在本文的讨论范围内，本小节仅介绍多设备上应用功能开发的注意事项。</p> <p>如前文所示，本示例的目标运行设备是小设备、中设备和大设备，对应实际的设备类型为默认设备和平板等。这些设备运行的都是标准系统，其系统能力一致，所以无需做特别考虑。但是在超小设备（对应的实际设备类型为智能穿戴设备等）上，考虑CPU、内存、硬盘等硬件限制，往往会对系统进行裁剪。如果在应用后端功能开发时调用当前系统没有的能力，就可能会引发异常。</p> <p>通常有两种方式解决上述问题：</p> <ul><li><p>在应用安装包中描述其需要的系统能力，保证本应用仅被分发和安装到可以满足其诉求的系统中。</p> </li><li><p>在使用特定系统能力前，通过canIUse接口判断系统能力是否存在，进而执行不同的逻辑。</p> </li></ul> <p>在本文的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-function">多设备功能开发</a>章节中，将详细展开介绍。</p> </div> <div class="tiledSection"><h2 id="section081925323713">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section081925323713" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/tree/master/Weather" target="_blank">一多天气</a></li></ul> </div> </div> <div></div></div>