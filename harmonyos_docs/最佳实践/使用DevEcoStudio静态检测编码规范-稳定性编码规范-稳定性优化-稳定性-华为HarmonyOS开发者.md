<h1 _ngcontent-obe-c119="" class="doc-title ng-star-inserted" title="使用DevEco Studio静态检测编码规范"> 使用DevEco Studio静态检测编码规范 </h1>

<div _ngcontent-obe-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section28371447155220">使用Clang-Tidy检测<i class="anchor-icon anchor-icon-link" anchorid="section28371447155220" tips="复制节点链接"></i></h2></div> <p><strong>自定义配置</strong></p> <p>DevEco Studio集成了开源的Clang-Tidy。</p> <p>1. 开发者可以在Setting -&gt; Editor -&gt; Inspections页面，选择CPP -&gt; clang-tidy的配置页进行Clang-Tidy Checks配置，如下图所示：</p> <p><span><img originheight="777" originwidth="1105" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.86165747933161572721581976824240:50001231000000:2800:559051A76CE8FD5A4AA9AB53A195D48645B96C387F8952976F5163C3350F7AC1.png" width="920" height="646.9140271493213"></span></p> <p>2. 开发者可以在Setting -&gt; Languages &amp; Frameworks -&gt; C/C++中进行Clang-Tidy Checks配置，勾选“Use clang-tidy via clangd to enable the following checks”，然后配置规则，如下图所示</p> <p><span><img originheight="711" originwidth="982" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.36675574800155407629521710636669:50001231000000:2800:BD5241C758C733BD7971FDCAF09E89613137715E6CECA57CCF566C197FCEE633.png" width="920" height="666.1099796334012"></span></p> <p>配置参考文档：</p> <p><a href="https://clang.llvm.org/extra/clang-tidy/#using-clang-tidy" target="_blank">https://clang.llvm.org/extra/clang-tidy/#using-clang-tidy</a></p> <p><strong>DevEco Studio默认检查规则</strong></p> <p>1. 需触发按钮 Code -&gt; Inspect Code -&gt; Analyze</p> <p><span><img originheight="357" originwidth="734" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.39093074579556887872066885573767:50001231000000:2800:0908517175CE33AA543F4ADCA29E14B3CD9AF185C62CA58243E79ECA3381E318.png" width="734" height="357"></span></p> <p>2. 实时触发的规则如下：</p> <p><span><img originheight="146" originwidth="649" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.61124029393897644465400542932906:50001231000000:2800:BC054F7CE96A357D87E5E3BD52EC883DB5D7A6FB45B0BD67F637A58E9F0FA51C.png" width="649" height="146"></span></p> <p><strong>DevEco Studio默认检查规则检查示例</strong></p> <p>1. 手动检查代码，示例中不符合检查规则“clang-analyzer-huawei-InfiniteLoopChecker”</p> <p><span><img originheight="393" originwidth="890" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.18437129564254754078671042255747:50001231000000:2800:29F20D1A02A308261E3EAE9171496AA3E2F1E70949A604982E6764D1E4F1639F.png" width="890" height="393"></span></p> <p>2. 实时检查，示例中不符合检查规则“misc-unused-local-variable”</p> <p><span><img originheight="213" originwidth="839" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.49381750276470940626731528507846:50001231000000:2800:726EAB346F557EECD055743B9078C629BDC355C6E8585D7EE9DA9487322EBBEB.png" width="839" height="213"></span></p> <p><strong>默认配置检查内容</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><strong>默认配置类型</strong></p> </td> <td class="cellrowborder" valign="top" width="50%"><p><strong>检测问题</strong></p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>clang-analyzer-unix.MismatchedDeallocator</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测不匹配的内存释放问题。例如，如果使用malloc分配了内存，却错误地使用了delete或free来释放。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>clang-analyzer-huawei.InfiniteRecursiveChecker</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测可能导致无限递归的问题。无限递归可能会导致栈溢出等问题。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>clang-analyzer-huawei.InfiniteGotoChecker</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测可能导致无限循环的goto语句。无限循环可能会导致程序卡死或资源耗尽。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>clang-analyzer-huawei.InfiniteLoopChecker</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测可能导致无限循环的循环结构。无限循环可能会导致程序卡死或资源耗尽。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>clang-analyzer-core.StackAddressEscape</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测栈内存地址逃逸的问题。栈内存地址逃逸可能会导致安全问题，例如缓冲区溢出攻击。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>clang-analyzer-core.ArrayBoundV2</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测数组越界的问题。数组越界可能会导致未定义行为，包括程序崩溃或数据损坏。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>misc-missing-switch-cases</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>确保switch语句覆盖所有枚举值，并且包含default分支。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>misc-napi-module-name</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检查Node.js N-API模块的命名是否符合规范。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>misc-replace-if-else-with-ternary-operator</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于建议将简单的if-else语句替换为三元运算符（ternary operator），以提高代码的简洁性。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>misc-unused-local-variable</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测并报告代码中未使用的局部变量。未使用的局部变量会导致代码冗余并降低可读性。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>misc-unused-parameters</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测并报告函数中未使用的参数。未使用的参数会导致代码冗余并降低可读性。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>modernize-use-auto</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于建议在适当的情况下使用auto关键字来简化代码。使用auto可以减少重复的类型声明，使代码更加简洁和易读。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>readability-system-capabilities</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>用于检测代码中对系统功能或库的使用是否符合最佳实践。这个规则通常会检查代码是否正确使用了系统提供的功能，以及是否有更好的替代方案。</p> </td> </tr>  </tbody></table></div> </div> <div class="tiledSection"><h2 id="section1651414520531">使用CodeLinter检测<i class="anchor-icon anchor-icon-link" anchorid="section1651414520531" tips="复制节点链接"></i></h2><p><strong>Code Linter代码检查</strong></p> <p>DevEco Studio集成了Code Linter，用于针对ArkTS/TS代码进行最佳实践/编程规范方面的检查。检查规则支持配置，配置方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-code-linter#section19310459444" target="_blank">配置代码检查规则</a>。</p> <p>根据扫描结果中的告警提示，开发者可以手工修复代码缺陷，也可以执行一键式自动修复。这有助于在代码开发阶段确保代码质量。</p> <p>检查方法：</p> <p>在已打开的代码编辑器窗口中，单击右键选择Code Linter，或在工程管理窗口中选中单个或多个文件/目录，右键选择Code Linter &gt; Full Linter执行全量代码检查。</p> <p><span><img originheight="437" originwidth="792" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.92152678849363454856661312634136:50001231000000:2800:1DEE2275C04944CFA8D8D50C32C66D62494297983EAB28EBEEF0B4922E58E570.png" width="792" height="437"></span></p> <p>如需对Git工程中的增量文件（新增、修改、重命名）进行检查，可在commit界面右下角点击齿轮图标，选择Incremental Linter执行增量检查。</p> <div class="p"><span><img originheight="935" originwidth="1118" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163501.35343634083912705559387790955073:50001231000000:2800:5D442A729FB5523479FD8F583F9007F005F5B8BA86A6262FB61074C974B2D975.png" width="920" height="769.4096601073345"></span><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>若未配置代码检查规则文件，直接执行Code Linter，将按照默认的编程规范规则对.ets文件进行检查。</li><li>Code Linter不对如下文件及目录进行检查：<ul><li>src/ohosTest文件夹</li><li>src/test文件夹</li><li>node_modules文件夹</li><li>oh_modules文件夹</li><li>build文件夹</li><li>.preview文件夹</li><li>hvigorfile.ts文件</li><li>hvigorfile.js文件</li></ul> </li></ul> </div></div></div> </div> <p><strong>配置代码检查规则</strong></p> <p>在工程根目录下创建code-linter.json5配置文件，可以配置代码检查的范围及生效的检查规则。其中，files和ignore配置项共同确定代码检查范围，ruleSet和rules配置项共同确定生效的规则范围。具体配置项功能如下：</p> <p>files：配置待检查的文件名单，如未指定目录，将检查当前选中的所有.ets文件。</p> <p>ignore：配置无需检查的文件目录，指定的目录或文件需使用相对于code-linter.json5所在工程根目录的相对路径，例如：build/**/*。</p> <p>ruleSet：配置检查使用的规则集，规则集支持一次导入多条规则。规则详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-codelinter-rule" target="_blank">Code Linter代码检查规则</a>。目前支持的规则集包括：</p> <ul><li>通用规则@typescript-eslint</li><li>一次开发多端部署规则@cross-device-app-dev</li><li>ArkTS代码风格规则@hw-stylistic</li><li>安全规则@security</li><li>性能规则@performance</li><li>预览规则@previewer</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>以上规则集均分为all和recommended两种规则集。all规则集是规则全集，包含所有规则；recommended规则集是推荐使用的规则集合。recommended规则集是all规则集的子集。</li><li>不在工程根目录新建code-linter.json5文件的情况下，Code Linter默认会检查@performance/recommended和@typescript-eslint/recommended规则集包含的规则。</li></ul> </div></div></div> <p>rules：可以基于ruleSet配置的规则集，新增额外规则项，或修改ruleSet中规则默认配置，例如：将规则集中某条规则告警级别由warn改为error。</p> <p>overrides：针对工程根目录下的部分特定目录或文件，可以配置定制化的检查规则。</p> <div _ngcontent-obe-c106="" class="highlight-div"><div _ngcontent-obe-c106="" class="highlight-div-header"><div _ngcontent-obe-c106="" class="highlight-div-header-left"><div _ngcontent-obe-c106="" class="handle-button expand-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obe-c106="" class="highlight-div-header-right"><div _ngcontent-obe-c106="" class="handle-button ai-button"></div><div _ngcontent-obe-c106="" class="handle-button line-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obe-c106="" class="handle-button theme-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obe-c106="" class="handle-button copy-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"files"</span>:   <span class="hljs-comment">// 用于表示配置适用的文件范围的glob模式数组。在没有指定的情况下，应用默认配置</span></li><li>  [</li><li>    <span class="hljs-string">"**/*.js"</span>, <span class="hljs-comment">// 字符串类型</span></li><li>    <span class="hljs-string">"**/*.ts"</span></li><li>  ],</li><li>  <span class="hljs-string">"ignore"</span>:  <span class="hljs-comment">// 一个表示配置对象不应适用的文件的glob模式数组。如果没有指定，配置对象将适用于所有由files匹配的文件</span></li><li>  [</li><li>    <span class="hljs-string">"build/**/*"</span>,    <span class="hljs-comment">// 字符串类型</span></li><li>    <span class="hljs-string">"node_modules/**/*"</span></li><li>  ],</li><li>  <span class="hljs-string">"ruleSet"</span>:       <span class="hljs-comment">// 设置检查待应用的规则集</span></li><li>  [</li><li>    <span class="hljs-string">"plugin:@typescript-eslint/recommended"</span>    <span class="hljs-comment">// 快捷批量引入的规则集, 枚举类型：plugin:@typescript-eslint/all, plugin:@typescript-eslint/recommended, plugin:@cross-device-app-dev/all, plugin:@cross-device-app-dev/recommended等</span></li><li>  ],</li><li>  <span class="hljs-string">"rules"</span>:         <span class="hljs-comment">// 可以对ruleSet配置的规则集中特定的某些规则进行修改、去使能, 或者新增规则集以外的规则；ruleSet和rules共同确定了代码检查所应用的规则</span></li><li>  {</li><li>    <span class="hljs-string">"@typescript-eslint/no-explicit-any"</span>:  <span class="hljs-comment">// ruleId后面跟数组时, 第一个元素为告警级别, 后面的对象元素为规则特定开关配置</span></li><li>    [</li><li>      <span class="hljs-string">"error"</span>,              <span class="hljs-comment">// 告警级别: 枚举类型, 支持配置为suggestion, error, warn, off</span></li><li>      {</li><li>        <span class="hljs-string">"ignoreRestArgs"</span>: <span class="hljs-keyword">true</span>   <span class="hljs-comment">// 规则特定的开关配置, 为可选项, 不同规则其下层的配置项不同</span></li><li>      }</li><li>    ],</li><li>    <span class="hljs-string">"@typescript-eslint/explicit-function-return-type"</span>: <span class="hljs-number">2</span>,   <span class="hljs-comment">// ruleId后面跟单独一个数字时, 表示仅设置告警级别, 枚举值为: 3(suggestion), 2(error), 1(warn), 0(off)</span></li><li>    <span class="hljs-string">"@typescript-eslint/no-unsafe-return"</span>: <span class="hljs-string">"warn"</span>            <span class="hljs-comment">// ruleId后面跟单独一个字符串时, 表示仅设置告警级别, 枚举值为: suggestion, error, warn, off</span></li><li>  },</li><li>  <span class="hljs-string">"overrides"</span>:      <span class="hljs-comment">// 针对特定的目录或文件采用定制化的规则配置</span></li><li>  [</li><li>    {</li><li>      <span class="hljs-string">"files"</span>:   <span class="hljs-comment">// 指定需要定制化配置规则的文件或目录</span></li><li>      [</li><li>        <span class="hljs-string">"entry/**/*.ts"</span>   <span class="hljs-comment">// 字符串类型</span></li><li>      ],</li><li>      <span class="hljs-string">"excluded"</span>:</li><li>      [</li><li>       <span class="hljs-string">"entry/**/*.test.js"</span> <span class="hljs-comment">// 指定需要排除的目录或文件, 被排除的目录或文件不会按照定制化的规则配置被检查; 字符串类型</span></li><li>      ],</li><li>      <span class="hljs-string">"rules"</span>:   <span class="hljs-comment">// 支持对overrides外公共配置的规则进行修改、去使能, 或者新增公共配置以外的规则; 该配置将覆盖公共配置</span></li><li>      {</li><li>        <span class="hljs-string">"@typescript-eslint/explicit-function-return-type"</span>:  <span class="hljs-comment">// ruleId: 枚举类型</span></li><li>        [</li><li>          <span class="hljs-string">"warn"</span>,     <span class="hljs-comment">// 告警级别: 枚举类型, 支持配置为error, warn, off; 覆盖公共配置, explicit-function-return-type告警级别为warn</span></li><li>          {</li><li>             <span class="hljs-variable">allowExpressions</span>: <span class="hljs-keyword">true</span>    <span class="hljs-comment">// 规则特定的开关配置, 为可选项, 不同规则其下层的配置项不同</span></li><li>          }</li><li>        ],</li><li>        <span class="hljs-string">"@typescript-eslint/no-unsafe-return"</span>: <span class="hljs-string">"off"</span>   <span class="hljs-comment">// 覆盖公共配置, 不检查no-unsafe-return规则</span></li><li>      }</li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> <p><strong>查看/处理代码检查结果</strong></p> <p>扫描完成后，在底部工具面板查看检查结果。勾选Defects中的告警等级，查看对应告警信息。双击告警结果，跳转到代码缺陷位置。选中告警结果时，右侧Defect Description窗口显示规则详细说明。搜索规则时，可设定全词匹配和大小写敏感。</p> <p>单击<span><img originheight="20" originwidth="20" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.97551006594942487435737016892111:50001231000000:2800:9D8AB2CAA1927F246D33B3C0C989CDD9FE16E48415D704DCB1D407C07A71AEDC.png" class="IconPic notEnlarge" width="20" height="20"></span>图标，查看可修复的代码规则，点击<span><img originheight="18" originwidth="18" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.66145615298800317884623831648666:50001231000000:2800:D6E592F9FA77F9C9C13ABE2D5DBD7C42FFC482121BE13154D517A203B83C1A60.png" class="IconPic notEnlarge" width="18" height="18"></span>代码修复图标，可以一键式批量修复告警，并刷新检查结果。</p> <p><span><img originheight="277" originwidth="1266" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.11743828128585142372224945997775:50001231000000:2800:4960D7B7AC224762EA17844F0F04A154DD0C624F5CAFD12010D7FAB6275E08E2.png" width="920" height="201.2954186413902"></span>屏蔽告警信息：</p> <ul><li>在某些特殊场景下，若扫描结果中出现误报，点击单条告警结果后的<span><img originheight="16" originwidth="16" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.72259450938761027350096121861336:50001231000000:2800:CABD9741827F4F021452A7D3633C457EEAD653B656D22FEC3BA2921B5898C164.png" class="IconPic notEnlarge" width="16" height="16"></span>Ignore图标，可以忽略对告警所在行的code linter检查；或勾选文件名称或多条待屏蔽的告警，点击左侧工具面板Ignore图标批量执行操作；</li><li>在文件顶部添加注释/* eslint-disable */可以屏蔽整个文件执行code linter检查，在eslint-disable 后加入一个或多个以逗号分隔的规则Id，可以屏蔽具体检查规则；</li><li>在需要忽略检查的代码块前后分别添加/* eslint-disable */和/* eslint-enable */添加注释信息，再执行Code Linter，将不再显示该代码块扫描结果；在待屏蔽的代码行前一行添加/* eslint-disable-next-line */，也可屏蔽对该代码行的codelinter检查。</li></ul> <p>如需恢复忽略的报错信息，删除该行上方的注释，然后重新执行Code Linter检查。</p> <p><span><img originheight="279" originwidth="816" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.01488977820662306322234192624298:50001231000000:2800:F21A68C22286A8E3D06C162DD4026BCF8951E91FC7FD99FBFF3D3556861700F7.png" width="816" height="279"></span></p> <p>导出检查结果：点击工具面板左侧<span><img originheight="16" originwidth="16" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.67909472281368326191960384058312:50001231000000:2800:DF182D54158363AC37B1A589CE23458FBD354A7EA526B05FC5D40088641BE6DF.png" class="IconPic notEnlarge" width="16" height="16"></span>导出按钮，即可导出检查结果到excel文件，包含告警所在行，告警明细，告警级别等信息。</p> <p><span><img originheight="292" originwidth="815" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.31794191454992135149398464268347:50001231000000:2800:968D76B270EA1F0BD4C7C4818913F62D169830228A1987186DA0C1E7DCC1F62B.png" width="815" height="292"></span></p> <p><strong>实践说明</strong></p> <p>以@typescript-eslint/no-restricted-syntax（使用某类语法时，codelinter告警）、@typescript-eslint/naming-convention（命名风格校验）和@hw-stylistic/file-naming-convention（检查代码文件的命名风格）三个规则为例，介绍codelinter配置文件的使用方法。</p> <p><strong>示例1：调用类Foo下bar方法时，Code Linter告警</strong></p> <p><strong>在配置文件中定义规则</strong></p> <p>在ArkTS工程的pages/Index.ets文件中增加以下用例：</p> <div class="screenLinkPre"><div _ngcontent-obe-c106="" class="highlight-div"><div _ngcontent-obe-c106="" class="highlight-div-header"><div _ngcontent-obe-c106="" class="highlight-div-header-left"><div _ngcontent-obe-c106="" class="handle-button expand-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obe-c106="" class="highlight-div-header-right"><div _ngcontent-obe-c106="" class="handle-button ai-button"></div><div _ngcontent-obe-c106="" class="handle-button line-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obe-c106="" class="handle-button theme-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obe-c106="" class="handle-button copy-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/StabilityCodingSpecification/DevEcoStaticCheck/src/main/ets/pages/Index.ets#L6-L10" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> {</li><li>  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-title">bar</span>()</span> {}</li><li>}</li><li>
</li><li>Foo.bar();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/StabilityCodingSpecification/DevEcoStaticCheck/src/main/ets/pages/Index.ets#L6-L10" target="_blank">Index.ets</a></div></div></div></div>  <p>在工程根目录下新建code-linter.json5文件，新增以下配置：</p> <div _ngcontent-obe-c106="" class="highlight-div"><div _ngcontent-obe-c106="" class="highlight-div-header"><div _ngcontent-obe-c106="" class="highlight-div-header-left"><div _ngcontent-obe-c106="" class="handle-button expand-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obe-c106="" class="highlight-div-header-right"><div _ngcontent-obe-c106="" class="handle-button ai-button"></div><div _ngcontent-obe-c106="" class="handle-button line-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obe-c106="" class="handle-button theme-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obe-c106="" class="handle-button copy-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"rules"</span>: {</li><li>    <span class="hljs-string">"@typescript-eslint/no-restricted-syntax"</span>: [</li><li>      <span class="hljs-comment">// 告警级别: 枚举类型, 支持配置为error, warn, off</span></li><li>      <span class="hljs-string">"error"</span>,</li><li>      {</li><li>        <span class="hljs-comment">// selector属性必选，配置要禁用的语法</span></li><li>        <span class="hljs-comment">// 可通过特定DSL筛选待限制的语句，CallExpression表示方法调用表达式，后面的中括号里面是筛选条件（根据语法树Node节点来确定）</span></li><li>        <span class="hljs-comment">// 其中callee.object.name根据指定的名称筛选调用方法的对象（class，namespace或module），以上示例中为"Foo"</span></li><li>        <span class="hljs-comment">// callee.property.name则根据指定的名称筛选被调用的方法，以上示例中为"bar"</span></li><li>        <span class="hljs-string">"selector"</span>: <span class="hljs-string">"CallExpression[callee.object.name='Foo'][callee.property.name='bar']"</span>,</li><li>        <span class="hljs-comment">// message属性可选，配置要展示的报错信息</span></li><li>        <span class="hljs-string">"message"</span>: <span class="hljs-string">"Foo.bar() is not allowed"</span></li><li>      }</li><li>    ]</li><li>  },</li><li>}</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>如需在code-linter.json5文件中配置其他字段，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-code-linter#section19310459444" target="_blank">配置代码检查规则</a>。</p> </div></div></div> <p>执行代码检查</p> <p>对pages/Index.ets文件进行代码检查，结果如下：</p> <p><span><img originheight="141" originwidth="601" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.87021568549924785169797499591149:50001231000000:2800:477639815B46C5E22458E2E2351925636FABD4E15B56E9D30810C0429B467417.png" width="601" height="141"></span></p> <p><strong>示例2：对类名Foo的命名风格校验</strong></p> <p>在配置文件中定义规则</p> <p>在ArkTS工程中，pages/Index.ets文件下增加以下用例：</p> <div class="screenLinkPre"><div _ngcontent-obe-c106="" class="highlight-div"><div _ngcontent-obe-c106="" class="highlight-div-header"><div _ngcontent-obe-c106="" class="highlight-div-header-left"><div _ngcontent-obe-c106="" class="handle-button expand-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obe-c106="" class="highlight-div-header-right"><div _ngcontent-obe-c106="" class="handle-button ai-button"></div><div _ngcontent-obe-c106="" class="handle-button line-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obe-c106="" class="handle-button theme-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obe-c106="" class="handle-button copy-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/StabilityCodingSpecification/DevEcoStaticCheck/src/main/ets/pages/Index2.ets#L6-L8" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">foo</span> {    <span class="hljs-comment">//Here is an example of a naming style error, where foo is the incorrect class name used, and the correct class name should be Foo</span></li><li>  <span class="hljs-title function_">bar</span>(<span class="hljs-params"></span>) {}</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/StabilityCodingSpecification/DevEcoStaticCheck/src/main/ets/pages/Index2.ets#L6-L8" target="_blank">Index2.ets</a></div></div></div></div> <p>在工程根目录下创建code-linter.json5文件，并添加以下配置：</p> <div _ngcontent-obe-c106="" class="highlight-div"><div _ngcontent-obe-c106="" class="highlight-div-header"><div _ngcontent-obe-c106="" class="highlight-div-header-left"><div _ngcontent-obe-c106="" class="handle-button expand-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obe-c106="" class="highlight-div-header-right"><div _ngcontent-obe-c106="" class="handle-button ai-button"></div><div _ngcontent-obe-c106="" class="handle-button line-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obe-c106="" class="handle-button theme-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obe-c106="" class="handle-button copy-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"rules"</span>: {</li><li>    <span class="hljs-string">"@typescript-eslint/naming-convention"</span>: [</li><li>      <span class="hljs-string">"error"</span>,</li><li>      {</li><li>        <span class="hljs-comment">// selector属性必选，配置要检查的语法，这里配置的class表示检查自定义组件名</span></li><li>        <span class="hljs-string">"selector"</span>: <span class="hljs-string">"class"</span>,</li><li>        <span class="hljs-comment">// format属性必选，配置期望的命名风格，支持枚举值，这里配置的PascalCase表示大驼峰风格</span></li><li>        <span class="hljs-string">"format"</span>: [<span class="hljs-string">"PascalCase"</span>],</li><li>        <span class="hljs-comment">// custom属性可选，配置用户自定义的命名风格</span></li><li>        <span class="hljs-string">"custom"</span>: {</li><li>          <span class="hljs-comment">// regex属性必选，配置具体的正则</span></li><li>          <span class="hljs-string">"regex"</span>: <span class="hljs-string">"^[a-zA-Z]+$"</span>,</li><li>          <span class="hljs-comment">// match属性必选，配置为true表示正则未命中时报错；配置为false表示正则命中时报错</span></li><li>          <span class="hljs-string">"match"</span>: <span class="hljs-keyword">true</span></li><li>        }</li><li>      }</li><li>    ]</li><li>  },</li><li>}</li></ol></pre></div></div>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>字段说明</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.48.2.6.1.1" valign="top" width="19.77197719771977%"><p>字段名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.48.2.6.1.2" valign="top" width="18.961896189618958%"><p>参数说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.48.2.6.1.3" valign="top" width="6.330633063306331%"><p>是否必选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.48.2.6.1.4" valign="top" width="10.36103610361036%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.48.2.6.1.5" valign="top" width="44.57445744574458%"><p>支持配置的参数</p> </th> </tr> </thead> <tbody><tr><td align="left" class="cellrowborder" valign="top" width="19.77197719771977%"><p>selector</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>配置要检查的语法</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>字符串、字符串数组</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><ul><li>variable：变量</li><li>function：函数</li><li>parameter：参数</li><li>parameterProperty：参数属性</li><li>accessor：get/set方法</li><li>enumMember：枚举成员</li><li>classMethod：类方法</li><li>structMethod：自定义组件中的方法</li><li>objectLiteralMethod：对象方法</li><li>typeMethod：接口方法</li><li>classProperty：类属性</li><li>structProperty：自定义组件中的属性</li><li>objectLiteralProperty：对象属性</li><li>typeProperty：接口属性</li><li>class：类</li><li>struct：自定义组件</li><li>interface：接口</li><li>typeAlias：类型别名</li><li>enum：枚举</li><li>typeParameter：泛型参数</li><li>default：包含以上所有的类型</li><li>variableLike：包含variable，function，parameter</li><li>memberLike：包含classProperty，structProperty，objectLiteralProperty，typeProperty，parameterProperty ，enumMember，classMethod，objectLiteralMethod，typeMethod，accessor</li><li>typeLike：包含class，struct，interface，typeAlias，enum，typeParameter</li><li>method：包含classMethod，structMethod，objectLiteralMethod，typeMethod</li><li>property：包含classProperty，objectLiteralProperty，typeProperty</li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.77197719771977%"><p>format</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>配置期望的命名风格</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>是</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>字符串数组</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><ul><li>camelCase：小驼峰命名风格，比如getName，getID（支持连续大写字母），不支持下划线</li><li>strictCamelCase：严格小驼峰命名风格，除了不支持连续大写字母（getID），其他的和camelCase相同</li><li>PascalCase：大驼峰命名风格，比如Foo，CC，除了要求第一个字母大写，其他的和camelCase相同</li><li>StrictPascalCase：大驼峰命名风格，除了不支持连续大写字母（CC），其他的和PascalCase相同</li><li>snake_case：小写字母+下划线+小写字母的命名风格，比如a_a，不支持_a，a_a_</li><li>UPPER_CASE：大写字母+下划线+大写字母的命名风格，比如A_A，不支持_A，A_A_</li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.77197719771977%"><p>custom</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>配置用户自定义的命名风格</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>对象</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><ul><li>regex：属性必选，配置具体的正则</li><li>match：属性必选，配置为true表示正则未命中时报错，配置为false表示正则命中时报错</li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.77197719771977%"><p>leadingUnderscore/trailingUnderscore</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>配置是否允许以下划线开头/以下划线结尾的命名风格</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>字符串</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><ul><li>allow：允许以一个下划线开头/结尾的命名风格，比如_name</li><li>allowDouble：允许以两个下划线开头/结尾的命名风格，比如__name</li><li>allowSingleOrDouble：允许以一个或者两个下划线开头/结尾的命名风格（allow+allowDouble）</li><li>forbid：禁止以下划线开头/结尾的命名风格，比如_name，__name</li><li>require：必须是以下划线开头/结尾的命名风格，比如_name，__name</li><li>requireDouble：必须是以两个下划线开头/结尾的命名风格，比如__name</li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.77197719771977%"><p>prefix/suffix</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>配置固定前缀/后缀的命名风格。如果前缀/后缀未匹配则报错</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>字符串数组</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><p>用户自定义前缀/后缀</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.77197719771977%"><p>filter</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>过滤特定的命名风格，检查或者不检查正则命中的命名</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>对象</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><p>配置格式与custom相似</p> <p>match：设置为true表示只检查正则命中的名字，设置为false表示不检查正则命中的名字</p> <p>regex：设置过滤的正则</p> <p>说明</p> <p>支持直接配置一个字符串，这个字符串配置的是regex，此时match相当于配置的是true。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.77197719771977%"><p>modifiers</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>匹配修饰符，只有包含特定修饰符的命名才会检查</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>字符串数组</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><ul><li>abstract：匹配abstract关键字</li><li>override：匹配override关键字</li><li>private：匹配private关键字</li><li>protected：匹配protected关键字</li><li>static：匹配static关键字</li><li>async：匹配async关键字</li><li>const：匹配const关键字</li><li>destructured：匹配解构语法</li><li>exported：匹配export关键字</li><li>global：匹配全局声明</li><li>#private：匹配私有符号#</li><li>public：匹配public级别的访问修饰符</li><li>requiresQuotes：匹配字符串类型的命名，并且 字符串中包含特殊字符</li><li>unused：匹配未使用的声明</li></ul> </td> </tr> <tr><td class="cellrowborder" valign="top" width="19.77197719771977%"><p>types</p> </td> <td class="cellrowborder" valign="top" width="18.961896189618958%"><p>匹配类型，只有特定类型的名字才会检查</p> </td> <td class="cellrowborder" valign="top" width="6.330633063306331%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="10.36103610361036%"><p>字符串数组</p> </td> <td class="cellrowborder" valign="top" width="44.57445744574458%"><ul><li>array：数组类型</li><li>boolean：布尔类型</li><li>function：函数类型</li><li>number：数字类型</li><li>string：字符串类型</li></ul> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>以上配置的参数校验优先级为：filter &gt; types &gt; modifiers &gt; validate leading underscore &gt; validate trailing underscore &gt; validate prefix &gt; validate suffix &gt; validate custom &gt; validate format。</p> </div></div></div> <p><strong>执行代码检查</strong></p> <p>对pages/Index.ets文件执行代码检查，显示检查结果如下：</p> <p><span><img originheight="169" originwidth="887" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.09892922061891738179534452695338:50001231000000:2800:315F4AA6018F7C5DF8C70074C833C397D798B2BDA6FACFC795A61E84C1060326.png" width="887" height="169"></span></p> <p><strong>示例3：检查代码文件的命名风格</strong></p> <p><strong>在配置文件中定义规则</strong></p> <p>在ArkTS工程中，pages目录下新建test.ets文件；</p> <p>在工程根目录下新建code-linter.json5文件，并新增以下配置：</p> <div _ngcontent-obe-c106="" class="highlight-div"><div _ngcontent-obe-c106="" class="highlight-div-header"><div _ngcontent-obe-c106="" class="highlight-div-header-left"><div _ngcontent-obe-c106="" class="handle-button expand-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obe-c106="" class="highlight-div-header-right"><div _ngcontent-obe-c106="" class="handle-button ai-button"></div><div _ngcontent-obe-c106="" class="handle-button line-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obe-c106="" class="handle-button theme-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obe-c106="" class="handle-button copy-button"><div _ngcontent-obe-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obe-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"rules"</span>: {</li><li>    <span class="hljs-string">"@hw-stylistic/file-naming-convention"</span>: [</li><li>      <span class="hljs-comment">// 告警级别：枚举类型，支持配置为error，warn，off</span></li><li>      <span class="hljs-string">"error"</span>,</li><li>      {</li><li>        <span class="hljs-comment">// selector属性可选，支持配置为code或者resources</span></li><li>        <span class="hljs-comment">// code表示检查代码文件的命名风格</span></li><li>        <span class="hljs-comment">// resources表示检查资源文件的命名风格</span></li><li>        <span class="hljs-string">"selector"</span>: <span class="hljs-string">"code"</span></li><li>      }</li><li>    ]</li><li>  },</li><li>}</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>如果未配置selector属性，默认检查代码文件和资源文件的命名风格。</p> </div></div></div> <p><strong>执行代码检查</strong></p> <p>对pages/test.ets文件执行代码检查，显示检查结果如下：</p> <p><span><img originheight="168" originwidth="886" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163502.93458609110918759314452556616939:50001231000000:2800:EF6C522758A9CC83C436EB5884386F19335EC642FBF259C36A6A4D2C81210C3C.png" width="886" height="168"></span></p> <p></p> </div> </div> <div></div></div>