<h1 _ngcontent-gxh-c119="" class="doc-title ng-star-inserted" title="使用GWP-ASan检测内存错误"> 使用GWP-ASan检测内存错误 </h1>

<div _ngcontent-gxh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>GWP-ASan的能力概述和检测原理可参看<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-address-sanitizer-overview">地址越界检测能力概述</a>以及<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-address-sanitizer-principle#section555616291854">GWP-ASan检测原理</a>，适用于运行态商用场景。</p> <div class="tiledSection"><h2 id="section18588121019520">使用约束<i class="anchor-icon anchor-icon-link" anchorid="section18588121019520" tips="复制节点链接"></i></h2></div> <p>ASan、TSan、UBSan、HWASan、GWP-ASan不能同时开启，五个只能开启其中一个。</p> <div class="tiledSection"><h2 id="section2735718353">GWP-ASan使能<i class="anchor-icon anchor-icon-link" anchorid="section2735718353" tips="复制节点链接"></i></h2></div> <p>在app.json5中添加"GWPAsanEnabled": true配置，如下图所示。</p> <p><span><img originheight="293" originwidth="449" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163505.80387884820572210681637729039540:50001231000000:2800:69AEC716AFCC24E514E5EBBFC947827781684AE3E517F46BA218F51AF3903B6C.png" width="449" height="293"></span></p> <p>开启GWP-ASan检测后，如果应用发生地址越界问题，且该问题正好被GWP-ASan采样监控，GWP-ASan会记录地址越界事件并且使进程崩溃，开发者可以通过订阅地址越界事件来获取相关信息，请参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-address-sanitizer-events" target="_blank">地址越界事件介绍</a>。</p> <div class="tiledSection"><h2 id="section1893833153915">配置参数<i class="anchor-icon anchor-icon-link" anchorid="section1893833153915" tips="复制节点链接"></i></h2><p>从API 20开始，GWP-ASan可通过hidebug接口配置参数，可配置参数如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.1" valign="top" width="25%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.2" valign="top" width="9.4%"><p>默认值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.3" valign="top" width="11.28%"><p>是否必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.4" valign="top" width="54.32%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%"><p>alwaysEnabled</p> </td> <td class="cellrowborder" valign="top" width="9.4%"><p>false</p> </td> <td class="cellrowborder" valign="top" width="11.28%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="54.32%"><p>true：100%开启GWP-ASan，与app.json5中GWPAsanEnable标签功能一致。</p> <p>false：1/128概率开启GWP-ASan，在应用冷启动时候会判断是否开启。</p> <p>注意：若在app.json5中设置了 GWPAsanEnable，将会覆盖该参数。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>sampleRate</p> </td> <td class="cellrowborder" valign="top" width="9.4%"><p>2500</p> </td> <td class="cellrowborder" valign="top" width="11.28%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="54.32%"><p>GWP-ASan采样频率。1/sampleRate的概率对分配的内存进行采样。</p> <p>建议值：≥1000，默认参数下性能开销小于1%。采样频率过小会显著影响性能，若调整参数请开发者自行保证用户体验。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>maxSimutaneousAllocations</p> </td> <td class="cellrowborder" valign="top" width="9.4%"><p>1000</p> </td> <td class="cellrowborder" valign="top" width="11.28%"><p>否</p> </td> <td class="cellrowborder" valign="top" width="54.32%"><p>最大分配的插槽数。当插槽用尽时，新分配的内存将不再受监控。释放已使用的内存后，其占用的插槽将自动复用，以便于后续内存的监控。</p> <p>建议值：≤20000，每个插槽会额外占用约4.5KB内存，默认参数下约占4.5MB，过大可能导致VMA超限崩溃。</p> </td> </tr>  </tbody></table></div> </div> </div> <p>接口具体使用方式，可查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugenablegwpasangrayscale20" target="_blank">@ohos.hidebug (Debug调试)</a>。</p> <div class="tiledSection"><h2 id="section73731529454">GWP-ASan异常检测类型<i class="anchor-icon anchor-icon-link" anchorid="section73731529454" tips="复制节点链接"></i></h2></div> <p>下面给出异常检测码和相关日志</p> <div class="tiledSection"><h3 id="section19419103914518" class="firsth2">double free<i class="anchor-icon anchor-icon-link" anchorid="section19419103914518" tips="复制节点链接"></i></h3></div> <div _ngcontent-gxh-c106="" class="highlight-div"><div _ngcontent-gxh-c106="" class="highlight-div-header"><div _ngcontent-gxh-c106="" class="highlight-div-header-left"><div _ngcontent-gxh-c106="" class="handle-button expand-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gxh-c106="" class="highlight-div-header-right"><div _ngcontent-gxh-c106="" class="handle-button ai-button"></div><div _ngcontent-gxh-c106="" class="handle-button line-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gxh-c106="" class="handle-button theme-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gxh-c106="" class="handle-button copy-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gxh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" data-highlighted="yes"><ol class="linenums"><li>*** GWP-ASan detected a memory error ***</li><li>Double Free at 0x7f9c31efe0 (a 20-byte allocation) by thread 11725 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7f9c548958 (/lib/ld-musl-aarch64.so.1+0x1ea958)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7f9c548730 (/lib/ld-musl-aarch64.so.1+0x1ea730)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7f9c4810f4 (/lib/ld-musl-aarch64.so.1+0x1230f4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x7f9c4018d8 (/lib/ld-musl-aarch64.so.1+0xa38d8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7f9c547944 (/lib/ld-musl-aarch64.so.1+0x1e9944)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x7f9c418c64 (/lib/ld-musl-aarch64.so.1+0xbac64)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">6 0x555dab4f24 (/data/local/tmp/double_free+0x1f24)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">7 0x7f9c4c1668 (/lib/ld-musl-aarch64.so.1+0x163668)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">8 0x555dab4c14 (/data/local/tmp/double_free+0x1c14)</span></li><li>0x7f9c31efe0 was deallocated by thread 11725 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7f9c5480f8 (/lib/ld-musl-aarch64.so.1+0x1ea0f8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7f9c54799c (/lib/ld-musl-aarch64.so.1+0x1e999c)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7f9c418c64 (/lib/ld-musl-aarch64.so.1+0xbac64)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x555dab4f1c (/data/local/tmp/double_free+0x1f1c)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7f9c4c1668 (/lib/ld-musl-aarch64.so.1+0x163668)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x555dab4c14 (/data/local/tmp/double_free+0x1c14)</span></li><li>0x7f9c31efe0 was allocated by thread 11725 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7f9c5480f8 (/lib/ld-musl-aarch64.so.1+0x1ea0f8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7f9c547780 (/lib/ld-musl-aarch64.so.1+0x1e9780)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7f9c41882c (/lib/ld-musl-aarch64.so.1+0xba82c)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x555dab4f10 (/data/local/tmp/double_free+0x1f10)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7f9c4c1668 (/lib/ld-musl-aarch64.so.1+0x163668)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x555dab4c14 (/data/local/tmp/double_free+0x1c14)</span></li><li>*** End GWP-ASan report ***</li></ol></pre></div></div> <div class="tiledSection"><h3 id="section230114529511">use_after_free<i class="anchor-icon anchor-icon-link" anchorid="section230114529511" tips="复制节点链接"></i></h3></div> <div _ngcontent-gxh-c106="" class="highlight-div"><div _ngcontent-gxh-c106="" class="highlight-div-header"><div _ngcontent-gxh-c106="" class="highlight-div-header-left"><div _ngcontent-gxh-c106="" class="handle-button expand-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gxh-c106="" class="highlight-div-header-right"><div _ngcontent-gxh-c106="" class="handle-button ai-button"></div><div _ngcontent-gxh-c106="" class="handle-button line-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gxh-c106="" class="handle-button theme-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gxh-c106="" class="handle-button copy-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gxh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" data-highlighted="yes"><ol class="linenums"><li>*** GWP-ASan detected a memory error ***</li><li>Use After Free at 0x7fa2ab6000 (0 bytes into a 10-byte allocation at 0x7fa2ab6000) by thread 3594 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7fa4781f18 (/lib/ld-musl-aarch64.so.1+0x1e9f18)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7fa4781cf0 (/lib/ld-musl-aarch64.so.1+0x1e9cf0)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7fa46ba6bc (/lib/ld-musl-aarch64.so.1+0x1226bc)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x7fa463b298 (/lib/ld-musl-aarch64.so.1+0xa3298)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x5562e886ac (/data/local/tmp/gwp_asan_use_after_free_test+0x16ac)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x7fa46fac28 (/lib/ld-musl-aarch64.so.1+0x162c28)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">6 0x5562e88654 (/data/local/tmp/gwp_asan_use_after_free_test+0x1654)</span></li><li>0x7fa2ab6000 was deallocated by thread 3594 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7fa47816b8 (/lib/ld-musl-aarch64.so.1+0x1e96b8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7fa4780f5c (/lib/ld-musl-aarch64.so.1+0x1e8f5c)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7fa46522cc (/lib/ld-musl-aarch64.so.1+0xba2cc)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x5562e886ac (/data/local/tmp/gwp_asan_use_after_free_test+0x16ac)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7fa46fac28 (/lib/ld-musl-aarch64.so.1+0x162c28)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x5562e88654 (/data/local/tmp/gwp_asan_use_after_free_test+0x1654)</span></li><li>0x7fa2ab6000 was allocated by thread 3594 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7fa47816b8 (/lib/ld-musl-aarch64.so.1+0x1e96b8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7fa4780d40 (/lib/ld-musl-aarch64.so.1+0x1e8d40)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7fa4652010 (/lib/ld-musl-aarch64.so.1+0xba010)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x5562e886a4 (/data/local/tmp/gwp_asan_use_after_free_test+0x16a4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7fa46fac28 (/lib/ld-musl-aarch64.so.1+0x162c28)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x5562e88654 (/data/local/tmp/gwp_asan_use_after_free_test+0x1654)</span></li><li>*** End GWP-ASan report ***</li></ol></pre></div></div> <div class="tiledSection"><h3 id="section164021649617">invalid free left<i class="anchor-icon anchor-icon-link" anchorid="section164021649617" tips="复制节点链接"></i></h3></div> <div _ngcontent-gxh-c106="" class="highlight-div"><div _ngcontent-gxh-c106="" class="highlight-div-header"><div _ngcontent-gxh-c106="" class="highlight-div-header-left"><div _ngcontent-gxh-c106="" class="handle-button expand-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gxh-c106="" class="highlight-div-header-right"><div _ngcontent-gxh-c106="" class="handle-button ai-button"></div><div _ngcontent-gxh-c106="" class="handle-button line-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gxh-c106="" class="handle-button theme-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gxh-c106="" class="handle-button copy-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gxh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" data-highlighted="yes"><ol class="linenums"><li>*** GWP-ASan detected a memory error ***</li><li>Invalid (Wild) Free at 0x7f8551ffff (1 byte to the left of a 1-byte allocation at 0x7f85520000) by thread 11708 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7f856746b8 (/lib/ld-musl-aarch64.so.1+0x1286b8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7f85674268 (/lib/ld-musl-aarch64.so.1+0x128268)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7f856cfbc0 (/lib/ld-musl-aarch64.so.1+0x183bc0)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x7f855ea1b4 (/lib/ld-musl-aarch64.so.1+0x9e1b4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7f8567349c (/lib/ld-musl-aarch64.so.1+0x12749c)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x556c5c67a8 (/data/local/tmp/gwp_asan_invalid_free_left_test+0x17a8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">6 0x7f855ecd74 (/lib/ld-musl-aarch64.so.1+0xa0d74)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">7 0x556c5c6754 (/data/local/tmp/gwp_asan_invalid_free_left_test+0x1754)</span></li><li>0x7f8551ffff was allocated by thread 11708 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7f85673f20 (/lib/ld-musl-aarch64.so.1+0x127f20)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7f85673298 (/lib/ld-musl-aarch64.so.1+0x127298)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7f856891b4 (/lib/ld-musl-aarch64.so.1+0x13d1b4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x556c5c67a0 (/data/local/tmp/gwp_asan_invalid_free_left_test+0x17a0)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7f855ecd74 (/lib/ld-musl-aarch64.so.1+0xa0d74)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x556c5c6754 (/data/local/tmp/gwp_asan_invalid_free_left_test+0x1754)</span></li><li>*** End GWP-ASan report ***</li></ol></pre></div></div> <div class="tiledSection"><h3 id="section12990121619618">invalid free right<i class="anchor-icon anchor-icon-link" anchorid="section12990121619618" tips="复制节点链接"></i></h3></div> <div _ngcontent-gxh-c106="" class="highlight-div"><div _ngcontent-gxh-c106="" class="highlight-div-header"><div _ngcontent-gxh-c106="" class="highlight-div-header-left"><div _ngcontent-gxh-c106="" class="handle-button expand-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gxh-c106="" class="highlight-div-header-right"><div _ngcontent-gxh-c106="" class="handle-button ai-button"></div><div _ngcontent-gxh-c106="" class="handle-button line-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gxh-c106="" class="handle-button theme-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gxh-c106="" class="handle-button copy-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gxh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" data-highlighted="yes"><ol class="linenums"><li>*** GWP-ASan detected a memory error ***</li><li>Invalid (Wild) Free at 0x7fa4e96ff1 (1 byte to the right of a 1-byte allocation at 0x7fa4e96ff0) by thread 11852 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7fa4fec6b8 (/lib/ld-musl-aarch64.so.1+0x1286b8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7fa4fec268 (/lib/ld-musl-aarch64.so.1+0x128268)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7fa5047bc0 (/lib/ld-musl-aarch64.so.1+0x183bc0)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x7fa4f621b4 (/lib/ld-musl-aarch64.so.1+0x9e1b4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7fa4feb49c (/lib/ld-musl-aarch64.so.1+0x12749c)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x55625737a8 (/data/local/tmp/gwp_asan_invalid_free_right_test+0x17a8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">6 0x7fa4f64d74 (/lib/ld-musl-aarch64.so.1+0xa0d74)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">7 0x5562573754 (/data/local/tmp/gwp_asan_invalid_free_right_test+0x1754)</span></li><li>0x7fa4e96ff1 was allocated by thread 11852 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7fa4febf20 (/lib/ld-musl-aarch64.so.1+0x127f20)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7fa4feb298 (/lib/ld-musl-aarch64.so.1+0x127298)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7fa50011b4 (/lib/ld-musl-aarch64.so.1+0x13d1b4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x55625737a0 (/data/local/tmp/gwp_asan_invalid_free_right_test+0x17a0)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7fa4f64d74 (/lib/ld-musl-aarch64.so.1+0xa0d74)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x5562573754 (/data/local/tmp/gwp_asan_invalid_free_right_test+0x1754)</span></li><li>*** End GWP-ASan report ***</li></ol></pre></div></div> <div class="tiledSection"><h3 id="section9675371368">buffer underflow<i class="anchor-icon anchor-icon-link" anchorid="section9675371368" tips="复制节点链接"></i></h3></div> <div _ngcontent-gxh-c106="" class="highlight-div"><div _ngcontent-gxh-c106="" class="highlight-div-header"><div _ngcontent-gxh-c106="" class="highlight-div-header-left"><div _ngcontent-gxh-c106="" class="handle-button expand-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gxh-c106="" class="highlight-div-header-right"><div _ngcontent-gxh-c106="" class="handle-button ai-button"></div><div _ngcontent-gxh-c106="" class="handle-button line-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gxh-c106="" class="handle-button theme-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gxh-c106="" class="handle-button copy-button"><div _ngcontent-gxh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gxh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-shell" data-highlighted="yes"><ol class="linenums"><li>*** GWP-ASan detected a memory error ***</li><li>Buffer Underflow at 0x7f8db1aff1 (4063 bytes to the left of a 48-byte allocation at 0x7f8db1bfd0) by thread 12086 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7f8dc716b8 (/lib/ld-musl-aarch64.so.1+0x1286b8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7f8dc71268 (/lib/ld-musl-aarch64.so.1+0x128268)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7f8dcccbc0 (/lib/ld-musl-aarch64.so.1+0x183bc0)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x7f8dbe71b4 (/lib/ld-musl-aarch64.so.1+0x9e1b4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x55801287f8 (/data/local/tmp/gwp_asan_buffer_overflow_test+0x17f8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x7f8dbe9d74 (/lib/ld-musl-aarch64.so.1+0xa0d74)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">6 0x558012879c (/data/local/tmp/gwp_asan_buffer_overflow_test+0x179c)</span></li><li>0x7f8db1aff1 was allocated by thread 12086 here:</li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">0 0x7f8dc70f20 (/lib/ld-musl-aarch64.so.1+0x127f20)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">1 0x7f8dc70298 (/lib/ld-musl-aarch64.so.1+0x127298)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">2 0x7f8dc861b4 (/lib/ld-musl-aarch64.so.1+0x13d1b4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">3 0x7f8d4ef4fc (/system/lib64/libc++.so+0xaf4fc)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">4 0x7f8da76818 (/system/lib64/chipset-pub-sdk/libhilog.so+0x36818)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">5 0x7f8da76af8 (/system/lib64/chipset-pub-sdk/libhilog.so+0x36af8)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">6 0x7f8da6f228 (/system/lib64/chipset-pub-sdk/libhilog.so+0x2f228)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">7 0x7f8dbd4d18 (/lib/ld-musl-aarch64.so.1+0x8bd18)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">8 0x7f8dbd8cc4 (/lib/ld-musl-aarch64.so.1+0x8fcc4)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">9 0x7f8dd00370 (/lib/ld-musl-aarch64.so.1+0x1b7370)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">10 0x7f8dbd4d18 (/lib/ld-musl-aarch64.so.1+0x8bd18)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">11 0x7f8dbd4b28 (/lib/ld-musl-aarch64.so.1+0x8bb28)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">12 0x7f8dbe9d58 (/lib/ld-musl-aarch64.so.1+0xa0d58)</span></li><li><span class="hljs-meta prompt_">  #</span><span class="language-bash">13 0x558012879c (/data/local/tmp/gwp_asan_buffer_overflow_test+0x179c)</span></li><li>*** End GWP-ASan report ***</li></ol></pre></div></div> <div class="tiledSection"><h2 id="section189951812113817">日志规格和日志获取方式<i class="anchor-icon anchor-icon-link" anchorid="section189951812113817" tips="复制节点链接"></i></h2><p>请参看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/address-sanitizer-guidelines#日志获取方式" target="_blank">日志获取方式</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/address-sanitizer-guidelines#gwp-asan日志规格" target="_blank">GWP-ASan日志规格</a>。</p> </div> </div> <div></div></div>