<h1 _ngcontent-lle-c119="" class="doc-title ng-star-inserted" title="使用Swiper组件实现轮播图"> 使用Swiper组件实现轮播图 </h1>

<div _ngcontent-lle-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1535574017555">概述<i class="anchor-icon anchor-icon-link" anchorid="section1535574017555" tips="复制节点链接"></i></h2><p>在各类应用和网站中，轮播图的使用非常广泛，它在信息展示和用户交互方面扮演着重要角色。轮播图不仅能在有限的屏幕区域内展示更多内容，还能有效地将关键的信息传递给用户。在开发应用或网站时，可以通过轮播图优先展示重要内容，次要内容则随后呈现，用户能够自主控制浏览节奏，滑动交互也能为用户带来发现内容的愉悦感，从而提升用户体验。</p> <p>本文将通过以下两个场景介绍如何使用Swiper组件实现不同的轮播效果。</p> <p><a href="/consumer/cn/doc/best-practices/bpta-carousel-graphic-works#section1461474222812">使用Swiper实现图文作品合集</a>：图文作品合集由图片和文字组合而成，通过Swiper组件来动态展示图片，实现图片的轮播效果。</p> <p><a href="/consumer/cn/doc/best-practices/bpta-carousel-graphic-works#section45251227153219">实现轮播图片叠加效果</a>：轮播图的叠加效果（多层轮播图视觉叠加）可以创造独特的视觉层次和交互体验。</p> </div> <div class="tiledSection"><h2 id="section1461474222812">使用Swiper实现图文作品合集<i class="anchor-icon anchor-icon-link" anchorid="section1461474222812" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section12672142763010" class="firsth2">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section12672142763010" tips="复制节点链接"></i></h3><p>在一些短视频平台上，经常能看到由图片和文字组合而成的作品集。这些作品集通常由多张图片构成，支持自动轮播或手动切换。</p> </div> <ol><li>当作品自动播放时，图片会每隔几秒自动切换到下一张，且下方的进度条进度与每张图片的停留时间相匹配。</li><li>当用户主动触发播放操作时，下方进度条会跟着图片的滑动切换而改变成未完成状态或已完成状态。</li></ol> <p>效果如图所示。</p> <p><span><img height="549.2900000000001" originheight="1080" originwidth="523" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162909.31862347830394804376282039041953:50001231000000:2800:37DF54A978777E502952B6CDEFC954BEBE085F86F7F25B9823D21F813C61C1A3.gif" title="点击放大" width="266"></span></p> <div class="tiledSection"><h3 id="section1415014556291">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section1415014556291" tips="复制节点链接"></i></h3><p>图文作品轮播可以通过Swiper组件及其指示器的联动效果来实现。由于Swiper组件的指示器不可自定义，因此需要分开实现。</p> <p>图片区域需要使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper" target="_blank">Swiper</a>组件来实现。将图片合集的数据传入Swiper组件后，需要对Swiper组件设置一些属性，来完成图片自动轮播效果。</p> <ol><li>通过设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#loop" target="_blank">loop</a>属性控制是否循环播放，该属性默认值为true。当loop为true时，在显示第一页或最后一页时，可以继续往前切换到前一页或者往后切换到后一页。如果loop为false，则在第一页或最后一页时，无法继续向前或者向后切换页面。</li><li>通过设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#autoplay" target="_blank">autoPlay</a>属性，控制是否自动轮播子组件。该属性默认值为false。autoPlay为true时，会自动切换播放子组件。</li><li>通过设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#interval" target="_blank">interval</a>属性，控制子组件与子组件之间的播放间隔。interval属性默认值为3000，单位毫秒。</li><li>通过设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#indicator" target="_blank">indicator</a>属性为false，来关闭Swiper组件自带的导航点指示器样式。</li></ol> <p>底部导航点（进度条）有三种样式：未完成状态的样式、已完成状态的样式和正在进行进度增长的样式。</p> <ol><li>进度条布局：开发者可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-stack-layout" target="_blank">层叠布局 (Stack)</a>，配合Row容器来实现进度条的布局。</li><li>图文播放时间与进度条匹配：要实现进度条缓慢增长至完成状态且用时与图片播放时间相匹配的效果，可以给Row容器组件添加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-animatorproperty" target="_blank">属性动画 (animation)</a>，设置duration（动画持续时间）与图片播放时间匹配即可。</li><li>进度条状态切换：通过比较当前图片的currentIndex与进度条的index，当currentIndex大于index时，应将进度条样式设置为已完成状态；反之，则设置为未完成状态。可以通过将进度条的背景颜色设置为Color.White或Color.Grey来实现这两种状态的切换。</li></ol> </div> <div class="tiledSection"><h3 id="section1321412151307">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section1321412151307" tips="复制节点链接"></i></h3><ol><li><span>为Swiper组件设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#loop" target="_blank">loop</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#autoplay" target="_blank">autoPlay</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#interval" target="_blank">interval</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#indicator" target="_blank">indicator</a>属性。在手指未滑动的情况下，图片每3秒会进行一次切换，并且自动进行轮播。</span><p></p><div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L157-L171" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Swiper</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">swiperController</span>) {</li><li>  <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>, <span class="hljs-function">(<span class="hljs-params">item: PhotoData, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">`app.media.`</span> + item.<span class="hljs-property">id</span>))</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">foldStatus</span> === <span class="hljs-number">2</span> ? <span class="hljs-string">'100%'</span> : <span class="hljs-string">'70%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }, <span class="hljs-function">(<span class="hljs-params">item: PhotoData</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>}</li><li>.<span class="hljs-title function_">loop</span>(<span class="hljs-literal">true</span>)</li><li>.<span class="hljs-title function_">autoPlay</span>(<span class="hljs-literal">true</span>)</li><li><span class="hljs-comment">//.autoPlay(this.slide ? false : true)</span></li><li>.<span class="hljs-title function_">interval</span>(<span class="hljs-number">3000</span>)</li><li>.<span class="hljs-title function_">indicator</span>(<span class="hljs-literal">false</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L157-L171" target="_blank">ImageSwitch.ets</a></div></div></div></div> <p>示意效果如下图所示。</p> <p><span><img originheight="351" originwidth="380" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162909.79040056447014218531972040496649:50001231000000:2800:ACE9B9F838025AEF93F7B57A04C512F418C6AA357D92EBCF646134FDFD087CD6.gif" width="380" height="351"></span></p> <p></p></li><li><span>创建进度条自定义组件progressComponent。代码中，this.progressData为图片集合的数组，this.currentIndex为当前播放的图片在图片集合数组中的索引，index为进度条对应的图片在图片集合数组中的索引。当this.currentIndex &gt; index时，表示图片集合数组中索引0-index的进度条都是已完成状态。</span><p></p><div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L91-L134" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">Builder</span></li><li><span class="hljs-title function_">progressComponent</span>() {</li><li>  <span class="hljs-title function_">Row</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">5</span> }) {</li><li>    <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">progressData</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">PhotoData</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>      <span class="hljs-title function_">Stack</span>({ <span class="hljs-variable">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-title class_">Start</span> }) {</li><li>        <span class="hljs-comment">// Use the cascading component to stack progress bars of different styles together</span></li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-title function_">Row</span>()</li><li>          .<span class="hljs-title function_">zIndex</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentIndex</span> === <span class="hljs-variable">index</span> ? <span class="hljs-string">'100%'</span> : <span class="hljs-string">'0'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">2</span>)</li><li>          .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">2</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>)</li><li>          <span class="hljs-comment">// Add a growth animation to the progress bar</span></li><li>          .<span class="hljs-title function_">animation</span>({</li><li>            <span class="hljs-variable">duration</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">currentIndex</span> === <span class="hljs-variable">index</span> ? <span class="hljs-keyword">this</span>.<span class="hljs-variable">duration</span> : <span class="hljs-number">0</span>,</li><li>            <span class="hljs-variable">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-title class_">Linear</span>,</li><li>            <span class="hljs-variable">iterations</span>: <span class="hljs-number">1</span>,</li><li>            <span class="hljs-variable">playMode</span>: <span class="hljs-title class_">PlayMode</span>.<span class="hljs-title class_">Normal</span></li><li>          })</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>      .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>    }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">PhotoData</span>) =&gt; <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">item</span>))</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L91-L134" target="_blank">ImageSwitch.ets</a></div></div></div></div> <p>示意效果如下图所示。</p> <p><span><img originheight="39" originwidth="353" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162909.52578343296709214965603816778988:50001231000000:2800:D6E70F8022B62742A601380595CDFB11C36F7C53FA18E4DC9AF29AFD7FB7D1DD.gif" width="353" height="39"></span></p> <p></p></li><li><span>滑动切换图片后，关闭自动轮播与循环轮播。此时，开发者需要给Swiper组件添加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#ongestureswipe10" target="_blank">onGestureSwipe</a>事件，来判断页面是否跟手滑动。其中slide为布尔值，用来判断页面是否跟手滑动。默认值为false，当页面跟手滑动时，slide的值为true。当进行滑动切换时，autoPlay、loop属性的取值为false，即关闭自动轮播与循环播放功能。若想实现滑动图片后仍自动循环轮播，直接去掉slide相关代码片段即可。</span><p></p><div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L156-L191" data-highlighted="yes"><ol class="linenums"><li>Swiper(<span class="hljs-keyword">this</span>.swiperController) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-comment">// .onGestureSwipe((index: number, extraInfo: SwiperAnimationEvent) =&gt; {</span></li><li><span class="hljs-comment">//   this.slide = true;</span></li><li><span class="hljs-comment">// })</span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L156-L191" target="_blank">ImageSwitch.ets</a></div></div></div></div> <p>示意效果如下图所示。</p> <p><span><img height="549.2900000000001" originheight="1080" originwidth="523" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162909.65913181810568369377192878795171:50001231000000:2800:179729E39791471BAEE7AF2E7A49E7D186651C28C03A7063B34C06B78D3ECB05.gif" title="点击放大" width="266"></span></p> <p></p></li><li><span>适配折叠屏，在aboutToAppear生命周期函数中获取设备是否可折叠，并且同时获取折叠状态，通过设备类型以及折叠状态设置Swiper的宽高值。同时绑定change回调事件，当页面变化时，触发回调实时刷新折叠状态值。</span><p></p><div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L39-L76" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFoldable</span> = display.<span class="hljs-title function_">isFoldable</span>();</li><li>    <span class="hljs-comment">// Get the foldable screen status</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">foldStatus</span>: display.<span class="hljs-property">FoldStatus</span> = display.<span class="hljs-title function_">getFoldStatus</span>();</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFoldable</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">foldStatus</span> = foldStatus;</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">callback</span>: <span class="hljs-title class_">Callback</span>&lt;<span class="hljs-built_in">number</span>&gt; = <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: display.<span class="hljs-property">FoldStatus</span> = display.<span class="hljs-title function_">getFoldStatus</span>();</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">foldStatus</span> = data;</li><li>      }</li><li>      <span class="hljs-comment">// Monitor the changes in the unfolded status of the foldable screen</span></li><li>      display.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, callback);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'ImageSwitch'</span>, <span class="hljs-string">`getFoldStatus failed. code=<span class="hljs-subst">${err.code}</span>, message=<span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">list</span>: <span class="hljs-title class_">PhotoData</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">7</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> newPhotoData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhotoData</span>();</li><li>    newPhotoData.<span class="hljs-property">id</span> = i;</li><li>    list.<span class="hljs-title function_">push</span>(newPhotoData);</li><li>  }</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">progressData</span> = list;</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSource</span>(list);</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/ImageSwitch.ets#L39-L76" target="_blank">ImageSwitch.ets</a></div></div></div></div> <p>当折叠状态取值为2时，表示当前折叠状态为折叠。</p> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section45251227153219">实现轮播图的叠加效果<i class="anchor-icon anchor-icon-link" anchorid="section45251227153219" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section158114083213" class="firsth2">场景描述<i class="anchor-icon anchor-icon-link" anchorid="section158114083213" tips="复制节点链接"></i></h3><p>轮播图的叠加效果通过视觉层叠、内容交互动画，能显著提升信息传达的丰富性和用户体验的沉浸感。通常情况下，轮播图是按照顺序依次轮播，但是有时候也希望能够以一种重叠的方式进行展示，即当前展示的图片覆盖在前一个图片上方，给用户一种更加流畅的切换体验。</p> <p>效果如图所示。</p> <p><span><img height="549.2900000000001" originheight="1080" originwidth="523" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162910.75667212199195127428914049594015:50001231000000:2800:81A087AB2C112142471F45B1713FF256EFED2EBAAD3DAAAD0FA6E80FA9FFF78F.gif" title="点击放大" width="266"></span></p> </div> <div class="tiledSection"><h3 id="section2741164133318">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section2741164133318" tips="复制节点链接"></i></h3><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-stack-layout" target="_blank">层叠布局 (Stack)</a>可以实现图片的叠加，结合滑动手势来实现图片的切换，并通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#animateto" target="_blank">animateTo</a>添加相应的切换动画。通过给图片添加以下属性来实现。</p> <ul><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-z-order#zindex" target="_blank">zIndex</a>属性来设置组件的堆叠顺序，Index值越大，显示层级越高，即zIndex值大的组件会覆盖在zIndex值小的组件上方。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-visibility#visibility" target="_blank">visibility</a>属性来控制显示或隐藏，值为Visibility.Hidden时，表示隐藏，但参与布局进行占位；值为Visibility.Visible时，表示显示；值为Visibility.None时，表示隐藏，但不参与布局，不进行占位。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-transformation#scale" target="_blank">scale</a>属性来控制是否缩放，可以分别设置X轴、Y轴、Z轴的缩放比例，默认值为1。</li></ul> </div> <div class="tiledSection"><h3 id="section159891223103319">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section159891223103319" tips="复制节点链接"></i></h3><ol><li><span>使用Stack组件将图片进行层叠布局，并给其设置zIndex、visibility、scale等属性。</span><p></p><div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/StackSwitch.ets#L156-L175" data-highlighted="yes"><ol class="linenums"><li>Stack({ alignContent: Alignment.Start }) {</li><li>  ForEach(<span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>, (item: string, index: number) =&gt; {</li><li>    Column() {</li><li>      Text(item)</li><li>        .fontSize(<span class="hljs-number">30</span>)</li><li>        .fontColor(Color.Blue)</li><li>    }</li><li>    .zIndex(<span class="hljs-keyword">this</span>.zIndexArray[index])</li><li>    .visibility(<span class="hljs-keyword">this</span>.visibleArray[index])</li><li>    .opacity(<span class="hljs-keyword">this</span>.opacityArray[index])</li><li>    .backgroundColor(Color.Pink)</li><li>    .width(<span class="hljs-keyword">this</span>.sizeArray[index].width)</li><li>    .height(<span class="hljs-keyword">this</span>.sizeArray[index].height)</li><li>    .offset({ x: <span class="hljs-keyword">this</span>.offsetXArray[index], y: <span class="hljs-number">0</span> })</li><li>    .scale(<span class="hljs-keyword">this</span>.scaleArray[index])</li><li>  }, (item: string, index: number) =&gt; `${item}index`)</li><li>}</li><li>.onAppear(() =&gt; { <span class="hljs-comment">// It is called only once after mounting</span></li><li>  <span class="hljs-keyword">this</span>.isAppear = <span class="hljs-literal">true</span>;</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/StackSwitch.ets#L156-L175" target="_blank">StackSwitch.ets</a></div></div></div></div> <p></p></li><li><span>在Stack上监听左右滑动手势，在手势的回调里面进行图片的动效切换。</span><p></p><div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/StackSwitch.ets#L178-L242" data-highlighted="yes"><ol class="linenums"><li>.gesture(</li><li>  PanGesture(<span class="hljs-keyword">this</span>.panOption)</li><li>    .onActionStart((event: GestureEvent) =&gt; {</li><li>      clearInterval(timerId); <span class="hljs-comment">// Stop looping playback</span></li><li>      <span class="hljs-keyword">this</span>.isStart = <span class="hljs-literal">false</span>;</li><li>      <span class="hljs-keyword">this</span>.visibleArray[<span class="hljs-keyword">this</span>.currentIndexArray[<span class="hljs-number">3</span>]] = Visibility.Visible;</li><li>    })</li><li>    .onActionUpdate((event: GestureEvent) =&gt; {</li><li>      <span class="hljs-keyword">if</span> (!event) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      let distanceScl: number = <span class="hljs-number">0</span>;</li><li>      let index0 = <span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.FIRSTPAGE];</li><li>      <span class="hljs-comment">// The animation effect of the top card</span></li><li>      <span class="hljs-keyword">this</span>.offsetXArray[index0] = event.offsetX;</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.offsetXArray[index0] &lt; <span class="hljs-number">0</span>) { <span class="hljs-comment">// 左</span></li><li>        distanceScl = <span class="hljs-keyword">this</span>.offsetXArray[index0] &gt; -OFFSET_DISTANCE_4_FADE_THREHOLD ?</li><li>          <span class="hljs-number">1.0</span> + <span class="hljs-keyword">this</span>.offsetXArray[index0] / OFFSET_DISTANCE_4_FADE_THREHOLD : <span class="hljs-number">0</span>;</li><li>      } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// right</span></li><li>        distanceScl = <span class="hljs-keyword">this</span>.offsetXArray[index0] &lt; OFFSET_DISTANCE_4_FADE_THREHOLD ?</li><li>          <span class="hljs-number">1.0</span> - <span class="hljs-keyword">this</span>.offsetXArray[index0] / OFFSET_DISTANCE_4_FADE_THREHOLD : <span class="hljs-number">0</span>;</li><li>      }</li><li>
</li><li>      <span class="hljs-comment">// The animation effect of the second-layer card</span></li><li>      let index1 = <span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.SCENDPAGE];</li><li>      <span class="hljs-keyword">this</span>.changeSubPageWhenUpdate(index1, PageIndex.SCENDPAGE, distanceScl, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);</li><li>
</li><li>      <span class="hljs-comment">// The animation effect of three layers of cards</span></li><li>      let index2 = <span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.THRIDPAGE];</li><li>      <span class="hljs-keyword">this</span>.changeSubPageWhenUpdate(index1, PageIndex.THRIDPAGE, distanceScl, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);</li><li>
</li><li>      <span class="hljs-comment">// The animation effect of four layers of cards</span></li><li>      let index3 = <span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.FOURTHPAGE];</li><li>      <span class="hljs-keyword">this</span>.changeSubPageWhenUpdate(index1, PageIndex.FOURTHPAGE, distanceScl, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);</li><li>    })</li><li>    .onActionEnd((event: GestureEvent) =&gt; { <span class="hljs-comment">// Lift your finger</span></li><li>      <span class="hljs-keyword">if</span> (!event) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-keyword">this</span>.getUIContext().animateTo({</li><li>        duration: <span class="hljs-number">200</span>,</li><li>        curve: Curve.Linear,</li><li>        onFinish: () =&gt; { <span class="hljs-comment">// After the animation effect ends, assign status values to each card to ensure that every component is in the correct state</span></li><li>          <span class="hljs-comment">// Within the range that triggers the switch page</span></li><li>          <span class="hljs-keyword">if</span> (Math.abs(<span class="hljs-keyword">this</span>.offsetXArray[<span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.FIRSTPAGE]]) &lt;</li><li>            OFFSET_DISTANCE_4_SWICH_THREHOLD) {</li><li>            <span class="hljs-keyword">this</span>.visibleArray[<span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.FIRSTPAGE]] = Visibility.Visible;</li><li>            <span class="hljs-keyword">this</span>.visibleArray[<span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.FOURTHPAGE]] = Visibility.None;</li><li>          } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Update the status outside the range that triggers the switch page</span></li><li>            <span class="hljs-keyword">this</span>.changePagePropertyWhenFinished();</li><li>          }</li><li>        }</li><li>      }, () =&gt; {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.offsetXArray[<span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.FIRSTPAGE]] &gt; OFFSET_DISTANCE_4_SWICH_THREHOLD ||</li><li>          event.velocityX &gt; SWITCH_PAGE_VELOCITY_THREHOLD) { <span class="hljs-comment">// Fade out of the page to the right</span></li><li>          <span class="hljs-keyword">this</span>.changePageWhenEnd(OFFSET_DISTANCE_4_FADE_THREHOLD, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);</li><li>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.offsetXArray[<span class="hljs-keyword">this</span>.currentIndexArray[PageIndex.FIRSTPAGE]] &lt;</li><li>          -OFFSET_DISTANCE_4_SWICH_THREHOLD || event.velocityX &lt; -SWITCH_PAGE_VELOCITY_THREHOLD) { <span class="hljs-comment">// Fade out of the page to the left</span></li><li>          <span class="hljs-keyword">this</span>.changePageWhenEnd(OFFSET_DISTANCE_4_FADE_THREHOLD, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-keyword">this</span>.changePageWhenEnd(<span class="hljs-number">0</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// Return</span></li><li>        }</li><li>      })</li><li>    })</li><li>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultipleImage/blob/master/entry/src/main/ets/pages/StackSwitch.ets#L178-L242" target="_blank">StackSwitch.ets</a></div></div></div></div> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section1055775633414">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section1055775633414" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section10460658103410" class="firsth2">Swiper如何实现左滑加载更多效果<i class="anchor-icon anchor-icon-link" anchorid="section10460658103410" tips="复制节点链接"></i></h3><p>可以通过监听滑动到边缘后超过距离多少来实现左滑加载更多效果，当超过一定距离时添加对应业务逻辑。</p> <p>例如，在onGestureSwipe()回调中，判断下标以及偏移量，当偏移量超过一定距离时填充数据。</p> <div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MultipleImage/entry/src/main/FAQ/SwipeLeftToLoadMore.ets#L21-L72" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MySwiper</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">swiperController</span>: <span class="hljs-title class_">SwiperController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SwiperController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">ind</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">list</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ind</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">ind</span> += <span class="hljs-number">1</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Swiper</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">swiperController</span>) {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">Text</span>(item.<span class="hljs-title function_">toString</span>())</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">160</span>)</li><li>            .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xAFEEEE</span>)</li><li>            .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>      }</li><li>      .<span class="hljs-title function_">cachedCount</span>(<span class="hljs-number">2</span>)</li><li>      .<span class="hljs-title function_">index</span>(<span class="hljs-number">1</span>)</li><li>      .<span class="hljs-title function_">autoPlay</span>(<span class="hljs-literal">false</span>)</li><li>      .<span class="hljs-title function_">interval</span>(<span class="hljs-number">4000</span>)</li><li>      .<span class="hljs-title function_">loop</span>(<span class="hljs-literal">false</span>)</li><li>      .<span class="hljs-title function_">indicatorInteractive</span>(<span class="hljs-literal">true</span>)</li><li>      .<span class="hljs-title function_">duration</span>(<span class="hljs-number">1000</span>)</li><li>      .<span class="hljs-title function_">itemSpace</span>(<span class="hljs-number">0</span>)</li><li>      .<span class="hljs-title function_">curve</span>(<span class="hljs-title class_">Curve</span>.<span class="hljs-property">Linear</span>)</li><li>      .<span class="hljs-title function_">onGestureSwipe</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span>, extraInfo: SwiperAnimationEvent</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (index === <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>          <span class="hljs-keyword">if</span> (extraInfo.<span class="hljs-property">currentOffset</span> &lt; -<span class="hljs-number">50</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'&lt; -50'</span> });</li><li>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">4</span>; i &lt;= <span class="hljs-number">6</span>; i++) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ind</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">ind</span> += <span class="hljs-number">1</span>;</li><li>            }</li><li>          }</li><li>        }</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> })</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MultipleImage/entry/src/main/FAQ/SwipeLeftToLoadMore.ets#L21-L72" target="_blank">SwipeLeftToLoadMore.ets</a></div></div></div></div> </div> <div class="tiledSection"><h3 id="section2328152283517">如何解决swiper嵌套swiper滑动手势冲突<i class="anchor-icon anchor-icon-link" anchorid="section2328152283517" tips="复制节点链接"></i></h3><p>父组件有机制可以干预子组件的手势响应，可以通过手势拦截增强能力解决手势冲突，在回调onGestureRecognizerJudgeBegin()中进行滑动手势判断，处理对应业务逻辑。</p> <div class="screenLinkPre"><div _ngcontent-lle-c106="" class="highlight-div"><div _ngcontent-lle-c106="" class="highlight-div-header"><div _ngcontent-lle-c106="" class="highlight-div-header-left"><div _ngcontent-lle-c106="" class="handle-button expand-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lle-c106="" class="highlight-div-header-right"><div _ngcontent-lle-c106="" class="handle-button ai-button"></div><div _ngcontent-lle-c106="" class="handle-button line-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lle-c106="" class="handle-button theme-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lle-c106="" class="handle-button copy-button"><div _ngcontent-lle-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lle-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MultipleImage/entry/src/main/FAQ/SlidingConflict.ets#L21-L54" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MySwiper</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">swiperIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">item</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Swiper</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-function">(<span class="hljs-params">item2: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">item</span>.<span class="hljs-title function_">toString</span>() + item2.<span class="hljs-title function_">toString</span>())</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">160</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xAFEEEE</span>)</li><li>          .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">onGestureRecognizerJudgeBegin</span>(<span class="hljs-function">(<span class="hljs-params">event: BaseGestureEvent, current: GestureRecognizer</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (current.<span class="hljs-title function_">isBuiltIn</span>() &amp;&amp; current.<span class="hljs-title function_">getType</span>() == <span class="hljs-title class_">GestureControl</span>.<span class="hljs-property">GestureType</span>.<span class="hljs-property">PAN_GESTURE</span>) {</li><li>        <span class="hljs-keyword">let</span> panEvent = event <span class="hljs-keyword">as</span> <span class="hljs-title class_">PanGestureEvent</span>;</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">swiperIndex</span> === <span class="hljs-number">0</span>) {</li><li>          <span class="hljs-keyword">if</span> (panEvent.<span class="hljs-property">velocityX</span> &gt; <span class="hljs-number">0</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-title class_">GestureJudgeResult</span>.<span class="hljs-property">REJECT</span></li><li>          }</li><li>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">swiperIndex</span> === <span class="hljs-number">2</span>) {</li><li>          <span class="hljs-keyword">if</span> (panEvent.<span class="hljs-property">velocityX</span> &lt; <span class="hljs-number">0</span>) {</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-title class_">GestureJudgeResult</span>.<span class="hljs-property">REJECT</span></li><li>          }</li><li>        }</li><li>      }</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-title class_">GestureJudgeResult</span>.<span class="hljs-property">CONTINUE</span>;</li><li>    })</li><li>    .<span class="hljs-title function_">index</span>($$this.<span class="hljs-property">swiperIndex</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MultipleImage/entry/src/main/FAQ/SlidingConflict.ets#L21-L54" target="_blank">SlidingConflict.ets</a></div></div></div></div> </div> <div class="tiledSection"><h2 id="section85936131627">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section85936131627" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/MultipleImage" target="_blank">轮播实现图文作品</a></li></ul> </div> </div></div>