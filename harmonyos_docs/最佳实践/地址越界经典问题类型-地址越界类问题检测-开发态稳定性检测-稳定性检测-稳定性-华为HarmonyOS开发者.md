<h1 _ngcontent-kde-c119="" class="doc-title ng-star-inserted" title="地址越界经典问题类型"> 地址越界经典问题类型 </h1>

<div _ngcontent-kde-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section15071621339">heap-use-after-free<i class="anchor-icon anchor-icon-link" anchorid="section15071621339" tips="复制节点链接"></i></h2></div> <p><strong>定义</strong></p> <p>heap-use-after-free：当堆内存被释放后，仍然使用该内存地址进行读写操作。这种行为可能导致未定义行为、数据损坏或远程代码执行等严重后果。其成因是开发者未能正确管理内存的生命周期，导致“野指针”留存，并在后续代码执行中继续被使用。</p> <p>想要检测UseAfterFree的错误，需要有两点保证：</p> <ol><li>已经free掉的内存区域需要被标记成特殊的状态。</li><li>已经free掉的内存区域需要放入隔离区一段时间，防止发生错误时该区域已经通过malloc重新分配给其他人使用。一旦分配给其他人使用，则可能漏掉UseAfterFree的错误。</li></ol> <p><strong>影响</strong></p> <p>导致程序存在安全漏洞，存在功能异常甚至崩溃的风险。</p> <p><strong>代码示例</strong></p> <p>以下为heap-use-after-free代码示例</p> <div class="screenLinkPre"><div _ngcontent-kde-c106="" class="highlight-div"><div _ngcontent-kde-c106="" class="highlight-div-header"><div _ngcontent-kde-c106="" class="highlight-div-header-left"><div _ngcontent-kde-c106="" class="handle-button expand-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kde-c106="" class="highlight-div-header-right"><div _ngcontent-kde-c106="" class="handle-button ai-button"></div><div _ngcontent-kde-c106="" class="handle-button line-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kde-c106="" class="handle-button theme-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kde-c106="" class="handle-button copy-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kde-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-php" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MemoryDetection/entry/src/main/cpp/address_problems.cpp#L23-L28" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">int</span> <span class="hljs-title function_ invoke__">HeapUseAfterFree</span>()</li><li>{</li><li>    <span class="hljs-keyword">int</span> *<span class="hljs-keyword">array</span> = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">100</span>];</li><li>    delete[] <span class="hljs-keyword">array</span>;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">array</span>[<span class="hljs-number">5</span>];</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MemoryDetection/entry/src/main/cpp/address_problems.cpp#L23-L28" target="_blank">address_problems.cpp</a></div></div></div></div> <p><strong>ASan日志示例</strong></p> <p>对这类日志，重点关注三个核心信息：分配位置、释放位置以及再次访问的位置。首先，要先找到程序再次访问已释放内存的现场，这部分一般在日志开头，通过READ of size ...或WRITE of size ...来标明本次非法访问的类型和字节大小，并附带触发时的调用栈信息。紧接着往下查看previously allocated by，可以定位这块内存最初是在何处分配的；再往下看freed by，则可以确认这块内存在何时被释放。</p> <p>为了进一步确认内存状态是否与预期一致，ASan还提供了shadow memory的辅助信息。如日志所示，=&gt;指向的那行有一个byte数值被中括号标记，例如：[fd]。它表示的是此次出错的内存地址对应的shadow memory的值。而其之前的fa表示heap left redzone，它是之前该区域有效时的遗留产物。连续的fd总共有50个，每一个shadow memory的byte和8个normal memory byte对应，所以可以知道此次free的内存总共是50×8=400bytes。</p> <div _ngcontent-kde-c106="" class="highlight-div"><div _ngcontent-kde-c106="" class="highlight-div-header"><div _ngcontent-kde-c106="" class="highlight-div-header-left"><div _ngcontent-kde-c106="" class="handle-button expand-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kde-c106="" class="highlight-div-header-right"><div _ngcontent-kde-c106="" class="handle-button ai-button"></div><div _ngcontent-kde-c106="" class="handle-button line-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kde-c106="" class="handle-button theme-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kde-c106="" class="handle-button copy-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kde-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>=================================================================</li><li>==<span class="hljs-number">6254</span>== <span class="hljs-variable">ERROR</span>: <span class="hljs-title class_">AddressSanitizer</span>: <span class="hljs-title class_">heap</span>-<span class="hljs-title class_">use</span>-<span class="hljs-title class_">after</span>-<span class="hljs-title class_">free</span> <span class="hljs-title class_">on</span> <span class="hljs-title class_">address</span> <span class="hljs-number">0x603e0001fc64</span> <span class="hljs-title class_">at</span> <span class="hljs-title class_">pc</span> <span class="hljs-number">0x417f6a</span> <span class="hljs-title class_">bp</span> <span class="hljs-number">0x7fff626b3250</span> <span class="hljs-title class_">sp</span> <span class="hljs-number">0x7fff626b3248</span></li><li><span class="hljs-variable">READ</span> <span class="hljs-variable">of</span> <span class="hljs-variable">size</span> <span class="hljs-number">4</span> <span class="hljs-variable">at</span> <span class="hljs-number">0x603e0001fc64</span> <span class="hljs-variable">thread</span> <span class="hljs-variable">T0</span></li><li>    #<span class="hljs-number">0</span> <span class="hljs-number">0x417f69</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">main</span> <span class="hljs-variable">example_UseAfterFree</span>.<span class="hljs-variable">cc</span>:<span class="hljs-number">5</span></li><li>    #<span class="hljs-number">1</span> <span class="hljs-number">0x7fae62b5076c</span> (/<span class="hljs-variable">lib</span>/<span class="hljs-variable">x86_64</span>-<span class="hljs-variable">linux</span>-<span class="hljs-variable">gnu</span>/<span class="hljs-variable">libc</span>.<span class="hljs-variable">so</span><span class="hljs-number">.6</span>+<span class="hljs-number">0x2176c</span>)</li><li>    #<span class="hljs-number">2</span> <span class="hljs-number">0x417e54</span> (<span class="hljs-variable">a</span>.<span class="hljs-variable">out</span>+<span class="hljs-number">0x417e54</span>)</li><li><span class="hljs-number">0x603e0001fc64</span> <span class="hljs-keyword">is</span> <span class="hljs-variable">located</span> <span class="hljs-number">4</span> <span class="hljs-variable">bytes</span> <span class="hljs-variable">inside</span> <span class="hljs-variable">of</span> <span class="hljs-number">400</span>-<span class="hljs-variable">byte</span> <span class="hljs-variable">region</span> [<span class="hljs-number">0x603e0001fc60</span>,<span class="hljs-number">0x603e0001fdf0</span>)</li><li><span class="hljs-variable">freed</span> <span class="hljs-variable">by</span> <span class="hljs-variable">thread</span> <span class="hljs-variable">T0</span> <span class="hljs-variable">here</span>:</li><li>    #<span class="hljs-number">0</span> <span class="hljs-number">0x40d4d2</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">operator</span> <span class="hljs-variable">delete</span>[](<span class="hljs-variable">void</span>*) /<span class="hljs-variable">home</span>/<span class="hljs-variable">kcc</span>/<span class="hljs-variable">llvm</span>/<span class="hljs-variable">projects</span>/<span class="hljs-variable">compiler</span>-<span class="hljs-variable">rt</span>/<span class="hljs-variable">lib</span>/<span class="hljs-variable">asan</span>/<span class="hljs-variable">asan_new_delete</span>.<span class="hljs-variable">cc</span>:<span class="hljs-number">61</span></li><li>    #<span class="hljs-number">1</span> <span class="hljs-number">0x417f2e</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">main</span> <span class="hljs-variable">example_UseAfterFree</span>.<span class="hljs-variable">cc</span>:<span class="hljs-number">4</span></li><li><span class="hljs-variable">previously</span> <span class="hljs-variable">allocated</span> <span class="hljs-variable">by</span> <span class="hljs-variable">thread</span> <span class="hljs-variable">T0</span> <span class="hljs-variable">here</span>:</li><li>    #<span class="hljs-number">0</span> <span class="hljs-number">0x40d312</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">operator</span> <span class="hljs-variable">new</span>[](<span class="hljs-variable">unsigned</span> <span class="hljs-variable">long</span>) /<span class="hljs-variable">home</span>/<span class="hljs-variable">kcc</span>/<span class="hljs-variable">llvm</span>/<span class="hljs-variable">projects</span>/<span class="hljs-variable">compiler</span>-<span class="hljs-variable">rt</span>/<span class="hljs-variable">lib</span>/<span class="hljs-variable">asan</span>/<span class="hljs-variable">asan_new_delete</span>.<span class="hljs-variable">cc</span>:<span class="hljs-number">46</span></li><li>    #<span class="hljs-number">1</span> <span class="hljs-number">0x417f1e</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">main</span> <span class="hljs-variable">example_UseAfterFree</span>.<span class="hljs-variable">cc</span>:<span class="hljs-number">3</span></li><li><span class="hljs-variable">Shadow</span> <span class="hljs-variable">bytes</span> <span class="hljs-variable">around</span> <span class="hljs-variable">the</span> <span class="hljs-variable">buggy</span> <span class="hljs-variable">address</span>:</li><li>  <span class="hljs-number">0x1c07c0003f30</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x1c07c0003f40</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x1c07c0003f50</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x1c07c0003f60</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x1c07c0003f70</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>=&gt;<span class="hljs-number">0x1c07c0003f80</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span>[<span class="hljs-title class_">fd</span>]<span class="hljs-variable">fd</span> <span class="hljs-variable">fd</span> <span class="hljs-variable">fd</span></li><li>  <span class="hljs-number">0x1c07c0003f90</span>: <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span></li><li>  <span class="hljs-number">0x1c07c0003fa0</span>: <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span></li><li>  <span class="hljs-number">0x1c07c0003fb0</span>: <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x1c07c0003fc0</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x1c07c0003fd0</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li></ol></pre></div></div> <div class="tiledSection"><h2 id="section37601148631">stack-use-after-return<i class="anchor-icon anchor-icon-link" anchorid="section37601148631" tips="复制节点链接"></i></h2></div> <p><strong>定义</strong></p> <p>stack-use-after-return：在并发场景下，A线程栈内存被释放后，栈上内存仍传递到B线程继续对该内存地址进行读写操作。这种行为可能导致B线程使用时异常，触发CPP_CRASH。</p> <p><strong>影响</strong></p> <p>导致程序存在安全漏洞，存在功能异常甚至崩溃的风险。</p> <p><strong>代码示例</strong></p> <p>以下为stack-use-after-return代码示例</p> <div class="screenLinkPre"><div _ngcontent-kde-c106="" class="highlight-div"><div _ngcontent-kde-c106="" class="highlight-div-header"><div _ngcontent-kde-c106="" class="highlight-div-header-left"><div _ngcontent-kde-c106="" class="handle-button expand-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kde-c106="" class="highlight-div-header-right"><div _ngcontent-kde-c106="" class="handle-button ai-button"></div><div _ngcontent-kde-c106="" class="handle-button line-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kde-c106="" class="handle-button theme-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kde-c106="" class="handle-button copy-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kde-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-perl" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MemoryDetection/entry/src/main/cpp/address_problems.cpp#L36-L50" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">int</span> *ptr;</li><li>
</li><li>__attribute_<span class="hljs-number">_</span>((noinline))</li><li>void FunctionThatEscapesLocalObject()</li><li>{</li><li>    <span class="hljs-keyword">int</span> <span class="hljs-keyword">local</span>[<span class="hljs-number">100</span>];</li><li>    ptr = &amp;<span class="hljs-keyword">local</span>[<span class="hljs-number">0</span>];</li><li>    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"address: %p"</span>, <span class="hljs-keyword">local</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">int</span> StackUseAfterReturn(<span class="hljs-keyword">int</span> argc)</li><li>{</li><li>    FunctionThatEscapesLocalObject();</li><li>    <span class="hljs-keyword">return</span> ptr[argc];</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MemoryDetection/entry/src/main/cpp/address_problems.cpp#L36-L50" target="_blank">address_problems.cpp</a></div></div></div></div> <p><strong>ASan日志示例</strong></p> <p>如下，可以看到最终出错的shadow memory值为f5，表示这是一个函数返回后仍被访问的内存区域</p> <div _ngcontent-kde-c106="" class="highlight-div"><div _ngcontent-kde-c106="" class="highlight-div-header"><div _ngcontent-kde-c106="" class="highlight-div-header-left"><div _ngcontent-kde-c106="" class="handle-button expand-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kde-c106="" class="highlight-div-header-right"><div _ngcontent-kde-c106="" class="handle-button ai-button"></div><div _ngcontent-kde-c106="" class="handle-button line-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kde-c106="" class="handle-button theme-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kde-c106="" class="handle-button copy-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kde-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>=================================================================</li><li>==<span class="hljs-number">52583</span>==<span class="hljs-variable">ERROR</span>: <span class="hljs-title class_">AddressSanitizer</span>: <span class="hljs-title class_">stack</span>-<span class="hljs-title class_">use</span>-<span class="hljs-title class_">after</span>-<span class="hljs-keyword">return</span> <span class="hljs-title class_">on</span> <span class="hljs-title class_">address</span> <span class="hljs-number">0x007a50590c2c</span> <span class="hljs-title class_">at</span> <span class="hljs-title class_">pc</span> <span class="hljs-number">0x007bfe89a5d8</span> <span class="hljs-title class_">bp</span> <span class="hljs-number">0x007fe7bfd590</span> <span class="hljs-title class_">sp</span> <span class="hljs-number">0x007fe7bfd588</span></li><li><span class="hljs-variable">READ</span> <span class="hljs-variable">of</span> <span class="hljs-variable">size</span> <span class="hljs-number">4</span> <span class="hljs-variable">at</span> <span class="hljs-number">0x007a50590c2c</span> <span class="hljs-variable">thread</span> <span class="hljs-variable">T0</span> (<span class="hljs-variable">e</span>.<span class="hljs-variable">myapplication</span>)</li><li>    #<span class="hljs-number">0</span> <span class="hljs-number">0x7bfe89a5d4</span>  (/<span class="hljs-variable">data</span>/<span class="hljs-variable">storage</span>/<span class="hljs-variable">el1</span>/<span class="hljs-variable">bundle</span>/<span class="hljs-variable">libs</span>/<span class="hljs-variable">arm64</span>/<span class="hljs-variable">libentry</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x5a5d4</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">7</span><span class="hljs-title class_">bd557d1f1104b6d2201c007074c00b2d049f2fa</span>)</li><li>    #<span class="hljs-number">1</span> <span class="hljs-number">0x7adafcc4a4</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">platformsdk</span>/<span class="hljs-variable">libace_napi</span>.<span class="hljs-variable">z</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x4c4a4</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">885449</span><span class="hljs-title class_">edb5de58e60c275a3b46d06982</span>)</li><li>    #<span class="hljs-number">2</span> <span class="hljs-number">0x7af82232c8</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">module</span>/<span class="hljs-variable">arkcompiler</span>/<span class="hljs-variable">stub</span>.<span class="hljs-variable">an</span>+<span class="hljs-number">0x5c82c8</span>)</li><li>    #<span class="hljs-number">3</span> <span class="hljs-number">0x7af7c6bae0</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">module</span>/<span class="hljs-variable">arkcompiler</span>/<span class="hljs-variable">stub</span>.<span class="hljs-variable">an</span>+<span class="hljs-number">0x10ae0</span>)</li><li>
</li><li><span class="hljs-variable">Address</span> <span class="hljs-number">0x007a50590c2c</span> <span class="hljs-keyword">is</span> <span class="hljs-variable">located</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">stack</span> <span class="hljs-variable">of</span> <span class="hljs-variable">thread</span> <span class="hljs-variable">T0</span> (<span class="hljs-variable">e</span>.<span class="hljs-variable">myapplication</span>) <span class="hljs-variable">at</span> <span class="hljs-variable">offset</span> <span class="hljs-number">44</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">frame</span></li><li>    #<span class="hljs-number">0</span> <span class="hljs-number">0x7bfe896f10</span>  (/<span class="hljs-variable">data</span>/<span class="hljs-variable">storage</span>/<span class="hljs-variable">el1</span>/<span class="hljs-variable">bundle</span>/<span class="hljs-variable">libs</span>/<span class="hljs-variable">arm64</span>/<span class="hljs-variable">libentry</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x56f10</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">7</span><span class="hljs-title class_">bd557d1f1104b6d2201c007074c00b2d049f2fa</span>)</li><li>
</li><li>  <span class="hljs-keyword">This</span> <span class="hljs-variable">frame</span> <span class="hljs-variable">has</span> <span class="hljs-number">1</span> <span class="hljs-title function_">object</span>(<span class="hljs-variable">s</span>):</li><li>    [<span class="hljs-number">32</span>, <span class="hljs-number">432</span>) <span class="hljs-string">'local'</span> (<span class="hljs-variable">line</span> <span class="hljs-number">345</span>) &lt;== <span class="hljs-title class_">Memory</span> <span class="hljs-title class_">access</span> <span class="hljs-title class_">at</span> <span class="hljs-title class_">offset</span> <span class="hljs-number">44</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">inside</span> <span class="hljs-keyword">this</span> <span class="hljs-title class_">variable</span></li><li><span class="hljs-variable">HINT</span>: <span class="hljs-keyword">this</span> <span class="hljs-title class_">may</span> <span class="hljs-title class_">be</span> <span class="hljs-title class_">a</span> <span class="hljs-keyword">false</span> <span class="hljs-title class_">positive</span> <span class="hljs-keyword">if</span> <span class="hljs-title class_">your</span> <span class="hljs-title class_">program</span> <span class="hljs-title class_">uses</span> <span class="hljs-title class_">some</span> <span class="hljs-title class_">custom</span> <span class="hljs-title class_">stack</span> <span class="hljs-title class_">unwind</span> <span class="hljs-title class_">mechanism</span>, <span class="hljs-variable">swapcontext</span> <span class="hljs-variable">or</span> <span class="hljs-variable">vfork</span></li><li>      (<span class="hljs-variable">longjmp</span> <span class="hljs-variable">and</span> <span class="hljs-variable">C</span>++ <span class="hljs-variable">exceptions</span> *<span class="hljs-variable">are</span>* <span class="hljs-variable">supported</span>)</li><li><span class="hljs-variable">SUMMARY</span>: <span class="hljs-title class_">AddressSanitizer</span>: <span class="hljs-title class_">stack</span>-<span class="hljs-title class_">use</span>-<span class="hljs-title class_">after</span>-<span class="hljs-keyword">return</span> (<span class="hljs-variable">/data</span><span class="hljs-variable">/storage</span><span class="hljs-variable">/el1</span><span class="hljs-variable">/bundle</span><span class="hljs-variable">/libs</span><span class="hljs-variable">/arm64</span><span class="hljs-variable">/libentry</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x5a5d4</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">7</span><span class="hljs-title class_">bd557d1f1104b6d2201c007074c00b2d049f2fa</span>) </li><li><span class="hljs-variable">Shadow</span> <span class="hljs-variable">bytes</span> <span class="hljs-variable">around</span> <span class="hljs-variable">the</span> <span class="hljs-variable">buggy</span> <span class="hljs-variable">address</span>:</li><li>  <span class="hljs-number">0x001f4a0b2130</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>  <span class="hljs-number">0x001f4a0b2140</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>  <span class="hljs-number">0x001f4a0b2150</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>  <span class="hljs-number">0x001f4a0b2160</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>  <span class="hljs-number">0x001f4a0b2170</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>=&gt;<span class="hljs-number">0x001f4a0b2180</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span>[<span class="hljs-title class_">f5</span>]<span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span> <span class="hljs-variable">f5</span></li><li>  <span class="hljs-number">0x001f4a0b2190</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>  <span class="hljs-number">0x001f4a0b21a0</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>  <span class="hljs-number">0x001f4a0b21b0</span>: <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span> <span class="hljs-title class_">f5</span></li><li>  <span class="hljs-number">0x001f4a0b21c0</span>: <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span></li><li>  <span class="hljs-number">0x001f4a0b21d0</span>: <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span></li></ol></pre></div></div> <div class="tiledSection"><h2 id="section08491571328">overflow<i class="anchor-icon anchor-icon-link" anchorid="section08491571328" tips="复制节点链接"></i></h2></div> <p><strong>定义</strong></p> <p>overflow：数据超出其分配的内存空间或数据类型所能表示的范围时，产生的一种错误或异常情况。溢出问题在多个领域中都有体现，包括但不限于整数溢出、堆栈溢出等。</p> <ul><li>整数溢出：当一个整数变量的值超过了它所能表示的范围时，会发生整数溢出。例如，当一个有符号的8位整数变量的值超过了-128到127的范围时，会发生溢出。</li><li>堆栈溢出：当程序在调用函数时，递归过深或输入数据过长，导致栈空间不足，从而引发堆栈溢出。</li></ul> <p>想要检测HeapBufferOverflow的问题，只需要保证一点：</p> <ul><li>正常的Heap前后需要插入一定长度的安全区，而且此安全区对应的shadow memory需要被标记为特殊的状态。在ASAN的实现里，安全区被标记为0xfa。</li></ul> <p><strong>影响</strong></p> <p>溢出问题的影响主要体现在以下几个方面：</p> <ol><li><strong>数据错误：</strong>当变量无法容纳超出其范围的数值时，存储在变量中的内容将被截断或改变，导致数据的错误计算。</li><li><strong>程序崩溃：</strong>当程序试图分配超出可用内存范围的空间时，操作系统可能会强制关闭程序，导致程序崩溃或异常终止。</li><li><strong>性能问题：</strong>在处理大量数据时，溢出问题可能导致程序运行缓慢或资源占用过高。</li></ol> <p><strong>代码示例</strong></p> <p>以下为heap-buffer-overflow代码示例</p> <div class="screenLinkPre"><div _ngcontent-kde-c106="" class="highlight-div"><div _ngcontent-kde-c106="" class="highlight-div-header"><div _ngcontent-kde-c106="" class="highlight-div-header-left"><div _ngcontent-kde-c106="" class="handle-button expand-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kde-c106="" class="highlight-div-header-right"><div _ngcontent-kde-c106="" class="handle-button ai-button"></div><div _ngcontent-kde-c106="" class="handle-button line-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kde-c106="" class="handle-button theme-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kde-c106="" class="handle-button copy-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kde-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MemoryDetection/entry/src/main/cpp/address_problems.cpp#L58-L67" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">HeapBufferOverflow</span><span class="hljs-params">()</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">char</span>* buffer;</li><li>    buffer = (<span class="hljs-type">char</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">100</span>);</li><li>    *(buffer + <span class="hljs-number">101</span>) = <span class="hljs-string">'n'</span>;</li><li>    *(buffer + <span class="hljs-number">102</span>) = <span class="hljs-string">'n'</span>;</li><li>    <span class="hljs-built_in">free</span>(buffer);</li><li>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"address: %p"</span>, buffer);</li><li>    <span class="hljs-keyword">return</span> buffer[<span class="hljs-number">1</span>];</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/MemoryDetection/entry/src/main/cpp/address_problems.cpp#L58-L67" target="_blank">address_problems.cpp</a></div></div></div></div> <p><strong>ASan日志示例</strong></p> <p>如下，可以看到最终出错的shadow memory值为0x4，表示该shadow memory对应的normal memory中只有前4个bytes是可寻址的。0x4的shadow memory前还有12个0x0，表示其前面的12个memory region（每个region有8个byte）都是完全可寻址的。因此所有可寻址的大小=12×8+4=100，正是代码中malloc的size。之所以此次访问会出错，是因为地址0x00609ee303e5意图访问最后一个region的第五个byte，而该region只有前四个byte可寻址。由于0x4后面是0xfa，因此此次错误属于HeapBufferOverflow。</p> <div _ngcontent-kde-c106="" class="highlight-div"><div _ngcontent-kde-c106="" class="highlight-div-header"><div _ngcontent-kde-c106="" class="highlight-div-header-left"><div _ngcontent-kde-c106="" class="handle-button expand-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kde-c106="" class="highlight-div-header-right"><div _ngcontent-kde-c106="" class="handle-button ai-button"></div><div _ngcontent-kde-c106="" class="handle-button line-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kde-c106="" class="handle-button theme-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kde-c106="" class="handle-button copy-button"><div _ngcontent-kde-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kde-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>=================================================================</li><li>==<span class="hljs-variable">appspawn</span>==<span class="hljs-number">7656</span>==<span class="hljs-variable">ERROR</span>: <span class="hljs-title class_">AddressSanitizer</span>: <span class="hljs-title class_">heap</span>-<span class="hljs-title class_">buffer</span>-<span class="hljs-title class_">overflow</span> <span class="hljs-title class_">on</span> <span class="hljs-title class_">address</span> <span class="hljs-number">0x00609ee303e5</span> <span class="hljs-title class_">at</span> <span class="hljs-title class_">pc</span> <span class="hljs-number">0x007bb8897c18</span> <span class="hljs-title class_">bp</span> <span class="hljs-number">0x007e02723fa0</span> <span class="hljs-title class_">sp</span> <span class="hljs-number">0x007e02723f98</span></li><li><span class="hljs-variable">WRITE</span> <span class="hljs-variable">of</span> <span class="hljs-variable">size</span> <span class="hljs-number">1</span> <span class="hljs-variable">at</span> <span class="hljs-number">0x00609ee303e5</span> <span class="hljs-variable">thread</span> <span class="hljs-variable">T0</span> (<span class="hljs-variable">e</span>.<span class="hljs-variable">myapplication</span>)</li><li>    #<span class="hljs-number">0</span> <span class="hljs-number">0x7bb8897c14</span>  (/<span class="hljs-variable">data</span>/<span class="hljs-variable">storage</span>/<span class="hljs-variable">el1</span>/<span class="hljs-variable">bundle</span>/<span class="hljs-variable">libs</span>/<span class="hljs-variable">arm64</span>/<span class="hljs-variable">libentry</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x57c14</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">9e7</span><span class="hljs-title class_">ce7cc7ace9cc03f6720335ea2147c140eff23</span>)</li><li>    #<span class="hljs-number">1</span> <span class="hljs-number">0x7b2966afcc</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">platformsdk</span>/<span class="hljs-variable">libace_napi</span>.<span class="hljs-variable">z</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x6afcc</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">24e2</span><span class="hljs-title class_">a6bc2f2ee3af0a8e42bd42959091</span>)</li><li>    #<span class="hljs-number">2</span> <span class="hljs-number">0x7badbd710c</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">module</span>/<span class="hljs-variable">arkcompiler</span>/<span class="hljs-variable">stub</span>.<span class="hljs-variable">an</span>+<span class="hljs-number">0xdd710c</span>)</li><li>    #<span class="hljs-number">3</span> <span class="hljs-number">0x7bace19d20</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">module</span>/<span class="hljs-variable">arkcompiler</span>/<span class="hljs-variable">stub</span>.<span class="hljs-variable">an</span>+<span class="hljs-number">0x19d20</span>)</li><li>
</li><li><span class="hljs-number">0x00609ee303e5</span> <span class="hljs-keyword">is</span> <span class="hljs-variable">located</span> <span class="hljs-number">1</span> <span class="hljs-variable">bytes</span> <span class="hljs-variable">to</span> <span class="hljs-variable">the</span> <span class="hljs-variable">right</span> <span class="hljs-variable">of</span> <span class="hljs-number">100</span>-<span class="hljs-variable">byte</span> <span class="hljs-variable">region</span> [<span class="hljs-number">0x00609ee30380</span>,<span class="hljs-number">0x00609ee303e4</span>)</li><li><span class="hljs-variable">allocated</span> <span class="hljs-variable">by</span> <span class="hljs-variable">thread</span> <span class="hljs-variable">T0</span> (<span class="hljs-variable">e</span>.<span class="hljs-variable">myapplication</span>) <span class="hljs-variable">here</span>:</li><li>    #<span class="hljs-number">0</span> <span class="hljs-number">0x5a9d912678</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">libclang_rt</span>.<span class="hljs-variable">asan</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0xd2678</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">41</span><span class="hljs-title class_">a3c185ba5b0e795c1b5cc5f6d5680c5c523d3c</span>)</li><li>    #<span class="hljs-number">1</span> <span class="hljs-number">0x7bb8897bb8</span>  (/<span class="hljs-variable">data</span>/<span class="hljs-variable">storage</span>/<span class="hljs-variable">el1</span>/<span class="hljs-variable">bundle</span>/<span class="hljs-variable">libs</span>/<span class="hljs-variable">arm64</span>/<span class="hljs-variable">libentry</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x57bb8</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">9e7</span><span class="hljs-title class_">ce7cc7ace9cc03f6720335ea2147c140eff23</span>)</li><li>    #<span class="hljs-number">2</span> <span class="hljs-number">0x7b2966afcc</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">platformsdk</span>/<span class="hljs-variable">libace_napi</span>.<span class="hljs-variable">z</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x6afcc</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">24e2</span><span class="hljs-title class_">a6bc2f2ee3af0a8e42bd42959091</span>)</li><li>    #<span class="hljs-number">3</span> <span class="hljs-number">0x7badbd710c</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">module</span>/<span class="hljs-variable">arkcompiler</span>/<span class="hljs-variable">stub</span>.<span class="hljs-variable">an</span>+<span class="hljs-number">0xdd710c</span>)</li><li>    #<span class="hljs-number">4</span> <span class="hljs-number">0x7bace19d20</span>  (/<span class="hljs-variable">system</span>/<span class="hljs-variable">lib64</span>/<span class="hljs-variable">module</span>/<span class="hljs-variable">arkcompiler</span>/<span class="hljs-variable">stub</span>.<span class="hljs-variable">an</span>+<span class="hljs-number">0x19d20</span>)</li><li>
</li><li><span class="hljs-variable">SUMMARY</span>: <span class="hljs-title class_">AddressSanitizer</span>: <span class="hljs-title class_">heap</span>-<span class="hljs-title class_">buffer</span>-<span class="hljs-title class_">overflow</span> (<span class="hljs-variable">/data</span><span class="hljs-variable">/storage</span><span class="hljs-variable">/el1</span><span class="hljs-variable">/bundle</span><span class="hljs-variable">/libs</span><span class="hljs-variable">/arm64</span><span class="hljs-variable">/libentry</span>.<span class="hljs-variable">so</span>+<span class="hljs-number">0x57c14</span>) (<span class="hljs-variable">BuildId</span>: <span class="hljs-number">9e7</span><span class="hljs-title class_">ce7cc7ace9cc03f6720335ea2147c140eff23</span>) </li><li><span class="hljs-variable">Shadow</span> <span class="hljs-variable">bytes</span> <span class="hljs-variable">around</span> <span class="hljs-variable">the</span> <span class="hljs-variable">buggy</span> <span class="hljs-variable">address</span>:</li><li>  <span class="hljs-number">0x001c13dc6020</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span></li><li>  <span class="hljs-number">0x001c13dc6030</span>: <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x001c13dc6040</span>: <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x001c13dc6050</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span></li><li>  <span class="hljs-number">0x001c13dc6060</span>: <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fd</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>=&gt;<span class="hljs-number">0x001c13dc6070</span>: <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>[<span class="hljs-number">04</span>]<span class="hljs-variable">fa</span> <span class="hljs-variable">fa</span> <span class="hljs-variable">fa</span></li><li>  <span class="hljs-number">0x001c13dc6080</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x001c13dc6090</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x001c13dc60a0</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x001c13dc60b0</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li><li>  <span class="hljs-number">0x001c13dc60c0</span>: <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span> <span class="hljs-title class_">fa</span></li></ol></pre></div></div> </div> <div></div></div>