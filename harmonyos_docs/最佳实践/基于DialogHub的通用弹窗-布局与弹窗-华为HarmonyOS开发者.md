<h1 _ngcontent-jam-c119="" class="doc-title ng-star-inserted" title="基于DialogHub的通用弹窗"> 基于DialogHub的通用弹窗 </h1>

<div _ngcontent-jam-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1612817227511">概述<i class="anchor-icon anchor-icon-link" anchorid="section1612817227511" tips="复制节点链接"></i></h2><p>在HarmonyOS开发中，弹窗是每个应用都会遇到的场景，其重要性不容忽视。一方面，弹窗可以作为一种即时反馈机制，向用户传递重要的信息或提示，如登录提示、网络请求状态、操作确认等。这些弹窗通常具有模态或半模态特性，能够暂时阻断用户的其他操作，确保用户能够注意到并处理这些信息。另一方面，弹窗还可以用于展示广告、推广内容或引导用户进行下一步操作。例如，在App首页或某些关键页面，通过弹窗展示全屏广告或引导用户参与某项活动，可以有效地提升用户参与度。为了方便开发者在HarmonyOS上高效使用不同的弹窗能力，DialogHub解决方案应运而生。</p> <p></p> <p>DialogHub作为ArkUI弹窗能力的解决方案，提供了以下功能特性：</p> <ol><li><strong>页面级弹窗能力</strong><p>确保弹窗与页面生命周期紧密绑定，页面销毁时自动清理弹窗资源。</p> <p>在页面切换或导航时，自动检查并隐藏旧页面的弹窗。</p> </li><li><strong>弹窗管理能力</strong><p>提供弹窗状态管理，区分弹窗是否正在显示、是否已关闭。</p> <p>提供监听机制，允许开发者在弹窗状态变化时执行自定义逻辑，包括弹出、即将弹出、关闭、即将关闭4种状态。</p> </li><li><strong>简化创建弹窗流程</strong><p>精简链式调用的API设计，确保常用弹窗可以通过简洁的语法创建。</p> <p>提供默认配置，减少不必要的参数设置，提高调用效率。</p> </li><li><strong>自定义弹窗模板提升易用性</strong><p>允许开发者自定义模板并保存到模板库中，便于后续复用。</p> </li><li><strong>层级管理、手势透传等多种自定义配置属性</strong><p>提供更灵活的层级管理机制，允许开发者动态调整弹窗的Z轴顺序。</p> <p>提供层级冲突的解决策略，如新旧置顶弹窗的解决策略。</p> <p>允许开发者自定义手势透传的行为，如是否允许手势穿透弹窗作用到底层页面。</p> <p>提供更多自定义属性，如弹窗的动画效果、背景颜色、圆角半径等。</p> </li><li><strong>弹窗刷新机制</strong><p>提供属性值的动态更新机制，允许开发者在弹窗显示过程中修改属性。</p> </li></ol> <p>本文主要以实际开发中的各项场景为例，介绍DialogHub的使用。</p> </div> <div class="tiledSection"><h2 id="section43371133181816">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section43371133181816" tips="复制节点链接"></i></h2><ul><li><strong>弹窗能力</strong><strong>：</strong>基于ArkUI框架中的OverlayManager和BindSheet能力实现。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-overlaymanager" target="_blank">OverlayManager</a>为弹窗提供一个可以覆盖在其他UI元素之上的显示层，而<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#bindsheet" target="_blank">BindSheet</a>则支持将弹窗与特定的页面或组件绑定，实现更精细的控制。</li><li><strong>页面级弹窗控制：</strong>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver" target="_blank">UIObserver</a>实时监听应用内的路由变化，当路由发生变化时，触发相应的回调，从而允许DialogHub根据当前页面的状态来决定是否显示或隐藏弹窗。</li></ul> </div> <div class="tiledSection"><h2 id="section141911316171913">开发流程<i class="anchor-icon anchor-icon-link" anchorid="section141911316171913" tips="复制节点链接"></i></h2><p><strong>前提</strong></p> <p>开发者参考<a href="https://gitee.com/hadss/DialogHub/blob/master/hadss_dialog/README.md" target="_blank">DialogHub使用说明</a>进行安装配置。</p> <div class="p">开发者调用init()接口并传入UIContext以初始化DialogHub。<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/Index.ets#L15-L15" data-highlighted="yes"><ol class="linenums"><li>DialogHub.<span class="hljs-keyword">init</span>(<span class="hljs-keyword">this</span>.getUIContext());</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/Index.ets#L15-L15" target="_blank">Index.ets</a></div></div></div></div> </div> </div> <div class="tiledSection"><h3 id="section6922203010176" class="firsth2">弹窗能力开发流程<i class="anchor-icon anchor-icon-link" anchorid="section6922203010176" tips="复制节点链接"></i></h3><p>通过DialogHub直接创建弹窗然后进行显示或者销毁。</p> <ol><li><span><strong>获取弹窗构造器：</strong></span><p></p><p>调用 DialogHub 的 getToast()等接口，获取不同类型的弹窗构造器 DialogBuilder。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L9-L9" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.getToast</span>()</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L9-L9" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>配置弹窗内容：</strong></span><p></p><p>调用 DialogBuilder 的 setContent()、setAnimation()等接口，配置弹窗的具体内容、动画效果、样式等。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L13-L17" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getToast</span>()</li><li>  .<span class="hljs-title function_">setContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">TextToastBuilder</span>), <span class="hljs-variable">new</span> <span class="hljs-title function_">TextToastParams</span>(<span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">TOAST_TITLE</span>))</li><li>  .<span class="hljs-title function_">setAnimation</span>({ <span class="hljs-variable">dialogAnimation</span>: <span class="hljs-title class_">AnimationType</span>.<span class="hljs-title class_">UP_DOWN</span> })</li><li>  .<span class="hljs-title function_">setConfig</span>({ <span class="hljs-variable">dialogBehavior</span>: { <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">true</span> } })</li><li>  .<span class="hljs-title function_">setStyle</span>({ <span class="hljs-variable">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">White</span> })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L13-L17" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>创建弹窗实例：</strong></span><p></p><p>调用 DialogBuilder 的 build() 接口，创建弹窗实例 InfDialog 对象。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L21-L28" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">dialog</span>:<span class="hljs-title class_">InfToast</span> = <span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getToast</span>()</li><li>  <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">build</span>()</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L21-L28" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>显示与销毁弹窗：</strong></span><p></p><p>调用 InfDialog 对象的 show() 方法显示弹窗。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L32-L32" data-highlighted="yes"><ol class="linenums"><li>dialog<span class="hljs-selector-class">.show</span>()</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L32-L32" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p>调用 InfDialog 对象的 dismiss() 方法销毁弹窗。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L36-L36" data-highlighted="yes"><ol class="linenums"><li>dialog<span class="hljs-selector-class">.dismiss</span>()</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L36-L36" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li></ol> </div> <div class="tiledSection"><h3 id="section122953741812">模板复用能力开发流程<i class="anchor-icon anchor-icon-link" anchorid="section122953741812" tips="复制节点链接"></i></h3><p>开发者自定义模板并注册到模板库中，便于后续复用。</p> <ol><li><span><strong>创建弹窗模板构造器：</strong></span><p></p><p>调用 DialogHub 的 createToastTemplate()等接口，创建不同类型弹窗的模板构造器 DialogTemplate。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L40-L40" data-highlighted="yes"><ol class="linenums"><li>DialogHub.createToastTemplate(<span class="hljs-string">'SimpleToast'</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L40-L40" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>配置模板内容：</strong></span><p></p><p>调用 DialogTemplate 的 setContent()、setAnimation()等接口，配置模板的具体内容、动画效果、样式等。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L44-L48" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">createToastTemplate</span>(<span class="hljs-string">'SimpleToast'</span>)</li><li>  .<span class="hljs-title function_">setContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">TextToastBuilder</span>), <span class="hljs-variable">new</span> <span class="hljs-title function_">TextToastParams</span>(<span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">TOAST_TITLE</span>))</li><li>  .<span class="hljs-title function_">setAnimation</span>({ <span class="hljs-variable">dialogAnimation</span>: <span class="hljs-title class_">AnimationType</span>.<span class="hljs-title class_">UP_DOWN</span> })</li><li>  .<span class="hljs-title function_">setConfig</span>({ <span class="hljs-variable">dialogBehavior</span>: { <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">true</span> } })</li><li>  .<span class="hljs-title function_">setStyle</span>({ <span class="hljs-variable">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">White</span> })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L44-L48" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>注册模板：</strong></span><p></p><p>调用 DialogTemplate 的 register() 接口，将配置好的模板注册并存储。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L52-L59" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.createToastTemplate</span>('SimpleToast')</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-selector-class">.register</span>()</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L52-L59" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>获取并使用弹窗模板：</strong></span><p></p><p>调用 DialogHub 的 getToastTemplate()等接口，根据模板名称获取对应的 DialogBuilder。</p> <p>然后按照弹窗能力开发流程中的步骤2~4，使用 DialogBuilder 配置并显示弹窗。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L63-L66" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.getToastTemplate</span>('SimpleToast')</li><li>  ?<span class="hljs-selector-class">.setAnimation</span>({dialogAnimation:AnimationType.FADE_IN_AND_OUT})</li><li>  <span class="hljs-selector-class">.build</span>()</li><li>  <span class="hljs-selector-class">.show</span>()</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L63-L66" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>获取模板后配置的属性(如动画、位置等)只针对当前弹窗对象生效，不会修改模板内容。</p> </div></div></div> <p></p></li><li><span><strong>(可选) 更新模板：</strong></span><p></p><p>调用 DialogHub 的 updateToastTemplate()、updatePopupTemplate() 等接口，更新对应模板名称的配置，并重新注册。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L70-L72" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">updateToastTemplate</span>(<span class="hljs-string">'SimpleToast'</span>)</li><li>  ?.<span class="hljs-title function_">setStyle</span>({<span class="hljs-variable">backgroundColor</span>:<span class="hljs-title class_">Color</span>.<span class="hljs-title class_">Blue</span>})</li><li>  .<span class="hljs-title function_">register</span>()</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L70-L72" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>(可选) 删除模板：</strong></span><p></p><p>调用 DialogHub 的 removeTemplate() 接口，删除对应模板名称的弹窗模板。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L76-L76" data-highlighted="yes"><ol class="linenums"><li>DialogHub.removeTemplate(<span class="hljs-string">'SimpleToast'</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L76-L76" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li><li><span><strong>(可选) 判断模板是否存在：</strong></span><p></p><p>调用 DialogHub 的 isTemplateExist() 接口，判断指定模板名称的弹窗模板是否已被注册。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L80-L80" data-highlighted="yes"><ol class="linenums"><li>DialogHub.isTemplateExist(<span class="hljs-string">'SimpleToast'</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/others/DocsCodeSteps.ets#L80-L80" target="_blank">DocsCodeSteps.ets</a></div></div></div></div> <p></p></li></ol> </div> <div class="tiledSection"><h2 id="section112271427131913">常见业务弹窗<i class="anchor-icon anchor-icon-link" anchorid="section112271427131913" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section25544154234" class="firsth2">纯文本有持续时间的提示窗<i class="anchor-icon anchor-icon-link" anchorid="section25544154234" tips="复制节点链接"></i></h3><p>一个简单的文本Toast弹窗，到达指定时间后消失。setDuration()设置Toast持续时间。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L121-L133" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.getToast</span>()</li><li>  <span class="hljs-selector-class">.setContent</span>(wrapBuilder(TextToastBuilder))</li><li>    <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-selector-class">.setDuration</span>(CommonConstant.DURATION_3000)</li><li>  <span class="hljs-selector-class">.build</span>()</li><li>  <span class="hljs-selector-class">.show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L121-L133" target="_blank">CommonExamples.ets</a></div></div></div></div> <p><span><img height="475.932254" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.05848690831285768072722060657383:50001231000000:2800:9C13199A5B4DE3B34348BD752B589EC552FCA96C36D4B03701C43C0EE17EC293.png" title="点击放大" width="237.82900400000003"></span></p> </div> <div class="tiledSection"><h3 id="section105701523142918">指定位置弹窗的非模态弹窗<i class="anchor-icon anchor-icon-link" anchorid="section105701523142918" tips="复制节点链接"></i></h3><p>在屏幕底部弹出SnackBar，该弹窗可以响应用户点击跳转页面或者关闭弹窗。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L149-L170" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">specifiedLocationDialog</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">specifiedLocationDialog</span> ?? <span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getCustomDialog</span>()</li><li>  .<span class="hljs-title function_">setOperableContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">SnackbarBuilder</span>), (<span class="hljs-variable">action</span>: <span class="hljs-title class_">DialogAction</span>) =&gt; {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">param</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">SnackbarParams</span>(() =&gt; {</li><li>      <span class="hljs-variable">action</span>.<span class="hljs-title function_">dismiss</span>()</li><li>    }, <span class="hljs-keyword">this</span>.<span class="hljs-variable">pageInfos</span>)</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable">param</span></li><li>  })</li><li>    <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">setConfig</span>({</li><li>    <span class="hljs-variable">dialogBehavior</span>: { <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">false</span>, <span class="hljs-variable">passThroughGesture</span>: <span class="hljs-keyword">true</span> },</li><li>    <span class="hljs-variable">dialogPosition</span>: {</li><li>      <span class="hljs-variable">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-title class_">Bottom</span>,</li><li>      <span class="hljs-variable">offset</span>: { <span class="hljs-variable">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-variable">dy</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">float</span>.<span class="hljs-title class_">specified_location_offset</span>') }</li><li>    }</li><li>  })</li><li>  .<span class="hljs-title function_">build</span>();</li><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">specifiedLocationDialog</span>.<span class="hljs-title function_">show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L149-L170" target="_blank">CommonExamples.ets</a></div></div></div></div> <p><span><img height="467.75275400000004" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.73896203528859784966053815872594:50001231000000:2800:561CCF369948B83E6FFA8C8BCA821600DB27A91F2D1D08CAA3D3D70FD5D0908B.png" title="点击放大" width="236.71579400000002"></span></p> </div> <div class="tiledSection"><h3 id="section182672073918">会定时消失且带弹出动效的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section182672073918" tips="复制节点链接"></i></h3><p>实现一个定时弹窗，6s自动关闭。</p> <ul><li>通过setAnimation()设置弹窗弹出动效。</li><li>通过dialog实例的updateContent()，定时动态刷新弹窗内容。<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L190-L216" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">intervalsDisappearsDialog</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">intervalsDisappearsDialog</span> ?? <span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getCustomDialog</span>()</li><li>  .<span class="hljs-title function_">setContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">TimeToastBuilder</span>), <span class="hljs-variable">params</span>)</li><li>  .<span class="hljs-title function_">setStyle</span>({</li><li>    <span class="hljs-variable">radius</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">float</span>.<span class="hljs-title class_">popup_disappears_intervals_radius</span>'),</li><li>    <span class="hljs-variable">shadow</span>: <span class="hljs-title class_">CommonConstant</span>.<span class="hljs-title class_">CUSTOM_SAMPLE_STYLE_SHADOW</span></li><li>  })</li><li>  .<span class="hljs-title function_">setAnimation</span>({ <span class="hljs-variable">dialogAnimation</span>: <span class="hljs-title class_">AnimationType</span>.<span class="hljs-title class_">UP_DOWN</span> })</li><li>  .<span class="hljs-title function_">setConfig</span>({</li><li>    <span class="hljs-variable">dialogBehavior</span>: { <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">false</span>, <span class="hljs-variable">passThroughGesture</span>: <span class="hljs-keyword">true</span> },</li><li>    <span class="hljs-variable">dialogPosition</span>: {</li><li>      <span class="hljs-variable">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-title class_">Top</span>,</li><li>      <span class="hljs-variable">offset</span>: { <span class="hljs-variable">dy</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">float</span>.<span class="hljs-title class_">popup_disappears_intervals_offset</span>'), <span class="hljs-variable">dx</span>: <span class="hljs-number">0</span> }</li><li>    }</li><li>  })</li><li>  .<span class="hljs-title function_">build</span>();</li><li>
</li><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">intervalsDisappearsDialog</span>.<span class="hljs-title function_">show</span>();</li><li>
</li><li><span class="hljs-variable">intervalID</span> = <span class="hljs-title function_">setInterval</span>(() =&gt; {</li><li>  <span class="hljs-variable">time</span> -= <span class="hljs-number">1</span>;</li><li>  <span class="hljs-variable">params</span>.<span class="hljs-variable">content</span> = <span class="hljs-variable">time</span> + <span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">TIMED_CLOSED</span>;</li><li>  <span class="hljs-keyword">this</span>.<span class="hljs-variable">intervalsDisappearsDialog</span>?.<span class="hljs-title function_">updateContent</span>(<span class="hljs-variable">params</span>)</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-variable">time</span> &lt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-title class_">intervalID</span>) {</li><li>    <span class="hljs-keyword">this</span>.<span class="hljs-variable">intervalsDisappearsDialog</span>?.<span class="hljs-title function_">dismiss</span>();</li><li>    <span class="hljs-title function_">clearInterval</span>(<span class="hljs-variable">intervalID</span>);</li><li>  }</li><li>}, <span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">DURATION_1000</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L190-L216" target="_blank">CommonExamples.ets</a></div></div></div></div> </li></ul> <p><span><img height="480.520754" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.83880839762113974892889726246377:50001231000000:2800:9A858F56799B9C81DED924C73D9964CAB7DDA9C53D7698116B30475D7B30FCC9.png" title="点击放大" width="247.40287600000002"></span></p> </div> <div class="tiledSection"><h3 id="section395448164119">会避让键盘的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section395448164119" tips="复制节点链接"></i></h3><p>通过setConfig()的keyboardAvoidMode可以配置避让模式，CustomKeyboardAvoidMode.CONTENT_AVOID为弹窗内容避让。</p> <p>requestFocusWhenShow配置为true，弹窗显示时，弹窗自动获焦。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L240-L258" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">avoidKeyboardDialog</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">avoidKeyboardDialog</span> ?? <span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getCustomDialog</span>()</li><li>  .<span class="hljs-title function_">setContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">InputBuilder</span>), <span class="hljs-variable">param</span>)</li><li>    <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">setConfig</span>({</li><li>    <span class="hljs-variable">dialogBehavior</span>: {</li><li>      <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">false</span>,</li><li>      <span class="hljs-variable">passThroughGesture</span>: <span class="hljs-keyword">true</span>,</li><li>      <span class="hljs-variable">requestFocusWhenShow</span>: <span class="hljs-keyword">true</span>,</li><li>      <span class="hljs-variable">keyboardAvoidMode</span>: <span class="hljs-title class_">CustomKeyboardAvoidMode</span>.<span class="hljs-title class_">CONTENT_AVOID</span></li><li>    },</li><li>    <span class="hljs-variable">dialogPosition</span>: { <span class="hljs-variable">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-title class_">Bottom</span> }</li><li>  })</li><li>  .<span class="hljs-title function_">build</span>();</li><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">avoidKeyboardDialog</span>.<span class="hljs-title function_">show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L240-L258" target="_blank">CommonExamples.ets</a></div></div></div></div> <p><span><img height="476.929754" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.60989165366957899371949453072746:50001231000000:2800:0A3BEAF371CC34665C9345C26C8B4E9658D43B113EB133993CB91DE4F21A5B27.png" title="点击放大" width="236.57109"></span><span><img height="475.932254" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.32309384689275883515720697646980:50001231000000:2800:E0177E271F99DD61E07E844FA38CC5F5E665D0C4EAE784D1D2672DB5E2EE80AB.png" title="点击放大" width="240.16209000000003"></span></p> </div> <div class="tiledSection"><h3 id="section102481945135720">指向选定组件的带箭头弹窗<i class="anchor-icon anchor-icon-link" anchorid="section102481945135720" tips="复制节点链接"></i></h3><p>通过getPopup()构造Popup弹窗实例，setStyle()中enableArrow、arrowOffset、arrowWidth、arrowHeight可配置箭头属性；</p> <p>setConfig()中preferPlacement可配置箭头偏向。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>绑定组件需要调用setComponentTargetId(targetCompId)，targetCompId组件id标识确保唯一，否则会报错且弹窗位置异常。</p> </div></div></div> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L279-L303" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getPopup</span>()</li><li>  <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">setComponentTargetId</span>(<span class="hljs-string">'PopupDialog1'</span>)</li><li>  .<span class="hljs-title function_">setStyle</span>({</li><li>    <span class="hljs-variable">radius</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">float</span>.<span class="hljs-title class_">image_popup_builder_borderRadius</span>'),</li><li>    <span class="hljs-variable">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">White</span>,</li><li>    <span class="hljs-variable">shadow</span>: {</li><li>      <span class="hljs-variable">radius</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">float</span>.<span class="hljs-title class_">image_popup_shadow_radius</span>'),</li><li>      <span class="hljs-variable">color</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">color</span>.<span class="hljs-title class_">image_popup_shadow_color</span>')</li><li>    },</li><li>  })</li><li>  .<span class="hljs-title function_">setConfig</span>({</li><li>    <span class="hljs-variable">dialogPosition</span>: {</li><li>      <span class="hljs-variable">preferPlacement</span>: <span class="hljs-title class_">Placement</span>.<span class="hljs-title class_">Bottom</span></li><li>    }</li><li>  })</li><li>  .<span class="hljs-title function_">build</span>()</li><li>  .<span class="hljs-title function_">show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L279-L303" target="_blank">CommonExamples.ets</a></div></div></div></div> <p><span><img height="469.74775400000004" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.93940881217595272532036437640658:50001231000000:2800:8CBE0B436C9B13BF7CFEF95C8A03EDC1C1B55B34D47775B6C7CD080A1601DE00.png" title="点击放大" width="229.80405000000002"></span></p> </div> <div class="tiledSection"><h3 id="section3273176135820">点击蒙层自动关闭的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section3273176135820" tips="复制节点链接"></i></h3><p>弹出此类型弹窗需要打开isModal蒙层开关，并将autoDismiss设置为true</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L351-L367" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.maskCloseDialog = <span class="hljs-keyword">this</span>.maskCloseDialog ?? DialogHub.getCustomDialog()</li><li>  <span class="hljs-comment">// ...</span></li><li>  .setConfig({ dialogBehavior: { isModal: <span class="hljs-literal">true</span>, autoDismiss: <span class="hljs-literal">true</span>, passThroughGesture: <span class="hljs-literal">false</span> } })</li><li>  .build();</li><li><span class="hljs-keyword">this</span>.maskCloseDialog.show();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L351-L367" target="_blank">CommonExamples.ets</a></div></div></div></div> <p><span><img height="480.121621" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.70456416945182770107179301717911:50001231000000:2800:0D2074B01161890F581211229B669D38A1EBB54119B398B218AB5810F7D52109.png" title="点击放大" width="246.97395100000003"></span></p> </div> <div class="tiledSection"><h3 id="section1422171715581">可主动关闭的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section1422171715581" tips="复制节点链接"></i></h3><p>能够通过点击弹窗按钮关闭弹窗，设置弹窗Content时，调用setOperableContent()，并将DialogHub的Dismiss事件作为参数传递给Builder。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L383-L400" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">activelyCloseDialog</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">activelyCloseDialog</span> ?? <span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getCustomDialog</span>()</li><li>  .<span class="hljs-title function_">setOperableContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">ActiveCloseBuilder</span>), (<span class="hljs-variable">action</span>: <span class="hljs-title class_">DialogAction</span>) =&gt; {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">param</span> =</li><li>      <span class="hljs-variable">new</span> <span class="hljs-title function_">ActiveCloseParams</span>(<span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">LOGOUT</span>, <span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">LOGOUT_TIPS</span>,</li><li>        <span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">CANCEL</span>, <span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">OUT</span>, () =&gt; {</li><li>          <span class="hljs-variable">action</span>.<span class="hljs-title function_">dismiss</span>();</li><li>        }, () =&gt; {</li><li>          <span class="hljs-keyword">this</span>.<span class="hljs-variable">activelyCloseDialog</span>?.<span class="hljs-title function_">dismiss</span>();</li><li>        })</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable">param</span>;</li><li>  })</li><li>  .<span class="hljs-title function_">setConfig</span>({ <span class="hljs-variable">dialogBehavior</span>: { <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">true</span>, <span class="hljs-variable">autoDismiss</span>: <span class="hljs-keyword">false</span>, <span class="hljs-variable">passThroughGesture</span>: <span class="hljs-keyword">false</span> } })</li><li>  .<span class="hljs-title function_">setStyle</span>({</li><li>    <span class="hljs-variable">radius</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">float</span>.<span class="hljs-title class_">active_close_builder_borderRadius</span>'),</li><li>    <span class="hljs-variable">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">White</span>,</li><li>  })</li><li>  .<span class="hljs-title function_">build</span>();</li><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">activelyCloseDialog</span>.<span class="hljs-title function_">show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L383-L400" target="_blank">CommonExamples.ets</a></div></div></div></div> <p><span><img height="475.73275400000006" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162916.93084272338033631808623823766148:50001231000000:2800:53EE99B15C29CAD27F41A655BCCDFFBF0A64B41CFD3614A1186A4E996DCDB036.png" title="点击放大" width="237.72021"></span></p> </div> <div class="tiledSection"><h3 id="section1182172455819">能够动态调整高度的底部弹窗<i class="anchor-icon anchor-icon-link" anchorid="section1182172455819" tips="复制节点链接"></i></h3><p>实现动态调整弹窗高度，不同高度展示不同弹窗内容。</p> <ul><li>获取DialogHub的Sheet类型弹窗实例<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L70-L75" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">adjustSheetDialog</span> = <span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">getSheet</span>()</li><li>  .<span class="hljs-title function_">setContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">SheetBuilder</span>), <span class="hljs-variable">sheetParams</span>)</li><li>  .<span class="hljs-title function_">setStyle</span>({ <span class="hljs-variable">detents</span>: [<span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">SHEET_MIDDLE</span>, <span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">SHEET_LARGE</span>] })</li><li>  .<span class="hljs-title function_">setConfig</span>({ <span class="hljs-variable">enableOutsideInteractive</span>: <span class="hljs-keyword">false</span>, <span class="hljs-variable">scrollSizeMode</span>: <span class="hljs-title class_">ScrollSizeMode</span>.<span class="hljs-title class_">CONTINUOUS</span> })</li><li>  .<span class="hljs-title function_">setComponentTargetId</span>(<span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">ADJUST_SHEET_DIALOG_ID</span>)</li><li>  .<span class="hljs-title function_">build</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L70-L75" target="_blank">CommonExamples.ets</a></div></div></div></div> </li><li>弹窗实例增加Sheet高度监听onHeightDidChange()，当高度变化到一定程度，updateContent()刷新弹窗内容<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L79-L417" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.adjustSheetDialog.addLifeCycleListener({</li><li>  onHeightDidChange: (h: number) =&gt; {</li><li>    let vpValue = <span class="hljs-keyword">this</span>.getUIContext().px2vp(h)</li><li>    <span class="hljs-keyword">if</span> (vpValue &lt;= CommonConstant.SHEET_MIDDLE &amp;&amp; sheetParams.type != <span class="hljs-number">0</span>) {</li><li>      sheetParams.type = <span class="hljs-number">0</span></li><li>      <span class="hljs-keyword">this</span>.adjustSheetDialog?.updateContent(sheetParams)</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (vpValue &gt; CommonConstant.SHEET_MIDDLE &amp;&amp; sheetParams.type != <span class="hljs-number">1</span>) {</li><li>      sheetParams.type = <span class="hljs-number">1</span></li><li>      <span class="hljs-keyword">this</span>.adjustSheetDialog?.updateContent(sheetParams)</li><li>    }</li><li>  },</li><li>  <span class="hljs-comment">// ...</span></li><li>});</li><li>
</li><li><span class="hljs-keyword">this</span>.adjustSheetDialog?.show();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L79-L417" target="_blank">CommonExamples.ets</a></div></div></div></div> </li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>sheet类型弹窗须调用<span style="color: rgb(0,32,96);">setComponentTargetId(targetCompId</span><span style="color: rgb(0,32,96);">)</span>以实现页面级弹窗，并且保证绑定的组件id存在。</p> </div></div></div> <p><span><img height="471.144121" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.85868149766121530209549694710087:50001231000000:2800:3BD56CA3793AF7E87D2C303556F8AECF9EC2F3290BBD564FB666630E5E684C56.png" title="点击放大" width="233.350229"></span><span><img height="472.141621" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.30612288185285206335238826527717:50001231000000:2800:A852CDA56CFE3001A6C400C403C8303DBA44648054D258AAB7B84AD90CDD8414.png" title="点击放大" width="242.79150000000004"></span></p> </div> <div class="tiledSection"><h3 id="section14106547404">应用感知弹窗的打开、关闭<i class="anchor-icon anchor-icon-link" anchorid="section14106547404" tips="复制节点链接"></i></h3><ul><li>对弹窗实例增加生命周期，拦截弹窗的展示与销毁。<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L51-L60" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.sensorDialog?.addLifeCycleListener({</li><li>  onWillShow: () =&gt; {</li><li>    <span class="hljs-keyword">this</span>.isSensorDialogShow = <span class="hljs-literal">true</span></li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  },</li><li>  onWillDismiss: (reason: DialogDismissReason) =&gt; {</li><li>    <span class="hljs-keyword">this</span>.isSensorDialogShow = <span class="hljs-literal">false</span></li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L51-L60" target="_blank">CommonExamples.ets</a></div></div></div></div> </li><li>直接获取弹窗状态<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L64-L64" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.sensorDialog?.getStatus();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/CommonExamples.ets#L64-L64" target="_blank">CommonExamples.ets</a></div></div></div></div> </li></ul> <p><span><img height="463.76275400000003" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.71249207974164128671195068786336:50001231000000:2800:AB97D97C7706665FFFDADE29094746822D1F8729639BA13C7C8D05A48B2A8D9D.png" title="点击放大" width="226.85650400000003"></span><span><img height="464.76025400000003" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.56687311425798055234957260724692:50001231000000:2800:970A888182125617A4E3532975374E4EDC6C5C2D22EC16E22A2BC35D22CDDADA.png" title="点击放大" width="227.16865500000003"></span></p> </div> <div class="tiledSection"><h2 id="section391205011266">弹窗与周边的交互<i class="anchor-icon anchor-icon-link" anchorid="section391205011266" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section41305111638" class="firsth2">弹窗存在时如何定义返回手势是退出页面或关闭弹窗<i class="anchor-icon anchor-icon-link" anchorid="section41305111638" tips="复制节点链接"></i></h3><p>配置状态变量backCloseDialog，设置true表示返回手势作用于弹窗，false表示作用于页面。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L40-L40" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@State</span> backCloseDialog: <span class="hljs-type">boolean</span> = <span class="hljs-literal">false</span>;</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L40-L40" target="_blank">OperableExample.ets</a></div></div></div></div> <p>在onBackPressed()中拦截手势并选择是退出页面还是关闭最上层弹窗</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L543-L552" data-highlighted="yes"><ol class="linenums"><li>.onBackPressed(() =&gt; {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.backCloseDialog) {</li><li>    let tmp: DialogBackPressResult = DialogHub.dispatchBackPressToDialog();</li><li>    <span class="hljs-keyword">if</span> (tmp !== DialogBackPressResult.NO_DIALOG) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">this</span>.pageInfos.pop();</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L543-L552" target="_blank">OperableExample.ets</a></div></div></div></div> </div> <div class="tiledSection"><h3 id="section141319111830">用户可以透过弹窗内容操作页面<i class="anchor-icon anchor-icon-link" anchorid="section141319111830" tips="复制节点链接"></i></h3><p>弹出Toast类型的弹窗，或者主动调用setConfig()设置passThroughGesture为true，可实现弹窗内容透传手势。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L232-L243" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.passThroughGestureDialog = DialogHub.getToast()</li><li>  .setContent(wrapBuilder(IconToastBuilder))</li><li>    <span class="hljs-comment">// ...</span></li><li>  .setDuration(CommonConstant.DURATION_2000)</li><li>  .build();</li><li><span class="hljs-keyword">this</span>.passThroughGestureDialog.show();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L232-L243" target="_blank">OperableExample.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/Index.ets#L19-L22" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">DialogHub</span>.<span class="hljs-title function_">createCustomTemplate</span>(<span class="hljs-variable">CommonConstant</span>.<span class="hljs-variable">CUSTOM_TEMPLATE_SIMPLE</span>)</li><li>  .<span class="hljs-title function_">setContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">TextToastBuilder</span>))</li><li>  .<span class="hljs-title function_">setStyle</span>({ <span class="hljs-variable">backgroundColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">White</span> })</li><li>  .<span class="hljs-title function_">setConfig</span>({ <span class="hljs-variable">dialogBehavior</span>: { <span class="hljs-variable">passThroughGesture</span>: <span class="hljs-keyword">true</span>, <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">false</span> } })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/Index.ets#L19-L22" target="_blank">Index.ets</a></div></div></div></div> <p><span><img height="466.555754" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.10607895974479084663634351230705:50001231000000:2800:82E480D5BD55409837905279CEA134E790F630E693AFC625C8DBCA0EF065EDD2.png" title="点击放大" width="228.302879"></span></p> </div> <div class="tiledSection"><h3 id="section1013112118319">需要向页面返回数据的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section1013112118319" tips="复制节点链接"></i></h3><p>给Builder参数传递修改页面数据的回调函数，在Builder里面进行调用。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L274-L288" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable language_">this</span>.<span class="hljs-property">returnDataDialog</span> = <span class="hljs-title class_">DialogHub</span>.<span class="hljs-title function_">getCustomDialog</span>()</li><li>  .<span class="hljs-title function_">setOperableContent</span>(<span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">InputCallbackBuilder</span>), <span class="hljs-function">(<span class="hljs-params">action: DialogAction</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> parms = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputCallbackParams</span>(<span class="hljs-title class_">CommonConstant</span>.<span class="hljs-property">UPDATE_TAG</span>, <span class="hljs-function">() =&gt;</span> {</li><li>      action.<span class="hljs-title function_">dismiss</span>();</li><li>    }, <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tagName</span> = value;</li><li>    })</li><li>    <span class="hljs-keyword">return</span> parms;</li><li>  })</li><li>  .<span class="hljs-title function_">setStyle</span>({</li><li>    <span class="hljs-attr">radius</span>: $r(<span class="hljs-string">'app.float.InputCallbackBuilderBorderRadius'</span>)</li><li>  })</li><li>  .<span class="hljs-title function_">setConfig</span>({ <span class="hljs-attr">dialogBehavior</span>: { <span class="hljs-attr">isModal</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">autoDismiss</span>: <span class="hljs-literal">false</span> } })</li><li>  .<span class="hljs-title function_">build</span>();</li><li><span class="hljs-variable language_">this</span>.<span class="hljs-property">returnDataDialog</span>.<span class="hljs-title function_">show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L274-L288" target="_blank">OperableExample.ets</a></div></div></div></div> <p><span><img height="472.34019" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.01695518222428124355928731711125:50001231000000:2800:82A0000E423F929807AACA8E4875E0C81BF8C014448B1A02A43F6E6D494913CA.png" title="点击放大" width="233.58962900000003"></span><span><img height="471.543254" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.91519911861586489328473072046335:50001231000000:2800:D53E481512407CBC9DCCE39BE252E1A345872C96FB123D350A2D6AA6D6D610FE.png" title="点击放大" width="235.52571"></span></p> </div> <div class="tiledSection"><h3 id="section1813121114315">父页面刷新正在展示的弹窗内容<i class="anchor-icon anchor-icon-link" anchorid="section1813121114315" tips="复制节点链接"></i></h3><p>修改Builder参数内容，再调用updateContent()进行修改。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L304-L321" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-keyword">params</span> = <span class="hljs-keyword">new</span> ProgressParams(CommonConstant.ProgressName, CommonConstant.ProgressNameStart,</li><li>  CommonConstant.ProgressNameTotal);</li><li>
</li><li><span class="hljs-keyword">this</span>.updateByParentDialog = DialogHub.getCustomDialog()</li><li>  .setContent(wrapBuilder(ProgressBuilder), <span class="hljs-keyword">params</span>)</li><li>  .setStyle({ radius: $r(<span class="hljs-string">'app.float.ProgressBuilderProgressBorderRadius'</span>) })</li><li>  .setConfig({ dialogBehavior: { isModal: <span class="hljs-literal">true</span>, autoDismiss: <span class="hljs-literal">false</span> } })</li><li>  .build();</li><li><span class="hljs-keyword">this</span>.updateByParentDialog.show();</li><li>
</li><li><span class="hljs-keyword">this</span>.intervalID = setInterval(() =&gt; {</li><li>  <span class="hljs-keyword">params</span>.<span class="hljs-keyword">value</span> += <span class="hljs-number">1</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">params</span>.<span class="hljs-keyword">value</span> &gt;= CommonConstant.ProgressNameTotal &amp;&amp; <span class="hljs-keyword">this</span>.intervalID &gt;= <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-keyword">this</span>.updateByParentDialog?.dismiss();</li><li>    clearInterval(<span class="hljs-keyword">this</span>.intervalID);</li><li>  }</li><li>  <span class="hljs-keyword">this</span>.updateByParentDialog?.updateContent(<span class="hljs-keyword">params</span>);</li><li>}, CommonConstant.Interval_20);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L304-L321" target="_blank">OperableExample.ets</a></div></div></div></div> <p><span><img height="462.76419" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.25356837846611454772697651433145:50001231000000:2800:C781436AE08D74EC68B209D9BD480311512CBE86F2E47B3324135CC95905188F.png" title="点击放大" width="228.913349"></span></p> </div> <div class="tiledSection"><h3 id="section198508281251">页面需要感知当前页面是否存在弹窗<i class="anchor-icon anchor-icon-link" anchorid="section198508281251" tips="复制节点链接"></i></h3><p>DialogHub注册页面弹窗数监听，当前页面弹窗数量发生变化会触发。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L73-L77" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">DialogHub</span>.<span class="hljs-title function_">addEventListener</span>({</li><li>  <span class="hljs-title class_">OnCurentPageDialogNumberChange</span>: <span class="hljs-function">(<span class="hljs-params">newNum: <span class="hljs-built_in">number</span>, oldNum: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogNum</span> = newNum;</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L73-L77" target="_blank">OperableExample.ets</a></div></div></div></div> </div> <div class="tiledSection"><h3 id="section19131181110319">存在跳转链接的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section19131181110319" tips="复制节点链接"></i></h3><p>点击弹窗上特定内容，跳转到其他页面。</p> <p>router：在弹窗Builder里通过router模板跳转。</p> <p>Navigation：将pageInfos传入弹窗Builder，然后在弹窗里进行push页面。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L374-L381" data-highlighted="yes"><ol class="linenums"><li>let parms = new SkipParams(() =&gt; {</li><li>  <span class="hljs-keyword">this</span>.skipDialog?.dismiss();</li><li>}, <span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.pageInfos);</li><li><span class="hljs-keyword">this</span>.skipDialog?.updateContent(parms);</li><li><span class="hljs-keyword">this</span>.skipDialog?.updateConfig({</li><li>  dialogPosition: { offset: { dx: <span class="hljs-number">0</span>, dy: <span class="hljs-number">0</span> } }</li><li>});</li><li><span class="hljs-keyword">this</span>.skipDialog?.show();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L374-L381" target="_blank">OperableExample.ets</a></div></div></div></div> <p><span><img height="469.548254" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.73488704315157954181235147525340:50001231000000:2800:2C6B8F052E5E22B01B23BBC53C5336CB7607BFE13F89A5F92E2B8883A72F88AD.png" title="点击放大" width="229.83996000000002"></span></p> </div> <div class="tiledSection"><h3 id="section1131811733">折叠屏展开态不同位置的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section1131811733" tips="复制节点链接"></i></h3><p>弹窗默认在屏幕中间；通过设置弹窗偏移量可以在不同位置进行弹窗。</p> <p>弹窗在左半屏：</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L494-L501" data-highlighted="yes"><ol class="linenums"><li>let parms = new SkipParams(() =&gt; {</li><li>  <span class="hljs-keyword">this</span>.skipDialog?.dismiss()</li><li>}, <span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.pageInfos);</li><li><span class="hljs-keyword">this</span>.skipDialog?.updateContent(parms);</li><li><span class="hljs-keyword">this</span>.skipDialog?.updateConfig({</li><li>  dialogPosition: { offset: CommonConstant.LEFT_DIALOG_OFFSET }</li><li>});</li><li><span class="hljs-keyword">this</span>.skipDialog?.show();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L494-L501" target="_blank">OperableExample.ets</a></div></div></div></div> <p><span><img height="634.135754" originheight="1102" originwidth="988" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.09766715427651204206473529831887:50001231000000:2800:7B39EE3C5EA3EA7ADD15AB44C1B892F1A7FD52CA5CE392DAA2FE9A5C0E2077F8.png" title="点击放大" width="570.9579610000001"></span></p> <p>弹窗在右半屏：</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L517-L524" data-highlighted="yes"><ol class="linenums"><li>let parms = new SkipParams(() =&gt; {</li><li>  <span class="hljs-keyword">this</span>.skipDialog?.dismiss();</li><li>}, <span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.pageInfos);</li><li><span class="hljs-keyword">this</span>.skipDialog?.updateContent(parms);</li><li><span class="hljs-keyword">this</span>.skipDialog?.updateConfig({</li><li>  dialogPosition: { offset: CommonConstant.RIGHT_DIALOG_OFFSET }</li><li>});</li><li><span class="hljs-keyword">this</span>.skipDialog?.show();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/OperableExample.ets#L517-L524" target="_blank">OperableExample.ets</a></div></div></div></div> <p><span><img height="635.73069" originheight="1102" originwidth="988" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162917.88726933792492210985819531071016:50001231000000:2800:2CC7244920E4EAF5185AF3193D725A8D9325B33C760C22112C25CA8E327C5E04.png" title="点击放大" width="571.556594"></span></p> </div> <div class="tiledSection"><h2 id="section36301070277">弹窗内容复用场景<i class="anchor-icon anchor-icon-link" anchorid="section36301070277" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section15114155612518" class="firsth2">通过自定义弹窗模版进行弹窗<i class="anchor-icon anchor-icon-link" anchorid="section15114155612518" tips="复制节点链接"></i></h3><ul><li>创建弹窗模板<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L44-L63" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.createToastTemplate</span>(CommonConstant.MY_TEMPLATE_NAME)</li><li>  <span class="hljs-selector-class">.setTextContent</span>(CommonConstant.TOAST_DISPLAYED_CONTENT)</li><li>    <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-selector-class">.setDuration</span>(CommonConstant.TOAST_DISPLAY_DURATION)</li><li>  <span class="hljs-selector-class">.register</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L44-L63" target="_blank">ReuseExample.ets</a></div></div></div></div> </li><li>直接弹出模板<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L125-L125" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.getToastTemplate</span>(CommonConstant.MY_TEMPLATE_NAME)?<span class="hljs-selector-class">.build</span>()<span class="hljs-selector-class">.show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L125-L125" target="_blank">ReuseExample.ets</a></div></div></div></div> </li><li>删除弹窗模板<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L85-L85" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.removeTemplate</span>(CommonConstant.MY_TEMPLATE_NAME);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L85-L85" target="_blank">ReuseExample.ets</a></div></div></div></div> </li><li>随机修改弹窗模板背景色<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L102-L108" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> r = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">239</span> + <span class="hljs-number">16</span>) % <span class="hljs-number">255</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>);</li><li><span class="hljs-keyword">let</span> g = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">239</span> + <span class="hljs-number">16</span>) % <span class="hljs-number">255</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>);</li><li><span class="hljs-keyword">let</span> b = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">239</span> + <span class="hljs-number">16</span>) % <span class="hljs-number">255</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>);</li><li><span class="hljs-keyword">let</span> color = <span class="hljs-string">'#ff'</span> + r + g + b;</li><li><span class="hljs-title class_">DialogHub</span>.<span class="hljs-title function_">updateToastTemplate</span>(<span class="hljs-title class_">CommonConstant</span>.<span class="hljs-property">MY_TEMPLATE_NAME</span>)?.<span class="hljs-title function_">setStyle</span>({</li><li>  <span class="hljs-attr">backgroundColor</span>: color</li><li>}).<span class="hljs-title function_">register</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L102-L108" target="_blank">ReuseExample.ets</a></div></div></div></div> </li><li>(可选)通过弹窗模板，定义本次弹出动画后弹出<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L142-L144" data-highlighted="yes"><ol class="linenums"><li>DialogHub<span class="hljs-selector-class">.getToastTemplate</span>(CommonConstant.MY_TEMPLATE_NAME)?<span class="hljs-selector-class">.setAnimation</span>({</li><li>  dialogAnimation: AnimationType.UP_DOWN</li><li>})<span class="hljs-selector-class">.build</span>()<span class="hljs-selector-class">.show</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L142-L144" target="_blank">ReuseExample.ets</a></div></div></div></div> </li></ul> </div> <div class="tiledSection"><h3 id="section2011414569514">定义一个可复用的弹窗<i class="anchor-icon anchor-icon-link" anchorid="section2011414569514" tips="复制节点链接"></i></h3><p>将弹窗实例对象记录，下次弹窗复用。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L17-L17" data-highlighted="yes"><ol class="linenums"><li>originalTemplateDialog?: InfToast;</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L17-L17" target="_blank">ReuseExample.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L67-L68" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.originalTemplateDialog =</li><li>  DialogHub.getToastTemplate(CommonConstant.MY_TEMPLATE_NAME)?.build();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L67-L68" target="_blank">ReuseExample.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L189-L189" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.originalTemplateDialog?.show();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/ReuseExample.ets#L189-L189" target="_blank">ReuseExample.ets</a></div></div></div></div> </div> <div class="tiledSection"><h2 id="section117894239271">多个弹窗并存场景<i class="anchor-icon anchor-icon-link" anchorid="section117894239271" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section1611418567514" class="firsth2">新弹窗被已有弹窗抑制<i class="anchor-icon anchor-icon-link" anchorid="section1611418567514" tips="复制节点链接"></i></h3><ul><li><strong>弹窗A弹出时抑制弹窗B的弹出</strong><p>可以通过弹窗A对象的getStatus()方法获取弹窗A的状态，以判断是否允许弹窗B弹出。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L129-L131" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dialogA?.getStatus() != DialogStatus.SHOW) {</li><li>  <span class="hljs-keyword">this</span>.dialogB?.show();</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L129-L131" target="_blank">MultiDialogExample.ets</a></div></div></div></div> </li></ul> <ul><li><strong>当前页面存在弹窗时抑制弹窗C的弹出</strong><p>通过调用DialogHub的getCurrentPageDialogs()方法获取当前页面的弹窗数量，判断数量是否为0，并据此控制弹窗C的弹出。</p> <div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L152-L154" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (DialogHub.getCurrentPageDialogs().length === <span class="hljs-number">0</span>) {</li><li>  <span class="hljs-keyword">this</span>.dialogC?.show();</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L152-L154" target="_blank">MultiDialogExample.ets</a></div></div></div></div> </li></ul> </div> <div class="tiledSection"><h3 id="section1125015111676">开发者可以控制弹窗层级实现弹窗的相互覆盖<i class="anchor-icon anchor-icon-link" anchorid="section1125015111676" tips="复制节点链接"></i></h3><ul><li>设置弹窗层级setLayerIndex()<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L217-L220" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.dialogF = <span class="hljs-keyword">this</span>.dialogF ??</li><li><span class="hljs-keyword">this</span>.createMessageBuilder(CommonConstant.DIALOG_F, CommonConstant.DIALOG_F_CONTENT)</li><li>  .setLayerIndex(CommonConstant.DIALOG_F_LAYER_INDEX)</li><li>  .build();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L217-L220" target="_blank">MultiDialogExample.ets</a></div></div></div></div> </li></ul> <ul><li>设置置顶弹窗OLD_FIRST (老置顶弹窗优先，新的置顶弹窗无法弹出)<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L238-L243" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.dialogG = <span class="hljs-keyword">this</span>.dialogG ??</li><li><span class="hljs-keyword">this</span>.createMessageBuilder(CommonConstant.DIALOG_G, CommonConstant.DIALOG_G_CONTENT).setConfig({</li><li>  dialogBehavior: {</li><li>    layerPolicy: { alwaysTop: <span class="hljs-literal">true</span>, topDialogPriority: TopDialogPriority.OLD_FIRST }</li><li>  }</li><li>}).build();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L238-L243" target="_blank">MultiDialogExample.ets</a></div></div></div></div> </li></ul> <ul><li>设置置顶弹窗NEW_FIRST (新弹窗优先，新的置顶弹窗弹出，老置顶弹窗被覆盖)<div class="screenLinkPre"><div _ngcontent-jam-c106="" class="highlight-div"><div _ngcontent-jam-c106="" class="highlight-div-header"><div _ngcontent-jam-c106="" class="highlight-div-header-left"><div _ngcontent-jam-c106="" class="handle-button expand-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jam-c106="" class="highlight-div-header-right"><div _ngcontent-jam-c106="" class="handle-button ai-button"></div><div _ngcontent-jam-c106="" class="handle-button line-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jam-c106="" class="handle-button theme-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jam-c106="" class="handle-button copy-button"><div _ngcontent-jam-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jam-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L261-L266" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.dialogH = <span class="hljs-keyword">this</span>.dialogH ??</li><li><span class="hljs-keyword">this</span>.createMessageBuilder(CommonConstant.DIALOG_H, CommonConstant.DIALOG_H_CONTENT).setConfig({</li><li>  dialogBehavior: {</li><li>    layerPolicy: { alwaysTop: <span class="hljs-literal">true</span>, topDialogPriority: TopDialogPriority.NEW_FIRST }</li><li>  }</li><li>}).build();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DialogHub/blob/master/entry/src/main/ets/pages/MultiDialogExample.ets#L261-L266" target="_blank">MultiDialogExample.ets</a></div></div></div></div> </li></ul> </div> <div class="tiledSection"><h2 id="section157551830876">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section157551830876" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section46491370285" class="firsth2">如何处理弹窗的获焦问题<i class="anchor-icon anchor-icon-link" anchorid="section46491370285" tips="复制节点链接"></i></h3><ul><li>对于Sheet类别的弹窗，弹窗弹出后的焦点行为与系统BindSheet保持一致；</li><li>DialogHub提供的其他类别弹窗，如CustomDialg，在弹窗弹出时父页面的焦点默认不会转移到弹窗上。<p>开发者可以配置弹窗的requestFocusWhenShow属性实现：弹窗弹出时，将页面的焦点转移到弹窗中。进而实现<a href="/consumer/cn/doc/best-practices/bpta-hadss_dialoghub#section395448164119">会避让键盘的弹窗</a>的效果。</p> </li></ul> </div> <div class="tiledSection"><h3 id="section2073952111281">Popup绑定组件，id报错<i class="anchor-icon anchor-icon-link" anchorid="section2073952111281" tips="复制节点链接"></i></h3><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-component-id#id" target="_blank">组件标识id</a>需要开发者保证唯一性。setComponentTargetId()设置绑定的组件id后，如果id有问题，会导致在show的时候报错且弹窗位置异常。</p> <ul><li>id不存在：不存在此id的节点，排查绑定组件是否设置该id属性。错误码70000001。</li></ul> </div> <div class="tiledSection"><h3 id="section798779111820">调用build()与show()接口后，无法继续添加属性<i class="anchor-icon anchor-icon-link" anchorid="section798779111820" tips="复制节点链接"></i></h3><p>调用build()接口后返回的是Dialog实例，只提供更新配置的接口。</p> </div> <div class="tiledSection"><h3 id="section9161161562815">removeTemplate()后，使用模板创建的弹窗实例可以继续显示<i class="anchor-icon anchor-icon-link" anchorid="section9161161562815" tips="复制节点链接"></i></h3><p>删除模板不影响之前通过模板已经创建的弹窗的显示和相关调用。</p> </div> <div class="tiledSection"><h3 id="section1120953211231">调用isTemplateExist()判断模板存在，getxxxTemplate模板报错50000003<i class="anchor-icon anchor-icon-link" anchorid="section1120953211231" tips="复制节点链接"></i></h3><p>模板创建和获取时，需要保证弹窗类型一致，否则无法获取模板并报错，错误码50000003。</p> <p>可在获取模板前调用queryTemplate()查询模板的弹窗类型。</p> </div> <div class="tiledSection"><h3 id="section18336154910332">Toast弹窗置顶策略<i class="anchor-icon anchor-icon-link" anchorid="section18336154910332" tips="复制节点链接"></i></h3><p>Toast弹窗默认为置顶弹窗，且置顶冲突策略为TopDialogPriority.NEW_FIRST。</p> </div> <div class="tiledSection"><h3 id="section105722543286">键盘避让模式变化<i class="anchor-icon anchor-icon-link" anchorid="section105722543286" tips="复制节点链接"></i></h3><p>在使用DialogHub进行弹窗后，会将页面键盘避让模式修改为RESIZE，当页面无弹窗或者页面跳转时，避让模式还原。</p> </div> <div class="tiledSection"><h2 id="section9217418124510">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section9217418124510" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/DialogHub" target="_blank">DialogHub Sample示例</a></li></ul> </div> </div></div>