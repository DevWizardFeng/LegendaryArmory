<h1 _ngcontent-rsi-c119="" class="doc-title ng-star-inserted" title="多设备交互"> 多设备交互 </h1>

<div _ngcontent-rsi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section11480206113810">概述<i class="anchor-icon anchor-icon-link" anchorid="section11480206113810" tips="复制节点链接"></i></h2><p>在开发<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-overview" target="_blank">”一多”</a>应用时，除了需要针对手机、平板、电脑、穿戴设备、智慧屏等设备的硬件差异进行适配外，还应关注其在交互方式上的差异性。不同设备的用户交互依赖于各异的输入设备，从而形成不同的交互方式，例如：手机/平板通过手指触控屏幕、电脑通过鼠标控制光标、智慧屏通过灵犀指向遥控控制光标。为确保应用在各类设备上均具备自然流畅的可用性，开发时需系统性关注并差异化适配相应的交互事件。</p> </div> <div class="tiledSection"><h2 id="section11794812173816">多设备交互<i class="anchor-icon anchor-icon-link" anchorid="section11794812173816" tips="复制节点链接"></i></h2><p>多设备交互是指应用在不同设备上为实现同一功能，适配相应的输入设备进行交互操作。例如，在视频类应用中控制视频播放/暂停时，不同设备的交互形式各异：</p> <ul><li>直板机：单击屏幕。<p>通过触屏事件触发播放/暂停逻辑，主要依赖手指触碰触摸屏输入。</p> </li><li>平板：单击屏幕、外接鼠标单击左键、外接键盘按下空格键。<p>支持多模态输入，可响应触屏点击事件；当连接外接鼠标时，支持鼠标左键点击事件；连接外接键盘时，可通过监听键盘事件（如空格键）实现快捷控制。</p> </li><li>电脑：单击屏幕、外接鼠标单击左键、触控板按下或点击左键、外接键盘按下空格键。<p>支持多模态输入，可响应触屏点击事件；当连接外接鼠标时，支持鼠标左键点击事件；连接外接触控板时，支持触控板点击事件；连接外接键盘时，可通过监听键盘事件（如空格键）实现快捷控制。</p> </li><li>智慧屏：灵犀指向遥控单击OK键、灵犀悬浮触控单击触控板。<p>智慧屏独特的输入设备，灵犀指向遥控实现光标定位后，按下OK键触发点击逻辑；配有灵犀悬浮触控，点击触控板触发点击逻辑。</p> </li><li>穿戴设备：单击屏幕。<p>通过触屏事件触发播放/暂停逻辑，主要依赖手指触碰触摸屏输入。</p> </li></ul> <p>多设备交互开发需针对触屏、鼠标、键盘、遥控器等不同输入设备进行交互适配，在保证功能一致性的基础上，遵循各设备的交互规范，实现自然流畅的应用体验。</p> </div> <div class="tiledSection"><h2 id="section088812013815">交互归一<i class="anchor-icon anchor-icon-link" anchorid="section088812013815" tips="复制节点链接"></i></h2><p>交互归一是一种面向多设备输入的响应框架，通过将不同输入设备的交互行为抽象为同一事件，来简化开发逻辑，例如：触屏点击、触控板点击、鼠标左键单击、遥控器OK键确认等统一抽象为点击事件；遥控器功能键、键盘快捷键抽象为按键事件。交互归一实现对多样化输入源的统一处理，确保组件在不同交互场景下具备一致的行为逻辑与用户体验。</p> <div class="fignone"><span class="figcap"><b>图1 </b>输入设备</span><br><span><img height="424.074" originheight="1622" originwidth="3510" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163117.91706551642973191531753514615634:50001231000000:2800:A554E5BB583AE18282C82ED46B36A776C0480F80019C76EF111D524A33245701.png" title="点击放大" width="920"></span></div> <p>交互归一并非将所有输入方式简单合并为单一事件或通过一个API处理，而是通过对不同设备的几十种底层交互事件进行语义抽象与归类，在保证交互差异可控的前提下，大幅减少事件类型数量。最终形成的是一组标准化的交互API集合，开发者仍需根据具体场景选择并适配相应的抽象事件，以实现跨设备的一致性与灵活性兼顾的交互体验。</p> <p>ArkUI框架提供了丰富的交互功能，支持直接处理<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#section151791829184110">基础输入事件</a>，以及由这些事件驱动的<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#section182814229423">手势事件</a>，同时支持<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#section41561332436">拖拽事件</a>、<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#section168661941154220">焦点事件</a>等复杂交互。</p> </div> <div class="tiledSection"><h3 id="section151791829184110" class="firsth2">基础输入事件<i class="anchor-icon anchor-icon-link" anchorid="section151791829184110" tips="复制节点链接"></i></h3><p>当用户使用输入设备（如触摸屏、键盘、鼠标或触控板）进行交互时，设备驱动层会检测并生成相应的原始信号。操作系统捕获这些底层信号，并将其封装为标准化的“基础事件”，随后传递给上层应用程序进行处理。</p> <p>根据基础事件特点总体上分为两类，指向性与非指向性事件。从“事件的目标如何确定”来理解指向性事件和非指向性事件：</p> <ul><li>指向性事件：交互动作第一次开始时（比如手指按下、鼠标点击），用户的手指或鼠标指针碰到了屏幕上的哪个组件。这个被“命中”的组件就成为了整个交互过程（包括后续的移动、抬起）的接收目标。包括：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch" target="_blank">触摸事件</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key" target="_blank">鼠标事件</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-axis" target="_blank">轴事件</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-api" target="_blank">手写笔事件</a>。<p>场景案例：使用手写笔在屏幕上书写，当手写笔在屏幕的某个位置第一次点击的位置（例如画板），当前画板组件就是交互的目标。</p> <div class="fignone"><span class="figcap"><b>图2 </b>手写笔套件效果图</span><br><span><img height="358.70299500000004" originheight="1080" originwidth="1664" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163117.30756209670209097365974454235708:50001231000000:2800:372D86D1932584C91C0E658ED6E97105DE00ECBC98368784CC4FC0ADE111D9F0.gif" title="点击放大" width="549.6225000000001"></span></div> <p>手写笔套件的示例代码如下所示：</p> <div class="screenLinkPre"><div _ngcontent-rsi-c106="" class="highlight-div"><div _ngcontent-rsi-c106="" class="highlight-div-header"><div _ngcontent-rsi-c106="" class="highlight-div-header-left"><div _ngcontent-rsi-c106="" class="handle-button expand-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rsi-c106="" class="highlight-div-header-right"><div _ngcontent-rsi-c106="" class="handle-button ai-button"></div><div _ngcontent-rsi-c106="" class="handle-button line-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rsi-c106="" class="handle-button theme-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rsi-c106="" class="handle-button copy-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rsi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/base/HandwriteEvent.ets#L55-L67" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.Stylus.Handwrite'</span>)) {</li><li>  <span class="hljs-comment">// Using the canIUse interface to prevent the stylus event from not being supported by some devices</span></li><li>  <span class="hljs-title function_">HandwriteComponent</span>({</li><li>    <span class="hljs-variable">handwriteController</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">controller</span>,</li><li>    <span class="hljs-variable">defaultPenType</span>: <span class="hljs-title class_">PenType</span>.<span class="hljs-title class_">PEN</span>,</li><li>    <span class="hljs-variable">defaultPenInfo</span>: [{ <span class="hljs-variable">penType</span>: <span class="hljs-title class_">PenType</span>.<span class="hljs-title class_">PEN</span>, <span class="hljs-variable">penWidth</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">penWidth</span> },</li><li>      { <span class="hljs-variable">penType</span>: <span class="hljs-title class_">PenType</span>.<span class="hljs-title class_">BALLPOINT_PEN</span>, <span class="hljs-variable">penWidth</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">ballpointPenWidth</span> }] <span class="hljs-keyword">as</span> <span class="hljs-variable">PenHspInfo</span>[],</li><li>    <span class="hljs-variable">widthRatio</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-variable">heightRatio</span>: <span class="hljs-number">1</span>,</li><li>  })</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-title function_">Text</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.string.HandwriteDescInfo'</span>))</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/base/HandwriteEvent.ets#L55-L67" target="_blank">HandwriteEvent.ets</a></div></div></div></div> </li><li>非指向性事件：事件的接收者由当前焦点所在的组件决定。包括：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-key" target="_blank">按键事件</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-crown" target="_blank">表冠事件</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-focus_axis" target="_blank">焦点轴事件</a>。<p>场景案例：在使用键盘填写表单时，多个输入框之间可通过Tab键进行切换，当前获得焦点的输入框通常会被高亮显示。用户输入的字符内容会被系统视为针对该焦点输入框的交互，直接发送至该组件进行处理。</p> <p>按键事件的示例代码如下所示，鼠标的按键事件通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key" target="_blank">鼠标事件</a>处理：</p> <div class="screenLinkPre"><div _ngcontent-rsi-c106="" class="highlight-div"><div _ngcontent-rsi-c106="" class="highlight-div-header"><div _ngcontent-rsi-c106="" class="highlight-div-header-left"><div _ngcontent-rsi-c106="" class="handle-button expand-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rsi-c106="" class="highlight-div-header-right"><div _ngcontent-rsi-c106="" class="handle-button ai-button"></div><div _ngcontent-rsi-c106="" class="handle-button line-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rsi-c106="" class="handle-button theme-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rsi-c106="" class="handle-button copy-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rsi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/base/KeyEvent.ets#L76-L119" data-highlighted="yes"><ol class="linenums"><li>.onKeyEvent((<span class="hljs-keyword">event</span>?: KeyEvent) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.type === KeyType.Down) {</li><li>      <span class="hljs-keyword">this</span>.eventType = <span class="hljs-string">'Down'</span>;</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.type === KeyType.Up) {</li><li>      <span class="hljs-keyword">this</span>.eventType = <span class="hljs-string">'Up'</span>;</li><li>    }</li><li>    <span class="hljs-keyword">this</span>.keyText = <span class="hljs-keyword">event</span>.keyText;</li><li>    <span class="hljs-keyword">this</span>.sourceTool = <span class="hljs-keyword">event</span>.keySource;</li><li>    <span class="hljs-keyword">this</span>.getUserTextData();</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>})</li><li>.onMouse((<span class="hljs-keyword">event</span>: MouseEvent): <span class="hljs-keyword">void</span> =&gt; {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/base/KeyEvent.ets#L76-L119" target="_blank">KeyEvent.ets</a></div></div></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch" target="_blank">触摸事件</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key" target="_blank">鼠标事件</a>在实际开发中场景较少，多数交互需求可通过手势事件由<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#section182814229423">手势事件</a>所替代。</p> </div></div></div> <p>下图为常见基础输入事件，在不同输入设备上的触发方式。</p> <div class="fignone" id="fig1571845271314"><span class="figcap"><b>图3 </b>输入设备基础输入事件触发方式一览表</span><br><span><img height="204.14800000000002" originheight="620" originwidth="2794" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163117.34463460583781623985692912088365:50001231000000:2800:A0E42FDDEC6E8E4FA97323D251CB361AED9932164FEF49ABF254C435753DF672.png" title="点击放大" width="920"></span></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>onKeyEvent事件默认是冒泡的，在onKeyEvent事件的回调函数中，若事件已被处理，建议开发者返回true，表示已消费该事件。这可以阻止事件继续冒泡，避免上层节点重复响应，从而防止按键事件被触发多次。</p> </div></div></div> </li></ul> </div> <div class="tiledSection"><h3 id="section182814229423">手势事件<i class="anchor-icon anchor-icon-link" anchorid="section182814229423" tips="复制节点链接"></i></h3><p>手势是由一系列基础事件累积并满足特定条件后被识别出的交互行为，例如“点击”即为快速按下并抬起。</p> <p>在ArkUI中，系统组件默认支持常见手势（如按钮支持点击事件），也可在组件上绑定一个或多个手势。默认情况下，多手势识别会按照手势注册的顺序依次进行匹配和处理：</p> <ul><li>在希望多个手势互斥执行（仅一个生效）的情况下，可使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-gesture-events-combined-gestures#互斥识别" target="_blank">互斥识别</a>机制，避免冲突响应。</li><li>在希望多个手势同时响应的场景下，可使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-gesture-events-combined-gestures#并行识别" target="_blank">并行识别</a>机制，允许多个手势并发处理，提升交互灵活性。</li><li>在需要精细控制用户按下时哪些手势可参与识别与竞争的情况下，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-gesture-events-gesture-judge" target="_blank">手势冲突处理</a>机制。</li></ul> <p>下图为常见手势事件在不同输入设备上的触发方式。</p> <div class="fignone" id="fig1453851721619"><span class="figcap"><b>图4 </b>输入设备手势事件触发方式一览表</span><br><span><img height="222.96200000000002" originheight="808" originwidth="3334" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163118.17441836127619400420008756018445:50001231000000:2800:00C3BA3FC231E0268B535FC2FD5B9C6F7B42DC7844135D6800865D152EB7F885.png" title="点击放大" width="920"></span></div> <p>如下是旋转手势的示例代码：</p> <div class="screenLinkPre"><div _ngcontent-rsi-c106="" class="highlight-div"><div _ngcontent-rsi-c106="" class="highlight-div-header"><div _ngcontent-rsi-c106="" class="highlight-div-header-left"><div _ngcontent-rsi-c106="" class="handle-button expand-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rsi-c106="" class="highlight-div-header-right"><div _ngcontent-rsi-c106="" class="handle-button ai-button"></div><div _ngcontent-rsi-c106="" class="handle-button line-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rsi-c106="" class="handle-button theme-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rsi-c106="" class="handle-button copy-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rsi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/gesture/RotationGestureEvent.ets#L59-L73" data-highlighted="yes"><ol class="linenums"><li>.gesture(</li><li>  RotationGesture()</li><li>    .onActionUpdate((event: GestureEvent) =&gt; {</li><li>      <span class="hljs-keyword">if</span> (event) {</li><li>        <span class="hljs-comment">// Obtain the rotation angle and change the rotation angle of the image</span></li><li>        <span class="hljs-keyword">this</span>.angle = <span class="hljs-keyword">this</span>.rotateValue + event.angle;</li><li>        <span class="hljs-keyword">this</span>.sourceType = event.source;</li><li>        <span class="hljs-keyword">this</span>.sourceTool = event.sourceTool;</li><li>        <span class="hljs-keyword">this</span>.getUserTextData();</li><li>      }</li><li>    })</li><li>    .onActionEnd(() =&gt; {</li><li>      <span class="hljs-keyword">this</span>.rotateValue = <span class="hljs-keyword">this</span>.angle;</li><li>    })</li><li>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/gesture/RotationGestureEvent.ets#L59-L73" target="_blank">RotationGestureEvent.ets</a></div></div></div></div> </div> <p>典型场景举例：宫格排列的界面元素，可以通过双指触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pinchgesture" target="_blank">PinchGesture</a>捏合手势，动态修改网格布局的columnsTemplate属性实现。如视频应用中双指捏合实现视频元素的显示个数。</p> <p>效果图如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.1.3.1.1" valign="top" width="36.76%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.1.3.1.2" valign="top" width="63.239999999999995%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="36.76%"><p><span><img height="349.3553213333333" originheight="720" originwidth="647" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163118.78730412495090788399345708171271:50001231000000:2800:0E395888DF093F2082CC60A76E4236FC953CC57C225DBA0262B3BB4CA5CFC690.gif" title="点击放大" width="314.19199999999995"></span></p> </td> <td class="cellrowborder" valign="top" width="63.239999999999995%"><p><span><img height="362.93777520000003" originheight="518" originwidth="799" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163118.38844267791699971406462723964138:50001231000000:2800:1597AA868D90C2403B4CAAAD17F7227E621BA813BB2330D81236016F89B2675A.gif" title="点击放大" width="557.808"></span></p> </td> </tr>  </tbody></table></div> </div> <div class="screenLinkPre"><div _ngcontent-rsi-c106="" class="highlight-div"><div _ngcontent-rsi-c106="" class="highlight-div-header"><div _ngcontent-rsi-c106="" class="highlight-div-header-left"><div _ngcontent-rsi-c106="" class="handle-button expand-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rsi-c106="" class="highlight-div-header-right"><div _ngcontent-rsi-c106="" class="handle-button ai-button"></div><div _ngcontent-rsi-c106="" class="handle-button line-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rsi-c106="" class="handle-button theme-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rsi-c106="" class="handle-button copy-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rsi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_codelabs/MultiVideoApplication/blob/master/features/home/src/main/ets/view/RecommendedVideo.ets#L45-L208" data-highlighted="yes"><ol class="linenums"><li>Grid() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>.gesture(PinchGesture({ fingers: <span class="hljs-number">2</span> }).onActionUpdate((event: GestureEvent) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (event.scale &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-keyword">this</span>.currentWidthBreakpoint !== <span class="hljs-string">'sm'</span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentWidthBreakpoint === <span class="hljs-string">'md'</span>) {</li><li>      <span class="hljs-keyword">this</span>.getUIContext().animateTo({</li><li>        duration: <span class="hljs-number">500</span></li><li>      }, () =&gt; {</li><li>        <span class="hljs-keyword">this</span>.videoGridColumn = <span class="hljs-string">'1fr 1fr 1fr'</span>;</li><li>      })</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">this</span>.getUIContext().animateTo({</li><li>        duration: <span class="hljs-number">500</span></li><li>      }, () =&gt; {</li><li>        <span class="hljs-keyword">this</span>.videoGridColumn = <span class="hljs-string">'1fr 1fr 1fr 1fr'</span>;</li><li>      })</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.scale &lt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-keyword">this</span>.currentWidthBreakpoint !== <span class="hljs-string">'sm'</span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentWidthBreakpoint === <span class="hljs-string">'md'</span>) {</li><li>      <span class="hljs-keyword">this</span>.getUIContext().animateTo({</li><li>        duration: <span class="hljs-number">500</span></li><li>      }, () =&gt; {</li><li>        <span class="hljs-keyword">this</span>.videoGridColumn = <span class="hljs-string">'1fr 1fr 1fr 1fr'</span>;</li><li>      })</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">this</span>.getUIContext().animateTo({</li><li>        duration: <span class="hljs-number">500</span></li><li>      }, () =&gt; {</li><li>        <span class="hljs-keyword">this</span>.videoGridColumn = <span class="hljs-string">'1fr 1fr 1fr 1fr 1fr'</span>;</li><li>      })</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    Logger.info(`Two-finger operation <span class="hljs-keyword">is</span> not supported`);</li><li>  }</li><li>}))</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiVideoApplication/blob/master/features/home/src/main/ets/view/RecommendedVideo.ets#L45-L208" target="_blank">RecommendedVideo.ets</a></div></div></div></div> <div class="tiledSection"><h3 id="section168661941154220">焦点事件<i class="anchor-icon anchor-icon-link" anchorid="section168661941154220" tips="复制节点链接"></i></h3><p>使用键盘、电视遥控器、车机摇杆或旋钮等非指向性输入设备与应用程序进行间接交互时，建议将页面中可操作元素设置为可获焦状态，并配置获焦视觉效果，以保证交互体验。</p> <ul><li>获焦/失焦：通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-focus-event#onfocus" target="_blank">onFocus</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-focus-event#onblur" target="_blank">onBlur</a>事件来监听组件的焦点变化。组件获焦时，遵循子组件优先原则。若子组件需获焦，其所有祖先组件均需可获焦。容器组件需获焦时，其子组件应不可获焦，并配置点击事件。<p>部分组件默认可获焦，如Button、TextInput等基础组件和Column、Row等容器组件。若组件有获焦能力但默认不可获焦，如Text、Image等组件，可设置通用属性focusable(true)使其可获焦。部分组件为无交互行为的组件，通常不可获焦，例如Blank、Circle组件。组件的获焦能力总览可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-focus-event#组件获焦能力说明" target="_blank">组件获焦能力说明</a>。</p> </li><li>走焦：触发走焦时，系统遍历组件树中可走焦的组件。当前焦点框架支持三种走焦算法：线性走焦，按照子节点在节点树中的挂载顺序进行焦点导航；投影走焦，适用于容器内子组件尺寸不一的场景，通过空间位置关系计算最佳焦点目标；此外，开发者还可通过 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#tabindex9" target="_blank">tabIndex</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#nextfocus18" target="_blank">nextFocus</a>灵活自定义走焦逻辑，满足复杂交互需求。详情可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-focus-event#走焦规范" target="_blank">走焦规范</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-focus-event#走焦算法" target="_blank">走焦算法</a>。<div class="fignone"><span class="figcap"><b>图5 </b>使用键盘走焦</span><br><span><img height="342.67223900000005" originheight="1080" originwidth="1872" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163118.97467437941098733523917579255933:50001231000000:2800:AF044853371E77D7F927DB7B1600945531358EF3F103856E62C41654094E9ED5.gif" title="点击放大" width="589.5225"></span></div> </li></ul> <div class="fignone"><span class="figcap"><b>图6 </b>走焦样式指引案例</span><br><span><img height="217.2925" originheight="456" originwidth="1920" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163118.86975676345871770476413156130037:50001231000000:2800:D967C745C80ACD6D5A8FCA95BAD268999AE1ED8303F9DA485917C8E0823C0908.png" title="点击放大" width="920"></span></div> <p>更多焦点事件的能力和规范请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-events-focus-event" target="_blank">支持焦点处理</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表1 </b>走焦常用属性</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.2.4.1.1" valign="top" width="34.67%"><p><strong>走焦常用属性</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.2.4.1.2" valign="top" width="32%"><p><strong>参数</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.2.4.1.3" valign="top" width="33.33%"><p><strong>描述</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="34.67%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#focusable" target="_blank">focusable</a></p> </td> <td class="cellrowborder" valign="top" width="32%"><p>boolean</p> </td> <td class="cellrowborder" valign="top" width="33.33%"><p>设置当前组件是否可以获焦</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.67%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#tabindex9" target="_blank">tabIndex</a></p> </td> <td class="cellrowborder" valign="top" width="32%"><p>number</p> </td> <td class="cellrowborder" valign="top" width="33.33%"><p>自定义组件Tab键走焦顺序值</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.67%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#defaultfocus9" target="_blank">defaultFocus</a></p> </td> <td class="cellrowborder" valign="top" width="32%"><p>boolean</p> </td> <td class="cellrowborder" valign="top" width="33.33%"><p>设置当前组件是否为当前页面上的默认焦点</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.67%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#tabstop14" target="_blank">tabStop</a></p> </td> <td class="cellrowborder" valign="top" width="32%"><p>boolean</p> </td> <td class="cellrowborder" valign="top" width="33.33%"><p>设置当前容器组件是否为走焦可停留容器</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="34.67%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#nextfocus18" target="_blank">nextFocus</a></p> </td> <td class="cellrowborder" valign="top" width="32%"><p>Optional&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#focusmovement18对象说明" target="_blank">FocusMovement</a>&gt;</p> </td> <td class="cellrowborder" valign="top" width="33.33%"><p>设置当前容器组件的自定义走焦规则</p> </td> </tr>  </tbody></table></div> </div> <p>下表为不同输入设备上是否支持触发焦点事件。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表2 </b>焦点事件</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.1" valign="top" width="9.618076384723052%"><p>交互事件</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.2" valign="top" width="8.878224355128973%"><p>触控屏</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.3" valign="top" width="9.248150369926012%"><p>触控板</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.4" valign="top" width="9.248150369926012%"><p>鼠标</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.5" valign="top" width="9.248150369926012%"><p>键盘</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.6" valign="top" width="9.248150369926012%"><p>灵犀指向遥控</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.7" valign="top" width="9.248150369926012%"><p>走焦类遥控器</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.8" valign="top" width="9.248150369926012%"><p>灵犀悬浮触控</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.9" valign="top" width="9.248150369926012%"><p>游戏手柄</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.10" valign="top" width="9.248150369926012%"><p>手写笔</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.12.1.11" valign="top" width="7.518496300739851%"><p>表冠</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="9.618076384723052%"><p>焦点事件</p> </td> <td class="cellrowborder" valign="top" width="8.878224355128973%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="7.518496300739851%"><p>/</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section41561332436">拖拽事件<i class="anchor-icon anchor-icon-link" anchorid="section41561332436" tips="复制节点链接"></i></h3><p>拖拽发生在两个组件之间，它不是简单的单次输入，而是一个”过程”，通常包含如下步骤（以将组件A拖拽到组件B中为例）。</p> <ul><li><p>长按或点击组件A，触发拖拽。</p> </li><li><p>保持按压或点击，持续将组件A向组件B拖拽。</p> </li><li><p>抵达组件B中，释放按压点击，完成拖拽。</p> </li><li><p>也可以在未抵达组件B的中途，释放按压点击，取消拖拽。</p> </li></ul> <p>一个完整的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop" target="_blank">拖拽事件</a>，包含多个拖拽子事件，如下表所示。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表3 </b>拖拽方法</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.2.3.1.1" valign="top" width="52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.2.3.1.2" valign="top" width="48%"><p>功能描述</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragstart" target="_blank">onDragStart</a></p> </td> <td class="cellrowborder" valign="top" width="48%"><p>绑定A组件，触控屏长按/鼠标左键按下后移动触发</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragenter" target="_blank">onDragEnter</a></p> </td> <td class="cellrowborder" valign="top" width="48%"><p>绑定B组件，触控屏手指、鼠标移动进入B组件瞬间触发</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragmove" target="_blank">onDragMove</a></p> </td> <td class="cellrowborder" valign="top" width="48%"><p>绑定B组件，触控屏手指、鼠标在B组件内移动触发</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondragleave" target="_blank">onDragLeave</a></p> </td> <td class="cellrowborder" valign="top" width="48%"><p>绑定B组件，触控屏手指、鼠标移动退出B组件瞬间触发</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-drag-drop#ondrop" target="_blank">onDrop</a></p> </td> <td class="cellrowborder" valign="top" width="48%"><p>绑定B组件，在B组件内，触控屏手指抬起、鼠标左键松开时触发</p> </td> </tr>  </tbody></table></div> </div> <p>下表为不同输入设备上是否支持拖拽事件。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><caption><b>表4 </b>拖拽事件</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.1" valign="top" width="9.618076384723052%"><p>交互事件</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.2" valign="top" width="8.878224355128973%"><p>触控屏</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.3" valign="top" width="9.248150369926012%"><p>触控板</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.4" valign="top" width="9.248150369926012%"><p>鼠标</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.5" valign="top" width="9.248150369926012%"><p>键盘</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.6" valign="top" width="9.248150369926012%"><p>灵犀指向遥控</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.7" valign="top" width="9.248150369926012%"><p>走焦类遥控器</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.8" valign="top" width="9.248150369926012%"><p>灵犀悬浮触控</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.9" valign="top" width="9.248150369926012%"><p>游戏手柄</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.10" valign="top" width="9.248150369926012%"><p>手写笔</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.12.1.11" valign="top" width="7.518496300739851%"><p>表冠</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="9.618076384723052%"><p>拖拽事件</p> </td> <td class="cellrowborder" valign="top" width="8.878224355128973%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>/</p> </td> <td class="cellrowborder" valign="top" width="9.248150369926012%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="7.518496300739851%"><p>/</p> </td> </tr>  </tbody></table></div> </div> <p>如下是图片拖拽的示例代码：</p> <div class="screenLinkPre"><div _ngcontent-rsi-c106="" class="highlight-div"><div _ngcontent-rsi-c106="" class="highlight-div-header"><div _ngcontent-rsi-c106="" class="highlight-div-header-left"><div _ngcontent-rsi-c106="" class="handle-button expand-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rsi-c106="" class="highlight-div-header-right"><div _ngcontent-rsi-c106="" class="handle-button ai-button"></div><div _ngcontent-rsi-c106="" class="handle-button line-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rsi-c106="" class="handle-button theme-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rsi-c106="" class="handle-button copy-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rsi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/drag/DragEvent.ets#L129-L159" data-highlighted="yes"><ol class="linenums"><li>.<span class="hljs-title function_">allowDrop</span>([uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>])</li><li>.<span class="hljs-title function_">onDrop</span>(<span class="hljs-function">(<span class="hljs-params">event: DragEvent</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">dragData</span>: <span class="hljs-title class_">UnifiedData</span> = (event <span class="hljs-keyword">as</span> <span class="hljs-title class_">DragEvent</span>).<span class="hljs-title function_">getData</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">UnifiedData</span>;</li><li>    <span class="hljs-keyword">if</span> (dragData !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">records</span>: unifiedDataChannel.<span class="hljs-property">UnifiedRecord</span>[] = dragData.<span class="hljs-title function_">getRecords</span>();</li><li>      <span class="hljs-keyword">if</span> (records.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; records.<span class="hljs-property">length</span>; i++) {</li><li>          <span class="hljs-keyword">let</span> types = records[i].<span class="hljs-title function_">getTypes</span>();</li><li>          <span class="hljs-keyword">if</span> (types.<span class="hljs-title function_">includes</span>(uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">FILE_URI</span>)) {</li><li>            <span class="hljs-comment">// Retrieve the image resource URLs from the record and assign them</span></li><li>            <span class="hljs-keyword">const</span> fileUriUds =</li><li>              records[i].<span class="hljs-title function_">getEntry</span>(uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">FILE_URI</span>) <span class="hljs-keyword">as</span> uniformDataStruct.<span class="hljs-property">FileUri</span>;</li><li>            <span class="hljs-keyword">let</span> typeDescriptor = uniformTypeDescriptor.<span class="hljs-title function_">getTypeDescriptor</span>(fileUriUds.<span class="hljs-property">fileType</span>);</li><li>            <span class="hljs-keyword">if</span> (typeDescriptor.<span class="hljs-title function_">belongsTo</span>(uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>)) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetImage</span> = fileUriUds.<span class="hljs-property">oriUri</span>;</li><li>            }</li><li>          }</li><li>        }</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`%{public}s`</span>, <span class="hljs-string">`dragData arr is null`</span>);</li><li>      }</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`%{public}s`</span>, <span class="hljs-string">`dragData is undefined`</span>);</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dragSuccess</span> = <span class="hljs-literal">true</span>;</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`startDataLoading errorCode: <span class="hljs-subst">${err.code}</span>, errorMessage: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/multi-device-interaction/blob/master/default/src/main/ets/view/drag/DragEvent.ets#L129-L159" target="_blank">DragEvent.ets</a></div></div></div></div> </div> <div class="tiledSection"><h2 id="section164981231123819">应用开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section164981231123819" tips="复制节点链接"></i></h2><p>在应用开发中，应根据业务场景明确需适配的目标设备。例如，视频类应用通常需覆盖手机、平板、电脑及智慧屏，而运动健康类应用则侧重手机与智能穿戴设备。开发者应结合业务特点和用户高频使用场景，确定适配范围。在明确目标设备后，需进一步依据各设备支持的输入方式（如触控屏、鼠标、键盘、表冠等），针对性地设计和适配相应的交互事件，以保障良好的用户体验。</p> <p>下表为不同设备支持的输入设备一览表。</p>  <div class="tablenoborder"><div class="tbBox"><table id="table87765613332" class="layoutFixed idpTab"><caption><b>表5 </b>设备支持的输入设备一览表</caption><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.4.2.3.1.1" valign="top" width="52%"><p>设备</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.4.2.3.1.2" valign="top" width="48%"><p>输入设备</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="52%"><p>直板机</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>触控屏</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p>折叠屏</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>触控屏</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p>阔折叠</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>触控屏</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p>三折叠</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>触控屏、手写笔（Mate XTs）</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p>平板</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>触摸屏、鼠标、键盘、手写笔</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p>电脑</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>触控屏、触控板、鼠标、键盘、手柄</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p>智慧屏</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>灵犀指向遥控、灵犀悬浮触控、走焦类遥控、键盘、鼠标、手柄</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="52%"><p>智能穿戴</p> </td> <td class="cellrowborder" valign="top" width="48%"><p>触控屏、表冠</p> </td> </tr>  </tbody></table></div> </div> <p>接下来，以实现视频播放页的暂停/播放功能为例，阐述在多设备交互适配中的开发思路与实施步骤：</p> <ol><li><span>首先，明确长视频类应用的目标适配设备为手机、平板、电脑及智慧屏。</span></li><li><span>根据<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#table87765613332">设备支持的输入设备一览表</a>可知手机、平板、电脑和智慧屏支持的输入设备包括：触控屏、手写笔、鼠标、键盘、手柄、灵犀指向遥控、灵犀悬浮触控、走焦类遥控。</span></li><li><span>在实现播放/暂停功能时，需根据不同输入设备的交互方式，适配相应的事件处理机制。根据<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#fig1453851721619">输入设备手势事件触发方式一览表</a>可知：对于触控屏、鼠标、灵犀指向遥控和走焦类遥控，均可通过响应<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click" target="_blank">onClick</a>点击事件来触发操作；根据<a href="/consumer/cn/doc/best-practices/bpta-multi-interaction#fig1571845271314">输入设备基础输入事件触发方式一览表</a>可知，使用键盘时，则需监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-keycode#keycode" target="_blank">特定按键</a>（如空格键、回车键）的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-key" target="_blank">onKeyEvent</a>按键事件，识别后执行对应逻辑。</span><p></p><ul><li>触控屏：单击屏幕。鼠标：点击左键。灵犀指向遥控：单击OK键。走焦类遥控器：单击OK键。<div class="screenLinkPre"><div _ngcontent-rsi-c106="" class="highlight-div"><div _ngcontent-rsi-c106="" class="highlight-div-header"><div _ngcontent-rsi-c106="" class="highlight-div-header-left"><div _ngcontent-rsi-c106="" class="handle-button expand-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rsi-c106="" class="highlight-div-header-right"><div _ngcontent-rsi-c106="" class="handle-button ai-button"></div><div _ngcontent-rsi-c106="" class="handle-button line-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rsi-c106="" class="handle-button theme-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rsi-c106="" class="handle-button copy-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rsi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_codelabs/MultiVideoApplication/blob/master/features/videoDetail/src/main/ets/view/VideoPlayer.ets#L87-L132" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-selector-tag">Flex</span>({</li><li>  <span class="hljs-comment">// ...</span></li><li>}) {</li><li>  <span class="hljs-selector-tag">Column</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-selector-class">.width</span>(<span class="hljs-string">'100%'</span>)</li><li><span class="hljs-selector-class">.onClick</span>(() =&gt; {</li><li>  <span class="hljs-comment">// ...</span></li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiVideoApplication/blob/master/features/videoDetail/src/main/ets/view/VideoPlayer.ets#L87-L132" target="_blank">VideoPlayer.ets</a></div></div></div></div> </li><li>键盘：键盘按下空格键。空格键的键码为KEYCODE_SPACE，其他按键的键码可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-keycode#keycode" target="_blank">keyCode</a>枚举查询，例如回车键对应KEYCODE_ENTER。应用可根据实际交互需求，灵活适配不同按键。<div class="screenLinkPre"><div _ngcontent-rsi-c106="" class="highlight-div"><div _ngcontent-rsi-c106="" class="highlight-div-header"><div _ngcontent-rsi-c106="" class="highlight-div-header-left"><div _ngcontent-rsi-c106="" class="handle-button expand-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rsi-c106="" class="highlight-div-header-right"><div _ngcontent-rsi-c106="" class="handle-button ai-button"></div><div _ngcontent-rsi-c106="" class="handle-button line-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rsi-c106="" class="handle-button theme-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rsi-c106="" class="handle-button copy-button"><div _ngcontent-rsi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rsi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_codelabs/MultiVideoApplication/blob/master/features/videoDetail/src/main/ets/view/VideoDetail.ets#L250-L271" data-highlighted="yes"><ol class="linenums"><li>.onKeyEvent((<span class="hljs-keyword">event</span>?: KeyEvent) =&gt; {</li><li>  <span class="hljs-comment">//If the key type is pressed, the subsequent code will not be executed, and the specific key logic will be executed when released.</span></li><li>  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">event</span> || <span class="hljs-keyword">event</span>.type !== KeyType.Down) {</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// Space key controls pause/play.</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.keyCode === KeyCode.KEYCODE_SPACE) {</li><li>    <span class="hljs-keyword">this</span>.avPlayerUtil!.playerStateControl();</li><li>  }</li><li>  <span class="hljs-comment">//press ESC to exit full screen.</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.keyCode === KeyCode.KEYCODE_ESCAPE) {</li><li>    <span class="hljs-keyword">this</span>.windowUtil!.recover();</li><li>  }</li><li>  <span class="hljs-comment">//Right-click fast forward</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.keyCode === KeyCode.KEYCODE_DPAD_RIGHT) {</li><li>    <span class="hljs-keyword">this</span>.avPlayerUtil!.fastForward();</li><li>  }</li><li>  <span class="hljs-comment">//Left click to go back quickly</span></li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.keyCode === KeyCode.KEYCODE_DPAD_LEFT) {</li><li>    <span class="hljs-keyword">this</span>.avPlayerUtil!.rewind();</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiVideoApplication/blob/master/features/videoDetail/src/main/ets/view/VideoDetail.ets#L250-L271" target="_blank">VideoDetail.ets</a></div></div></div></div> </li></ul> <p></p></li></ol> <p>开发者可根据业务场景明确适配的设备范围，并针对不同功能所支持的输入方式，灵活选择与之匹配的交互事件进行适配。</p> </div> <div class="tiledSection"><h2 id="section134181841202311">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section134181841202311" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/multi-device-interaction" target="_blank">多设备交互</a></li></ul> </div> </div> <div></div></div>