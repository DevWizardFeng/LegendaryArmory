<h1 _ngcontent-xwk-c119="" class="doc-title ng-star-inserted" title="多设备即时通讯界面"> 多设备即时通讯界面 </h1>

<div _ngcontent-xwk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section291433081820">概述<i class="anchor-icon anchor-icon-link" anchorid="section291433081820" tips="复制节点链接"></i></h2><p>本文从目前流行的垂类市场中，选择即时通讯应用作为典型案例详细介绍"一多"在实际开发中的应用。一多（一次开发多端部署）即时通讯应用的核心功能是用户交互，主要包含对话聊天、通讯录和社交圈等交互功能。开发者在开发“一多”应用时，经常会遇到多端适配的问题。本文针对即时通讯应用的常见多端适配问题，提供推荐解决方案。</p> <ul><li><a href="/consumer/cn/doc/best-practices/multi-communication-app#section10532313132614">聊天场景如何进行布局设计</a></li></ul> <p>当前系统支持的产品形态包括手机、折叠屏、平板和PC/2in1。下文的具体实践将围绕这四种产品形态展开，从UX设计和页面开发两个角度提供符合“一多”的参考样例，并介绍“一多”即时通讯应用在开发过程中的最佳实践。</p> <ul><li><a href="/consumer/cn/doc/best-practices/multi-communication-app#section73711812196">架构设计</a>章节介绍一多项目的三层架构，开发者可以去相关链接了解。</li><li><a href="/consumer/cn/doc/best-practices/multi-communication-app#section18771832172516">UX设计</a>章节介绍即时通讯应用的聊天场景的交互逻辑，对于类似的设计要点，开发者可以直接拿来使用。</li><li><a href="/consumer/cn/doc/best-practices/multi-communication-app#section10532313132614">页面开发</a>章节主要介绍聊天场景的布局能力，介绍如何实现聊天场景，如何适配多设备。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>阅读本文前，读者需熟悉<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkui-overview" target="_blank">方舟开发框架（ArkUI框架）</a>和页面开发的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-overview">“一多”能力</a>。下文将详细介绍它们在“一多”开发实践中如何使用。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section73711812196">架构设计<i class="anchor-icon anchor-icon-link" anchorid="section73711812196" tips="复制节点链接"></i></h2><p>HarmonyOS的分层架构包括产品定制层、基础特性层和公共能力层，为开发者提供清晰、高效、可扩展的设计架构。更多详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-layered-architecture-design" target="_blank">分层架构设计</a>。</p> </div> <div class="tiledSection"><h2 id="section18771832172516">UX设计<i class="anchor-icon anchor-icon-link" anchorid="section18771832172516" tips="复制节点链接"></i></h2><p>即时通讯应用包含聊天、通讯录和社交圈等交互功能。聊天页采用分栏布局设计，以下为聊天页的业务逻辑。</p> <p style="color: rgb(255,0,0);"></p> <p><span><img height="261.345" originheight="2160" originwidth="4320" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.58818198994661449824504976299780:50001231000000:2800:CB70B16263BA310D3DC24077057156D212CD8BBD97F84F00CBF584B966F664B0.png" title="点击放大" width="523.6875"></span></p> <p>一多即时通讯场景包含以下设计能力：<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-video-app#zh-cn_topic_0000001744653537_li1226615201361">侧边导航</a>、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-financial-app#section1796912148314">分栏布局</a>。</p> </div> <div class="tiledSection"><h2 id="section10532313132614">页面开发<i class="anchor-icon anchor-icon-link" anchorid="section10532313132614" tips="复制节点链接"></i></h2><p>以聊天页为典型页面进行展开，聊天页中包含侧边导航与分栏布局的设计能力，本文着重介绍聊天页如何实现分栏布局。</p> </div> <div class="tiledSection"><h3 id="section133771713132818" class="firsth2">布局能力<i class="anchor-icon anchor-icon-link" anchorid="section133771713132818" tips="复制节点链接"></i></h3><p>聊天页在不同断点下的UX效果如下，涉及的设计能力是侧边导航，分栏布局。侧边导航参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-video-app#zh-cn_topic_0000001744653537_li1226615201361">侧边导航</a>，其中会有详细介绍。</p> <p>在sm断点（手机/折叠屏折叠状态）需页面跳转，md/lg断点（折叠屏展开/平板/PC）支持分栏布局。为了提高操作便捷性，在IM对话页面中使用分栏布局实现对话功能。</p> <p>示意图如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.1" valign="top" width="5.6899999999999995%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.2" valign="top" width="28.689999999999998%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.3" valign="top" width="24.95%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.4" valign="top" width="40.67%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top"><p>设计能力点</p> </td> <td class="cellrowborder" colspan="3" valign="top"><p><span><img height="238.61689600000003" originheight="434" originwidth="332" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.81962771809104645543013696757992:50001231000000:2800:53A9D613DDDA2891BC55C1381A0FD67557F59BE29058C08F993F04ADBCC9543E.png" title="点击放大" width="182.54250000000002"></span>       <span><img height="259.89663" originheight="461" originwidth="299" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.96811380927316615678180834625611:50001231000000:2800:6B29C87979EEF588FDCA2C2F61B97CEE7675E8F96316761669A8BC74D21FC342.png" width="168.57750000000001" class="notEnlarge"></span></p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="5.6899999999999995%"><p>效果图</p> </td> <td class="cellrowborder" valign="top" width="28.689999999999998%"><p><span><img height="481.70765558232927" originheight="1607" originwidth="770" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.44996664903613443925668736604804:50001231000000:2800:2801D28160AA6B2AE81622D8BAEDC7D756AF445EEC34472C618DCC6DD8C67F5D.png" title="点击放大" width="239.94799999999998"></span></p> <p></p> <p><span><img height="500.466642463186" originheight="1607" originwidth="770" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.20276200666018890555420043426601:50001231000000:2800:085E8F96755C7601D0143AAAA297C90FF64AEFDB09C2E1347D8783E73DB28CF5.png" title="点击放大" width="239.94799999999998"></span></p> </td> <td class="cellrowborder" valign="top" width="24.95%"><p></p> <p><span><img height="228.7788435503602" originheight="1574" originwidth="1410" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.25390809782268860703106238031019:50001231000000:2800:FCEF69862594DDE4478D37B448391B86DD60C7BCA9695CA1DC57BAE087179346.png" title="点击放大" width="205.54"></span></p> </td> <td class="cellrowborder" valign="top" width="40.67%"><p></p> <p><span><img height="239.62918341503268" originheight="1738" originwidth="2688" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.91506831705647027959425324503482:50001231000000:2800:3E4F3BF9A7E7EE6C866F318930D16F7BA28BD341BFDD9FC4E50EE1499CC88CEB.png" title="点击放大" width="350.164"></span></p> </td> </tr>  </tbody></table></div> </div> <p>在sm断点下，显示聊天列表页，点击某条聊天记录时跳转到聊天详情页面；在md和lg断点下，左侧显示聊天列表页，右侧显示聊天详情页。</p> <p>在多端部署场景下，Navigation组件能够根据窗口大小自动适配。当窗口较大时，Navigation组件会自动切换为分栏展示效果。因此，本文中的分栏布局使用Navigation组件实现。</p> <p>各个设备布局图如下所示：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.1" valign="top" width="10.73%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.2" valign="top" width="15.879999999999999%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.3" valign="top" width="27.6%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.4" valign="top" width="45.79%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top"><p>效果图</p> </td> <td class="cellrowborder" colspan="3" valign="top"><p>参照上文表格</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="10.73%"><p>布局图</p> </td> <td class="cellrowborder" valign="top" width="15.879999999999999%"><p><span><img height="222.18406828451882" originheight="626" originwidth="344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163236.21404709931581086600509168675873:50001231000000:2800:FAD048195A317D25FDCEE558DCF01C663361889E4683A2ECA8044B408EA94181.png" title="点击放大" width="122.09599999999998"></span></p> </td> <td class="cellrowborder" valign="top" width="27.6%"><p><span><img height="212.337095051975" originheight="628" originwidth="680" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.45440306089153930228669010276671:50001231000000:2800:9469EF68377D224897CA8B8C30AA918C6D9B3F74F2AED9181818B741257F7795.png" title="点击放大" width="229.92"></span></p> </td> <td class="cellrowborder" valign="top" width="45.79%"><p><span><img height="300.2168788073059" originheight="628" originwidth="831" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.74077326370836442863962733628194:50001231000000:2800:7E37535FAA02DCBD8DEFB8D719315C7C5C6BAA9629D6A1D4AB3C842181EB52AC.png" title="点击放大" width="397.268"></span></p> </td> </tr>  </tbody></table></div> </div> <div class="p">在Navigation组件中，定义了对话列表。出于封装的考虑，页面中不会使用NavRouter组件进行路由跳转，而是使用NavPathStack栈进行路由处理。因此，定义了pageInfo用于存储路由栈。当点击对话列表中的一条对话信息时，会向pageInfo中推送跳转路由。关系如下：<div class="screenLinkPre"><div _ngcontent-xwk-c106="" class="highlight-div"><div _ngcontent-xwk-c106="" class="highlight-div-header"><div _ngcontent-xwk-c106="" class="highlight-div-header-left"><div _ngcontent-xwk-c106="" class="handle-button expand-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xwk-c106="" class="highlight-div-header-right"><div _ngcontent-xwk-c106="" class="handle-button ai-button"></div><div _ngcontent-xwk-c106="" class="handle-button line-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xwk-c106="" class="handle-button theme-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xwk-c106="" class="handle-button copy-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xwk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/Index.ets#L82-L119" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Navigation</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">pageInfo</span>) {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentPageIndex</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-title function_">Flex</span>({ <span class="hljs-variable">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-title class_">Column</span>, <span class="hljs-variable">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-title class_">Center</span> }) {</li><li>      <span class="hljs-title function_">ConversationList</span>({</li><li>        <span class="hljs-variable">currentConversationUserName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>        <span class="hljs-variable">currentContactUserName</span>: $<span class="hljs-title class_">currentContactUserName</span></li><li>      })</li><li>        .<span class="hljs-title function_">flexGrow</span>(<span class="hljs-number">1</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      <span class="hljs-title function_">HomeTab</span>({ <span class="hljs-variable">currentPageIndex</span>: $<span class="hljs-title class_">currentPageIndex</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabWidth</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabHeight</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>        .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">Visible</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">None</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>({</li><li>      <span class="hljs-variable">bottom</span>: <span class="hljs-title class_">deviceInfo</span>.<span class="hljs-title class_">deviceType</span> !== <span class="hljs-string">'2in1'</span> &amp;&amp; <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-string">'28vp'</span> : <span class="hljs-string">'0vp'</span></li><li>    })</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentPageIndex</span> === <span class="hljs-number">1</span>) {</li><li>    <span class="hljs-title function_">Flex</span>({ <span class="hljs-variable">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-title class_">Column</span>, <span class="hljs-variable">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-title class_">Center</span> }) {</li><li>      <span class="hljs-title function_">ContactsList</span>({</li><li>        <span class="hljs-variable">currentContactUserName</span>: $<span class="hljs-title class_">currentContactUserName</span>,</li><li>        <span class="hljs-variable">currentConversationUserName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>        <span class="hljs-variable">currentContactUserIcon</span>: $<span class="hljs-title class_">currentContactUserIcon</span></li><li>      })</li><li>        .<span class="hljs-title function_">flexGrow</span>(<span class="hljs-number">1</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      <span class="hljs-title function_">HomeTab</span>({ <span class="hljs-variable">currentPageIndex</span>: $<span class="hljs-title class_">currentPageIndex</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabWidth</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabHeight</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>        .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">Visible</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">None</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">padding</span>({</li><li>      <span class="hljs-variable">bottom</span>: <span class="hljs-title class_">deviceInfo</span>.<span class="hljs-title class_">deviceType</span> !== <span class="hljs-string">'2in1'</span> &amp;&amp; <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-string">'28vp'</span> : <span class="hljs-string">'0vp'</span></li><li>    })</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/Index.ets#L82-L119" target="_blank">Index.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-xwk-c106="" class="highlight-div"><div _ngcontent-xwk-c106="" class="highlight-div-header"><div _ngcontent-xwk-c106="" class="highlight-div-header-left"><div _ngcontent-xwk-c106="" class="handle-button expand-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xwk-c106="" class="highlight-div-header-right"><div _ngcontent-xwk-c106="" class="handle-button ai-button"></div><div _ngcontent-xwk-c106="" class="handle-button line-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xwk-c106="" class="handle-button theme-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xwk-c106="" class="handle-button copy-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xwk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/ConversationList.ets#L37-L54" data-highlighted="yes"><ol class="linenums"><li>List() {</li><li>  ForEach(ConversationListData, (item: ConversationDataInterface, index: number) =&gt; {</li><li>    ListItem() {</li><li>      ConversationItem(item)</li><li>        .onClick(() =&gt; {</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pageInfo.size() &gt; <span class="hljs-number">1</span>) {</li><li>            <span class="hljs-keyword">this</span>.pageInfo.pop();</li><li>          }</li><li>          <span class="hljs-keyword">this</span>.pageInfo.pushPath({ name: <span class="hljs-string">'ConversationDetail'</span> });</li><li>          <span class="hljs-keyword">this</span>.currentConversationUserName = item.name;</li><li>          <span class="hljs-keyword">this</span>.currentContactUserName = <span class="hljs-string">''</span>;</li><li>          <span class="hljs-keyword">this</span>.currentIndex = index;</li><li>        })</li><li>        .backgroundColor(<span class="hljs-keyword">this</span>.currentIndex === index ? <span class="hljs-string">'#33D8D8D8'</span> : Color.White)</li><li>    }</li><li>    .height(Adaptive.ContactItemHeight(<span class="hljs-keyword">this</span>.currentBreakpoint))</li><li>  }, (item: ConversationDataInterface, index: number) =&gt; index + JSON.stringify(item))</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/ConversationList.ets#L37-L54" target="_blank">ConversationList.ets</a></div></div></div></div> </div> <p>此外，需要注意 Navigation 的模式和宽度在不同设备上有所不同。具体代码如下：</p> <div class="screenLinkPre"><div _ngcontent-xwk-c106="" class="highlight-div"><div _ngcontent-xwk-c106="" class="highlight-div-header"><div _ngcontent-xwk-c106="" class="highlight-div-header-left"><div _ngcontent-xwk-c106="" class="handle-button expand-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xwk-c106="" class="highlight-div-header-right"><div _ngcontent-xwk-c106="" class="handle-button ai-button"></div><div _ngcontent-xwk-c106="" class="handle-button line-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xwk-c106="" class="handle-button theme-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xwk-c106="" class="handle-button copy-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xwk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/Index.ets#L32-L211" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">Provide</span>(<span class="hljs-string">'pageInfo'</span>) <span class="hljs-variable">pageInfo</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">NavPathStack</span>();</li><li><span class="hljs-comment">// ...</span></li><li>
</li><li>@<span class="hljs-title function_">Builder</span></li><li><span class="hljs-title function_">PageMap</span>(<span class="hljs-variable">name</span>: <span class="hljs-title class_">string</span>) {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-variable">name</span> === <span class="hljs-string">'ConversationDetail'</span>) {</li><li>    <span class="hljs-title function_">ConversationDetail</span>({ <span class="hljs-variable">currentConversationUserName</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">currentConversationUserName</span>, <span class="hljs-variable">currentFeatureIndex</span>: <span class="hljs-number">1</span> });</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable">name</span> === <span class="hljs-string">'ConversationDetailNone'</span>) {</li><li>    <span class="hljs-title function_">ConversationDetailNone</span>();</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable">name</span> === <span class="hljs-string">'ContactsDetail'</span>) {</li><li>    <span class="hljs-title function_">ContactsDetail</span>({</li><li>      <span class="hljs-variable">currentContactUserName</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">currentContactUserName</span>,</li><li>      <span class="hljs-variable">currentContactUserIcon</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">currentContactUserIcon</span></li><li>    });</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-title function_">ConversationDetailNone</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-title function_">build</span>() {</li><li>  <span class="hljs-title function_">Column</span>() {</li><li>    <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">     * Home and contacts page</span></li><li><span class="hljs-comment">     */</span></li><li>    <span class="hljs-title function_">Flex</span>() {</li><li>      <span class="hljs-title function_">HomeTab</span>({ <span class="hljs-variable">currentPageIndex</span>: $<span class="hljs-title class_">currentPageIndex</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabWidth</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F1F3F5'</span>)</li><li>        .<span class="hljs-title function_">padding</span>({</li><li>          <span class="hljs-variable">top</span>: <span class="hljs-string">'180vp'</span>,</li><li>          <span class="hljs-variable">bottom</span>: <span class="hljs-string">'180vp'</span>,</li><li>          <span class="hljs-variable">left</span>: <span class="hljs-string">'22vp'</span></li><li>        })</li><li>        .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> === <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">Visible</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">None</span>)</li><li>      <span class="hljs-title function_">Navigation</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">pageInfo</span>) {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentPageIndex</span> === <span class="hljs-number">0</span>) {</li><li>          <span class="hljs-title function_">Flex</span>({ <span class="hljs-variable">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-title class_">Column</span>, <span class="hljs-variable">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-title class_">Center</span> }) {</li><li>            <span class="hljs-title function_">ConversationList</span>({</li><li>              <span class="hljs-variable">currentConversationUserName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>              <span class="hljs-variable">currentContactUserName</span>: $<span class="hljs-title class_">currentContactUserName</span></li><li>            })</li><li>              .<span class="hljs-title function_">flexGrow</span>(<span class="hljs-number">1</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>            <span class="hljs-title function_">HomeTab</span>({ <span class="hljs-variable">currentPageIndex</span>: $<span class="hljs-title class_">currentPageIndex</span> })</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabWidth</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabHeight</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>              .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">Visible</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">None</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">padding</span>({</li><li>            <span class="hljs-variable">bottom</span>: <span class="hljs-title class_">deviceInfo</span>.<span class="hljs-title class_">deviceType</span> !== <span class="hljs-string">'2in1'</span> &amp;&amp; <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-string">'28vp'</span> : <span class="hljs-string">'0vp'</span></li><li>          })</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentPageIndex</span> === <span class="hljs-number">1</span>) {</li><li>          <span class="hljs-title function_">Flex</span>({ <span class="hljs-variable">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-title class_">Column</span>, <span class="hljs-variable">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-title class_">Center</span> }) {</li><li>            <span class="hljs-title function_">ContactsList</span>({</li><li>              <span class="hljs-variable">currentContactUserName</span>: $<span class="hljs-title class_">currentContactUserName</span>,</li><li>              <span class="hljs-variable">currentConversationUserName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>              <span class="hljs-variable">currentContactUserIcon</span>: $<span class="hljs-title class_">currentContactUserIcon</span></li><li>            })</li><li>              .<span class="hljs-title function_">flexGrow</span>(<span class="hljs-number">1</span>)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>            <span class="hljs-title function_">HomeTab</span>({ <span class="hljs-variable">currentPageIndex</span>: $<span class="hljs-title class_">currentPageIndex</span> })</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabWidth</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">HomeTabHeight</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>              .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">Visible</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">None</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">padding</span>({</li><li>            <span class="hljs-variable">bottom</span>: <span class="hljs-title class_">deviceInfo</span>.<span class="hljs-title class_">deviceType</span> !== <span class="hljs-string">'2in1'</span> &amp;&amp; <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-string">'28vp'</span> : <span class="hljs-string">'0vp'</span></li><li>          })</li><li>        }</li><li>      }</li><li>      .<span class="hljs-title function_">hideTitleBar</span>(<span class="hljs-keyword">true</span>)</li><li>      .<span class="hljs-title function_">hideToolBar</span>(<span class="hljs-keyword">true</span>)</li><li>      .<span class="hljs-title function_">navBarWidth</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> === <span class="hljs-string">'lg'</span> ? <span class="hljs-string">'44.5%'</span> : <span class="hljs-string">'50%'</span>)</li><li>      .<span class="hljs-title function_">navDestination</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">PageMap</span>)</li><li>      .<span class="hljs-title function_">mode</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> === <span class="hljs-string">'sm'</span> ? <span class="hljs-variable">NavigationMode</span>.<span class="hljs-variable">Stack</span> : <span class="hljs-title class_">NavigationMode</span>.<span class="hljs-title class_">Split</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentPageIndex</span> === <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentPageIndex</span> === <span class="hljs-number">1</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">Visible</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">None</span>)</li><li>
</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/Index.ets#L32-L211" target="_blank">Index.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-xwk-c106="" class="highlight-div"><div _ngcontent-xwk-c106="" class="highlight-div-header"><div _ngcontent-xwk-c106="" class="highlight-div-header-left"><div _ngcontent-xwk-c106="" class="handle-button expand-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xwk-c106="" class="highlight-div-header-right"><div _ngcontent-xwk-c106="" class="handle-button ai-button"></div><div _ngcontent-xwk-c106="" class="handle-button line-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xwk-c106="" class="handle-button theme-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xwk-c106="" class="handle-button copy-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xwk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/ConversationList.ets#L24-L66" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-variable">export</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ConversationList</span> {</li><li>  @<span class="hljs-title function_">StorageProp</span>(<span class="hljs-string">'currentBreakpoint'</span>) <span class="hljs-variable">currentBreakpoint</span>: <span class="hljs-title class_">string</span> = <span class="hljs-string">'sm'</span>;</li><li>  @<span class="hljs-title function_">Link</span> <span class="hljs-variable">currentConversationUserName</span>: <span class="hljs-title class_">Resource</span>;</li><li>  @<span class="hljs-title function_">Link</span> <span class="hljs-variable">currentContactUserName</span>: <span class="hljs-title class_">string</span>;</li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-keyword">private</span> <span class="hljs-variable">currentIndex</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0</span>;</li><li>  @<span class="hljs-title function_">Consume</span>(<span class="hljs-string">'pageInfo'</span>) <span class="hljs-variable">pageInfo</span>: <span class="hljs-title class_">NavPathStack</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Flex</span>({ <span class="hljs-variable">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-title class_">Column</span> }) {</li><li>      <span class="hljs-title function_">HomeTopSearch</span>({ <span class="hljs-variable">title</span>: <span class="hljs-title class_">HomeConstants</span>.<span class="hljs-title class_">CONVERSATION_TITLE</span> })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'13%'</span>)</li><li>      <span class="hljs-title function_">List</span>() {</li><li>        <span class="hljs-title function_">ForEach</span>(<span class="hljs-variable">ConversationListData</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">ConversationDataInterface</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>          <span class="hljs-title function_">ListItem</span>() {</li><li>            <span class="hljs-title function_">ConversationItem</span>(<span class="hljs-variable">item</span>)</li><li>              .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">pageInfo</span>.<span class="hljs-title function_">size</span>() &gt; <span class="hljs-number">1</span>) {</li><li>                  <span class="hljs-keyword">this</span>.<span class="hljs-variable">pageInfo</span>.<span class="hljs-title function_">pop</span>();</li><li>                }</li><li>                <span class="hljs-keyword">this</span>.<span class="hljs-variable">pageInfo</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-variable">name</span>: <span class="hljs-string">'ConversationDetail'</span> });</li><li>                <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentConversationUserName</span> = <span class="hljs-variable">item</span>.<span class="hljs-variable">name</span>;</li><li>                <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentContactUserName</span> = <span class="hljs-string">''</span>;</li><li>                <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentIndex</span> = <span class="hljs-variable">index</span>;</li><li>              })</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentIndex</span> === <span class="hljs-variable">index</span> ? <span class="hljs-string">'#33D8D8D8'</span> : <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">White</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">ContactItemHeight</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>        }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">ConversationDataInterface</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; <span class="hljs-variable">index</span> + <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">item</span>))</li><li>      }</li><li>      .<span class="hljs-title function_">padding</span>({</li><li>        <span class="hljs-variable">bottom</span>: <span class="hljs-title class_">deviceInfo</span>.<span class="hljs-title class_">deviceType</span> !== <span class="hljs-string">'2in1'</span> &amp;&amp; <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> === <span class="hljs-string">'lg'</span> ? <span class="hljs-string">'28vp'</span> : <span class="hljs-string">'0vp'</span></li><li>      })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/ConversationList.ets#L24-L66" target="_blank">ConversationList.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-xwk-c106="" class="highlight-div"><div _ngcontent-xwk-c106="" class="highlight-div-header"><div _ngcontent-xwk-c106="" class="highlight-div-header-left"><div _ngcontent-xwk-c106="" class="handle-button expand-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xwk-c106="" class="highlight-div-header-right"><div _ngcontent-xwk-c106="" class="handle-button ai-button"></div><div _ngcontent-xwk-c106="" class="handle-button line-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xwk-c106="" class="handle-button theme-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xwk-c106="" class="handle-button copy-button"><div _ngcontent-xwk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xwk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/ConversationDetail.ets#L24-L89" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-variable">export</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ConversationDetail</span> {</li><li>  @<span class="hljs-title function_">StorageProp</span>(<span class="hljs-string">'currentBreakpoint'</span>) <span class="hljs-variable">currentBreakpoint</span>: <span class="hljs-title class_">string</span> = <span class="hljs-string">'sm'</span>;</li><li>  @<span class="hljs-title function_">Prop</span> <span class="hljs-variable">currentConversationUserName</span>: <span class="hljs-title class_">string</span>;</li><li>  @<span class="hljs-title function_">Prop</span> <span class="hljs-variable">currentFeatureIndex</span>: <span class="hljs-title class_">number</span>;</li><li>  @<span class="hljs-title function_">Consume</span>(<span class="hljs-string">'pageInfo'</span>) <span class="hljs-variable">pageInfo</span>: <span class="hljs-title class_">NavPathStack</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">NavDestination</span>() {</li><li>      <span class="hljs-title function_">Flex</span>({ <span class="hljs-variable">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-title class_">Column</span> }) {</li><li>        <span class="hljs-title function_">ConversationDetailTopSearch</span>({ <span class="hljs-variable">currentConversationUserName</span>: $<span class="hljs-title class_">currentConversationUserName</span>, })</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-variable">Adaptive</span>.<span class="hljs-title function_">ContactItemHeight</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span>))</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentConversationUserName</span>.<span class="hljs-variable">length</span> === <span class="hljs-number">3</span>) {</li><li>          <span class="hljs-title function_">ConversationDetailItem</span>({</li><li>            <span class="hljs-variable">receivedName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>            <span class="hljs-variable">isReceived</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-variable">content</span>: <span class="hljs-string">'芬芬邀请你喝奶茶啦'</span>,</li><li>            <span class="hljs-variable">isAppletMsg</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-variable">currentFeatureIndex</span>: $<span class="hljs-title class_">currentFeatureIndex</span></li><li>          })</li><li>          <span class="hljs-title function_">ConversationDetailItem</span>({</li><li>            <span class="hljs-variable">receivedName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>            <span class="hljs-variable">isReceived</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-variable">content</span>: <span class="hljs-string">'请你喝奶茶，快点单吧！！速度速度，就差你了'</span>,</li><li>            <span class="hljs-variable">currentFeatureIndex</span>: $<span class="hljs-title class_">currentFeatureIndex</span></li><li>          })</li><li>          <span class="hljs-title function_">ConversationDetailItem</span>({</li><li>            <span class="hljs-variable">receivedName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>            <span class="hljs-variable">isReceived</span>: <span class="hljs-keyword">false</span>,</li><li>            <span class="hljs-variable">content</span>: <span class="hljs-string">'哈哈，今天有什么喜事说来听听'</span>,</li><li>            <span class="hljs-variable">currentFeatureIndex</span>: $<span class="hljs-title class_">currentFeatureIndex</span></li><li>          })</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-title function_">ConversationDetailItem</span>({</li><li>            <span class="hljs-variable">receivedName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>            <span class="hljs-variable">isReceived</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-variable">content</span>: <span class="hljs-string">'市场部2023年新产品宣传规划'</span>,</li><li>            <span class="hljs-variable">isDocumentMsg</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-variable">currentFeatureIndex</span>: $<span class="hljs-title class_">currentFeatureIndex</span></li><li>          })</li><li>          <span class="hljs-title function_">ConversationDetailItem</span>({</li><li>            <span class="hljs-variable">receivedName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>            <span class="hljs-variable">isReceived</span>: <span class="hljs-keyword">true</span>,</li><li>            <span class="hljs-variable">content</span>: <span class="hljs-string">'这是明天会议的资料，请发给Jack，让他确认'</span>,</li><li>            <span class="hljs-variable">currentFeatureIndex</span>: $<span class="hljs-title class_">currentFeatureIndex</span></li><li>          })</li><li>          <span class="hljs-title function_">ConversationDetailItem</span>({</li><li>            <span class="hljs-variable">receivedName</span>: $<span class="hljs-title class_">currentConversationUserName</span>,</li><li>            <span class="hljs-variable">isReceived</span>: <span class="hljs-keyword">false</span>,</li><li>            <span class="hljs-variable">content</span>: <span class="hljs-string">'好的，我明天过去'</span>,</li><li>            <span class="hljs-variable">currentFeatureIndex</span>: $<span class="hljs-title class_">currentFeatureIndex</span></li><li>          })</li><li>        }</li><li>        <span class="hljs-title function_">Blank</span>()</li><li>        <span class="hljs-title function_">ConversationDetailBottom</span>()</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.color.background_color_grey'</span>))</li><li>      .<span class="hljs-title function_">padding</span>({</li><li>        <span class="hljs-variable">bottom</span>: <span class="hljs-title class_">deviceInfo</span>.<span class="hljs-title class_">deviceType</span> !== <span class="hljs-string">'2in1'</span> ? <span class="hljs-string">'28vp'</span> : <span class="hljs-string">'0vp'</span></li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">hideTitleBar</span>(<span class="hljs-keyword">true</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication/blob/master/features/home/src/main/ets/pages/ConversationDetail.ets#L24-L89" target="_blank">ConversationDetail.ets</a></div></div></div></div> </div> <p></p> <div class="tiledSection"><h3 id="section1279018571284">交互归一<i class="anchor-icon anchor-icon-link" anchorid="section1279018571284" tips="复制节点链接"></i></h3><p>系统已为不同类型的智能设备适配了相应的交互方式，实现了<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-interaction#section088812013815" target="_blank">交互归一</a>，因此，开发者无需额外关注用户的不同交互方式。</p> <p>本场景中的交互归一方式如下（以触控屏为例）：</p> <p>1、单指点击对应组件。</p> <p>2、单指滑动List和Scroll组件。</p> <p>3、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-video-app#section3198710114717" target="_blank">走焦</a>。</p> </div> <div class="tiledSection"><h2 id="section23671643329">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section23671643329" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_codelabs/MultiDeviceCommunication" target="_blank">多设备即时通讯界面</a></li></ul> </div> </div> <div></div></div>