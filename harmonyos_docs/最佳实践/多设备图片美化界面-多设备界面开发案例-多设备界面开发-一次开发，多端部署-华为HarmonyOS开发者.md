<h1 _ngcontent-uxt-c119="" class="doc-title ng-star-inserted" title="多设备图片美化界面"> 多设备图片美化界面 </h1>

<div _ngcontent-uxt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section13318143912528">概述<i class="anchor-icon anchor-icon-link" anchorid="section13318143912528" tips="复制节点链接"></i></h2><p>本文从目前流行的垂类市场中，选择图片美化应用作为典型案例详细介绍“一多”在实际开发中的应用。一多图片美化应用包含相册，大图预览，图片编辑功能。</p> <p>本文的重点内容包括：</p> <ul><li><a href="/consumer/cn/doc/best-practices/multi-picture-app#section12641735489">根据宽度自适应相册列数</a></li><li><a href="/consumer/cn/doc/best-practices/multi-picture-app#section255214446101">双指缩放控制图片缩放</a></li></ul> <p>当前系统的产品形态包括手机、折叠屏、平板电脑和PC/2in1四种。本文从UX设计、架构设计和页面开发三个角度，提供符合“一多”设计原则的参考样例，介绍“一多”图片美化应用在开发过程中的最佳实践。</p> <ul><li><a href="/consumer/cn/doc/best-practices/multi-picture-app#section206991621369">UX设计</a>章节介绍图片美化应用的交互逻辑，类似的设计要点可以直接应用于其他项目。</li><li><a href="/consumer/cn/doc/best-practices/multi-picture-app#section171321517134515">架构设计</a>章节介绍一多项目的三层架构，开发者可以去相关文章或章节了解。</li><li><a href="/consumer/cn/doc/best-practices/multi-picture-app#section12641735489">页面开发</a>章节主要介绍图片美化三个页面的布局设计及如何实现。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>阅读本文前，读者需熟悉<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkui-overview" target="_blank">方舟开发框架（ArkUI框架）</a>和页面开发的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-overview">“一多”能力</a>。下文将详细介绍它们在“一多”开发实践中如何使用。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section206991621369">UX设计<i class="anchor-icon anchor-icon-link" anchorid="section206991621369" tips="复制节点链接"></i></h2><p>本示例中的图片美化应用包含相册、大图预览、图片编辑页面。详细的UX设计可以参考<a href="https://developer.huawei.com/consumer/cn/doc/design-guides/responsive-design-examples3-0000001746498074" target="_blank">拍摄美化类设计</a>。</p> </div> <div class="tiledSection"><h2 id="section171321517134515">架构设计<i class="anchor-icon anchor-icon-link" anchorid="section171321517134515" tips="复制节点链接"></i></h2><p>HarmonyOS的分层架构主要包括三个层次：产品定制层、基础特性层和公共能力层，为开发者构建了一个清晰、高效、可扩展的设计架构。更多详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-layered-architecture-design" target="_blank">分层架构设计</a>。</p> </div> <div class="tiledSection"><h2 id="section12641735489">页面开发<i class="anchor-icon anchor-icon-link" anchorid="section12641735489" tips="复制节点链接"></i></h2><p>本章介绍图片美化应用中如何使用“一多”布局能力，完成页面层级的代码编写和多端适配，同时介绍图片美化应用中的<a href="/consumer/cn/doc/best-practices/multi-picture-app#section255214446101">交互开发</a>。</p> </div> <div class="tiledSection"><h3 id="section14920839161019" class="firsth2">布局能力<i class="anchor-icon anchor-icon-link" anchorid="section14920839161019" tips="复制节点链接"></i></h3><p>本节介绍每个页面区域的具体布局能力，帮助开发者从零开始进行图片美化应用的开发。</p> <p><strong>相册</strong></p> <p>相册页显示所有图片。通过观察相册页在折叠屏上的UX设计图，可以进行如下设计：</p> <ul><li>相册页的两个基础区域及其实现方案如下图所示：</li></ul> <p><span><img height="534.2211000000001" originheight="824" originwidth="738" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.30940013068168067674844170910860:50001231000000:2800:BB2C191FDFEB641530E589587FE7D8518EA2A19D12AC56F36B56404309D12DA0.png" title="点击放大" width="478.8"></span></p> <p></p> <p>相册页的2个基础区域介绍及实现方案如下表所示：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.9.1.4.1.1" valign="top" width="5.18%"><p>区域编号</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.4.1.2" valign="top" width="14.06%"><p>简介</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.4.1.3" valign="top" width="80.76%"><p>实现方案</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="5.18%"><p>1</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>顶部返回</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout">自适应布局</a>实现左侧返回图标、文字以及右侧图标。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="5.18%"><p>2</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>相册列表</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-page-layout#section1373617413916">网格布局</a>实现相册列表。</p> </td> </tr>  </tbody></table></div> </div> <p>示意图如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.11.1.5.1.1" valign="top" width="7.5200000000000005%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.5.1.2" valign="top" width="18.35%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.5.1.3" valign="top" width="29.49%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.5.1.4" valign="top" width="44.64%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="7.5200000000000005%"><p>效果图</p> </td> <td class="cellrowborder" valign="top" width="18.35%"><p></p> <p><span><img height="300.40736699999997" originheight="804" originwidth="385" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.48322165424536396322981981632828:50001231000000:2800:A1385F10CE4B8ECAAE276B2890E78C6211F3CAE0598BB6A46A58648408A64DEB.png" title="点击放大" width="144.82"></span></p> </td> <td class="cellrowborder" valign="top" width="29.49%"><p></p> <p><span><img height="275.86520433333334" originheight="787" originwidth="705" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.60941938521682253234099897070020:50001231000000:2800:7299EC53E874F14C76D1A82B53FBA96A13BD61AA77F8164AF356ABA58B8155E7.png" title="点击放大" width="247.308"></span></p> </td> <td class="cellrowborder" valign="top" width="44.64%"><p></p> <p><span><img height="250.52871040000008" originheight="869" originwidth="1344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.42478787357852138578782342452070:50001231000000:2800:AF612AFEE27A6704931C02C31BF57DA0FF1144143287AAE9B32760E1A7034BB0.png" title="点击放大" width="386.68800000000005"></span></p> <p></p> </td> </tr>  </tbody></table></div> </div> <p>当组件区域宽度变化时，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-area-change-event#onareachange" target="_blank">onAreaChange()</a> 获取组件的相关信息，并调整相册列数。</p> <div class="screenLinkPre"><div _ngcontent-uxt-c106="" class="highlight-div"><div _ngcontent-uxt-c106="" class="highlight-div-header"><div _ngcontent-uxt-c106="" class="highlight-div-header-left"><div _ngcontent-uxt-c106="" class="handle-button expand-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxt-c106="" class="highlight-div-header-right"><div _ngcontent-uxt-c106="" class="handle-button ai-button"></div><div _ngcontent-uxt-c106="" class="handle-button line-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxt-c106="" class="handle-button theme-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxt-c106="" class="handle-button copy-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_codelabs/MultiPictureBeautification/blob/master/features/albumView/src/main/ets/views/AlbumView.ets#L163-L193" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Flex</span>({ <span class="hljs-variable">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-title class_">Column</span> }) {</li><li>  <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">onAreaChange</span>((<span class="hljs-variable">oldValue</span>: <span class="hljs-title class_">Area</span>, <span class="hljs-variable">newValue</span>: <span class="hljs-title class_">Area</span>) =&gt; {</li><li>    <span class="hljs-keyword">this</span>.<span class="hljs-variable">gridColumn</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getGridColumn</span>(<span class="hljs-variable">newValue</span>.<span class="hljs-variable">width</span>);</li><li>  })</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiPictureBeautification/blob/master/features/albumView/src/main/ets/views/AlbumView.ets#L163-L193" target="_blank">AlbumView.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-uxt-c106="" class="highlight-div"><div _ngcontent-uxt-c106="" class="highlight-div-header"><div _ngcontent-uxt-c106="" class="highlight-div-header-left"><div _ngcontent-uxt-c106="" class="handle-button expand-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxt-c106="" class="highlight-div-header-right"><div _ngcontent-uxt-c106="" class="handle-button ai-button"></div><div _ngcontent-uxt-c106="" class="handle-button line-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxt-c106="" class="handle-button theme-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxt-c106="" class="handle-button copy-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_codelabs/MultiPictureBeautification/blob/master/features/albumView/src/main/ets/views/AlbumView.ets#L50-L53" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Change the number of Grid columns based on the width of the Grid component.</span></li><li><span class="hljs-title function_">getGridColumn</span>(<span class="hljs-attr">value</span>: <span class="hljs-title class_">Length</span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-number">2</span> * ((<span class="hljs-built_in">parseInt</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value)) / <span class="hljs-number">360</span>) - <span class="hljs-number">1</span>) + <span class="hljs-number">4</span>);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiPictureBeautification/blob/master/features/albumView/src/main/ets/views/AlbumView.ets#L50-L53" target="_blank">AlbumView.ets</a></div></div></div></div> <p></p> <p><strong>大图预览</strong></p> <p>大图预览显示一张图片。观察大图预览页在折叠屏上的用户体验设计图，可以进行以下设计：</p> <ul><li>将大图预览页划分为4个区域，效果图如下：</li></ul> <p></p> <p><span><img height="534.2211000000001" originheight="824" originwidth="738" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.04349182936463278883408717620305:50001231000000:2800:6EE4653DF91C9688D8DFF8EF13A90B35A961D6ED72F5D92ED8E2B85BF0029F76.png" title="点击放大" width="478.8"></span></p> <p>大图预览页的4个基础区域及其实现方案如下表所示：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.22.1.4.1.1" valign="top" width="5.18%"><p>区域编号</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.22.1.4.1.2" valign="top" width="14.06%"><p>简介</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.22.1.4.1.3" valign="top" width="80.76%"><p>实现方案</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="5.18%"><p>1</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>顶部返回</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout">自适应布局</a>实现左侧返回图标、文字以及右侧图标。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="5.18%"><p>2</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>图片展示</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image" target="_blank">Image</a>组件展示图片。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="5.18%"><p>3</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>相册滚动展示</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>实现相册滚动展示。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="5.18%"><p>4</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>图片操作</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout">自适应布局</a>实现图标自适应摆放。</p> </td> </tr>  </tbody></table></div> </div> <p>示意图如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.24.1.5.1.1" valign="top" width="7.5200000000000005%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.24.1.5.1.2" valign="top" width="18.35%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.24.1.5.1.3" valign="top" width="27.800000000000004%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.24.1.5.1.4" valign="top" width="46.33%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="7.5200000000000005%"><p>效果图</p> </td> <td class="cellrowborder" valign="top" width="18.35%"><p></p> <p><span><img height="300.40736699999997" originheight="804" originwidth="385" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.14505384929731116748101270677796:50001231000000:2800:090A9D8538AC082538A8FFADAA4789E295674077B433EC76777F643C08ACBAB3.png" title="点击放大" width="144.82"></span></p> </td> <td class="cellrowborder" valign="top" width="27.800000000000004%"><p></p> <p><span><img height="258.5218422222223" originheight="787" originwidth="705" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.20297302074909262911315970117274:50001231000000:2800:5F0B30096AC4A3D44527EEBDEDBA4784BF9332BCACF2D4EC32656FB7905C3494.png" title="点击放大" width="231.76000000000005"></span></p> </td> <td class="cellrowborder" valign="top" width="46.33%"><p><span><img height="260.6020004666667" originheight="869" originwidth="1344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.54571873094853877866661990074619:50001231000000:2800:B65605E7BAD3BD7C3A223B23269F217A25746700D7A6B41FC3EF3E0B97EC0B89.png" title="点击放大" width="402.236"></span></p> </td> </tr>  </tbody></table></div> </div> <p><strong>图片编辑</strong></p> <p>在折叠屏中，可以切换图片区域和编辑操作区域的位置。观察折叠屏上的图片编辑页UX设计图，可以这样设计：</p> <ul><li>图片编辑页划分为3个区域，效果图如下：</li></ul> <p></p> <p><span><img height="534.2211000000001" originheight="824" originwidth="738" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.35009660306368941263183432526756:50001231000000:2800:5BF62BA3B464662C769D36A1A53969300C162D8A8C908E0A73E71FE19467B543.png" title="点击放大" width="478.8"></span></p> <p><span><img height="534.2211000000001" originheight="824" originwidth="738" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.34843730906593274009196469411446:50001231000000:2800:FCE8A27A6108F8C24EE58C1B8F4EAE28D962852CA5FFCD25EA9D4BCBFE44C3BF.png" title="点击放大" width="478.8"></span></p> <p></p> <div class="p"><ul><li>区域2与区域3使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-flex" target="_blank">Flex</a>组件实现左右摆放与上下摆放的切换</li></ul> </div> <p>图片编辑的3个基础区域及其实现方案如下表所示：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.34.1.4.1.1" valign="top" width="5.18%"><p>区域编号</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.34.1.4.1.2" valign="top" width="14.06%"><p>简介</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.34.1.4.1.3" valign="top" width="80.76%"><p>实现方案</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="5.18%"><p>1</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>顶部返回</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout">自适应布局</a>实现左侧返回图标、文字以及右侧图标。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="5.18%"><p>2</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>图片展示</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image" target="_blank">Image</a>组件展示图片。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="5.18%"><p>3</p> </td> <td class="cellrowborder" valign="top" width="14.06%"><p>编辑操作栏</p> </td> <td class="cellrowborder" valign="top" width="80.76%"><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-flex" target="_blank">Flex</a>组件实现编辑操作栏的自适应摆放。</p> </td> </tr>  </tbody></table></div> </div> <p>示意图如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.36.1.5.1.1" valign="top" width="6.833935370496926%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.36.1.5.1.2" valign="top" width="16.743141657717466%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.36.1.5.1.3" valign="top" width="28.69276579127209%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.36.1.5.1.4" valign="top" width="47.73015718051352%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="6.833935370496926%"><p>效果图</p> </td> <td class="cellrowborder" valign="top" width="16.743141657717466%"><p><span><img height="268.4936959875037" originheight="2258" originwidth="1093" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.11080773783894238883442805595793:50001231000000:2800:5539566D2D707A5FFB493D20D2334AC5C71D69B999A02453537BDB9858403F38.png" title="点击放大" width="130.0369032510007"></span></p> <p></p> </td> <td class="cellrowborder" valign="top" width="28.69276579127209%"><p></p> <p></p> <p><span><img height="267.68371228047346" originheight="787" originwidth="705" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163237.52894717035111007848760122301319:50001231000000:2800:A9687861F44319DED6116B6D6B6B4374F3F451B6253DB4EB0CB30C095B8004BD.png" title="点击放大" width="239.97344527970324"></span></p> <p><span><img height="267.7503715708289" originheight="824" originwidth="738" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163238.74644746250562572561702732312036:50001231000000:2800:7EAB309368E6EACB246A834ABAD49A659CCD7F2FCD8238C63B2A5B86C3E4A17C.png" title="点击放大" width="239.97344527970324"></span></p> </td> <td class="cellrowborder" valign="top" width="47.73015718051352%"><p><span><img height="272.6422199485828" originheight="881" originwidth="1344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163238.21885965985492080643412195987904:50001231000000:2800:519E598755FA4A94D0DBED033520BD748F9B5E81D9F3027ECF18C2C0086A588D.png" title="点击放大" width="415.1174460607244"></span></p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section255214446101">交互开发<i class="anchor-icon anchor-icon-link" anchorid="section255214446101" tips="复制节点链接"></i></h3><p>针对不同类型的智能设备，交互方式包括触摸屏、鼠标、触控板等。单独适配各种交互方式会增加开发工作量并产生大量重复代码。为了解决这一问题，我们统一了各种交互方式的API，实现了<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-interaction" target="_blank">多设备交互</a>。常见的交互方式有触屏事件、键鼠事件、焦点事件。图片美化涉及的交互主要为图片的缩放。</p> <p><strong>双指缩放</strong></p> <p>在触控屏和触控板上，使用双指捏合或张开可实现缩放功能。本文有两处提到双指缩放操作：</p> <ul><li>相册页，双指缩放控制相册中图片列数变更。可以参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-video-app#section3198710114717">多设备长视频界面</a>。</li><li>大图预览页，双指缩放控制图片的宽高变更。<p>双指缩放使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pinchgesture" target="_blank">PinchGesture()</a> API实现， 当触发双指缩放时，可以实时获取缩放比例参数，传入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-transformation#scale" target="_blank">scale()</a> API（控制组件缩放的API）即可调整图片的比例。</p> <div class="screenLinkPre"><div _ngcontent-uxt-c106="" class="highlight-div"><div _ngcontent-uxt-c106="" class="highlight-div-header"><div _ngcontent-uxt-c106="" class="highlight-div-header-left"><div _ngcontent-uxt-c106="" class="handle-button expand-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxt-c106="" class="highlight-div-header-right"><div _ngcontent-uxt-c106="" class="handle-button ai-button"></div><div _ngcontent-uxt-c106="" class="handle-button line-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxt-c106="" class="handle-button theme-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxt-c106="" class="handle-button copy-button"><div _ngcontent-uxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_codelabs/MultiPictureBeautification/blob/master/features/pictureView/src/main/ets/view/CenterPart.ets#L29-L48" data-highlighted="yes"><ol class="linenums"><li>Row() {</li><li>  Column() {</li><li>    Image($r(<span class="hljs-string">'app.media.photo'</span>))</li><li>      .autoResize(<span class="hljs-literal">true</span>)</li><li>  }</li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>.scale({ x: <span class="hljs-keyword">this</span>.scaleValue, y: <span class="hljs-keyword">this</span>.scaleValue, z: <span class="hljs-number">1</span> })</li><li>.gesture(PinchGesture({ fingers: <span class="hljs-number">2</span> })</li><li>  .onActionUpdate((event: GestureEvent | undefined) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (event) {</li><li>      <span class="hljs-keyword">this</span>.scaleValue = <span class="hljs-keyword">this</span>.pinchValue * event.scale;</li><li>    }</li><li>  })</li><li>  .onActionEnd(() =&gt; {</li><li>    <span class="hljs-keyword">this</span>.pinchValue = <span class="hljs-keyword">this</span>.scaleValue;</li><li>  }))</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiPictureBeautification/blob/master/features/pictureView/src/main/ets/view/CenterPart.ets#L29-L48" target="_blank">CenterPart.ets</a></div></div></div></div> </li></ul> </div> <div class="tiledSection"><h2 id="section5599426039">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section5599426039" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_codelabs/MultiPictureBeautification" target="_blank">多设备图片美化界面</a></li></ul> </div> </div> <div></div></div>