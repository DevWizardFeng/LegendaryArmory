<h1 _ngcontent-gtl-c119="" class="doc-title ng-star-inserted" title="多设备社区评论界面"> 多设备社区评论界面 </h1>

<div _ngcontent-gtl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section16363322141911">概述<i class="anchor-icon anchor-icon-link" anchorid="section16363322141911" tips="复制节点链接"></i></h2><p>本文选择社区评论行业应用作为典型案例介绍“一多”在实际开发中的应用。社区评论应用的核心功能包括社区新闻浏览和热搜榜单查看。基于这些核心功能，案例实现了推荐热搜、热搜榜单、卡片详情、图片查看和输入评论等典型页面。文章重点介绍关键布局能力及对应实现。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>阅读本文前，读者需熟悉<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkui-overview" target="_blank">方舟开发框架（ArkUI框架）</a>和页面开发的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-overview">“一多”能力</a>。下文将详细介绍它们在“一多”开发实践中如何使用。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section6676142820201">架构设计<i class="anchor-icon anchor-icon-link" anchorid="section6676142820201" tips="复制节点链接"></i></h2><p>HarmonyOS的分层架构包括产品定制层、基础特性层和公共能力层，为开发者提供清晰、高效、可扩展的设计架构。更多详细请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-layered-architecture-design" target="_blank">分层架构设计</a>。</p> </div> <div class="tiledSection"><h2 id="section18900193132116">UX设计<i class="anchor-icon anchor-icon-link" anchorid="section18900193132116" tips="复制节点链接"></i></h2><p>社交通讯类的多设备响应式设计指南，<a href="https://developer.huawei.com/consumer/cn/doc/design-guides/responsive-design-examples2-0000001793536901" target="_blank">点击访问</a>。</p> <p>本章介绍社交通讯类应用中如何使用“一多”布局能力，完成页面层级的单页面和多端适配。下文将详细说明每个页面区域使用的具体布局能力，帮助开发者从零开始进行社交通讯类应用的开发。</p> <p>热点页利用<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-responsive-layout">响应式布局</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-responsive-layout#section1061332817545">栅格布局</a>能力，结合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow" target="_blank">WaterFlow</a>容器，实现单列卡片变瀑布流卡片的一多布局能力。</p> <p><span><img height="551.0456" originheight="804" originwidth="385" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163227.79056295083891966384615738886157:50001231000000:2800:454B04B204DF246E1D06BA0719297FF0AB2140F2D0A3CADFC957782AD066A216.png" title="点击放大" width="266"></span></p> <p>在卡片详情页中，使用响应式布局的栅格布局，实现图文区域和评论区域的左右及上下布局，从而达到边看边评的图文阅读效果。</p> <p><span><img height="551.0456" originheight="804" originwidth="385" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163227.88845670592383281737158537760892:50001231000000:2800:7BCFFB652C8ABF47A7104B65C2546E7EFFDB7A0B38BA0F045D483A2FAAFD9434.png" title="点击放大" width="266"></span></p> <p>社区评论应用包含以下一多页面布局能力：<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-video-app#zh-cn_topic_0000001744653537_li1226615201361">侧边导航</a>、<a href="/consumer/cn/doc/best-practices/multi-community-app#zh-cn_topic_0000001758831130_li118141522111817">列表重复布局</a>、<a href="/consumer/cn/doc/best-practices/multi-community-app#zh-cn_topic_0000001758831130_li1420045031813">动态卡片</a>、<a href="/consumer/cn/doc/best-practices/multi-community-app#zh-cn_topic_0000001758831130_li11692132514198">边看边评布局</a>。<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-video-app#zh-cn_topic_0000001744653537_li1226615201361">侧边导航</a>参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/multi-video-app#zh-cn_topic_0000001744653537_li1226615201361">多设备长视频界面</a>。</p> </div> <div class="tiledSection"><h2 id="section1237172422118">页面开发<i class="anchor-icon anchor-icon-link" anchorid="section1237172422118" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section961383711214" class="firsth2">布局能力<i class="anchor-icon anchor-icon-link" anchorid="section961383711214" tips="复制节点链接"></i></h3></div> <p>本章节选取页面关键区域进行布局能力介绍。</p> <p><strong>热点页布局能力</strong></p> <p>热点页提供搜索、热搜展示、信息阅读等功能，使用列表布局和动态卡片。</p> <p><span><img height="517.2237" originheight="869" originwidth="1344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163227.33975793373116492030080563847646:50001231000000:2800:EEE29092E29E50F35DBDBC4F0471858C11AE81ABED4D8EAA77A960AE49438ADD.png" title="点击放大" width="798"></span></p> <ul><li id="zh-cn_topic_0000001758831130_li118141522111817"><a name="ZH-CN_TOPIC_0000002523026841__zh-cn_topic_0000001758831130_li118141522111817"></a><a name="zh-cn_topic_0000001758831130_li118141522111817"></a>列表重复布局</li></ul> <p>竖向列表清晰明了地展示数据。在宽屏设备上，设计了列表重复布局以展示更多数据。</p> <p>在进行有序数据展示时，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>容器进行数据排列。通过设置List组件的布局方向listDirection和lanes属性并结合断点，实现在不同断点下显示不同列数。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.1.5.1.1" valign="top" width="9.22907709229077%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.1.5.1.2" valign="top" width="21.057894210578944%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.1.5.1.3" valign="top" width="31.00689931006899%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.1.5.1.4" valign="top" width="38.706129387061296%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top"><p>设计能力点</p> </td> <td class="cellrowborder" colspan="3" valign="top"><p><span><img originheight="273" originwidth="324" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163227.33467345879721816085474747043182:50001231000000:2800:2AE9A09466998AB42839E789117537ECDFFE1C6C70FB3A0DC673AD1EBF28B645.png" width="324" height="273"></span></p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.22907709229077%"><p>效果图</p> </td> <td class="cellrowborder" valign="top" width="21.057894210578944%"><p><span><img height="177.14994252574746" originheight="376" originwidth="360" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163227.42538028454213442528931304111168:50001231000000:2800:7C8757B1FCBEFAE1409A2A64653040B45118BDBA7338B12D7922641B3E94AD31.png" title="点击放大" width="169.73262673732629"></span></p> </td> <td class="cellrowborder" valign="top" width="31.00689931006899%"><p><span><img height="146.12611227766112" originheight="376" originwidth="677" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.23572568395734294009037595202385:50001231000000:2800:ABE1D66407C4E6F6330028234F9220C53EBA1FB9044072E62ABD140E373B86DF.png" title="点击放大" width="261.26347365263473"></span></p> </td> <td class="cellrowborder" valign="top" width="38.706129387061296%"><p><span><img height="106.60847624570879" originheight="376" originwidth="1184" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.59010590817165310243533882074950:50001231000000:2800:A7E667382065FC22FEF047F9D5F262C671608A9C09046E24A03A2EFAF0F50F34.png" title="点击放大" width="332.09639036096394"></span></p> </td> </tr>  </tbody></table></div> </div> <div class="screenLinkPre"><div _ngcontent-gtl-c106="" class="highlight-div"><div _ngcontent-gtl-c106="" class="highlight-div-header"><div _ngcontent-gtl-c106="" class="highlight-div-header-left"><div _ngcontent-gtl-c106="" class="handle-button expand-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gtl-c106="" class="highlight-div-header-right"><div _ngcontent-gtl-c106="" class="handle-button ai-button"></div><div _ngcontent-gtl-c106="" class="handle-button line-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gtl-c106="" class="handle-button theme-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gtl-c106="" class="handle-button copy-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gtl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/hot/src/main/ets/view/HotColumnView.ets#L25-L74" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">HotColumnView</span> {</li><li>  <span class="hljs-meta">@StorageLink</span>(<span class="hljs-string">'currentBreakpoint'</span>) <span class="hljs-attr">currentBreakpoint</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'sm'</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">HotListBuilder</span>(<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>) {</li><li>    <span class="hljs-title class_">List</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable constant_">HOST_LIST_ARRAY</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">tab_index</span>], <span class="hljs-function">(<span class="hljs-params">item: HotItemInterface</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (item.<span class="hljs-property">index</span> &gt; index * <span class="hljs-number">5</span> &amp;&amp; item.<span class="hljs-property">index</span> &lt;= (index + <span class="hljs-number">1</span>) * <span class="hljs-number">5</span>) {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">HotListItemView</span>({</li><li>              <span class="hljs-attr">item</span>: item,</li><li>              <span class="hljs-attr">showDetail</span>: <span class="hljs-literal">true</span>,</li><li>              <span class="hljs-comment">// ...</span></li><li>            })</li><li>          }</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">item: HotItemInterface</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Swiper</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">HotListBuilder</span>(item)</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/hot/src/main/ets/view/HotColumnView.ets#L25-L74" target="_blank">HotColumnView.ets</a></div></div></div></div> <ul><li id="zh-cn_topic_0000001758831130_li1420045031813"><a name="ZH-CN_TOPIC_0000002523026841__zh-cn_topic_0000001758831130_li1420045031813"></a><a name="zh-cn_topic_0000001758831130_li1420045031813"></a>动态卡片</li></ul> <p>信息卡片是显示内容的主体。使用竖向单列布局在宽屏设备上容易造成大量留白，影响视觉效果。在宽屏设备上展示两列布局可充实页面内容。瀑布流布局能紧密连接卡片，提供更紧凑的视觉效果。</p> <p>动态卡片布局主要使用WaterFlow容器，在手机、折叠屏与PC/2in1设备间差异化显示。手机及折叠屏上竖向单列展示，通过分割线分隔卡片。PC/2in1设备上，WaterFlow容器显示2列，依赖断点控制。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.1.5.1.1" valign="top" width="9.309069093090692%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.1.5.1.2" valign="top" width="20.917908209179082%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.1.5.1.3" valign="top" width="30.066993300669935%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.1.5.1.4" valign="top" width="39.70602939706029%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top"><p>设计能力点</p> </td> <td class="cellrowborder" colspan="3" valign="top"><p><span><img originheight="297" originwidth="375" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.08288245619260353685370283769108:50001231000000:2800:F4452BF7C54FB1DBC10FF98E601720EA62F03278174F21A438369F39C5AFD619.png" width="341.2954704529547" height="270.3060125987401"></span></p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="9.309069093090692%"><p>效果图</p> </td> <td class="cellrowborder" valign="top" width="20.917908209179082%"><p><span><img height="684.3657749825018" originheight="1481" originwidth="360" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.94772882618342929415699601334292:50001231000000:2800:2E1CA3950376768C7DA4AF7447CC54B86D0B591B588446A57C02D0C48B42D588.png" title="点击放大" width="168.44475552444754"></span></p> </td> <td class="cellrowborder" valign="top" width="30.066993300669935%"><p><span><img height="485.99874941394756" originheight="1308" originwidth="677" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.08069117616937967110566598434396:50001231000000:2800:3E0EF08B924CD148A2170C5A6C007D85D0D4735EFB220AC592CA0142D5F5A3E2.png" title="点击放大" width="252.6163383661634"></span></p> </td> <td class="cellrowborder" valign="top" width="39.70602939706029%"><p><span><img height="507.35278160183987" originheight="1763" originwidth="1184" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.25339341055864583885169925893843:50001231000000:2800:FE5007AF6A17CF8129813CB728C4C7E0D515275AD0C66107ACF09F784B30761F.png" title="点击放大" width="341.2954704529547"></span></p> </td> </tr>  </tbody></table></div> </div> <div class="screenLinkPre"><div _ngcontent-gtl-c106="" class="highlight-div"><div _ngcontent-gtl-c106="" class="highlight-div-header"><div _ngcontent-gtl-c106="" class="highlight-div-header-left"><div _ngcontent-gtl-c106="" class="handle-button expand-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gtl-c106="" class="highlight-div-header-right"><div _ngcontent-gtl-c106="" class="handle-button ai-button"></div><div _ngcontent-gtl-c106="" class="handle-button line-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gtl-c106="" class="handle-button theme-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gtl-c106="" class="handle-button copy-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gtl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/hot/src/main/ets/view/FoundView.ets#L103-L149" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">WaterFlow</span>() {</li><li>  <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">cardArrayViewModel</span>.<span class="hljs-variable">cardArray</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">CardItem</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>    <span class="hljs-title function_">FlowItem</span>() {</li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-title function_">MicroBlogView</span>({</li><li>          <span class="hljs-variable">cardItem</span>: <span class="hljs-title class_">item</span>,</li><li>          <span class="hljs-comment">// ...</span></li><li>        })</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-title function_">CommentBarView</span>({</li><li>          <span class="hljs-variable">isShowInput</span>: <span class="hljs-keyword">false</span>,</li><li>          <span class="hljs-comment">// ...</span></li><li>        })</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>  }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">CardItem</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; <span class="hljs-variable">index</span> + <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">item</span>))</li><li>}</li><li>.<span class="hljs-title function_">columnsTemplate</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-string">'1fr'</span> : <span class="hljs-string">'1fr 1fr'</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/hot/src/main/ets/view/FoundView.ets#L103-L149" target="_blank">FoundView.ets</a></div></div></div></div> <p><strong>卡片详情区域</strong></p> <p>卡片详情区域支持图文和评论在不同设备上显示上下或左右布局。</p> <p><span><img height="534.0216" originheight="787" originwidth="705" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.56279067985339026731356774726461:50001231000000:2800:C210191DB51DBD8AC896EEAC0B1D3BBDD377F547C210709C3B32AEC845885129.png" title="点击放大" width="478.8"></span></p> <ul><li id="zh-cn_topic_0000001758831130_li11692132514198"><a name="ZH-CN_TOPIC_0000002523026841__zh-cn_topic_0000001758831130_li11692132514198"></a><a name="zh-cn_topic_0000001758831130_li11692132514198"></a>边看边评</li></ul> <p>为了优化图文内容和图片内容的展示效果，并支持同时浏览评论，在不同设备上进行了以下布局设计：手机采用上下布局，折叠屏支持内容区和评论区的上下及左右布局切换，PC/2in1设备固定为左右布局。</p> <p>边看边评功能主要通过栅格布局实现。在手机设备上，图文区和评论区同时占满设备栅格，显示为图文区在上、评论区在下的布局。折叠屏的上下布局实现方式与手机相同。控制图文区占用栅格数为3/5，评论区占用栅格数为2/5，从而实现图文与评论的左右布局。</p> <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-sidebarcontainer" target="_blank">SideBarContainer</a>容器设置评论区宽度。由于栅格布局与SideBarContainer容器无法兼容，使用断点分别控制两处实现的显示隐藏。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.1.5.1.1" valign="top" width="8.389161083891612%"><p>示意图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.1.5.1.2" valign="top" width="21.657834216578344%"><p>sm</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.1.5.1.3" valign="top" width="30.066993300669935%"><p>md</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.1.5.1.4" valign="top" width="39.88601139886011%"><p>lg</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top"><p>设计能力点</p> </td> <td class="cellrowborder" colspan="3" valign="top"><p><span><img height="196.09533778115423" originheight="454" originwidth="794" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.33448481338494874621087757489329:50001231000000:2800:04D5B73A642734FF8BCB74D5AD619DF139EEF292B19D71353E594D017CB0DFD8.png" title="点击放大" width="342.951304869513"></span></p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="8.389161083891612%"><p>效果图</p> </td> <td class="cellrowborder" valign="top" width="21.657834216578344%"><p><span><img height="363.0521981401861" originheight="804" originwidth="385" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.58612940492053352252172956505161:50001231000000:2800:7688EA29763C1194EDF313CE8FA258BF362554A567E85C4CCD8048FD37963E06.png" title="点击放大" width="175.25207479252077"></span></p> </td> <td class="cellrowborder" valign="top" width="30.066993300669935%"><p><span><img height="281.7514227243943" originheight="787" originwidth="705" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.41111590445497494249615433863211:50001231000000:2800:9070AD5C54B3E3FA7CF129D9A999BB0F7C1E2D50CF788D6362866236E5398929.png" title="点击放大" width="252.6163383661634"></span></p> </td> <td class="cellrowborder" valign="top" width="39.88601139886011%"><p></p> <p><span><img height="222.28388825117486" originheight="869" originwidth="1344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.76585777367539545119220563530488:50001231000000:2800:35DBBF0D9B676C212979CECEEBB71309AE8F7571B769A2F770458AC5A41BE904.png" title="点击放大" width="342.951304869513"></span></p> </td> </tr>  </tbody></table></div> </div> <div class="screenLinkPre"><div _ngcontent-gtl-c106="" class="highlight-div"><div _ngcontent-gtl-c106="" class="highlight-div-header"><div _ngcontent-gtl-c106="" class="highlight-div-header-left"><div _ngcontent-gtl-c106="" class="handle-button expand-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gtl-c106="" class="highlight-div-header-right"><div _ngcontent-gtl-c106="" class="handle-button ai-button"></div><div _ngcontent-gtl-c106="" class="handle-button line-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gtl-c106="" class="handle-button theme-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gtl-c106="" class="handle-button copy-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gtl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/detail/src/main/ets/view/DetailPage.ets#L29-L189" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-variable">export</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DetailPage</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Stack</span>() {</li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-title function_">DetailTitleView</span>({ <span class="hljs-variable">isShowedButton</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">isShowedButton</span> })</li><li>        <span class="hljs-title function_">Scroll</span>() {</li><li>          <span class="hljs-title function_">GridRow</span>({ <span class="hljs-variable">columns</span>: { <span class="hljs-variable">sm</span>: <span class="hljs-number">4</span>, <span class="hljs-variable">md</span>: <span class="hljs-number">5</span>, <span class="hljs-variable">lg</span>: <span class="hljs-number">12</span> } }) {</li><li>            <span class="hljs-title function_">GridCol</span>({ <span class="hljs-variable">span</span>: { <span class="hljs-variable">sm</span>: <span class="hljs-number">4</span>, <span class="hljs-variable">md</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">isFoldHorizontal</span> ? <span class="hljs-number">3</span> : <span class="hljs-number">5</span>, <span class="hljs-variable">lg</span>: <span class="hljs-number">12</span> } }) {</li><li>              <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">this</span>.<span class="hljs-variable">isFoldHorizontal</span> &amp;&amp; <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> === <span class="hljs-string">'md'</span>)) {</li><li>                <span class="hljs-title function_">Scroll</span>() {</li><li>                  <span class="hljs-title function_">MicroBlogView</span>({</li><li>                    <span class="hljs-variable">cardItem</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cardItem</span>,</li><li>                    <span class="hljs-variable">index</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">selectCardIndex</span></li><li>                  })</li><li>                  <span class="hljs-comment">// ...</span></li><li>                }</li><li>                <span class="hljs-comment">// ...</span></li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-title function_">MicroBlogView</span>({</li><li>                  <span class="hljs-variable">cardItem</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cardItem</span>,</li><li>                  <span class="hljs-variable">index</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">selectCardIndex</span></li><li>                })</li><li>                <span class="hljs-comment">// ...</span></li><li>              }</li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>
</li><li>            <span class="hljs-title function_">GridCol</span>({ <span class="hljs-variable">span</span>: { <span class="hljs-variable">sm</span>: <span class="hljs-number">4</span>, <span class="hljs-variable">md</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">isFoldHorizontal</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">5</span>, <span class="hljs-variable">lg</span>: <span class="hljs-number">12</span> } }) {</li><li>              <span class="hljs-title function_">CommentListView</span>()</li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>          }</li><li>        }</li><li>        .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> === <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">None</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">Visible</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-title function_">Column</span>() {</li><li>          <span class="hljs-title function_">SideBarContainer</span>() {</li><li>            <span class="hljs-title function_">Column</span>() {</li><li>              <span class="hljs-title function_">CommentListView</span>()</li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>
</li><li>            <span class="hljs-title function_">Column</span>() {</li><li>              <span class="hljs-title function_">Scroll</span>() {</li><li>                <span class="hljs-title function_">MicroBlogView</span>({</li><li>                  <span class="hljs-variable">cardItem</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cardItem</span>,</li><li>                  <span class="hljs-variable">index</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">selectCardIndex</span></li><li>                })</li><li>                <span class="hljs-comment">// ...</span></li><li>              }</li><li>              <span class="hljs-comment">// ...</span></li><li>            }</li><li>            .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-variable">FlexAlign</span>.<span class="hljs-variable">Start</span>)</li><li>          }</li><li>          <span class="hljs-comment">// ...</span></li><li>        }</li><li>        .<span class="hljs-title function_">visibility</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentBreakpoint</span> !== <span class="hljs-string">'lg'</span> ? <span class="hljs-variable">Visibility</span>.<span class="hljs-variable">None</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-title class_">Visible</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/detail/src/main/ets/view/DetailPage.ets#L29-L189" target="_blank">DetailPage.ets</a></div></div></div></div> <div class="tiledSection"><h3 id="section121911956268">交互事件处理<i class="anchor-icon anchor-icon-link" anchorid="section121911956268" tips="复制节点链接"></i></h3></div> <p><strong>鼠标事件</strong></p> <p>PC/2in1设备支持鼠标键盘，需要进行交互事件处理。触控点击评论区触发点击事件拉起弹窗进行评论输入。鼠标点击时触发鼠标事件，更改评论区显示状态为输入状态，取消对点击事件的处理。</p> <p><span><img height="517.2237" originheight="869" originwidth="1344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163228.90224605296176194429301831194678:50001231000000:2800:4A070B232B77CD37CA95E68424A88E2DA7742FCF7262D4FD8BD9EF584E6352B2.png" title="点击放大" width="798"></span></p> <div class="screenLinkPre"><div _ngcontent-gtl-c106="" class="highlight-div"><div _ngcontent-gtl-c106="" class="highlight-div-header"><div _ngcontent-gtl-c106="" class="highlight-div-header-left"><div _ngcontent-gtl-c106="" class="handle-button expand-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gtl-c106="" class="highlight-div-header-right"><div _ngcontent-gtl-c106="" class="handle-button ai-button"></div><div _ngcontent-gtl-c106="" class="handle-button line-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gtl-c106="" class="handle-button theme-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gtl-c106="" class="handle-button copy-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gtl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/detail/src/main/ets/view/CommentBarView.ets#L22-L158" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>export struct CommentBarView {</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  build() {</li><li>    Column() {</li><li>      Row() {</li><li>        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isMouseClick) {</li><li>          Row() {</li><li>            Text(<span class="hljs-string">'写评论'</span>)</li><li>            <span class="hljs-comment">// ...</span></li><li>          }</li><li>          .borderRadius(<span class="hljs-string">'20vp'</span>)</li><li>          .backgroundColor(<span class="hljs-keyword">this</span>.isDarkMode ? <span class="hljs-string">'#26282A'</span> : <span class="hljs-string">'#0D000000'</span>)</li><li>          .padding({ left: <span class="hljs-string">'16vp'</span> })</li><li>          <span class="hljs-comment">// ...</span></li><li>          .onMouse((event: MouseEvent) =&gt; {</li><li>            <span class="hljs-keyword">if</span> (event.button === MouseButton.Left &amp;&amp; event.action === MouseAction.Press) {</li><li>              <span class="hljs-keyword">this</span>.isMouseClick = <span class="hljs-literal">true</span>;</li><li>            }</li><li>          })</li><li>          .onClick(() =&gt; {</li><li>            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isMouseClick) {</li><li>              AppStorage.setOrCreate(<span class="hljs-string">'isShowInput'</span>, <span class="hljs-literal">true</span>);</li><li>            }</li><li>          })</li><li>          <span class="hljs-comment">// ...</span></li><li>        } <span class="hljs-keyword">else</span> {</li><li>          Row() {</li><li>            TextArea({ placeholder: <span class="hljs-string">'写评论'</span>, text: <span class="hljs-keyword">this</span>.content })</li><li>            <span class="hljs-comment">// ...</span></li><li>
</li><li>            Image(<span class="hljs-keyword">this</span>.isDarkMode ? $r(<span class="hljs-string">'app.media.ic_toolbar_send_white'</span>) : $r(<span class="hljs-string">'app.media.ic_toolbar_sent'</span>))</li><li>              <span class="hljs-comment">// ...</span></li><li>              .onClick(() =&gt; {</li><li>                <span class="hljs-keyword">this</span>.isMouseClick = <span class="hljs-literal">false</span>;</li><li>              })</li><li>          }</li><li>          <span class="hljs-comment">// ...</span></li><li>        }</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/detail/src/main/ets/view/CommentBarView.ets#L22-L158" target="_blank">CommentBarView.ets</a></div></div></div></div> <p><strong>文字缩放</strong></p> <p>详情页正文内容支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pinchgesture" target="_blank">捏合手势</a>缩放文字大小。文字区域添加双指捏合手势事件，使用缩放比例计算文字大小及文字行高，实现双指缩放文字的功能。缩放事件输入方式参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-interaction#section088812013815" target="_blank">交互归一</a>。</p> <p>效果如图所示：</p> <p><span><img height="532" originheight="534" originwidth="480" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163229.65251825325147345315077110814943:50001231000000:2800:1E7FC1ACD5DECD45EA73715A2A3F943C1023DE03A021AD2F25A9FA2BD03FBC18.gif" title="点击放大" width="478.8"></span></p> <div class="screenLinkPre"><div _ngcontent-gtl-c106="" class="highlight-div"><div _ngcontent-gtl-c106="" class="highlight-div-header"><div _ngcontent-gtl-c106="" class="highlight-div-header-left"><div _ngcontent-gtl-c106="" class="handle-button expand-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gtl-c106="" class="highlight-div-header-right"><div _ngcontent-gtl-c106="" class="handle-button ai-button"></div><div _ngcontent-gtl-c106="" class="handle-button line-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gtl-c106="" class="handle-button theme-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gtl-c106="" class="handle-button copy-button"><div _ngcontent-gtl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gtl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/detail/src/main/ets/view/MircoBlogView.ets#L33-L201" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>export struct MicroBlogView {</li><li>  <span class="hljs-comment">// ...</span></li><li>  build() {</li><li>    Column() {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cardItem !== undefined) {</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>        Row() {</li><li>          Text(<span class="hljs-keyword">this</span>.cardItem.content)</li><li>            .fontSize(`${<span class="hljs-keyword">this</span>.contentFontSize}fp`)</li><li>            .lineHeight(`${<span class="hljs-keyword">this</span>.contentFontHeight}vp`)</li><li>            <span class="hljs-comment">// ...</span></li><li>        }</li><li>        .gesture(</li><li>          PinchGesture({ fingers: <span class="hljs-number">2</span> })</li><li>            .onActionUpdate((event?: GestureEvent) =&gt; {</li><li>              <span class="hljs-keyword">if</span> (event &amp;&amp; (<span class="hljs-keyword">this</span>.isDetailPage || <span class="hljs-keyword">this</span>.isPictureDetail)) {</li><li>                let tmp = <span class="hljs-keyword">this</span>.pinchValue * event.scale;</li><li>                <span class="hljs-keyword">if</span> (tmp &gt; <span class="hljs-number">1.45</span>) {</li><li>                  tmp = <span class="hljs-number">1.45</span>;</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (tmp &lt; <span class="hljs-number">0.75</span>) {</li><li>                  tmp = <span class="hljs-number">0.75</span>;</li><li>                }</li><li>                <span class="hljs-keyword">this</span>.scaleValue = tmp;</li><li>                <span class="hljs-keyword">this</span>.contentFontSize = <span class="hljs-number">16</span> * <span class="hljs-keyword">this</span>.scaleValue;</li><li>                <span class="hljs-keyword">this</span>.contentFontHeight = <span class="hljs-number">25.6</span> * <span class="hljs-keyword">this</span>.scaleValue;</li><li>                <span class="hljs-keyword">this</span>.pictureMarginTop = <span class="hljs-number">8</span> * (<span class="hljs-keyword">this</span>.scaleValue &gt; <span class="hljs-number">1</span> ? <span class="hljs-keyword">this</span>.scaleValue : <span class="hljs-number">1</span>);</li><li>              }</li><li>            })</li><li>            .onActionEnd(() =&gt; {</li><li>              <span class="hljs-keyword">this</span>.pinchValue = <span class="hljs-keyword">this</span>.scaleValue;</li><li>            })</li><li>        )</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication/blob/master/features/detail/src/main/ets/view/MircoBlogView.ets#L33-L201" target="_blank">MircoBlogView.ets</a></div></div></div></div> <div class="tiledSection"><h2 id="section1361871705310">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section1361871705310" tips="复制节点链接"></i></h2></div> <ul><li><a href="https://gitee.com/harmonyos_codelabs/MultiCommunityApplication" target="_blank">多设备社区评论界面</a></li></ul> </div> <div></div></div>