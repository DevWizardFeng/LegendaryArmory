<h1 _ngcontent-xpo-c119="" class="doc-title ng-star-inserted" title="多设备资源文件"> 多设备资源文件 </h1>

<div _ngcontent-xpo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>在页面开发过程中，经常需要用到颜色、字体、间距、图片等资源，在不同的设备或配置中，这些资源的值可能不同。有两种方式处理：</p> <ul><li><p><a href="/consumer/cn/doc/best-practices/bpta-multi-device-resource#应用资源">应用资源</a>：借助资源文件能力，开发者在应用中自定义资源，自行管理这些资源在不同的设备或配置中的表现。</p> </li><li><p><a href="/consumer/cn/doc/best-practices/bpta-multi-device-resource#系统资源">系统资源</a>：开发者直接使用系统预置的资源定义（即分层参数）。</p> </li></ul> <div class="tiledSection"><h2 id="应用资源">应用资源<i class="anchor-icon anchor-icon-link" anchorid="应用资源" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="资源文件介绍" class="firsth2">资源文件介绍<i class="anchor-icon anchor-icon-link" anchorid="资源文件介绍" tips="复制节点链接"></i></h3><p>应用开发中使用的各类自定义资源文件，需要统一存放于应用的resources目录下，便于使用和维护。resources目录包括两大类目录，一类为base目录与限定词目录，另一类为rawfile目录，其基础目录结构如下所示。</p> <div _ngcontent-xpo-c106="" class="highlight-div"><div _ngcontent-xpo-c106="" class="highlight-div-header"><div _ngcontent-xpo-c106="" class="highlight-div-header-left"><div _ngcontent-xpo-c106="" class="handle-button expand-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xpo-c106="" class="highlight-div-header-right"><div _ngcontent-xpo-c106="" class="handle-button ai-button"></div><div _ngcontent-xpo-c106="" class="handle-button line-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xpo-c106="" class="handle-button theme-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xpo-c106="" class="handle-button copy-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xpo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li>└──entry/src/main/resources                                  <span class="hljs-comment">// 资源区</span></li><li>   ├──<span class="hljs-keyword">base</span>                                                   <span class="hljs-comment">// 默认存在的目录                                </span></li><li>   │  ├──element        </li><li>   │  │  ├──color.json                                       <span class="hljs-comment">// 颜色资源</span></li><li>   │  │  ├──<span class="hljs-built_in">float</span>.json                                       <span class="hljs-comment">// 数字资源</span></li><li>   │  │  └──<span class="hljs-built_in">string</span>.json                                      <span class="hljs-comment">// 字符串资源</span></li><li>   │  ├──media                                               <span class="hljs-comment">// 媒体资源</span></li><li>   │  └──profile                                             <span class="hljs-comment">// 路由资源</span></li><li>   ├──en_US                                                  <span class="hljs-comment">// 限定词目录示例，需要开发者自行创建 </span></li><li>   ├──zh_CN                                                  <span class="hljs-comment">// 限定词目录示例，需要开发者自行创建 </span></li><li>   └──rawfile                                                <span class="hljs-comment">// 原始文件目录</span></li></ol></pre></div></div> <p>base目录默认存在，而限定词目录需要开发者自行创建，其名称可以由一个或多个表征应用场景或设备特征的限定词组合而成。应用使用某资源时，系统会根据当前设备状态优先从相匹配的限定词目录中寻找该资源。只有当resources目录中没有与设备状态匹配的限定词目录，或者在限定词目录中找不到该资源时，才会去base目录中查找。rawfile是原始文件目录，它不会根据设备状态去匹配不同的资源，故不在本文的讨论范围内。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li><p>请访问<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/resource-categories-and-access#限定词目录" target="_blank">限定词目录</a>，了解限定词目录的命名规则、创建流程、匹配规则等，本文不展开介绍。</p> </li><li><p>没有设备状态匹配的限定词目录，或者在限定词目录中找不到目标资源时，会继续在base目录中查找。<strong>强烈建议对于所有应用自定义资源都在base目录中定义默认值</strong>，防止出现找不到资源值的异常场景。</p> </li><li><p>类Web开发范式的资源文件路径及资源限定词的使用与声明式范式不同，详情请参考类Web开发范式的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/js-framework-resource-restriction" target="_blank">资源限定与访问</a>及<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/js-framework-file" target="_blank">文件组织</a>。</p> </li></ul> </div></div></div> <p>base目录与限定词目录下面可以创建资源组目录，用于存放特定类型的资源文件（包括element、media等）。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.4.1.1" valign="top" width="10.17%"><p>资源组目录</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.4.1.2" valign="top" width="41.99%"><p>目录说明</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.4.1.3" valign="top" width="47.839999999999996%"><p>资源文件</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="10.17%"><p>element</p> </td> <td class="cellrowborder" valign="top" width="41.99%"><p>表示元素资源，以下每一类数据都采用相应的JSON文件来表征。</p> <p>- boolean，布尔型</p> <p>- color，颜色</p> <p>- float，浮点型</p> <p>- intarray，整型数组</p> <p>- integer，整型</p> <p>- pattern，样式</p> <p>- plural，复数形式</p> <p>- strarray，字符串数组</p> <p>- string，字符串</p> </td> <td class="cellrowborder" valign="top" width="47.839999999999996%"><p>element目录中的文件名称建议与下面的文件名保持一致。每个文件中只能包含同一类型的数据。</p> <p>- boolean.json</p> <p>- color.json</p> <p>- float.json</p> <p>- intarray.json</p> <p>- integer.json</p> <p>- pattern.json</p> <p>- plural.json</p> <p>- strarray.json</p> <p>- string.json</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="10.17%"><p>media</p> </td> <td class="cellrowborder" valign="top" width="41.99%"><p>表示媒体资源，包括图片、音频、视频等非文本格式的文件。</p> </td> <td class="cellrowborder" valign="top" width="47.839999999999996%"><p>文件名可自定义，例如：icon.png。</p> </td> </tr>  </tbody></table></div> </div> <p>在element目录的各个资源文件中，以“name-value”的形式定义资源，如下所示。而在media目录中，直接以文件名作为name，故开发者将文件放入media目录即可，无需再额外定义name。</p> <div _ngcontent-xpo-c106="" class="highlight-div"><div _ngcontent-xpo-c106="" class="highlight-div-header"><div _ngcontent-xpo-c106="" class="highlight-div-header-left"><div _ngcontent-xpo-c106="" class="handle-button expand-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xpo-c106="" class="highlight-div-header-right"><div _ngcontent-xpo-c106="" class="handle-button ai-button"></div><div _ngcontent-xpo-c106="" class="handle-button line-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xpo-c106="" class="handle-button theme-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xpo-c106="" class="handle-button copy-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xpo-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" hw-language="json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// color.json </span></li><li><span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color_red"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#FFFF0000"</span></li><li>        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span></li><li>        <span class="hljs-punctuation">{</span></li><li>            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color_blue"</span><span class="hljs-punctuation">,</span></li><li>            <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#FF0000FF"</span></li><li>        <span class="hljs-punctuation">}</span></li><li>    <span class="hljs-punctuation">]</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="访问应用资源">访问应用资源<i class="anchor-icon anchor-icon-link" anchorid="访问应用资源" tips="复制节点链接"></i></h3><p>在工程中，通过 "$r('app.type.name')" 的形式引用应用资源。app代表是应用内resources目录中定义的资源；type 代表资源类型（或资源的存放位置），可以取 color、float、string、plural和media，name代表资源命名，由开发者添加资源时确定。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>可以查看声明式范式的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/resource-categories-and-access#资源访问" target="_blank">资源访问</a>，了解资源访问的更多细节。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="示例">示例<i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h3><p>在应用的resources目录下，创建名为tablet的限定词子目录，并按照下表所示，在base目录和tablet限定词目录中添加相应的资源。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.1" valign="top" width="25%"><p>资源名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.2" valign="top" width="25%"><p>资源类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.3" valign="top" width="25%"><p>base目录中资源值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.4" valign="top" width="25%"><p>限定词目录（tablet）中资源值</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%"><p>my_string</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>string</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>default</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>tablet</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>my_color</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>color</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>#ff0000</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>#0000ff</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>my_float</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>float</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>60vp</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>80vp</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>my_image</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>media</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>my_image.png（太阳图标）</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>my_image.png（月亮图标）</p> </td> </tr>  </tbody></table></div> </div> <p>在代码中通过 "$r('app.type.name')" 的形式使用应用资源，并分别在默认设备和平板上查看代码的运行效果，可以发现同一资源在不同设备上的取值不同。</p> <p><span><img height="342.9937" originheight="793" originwidth="1845" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163106.51516982439335632989532003267103:50001231000000:2800:729265DFEBE242CC730D09E89CCCEF169DEF0B7E48F9DA84F1F9B5208EF9F652.png" title="点击放大" width="798"></span></p> <div class="screenLinkPre"><div _ngcontent-xpo-c106="" class="highlight-div"><div _ngcontent-xpo-c106="" class="highlight-div-header"><div _ngcontent-xpo-c106="" class="highlight-div-header-left"><div _ngcontent-xpo-c106="" class="handle-button expand-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xpo-c106="" class="highlight-div-header-right"><div _ngcontent-xpo-c106="" class="handle-button ai-button"></div><div _ngcontent-xpo-c106="" class="handle-button line-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xpo-c106="" class="handle-button theme-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xpo-c106="" class="handle-button copy-button"><div _ngcontent-xpo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xpo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AdaptiveCapabilities/entry/src/main/ets/pages/resourceQualifier/ResourceQualifier.ets#L17-L34" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">@Entry</span></li><li><span class="hljs-variable">@Component</span></li><li>struct ResourceQualifier {</li><li>  <span class="hljs-selector-tag">build</span>() {</li><li>    <span class="hljs-selector-tag">Column</span>() {</li><li>      <span class="hljs-selector-tag">Text</span>($<span class="hljs-built_in">r</span>(<span class="hljs-string">'app.string.my_string'</span>))</li><li>        <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">60</span>)</li><li>        <span class="hljs-selector-class">.fontColor</span>($<span class="hljs-built_in">r</span>(<span class="hljs-string">'app.color.my_color'</span>))</li><li>      <span class="hljs-selector-tag">Image</span>($<span class="hljs-built_in">r</span>(<span class="hljs-string">"app.media.my_image"</span>))</li><li>        <span class="hljs-selector-class">.width</span>(<span class="hljs-number">100</span>)</li><li>        <span class="hljs-selector-class">.height</span>(<span class="hljs-number">100</span>)</li><li>    }</li><li>    <span class="hljs-selector-class">.height</span>(<span class="hljs-string">'100%'</span>)</li><li>    <span class="hljs-selector-class">.width</span>(<span class="hljs-string">'100%'</span>)</li><li>    <span class="hljs-selector-class">.alignItems</span>(HorizontalAlign.Center)</li><li>    <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.Center)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AdaptiveCapabilities/entry/src/main/ets/pages/resourceQualifier/ResourceQualifier.ets#L17-L34" target="_blank">ResourceQualifier.ets</a></div></div></div></div> </div> <div class="tiledSection"><h2 id="系统资源">系统资源<i class="anchor-icon anchor-icon-link" anchorid="系统资源" tips="复制节点链接"></i></h2><p>除了自定义资源，开发者也可以使用系统中预定义的资源（即分层参数，同一资源ID在设备类型、深浅色等不同配置下有不同的取值）。</p> <p>在开发过程中，分层参数的用法与资源限定词基本一致。开发者可以通过"$r('sys.type.resource_id')"的形式引用系统资源。sys代表是系统资源；type代表资源类型，值可以取color、float、string和media；resource_id代表资源id。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li><p>仅声明式开发范式支持使用分层参数，类Web开发范式不支持。</p> </li><li><p>系统资源可以保证不同团队开发出的应用有较为一致的视觉风格。对于系统预置应用，强烈建议使用系统资源；对于三方应用，可以根据需要选择使用系统资源或自定义应用资源。</p> </li></ul> </div></div></div> </div> </div> <div></div></div>