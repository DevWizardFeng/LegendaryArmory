<h1 _ngcontent-sjl-c119="" class="doc-title ng-star-inserted" title="常见列表流"> 常见列表流 </h1>

<div _ngcontent-sjl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section5170186144414">概述<i class="anchor-icon anchor-icon-link" anchorid="section5170186144414" tips="复制节点链接"></i></h2><p>列表流是采用以“行”为单位进行内容排列的布局形式，每“行”列表项通过文本、图片等不同形式的组合，高效地显示结构化的信息，当列表项内容超过屏幕大小时，可以提供滚动功能。列表流具有排版整齐、重点突出、对比方便、浏览速度快等特点。同时列表流也具有非常广泛的使用场景，例如：应用首页、通讯录、音乐列表、购物清单等。</p> <p>列表流主要使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list" target="_blank">List</a>组件，按垂直方向线性排列子组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitemgroup" target="_blank">ListItemGroup</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-listitem" target="_blank">ListItem</a>，混合渲染任意数量的图文视图，从而构建列表内容。在实际场景中，一般会根据需要，结合其它基础组件，形成相对复杂的交互功能。</p> <p>本文将介绍以下列表流场景的实现：</p> <ul><li><a href="/consumer/cn/doc/best-practices/bpta-common-list-flows#section20614147618">多类型列表项场景</a></li><li><a href="/consumer/cn/doc/best-practices/bpta-common-list-flows#section103354617711">Tabs吸顶场景</a></li><li><a href="/consumer/cn/doc/best-practices/bpta-common-list-flows#section16551551888">分组吸顶场景</a></li><li><a href="/consumer/cn/doc/best-practices/bpta-common-list-flows#section323632114913">二级联动场景</a></li></ul> </div> <div class="tiledSection"><h2 id="section20614147618">多类型列表项场景<i class="anchor-icon anchor-icon-link" anchorid="section20614147618" tips="复制节点链接"></i></h2><p><strong>场景描述</strong></p> <p>List组件作为整个首页长列表的容器，通过ListItem对不同模块进行视图界面定制，常用于门户首页、商城首页等多类型视图展示的列表信息流场景。</p> <p>本场景以应用首页为例，将除页面顶部搜索框区域的其它内容，放在List组件内部，进行整体页面的构建。进入页面后，下滑刷新模拟网络请求；滑动页面列表内容，景区标题吸顶；滑动到页面底部，上滑模拟请求添加数据。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.5.1.3.1.1" valign="top" width="50%"><p>页面整体结构图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.3.1.2" valign="top" width="50%"><p>页面效果图</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><span><img height="459.24905882352937" originheight="2259" originwidth="2144" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162905.69023305889032877319902797753137:50001231000000:2800:36D8DB101CB6581E94C0CE737D4C9F1576773004E2653DD4BEEC93E6D6B4292E.png" title="点击放大" width="436"></span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p><span><img height="480.5689" originheight="2258" originwidth="1093" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162905.93641027575635467493133083625260:50001231000000:2800:C1D5E1B119D937D46582E28E1C2DCF1B078625307926B8A12E9477A564719F75.png" title="点击放大" width="232.75"></span></p> </td> </tr>  </tbody></table></div> </div> <p><strong>实现原理</strong></p> <p>根据列表内部各部分视图对应数据类型的区别，渲染不同的ListItem子组件。</p> <p>Refresh组件可以进行页面下拉操作并显示刷新动效，List组件配合使用Swiper、Grid等基础组件用于页面的整体构建，再通过List组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#sticky9" target="_blank">sticky</a>属性、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#onreachend" target="_blank">onReachEnd()</a>事件和Refresh组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-refresh#onrefreshing" target="_blank">onRefreshing()</a>事件，实现下滑模拟刷新、上滑模拟添加数据及列表标题吸顶的效果。</p> <p><strong>开发步骤</strong></p> <ol><li>顶部搜索框区域。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L115-L135" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">Row</span>() {</li><li>  Text('Beijing')</li><li>    <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-built_in">TextInput</span>({ placeholder: 'guess you want to search...'})</li><li>    <span class="hljs-comment">// ...</span></li><li>  Text('more')</li><li>    <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L115-L135" target="_blank">HomePage.ets</a></div></div></div></div> <p>实现效果：</p> <p><span><img height="37.492700000000006" originheight="179" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162906.80629841783289595565851245103441:50001231000000:2800:373759B54FBFC8B97937FB4D0B9363A0D573301A31DA36117C2215F5E164D6B6.png" title="点击放大" width="266"></span></p> </li><li>在List的第一个ListItem分组中，使用Swiper组件构建页面轮播图内容。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L146-L283" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">12</span> }) {</li><li>  <span class="hljs-comment">// Swiper</span></li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-title class_">Swiper</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">swiperContent</span>, <span class="hljs-function">(<span class="hljs-params">item: SwiperType</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">BottomStart</span> }) {</li><li>          <span class="hljs-title class_">Image</span>($r(item.<span class="hljs-property">pic</span>))</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">item: SwiperType</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>    .<span class="hljs-title function_">autoPlay</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">// Set the child component to play automatically</span></li><li>    .<span class="hljs-title function_">duration</span>(<span class="hljs-number">1000</span>) <span class="hljs-comment">// Set the animation duration of the child component switchover</span></li><li>    .<span class="hljs-title function_">curve</span>(<span class="hljs-title class_">Curve</span>.<span class="hljs-property">Linear</span>) <span class="hljs-comment">// Set the animation curve to uniform speed</span></li><li>    .<span class="hljs-title function_">indicator</span>( <span class="hljs-comment">// Set the navigation point indicator</span></li><li>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">DotIndicator</span>()</li><li>        .<span class="hljs-title function_">selectedColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>    )</li><li>    .<span class="hljs-title function_">itemSpace</span>(<span class="hljs-number">10</span>) <span class="hljs-comment">// Set the space between child components</span></li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L146-L283" target="_blank">HomePage.ets</a></div></div></div></div> <p>实现效果：</p> <p><span><img height="132.74730000000002" originheight="629" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162906.11096287043176739613809554918749:50001231000000:2800:91EEA07C2DC61CD97D92E261D2D080533E12F5D2A550F8A34EA145375A80163F.png" title="点击放大" width="266"></span></p> </li><li>在List的第二个ListItem分组中，使用Grid组件构建页面网格区域。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L148-L283" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">12</span> }) {</li><li>  <span class="hljs-comment">// Swiper</span></li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// Grid</span></li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-title class_">Grid</span>() {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">gridTitle</span>, <span class="hljs-function">(<span class="hljs-params">item: Resource</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">GridItem</span>() {</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.pic1'</span>))</li><li>              <span class="hljs-comment">// ...</span></li><li>            <span class="hljs-title class_">Text</span>(item)</li><li>              <span class="hljs-comment">// ...</span></li><li>          }</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">item: Resource</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>    }</li><li>    .<span class="hljs-title function_">rowsGap</span>(<span class="hljs-number">16</span>) <span class="hljs-comment">// Set the line spacing</span></li><li>    .<span class="hljs-title function_">columnsGap</span>(<span class="hljs-number">19</span>) <span class="hljs-comment">// Set the column spacing</span></li><li>    .<span class="hljs-title function_">columnsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr 1fr 1fr'</span>) <span class="hljs-comment">// Set the proportion of each column</span></li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L148-L283" target="_blank">HomePage.ets</a></div></div></div></div> <p>实现效果：</p> <p><span><img height="129.1962" originheight="613" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162906.87530306083747418697290070240627:50001231000000:2800:9C64C6BBA23B6AE49EB36324F83D990FF43449C651A7F1B7581E72685C26463A.png" title="点击放大" width="266"></span></p> </li><li>推荐内容及列表内容的构建。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L60-L106" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Scenic spot list content details</span></li><li><span class="hljs-keyword">@Builder</span></li><li>scenicSpotDetailBuilder(<span class="hljs-attribute">title</span>: Resource) {</li><li>  <span class="hljs-built_in">Column</span>() {</li><li>    <span class="hljs-built_in">Image</span>($r('app.media.pic1'))</li><li>      <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-built_in">Column</span>() {</li><li>      Text(title)</li><li>        <span class="hljs-comment">// ...</span></li><li>      Text() {</li><li>        <span class="hljs-selector-tag">Span</span>('Multi person group discount:')</li><li>          <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-selector-tag">Span</span>('<span class="hljs-number">999</span>￥')</li><li>          <span class="hljs-comment">// ...</span></li><li>      }</li><li>      <span class="hljs-selector-class">.margin</span>({ top: <span class="hljs-number">4</span>, bottom: <span class="hljs-number">4</span> })</li><li>
</li><li>      Text() {</li><li>        <span class="hljs-selector-tag">Span</span>('Multi person group discount:')</li><li>        <span class="hljs-selector-tag">Span</span>('<span class="hljs-number">1999</span>￥')</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L60-L106" target="_blank">HomePage.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L149-L282" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">12</span> }) {</li><li>  <span class="hljs-comment">// Swiper</span></li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// Grid</span></li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// Customize display area.</span></li><li>  <span class="hljs-title class_">ListItem</span>() {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.pic1'</span>))</li><li>        <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.pic1'</span>))</li><li>        <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// Scenic spot classification list.</span></li><li>  <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scenicSpotTitle</span>, <span class="hljs-function">(<span class="hljs-params">item: Resource</span>) =&gt;</span> {</li><li>    <span class="hljs-title class_">ListItemGroup</span>({ <span class="hljs-attr">header</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scenicSpotHeader</span>(item) }) {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scenicSpotArray</span>, <span class="hljs-function">(<span class="hljs-params">scenicSpotItem: Resource</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scenicSpotDetailBuilder</span>(scenicSpotItem);</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">scenicSpotItem: Resource</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(scenicSpotItem))</li><li>    }</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">borderRadiusVal</span>)</li><li>  }, <span class="hljs-function">(<span class="hljs-params">item: Resource</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item))</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L149-L282" target="_blank">HomePage.ets</a></div></div></div></div> <p>实现效果：</p> <p><span><img height="303.9981" originheight="1440" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162906.38230666636141007789458041831906:50001231000000:2800:D40327C1FAAA51808DF67754701C69886C3F9B9EFF03C332616E23395D44F87A.png" title="点击放大" width="266"></span></p> </li><li>将构建好的页面内容，放在Refresh组件内部，并给List和Refresh组件添加对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#onreachend" target="_blank">onReachEnd()</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-refresh#onrefreshing" target="_blank">onRefreshing()</a>回调，实现下拉模拟刷新和上滑添加列表数据的效果。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L113-L317" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Top search box.</span></li><li>Row() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>
</li><li><span class="hljs-comment">// Pull down refresh component.</span></li><li>Refresh({ refreshing: $$<span class="hljs-keyword">this</span>.isRefreshing }) {</li><li>  <span class="hljs-comment">// List as a long list layout.</span></li><li>  List({ space: <span class="hljs-number">12</span> }) {</li><li>    <span class="hljs-comment">// Swiper</span></li><li>    ListItem() {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// Grid</span></li><li>    ListItem() {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// Customize display area.</span></li><li>    ListItem() {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// Scenic spot classification list.</span></li><li>    ForEach(<span class="hljs-keyword">this</span>.scenicSpotTitle, (item: Resource) =&gt; {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }, (item: Resource) =&gt; JSON.stringify(item))</li><li>
</li><li>    <span class="hljs-comment">// Customize bottom loading for more.</span></li><li>    ListItem() {</li><li>      Row() {</li><li>        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.noMoreData) {</li><li>          LoadingProgress()</li><li>            <span class="hljs-comment">// ...</span></li><li>        }</li><li>        Text(<span class="hljs-keyword">this</span>.noMoreData ? $r(<span class="hljs-string">'app.string.no_more_data'</span>) : $r(<span class="hljs-string">'app.string.loading_more'</span>))</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  .onReachEnd(() =&gt; { <span class="hljs-comment">// Callback triggered when the list is added to the end position</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.scenicSpotArray.length &gt;= <span class="hljs-number">20</span>) {</li><li>      <span class="hljs-comment">// When the list data is greater than or equal to 20, noMoreData is set to true</span></li><li>      <span class="hljs-keyword">this</span>.noMoreData = <span class="hljs-literal">true</span>;</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    setTimeout(() =&gt; {</li><li>      <span class="hljs-keyword">this</span>.scenicSpotArray.push(<span class="hljs-string">'scenic area'</span> + (<span class="hljs-keyword">this</span>.scenicSpotArray.length + <span class="hljs-number">1</span>));</li><li>    }, <span class="hljs-number">500</span>)</li><li>  })</li><li>}</li><li><span class="hljs-comment">// Pull down refresh, simulate network request.</span></li><li>.onRefreshing(() =&gt; {</li><li>  <span class="hljs-keyword">this</span>.isRefreshing = <span class="hljs-literal">true</span>; <span class="hljs-comment">// Enter the refresh state</span></li><li>  setTimeout(() =&gt; {</li><li>    <span class="hljs-comment">// Set the landscapeSpotArray to the initial value</span></li><li>    <span class="hljs-keyword">this</span>.scenicSpotArray =</li><li>      <span class="hljs-keyword">this</span>.scenicSpotArray = [<span class="hljs-string">'scenic area 1'</span>, <span class="hljs-string">'scenic area 2'</span>, <span class="hljs-string">'scenic area 3'</span>, <span class="hljs-string">'scenic area 4'</span>, <span class="hljs-string">'scenic area 5'</span>];</li><li>    <span class="hljs-keyword">this</span>.noMoreData = <span class="hljs-literal">false</span>;</li><li>    <span class="hljs-keyword">this</span>.isRefreshing = <span class="hljs-literal">false</span>;</li><li>  }, <span class="hljs-number">2000</span>)</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/HomePage.ets#L113-L317" target="_blank">HomePage.ets</a></div></div></div></div> </li></ol> <p><strong>实现效果</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.2.12.1.3.1.1" valign="top" width="49.96%"><p>模拟下拉刷新+标题吸顶效果</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.2.12.1.3.1.2" valign="top" width="50.03999999999999%"><p>上滑加载更多效果</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="49.96%"><p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162906.49207300949664504435224120572055:50001231000000:2800:90A51E1DA76742B54B56BF985FD7A65BA56CDD2EFB440603D9E491EA2CFB35C4.gif" title="点击放大" width="266"></span></p> </td> <td class="cellrowborder" valign="top" width="50.03999999999999%"><p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162906.64102977825184227665596953416664:50001231000000:2800:BF33643E27E3D76F4AD9FCDD044FFA2EB480304D1F2C6B2DF1BF43DB891F3153.gif" title="点击放大" width="266"></span></p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section103354617711">Tabs吸顶场景<i class="anchor-icon anchor-icon-link" anchorid="section103354617711" tips="复制节点链接"></i></h2><p><strong>场景描述</strong></p> <p>Tabs嵌套List的吸顶效果，常用于新闻、资讯类应用的首页。</p> <p>本场景以Tabs页签首页内容为例，在首页TabContent的内容区域使用List组件配合其它组件，构建下方列表数据内容。进入页面后，向上滑动内容，中间Tabs页签区域实现吸顶展示的效果。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.1" valign="top" width="50%"><p>页面整体结构图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.2" valign="top" width="50%"><p>页面效果图</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><span><img height="466.83000000000004" originheight="2259" originwidth="1798" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162906.02877018126966678008273292561595:50001231000000:2800:E9641E43E6180AB5E1C2834DADDBCAD6FDDCE975D18535316DE73A6D4F90F928.png" title="点击放大" width="371.90790000000004"></span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p><span><img height="466.83000000000004" originheight="2258" originwidth="1093" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162907.74596650490946143613719594913478:50001231000000:2800:C86AA6A2E40D7A9C4E74C1142C26C49F74D775999088795C4506200D1FE9ED6D.png" title="点击放大" width="226.10000000000002"></span></p> </td> </tr>  </tbody></table></div> </div> <p><strong>实现原理</strong></p> <p>Tabs组件可以在页面内快速实现视图内容的切换，让用户能够聚焦于当前显示的内容，并对页面内容进行分类，提高页面空间利用率。</p> <p>通过Tabs组件，配合使用Stack、Scroll、Search以及List等基础组件构建完整页面，再使用List组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#nestedscroll10" target="_blank">nestedScroll</a>属性，结合calc计算高度，实现中间Tabs页签区域吸顶展示的效果。</p> <p><strong>开发步骤</strong></p> <ol><li>构建Tabs的自定义tabBar内容。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L54-L80" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li>tabBuilder(img: Resource, title: Resource, index: number) {</li><li>  Column() {</li><li>    Image(img)</li><li>      <span class="hljs-comment">// ...</span></li><li>      .fillColor(<span class="hljs-keyword">this</span>.currentIndex === index ? <span class="hljs-string">'#0a59f7'</span> : <span class="hljs-string">'#66000000'</span>)</li><li>    Text(title)</li><li>      <span class="hljs-comment">// ...</span></li><li>      .fontColor(<span class="hljs-keyword">this</span>.currentIndex === index ? <span class="hljs-string">'#0a59f7'</span> : <span class="hljs-string">'#66000000'</span>)</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  .onClick(() =&gt; {</li><li>    <span class="hljs-keyword">this</span>.currentIndex = index;</li><li>    <span class="hljs-keyword">this</span>.tabsController.changeIndex(<span class="hljs-keyword">this</span>.currentIndex);</li><li>  })</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L54-L80" target="_blank">ManagerPage.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L86-L271" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Tabs</span>({ <span class="hljs-variable">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-title class_">End</span>, <span class="hljs-variable">controller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">tabsController</span> }) {</li><li>  <span class="hljs-title function_">TabContent</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  .<span class="hljs-title function_">tabBar</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title function_">tabBuilder</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.media.mine'</span>), $<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.string.tabBar1'</span>), <span class="hljs-number">0</span>))</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>.<span class="hljs-title function_">onChange</span>((<span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>  <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentIndex</span> = <span class="hljs-variable">index</span>;</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L86-L271" target="_blank">ManagerPage.ets</a></div></div></div></div> <p>实现效果：</p> <p><span><img height="56.2457" originheight="267" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162907.49440750153166681190802845721261:50001231000000:2800:3478D22A00586DCB74A95CAE7A9EE37F1755D6B88A72CDA2FE95017D8BB142E1.png" title="点击放大" width="266"></span></p> </li><li>构建顶部搜索区域。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L206-L229" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">Row</span>() {</li><li>  <span class="hljs-built_in">Image</span>($r('app.media.app_icon'))</li><li>    <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-built_in">Search</span>({</li><li>    placeholder: 'guess you want to search...',</li><li>  })</li><li>    <span class="hljs-selector-class">.searchButton</span>('search', { fontSize: <span class="hljs-number">14</span> })</li><li>    <span class="hljs-comment">// ...</span></li><li>  Text('more')</li><li>    <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L206-L229" target="_blank">ManagerPage.ets</a></div></div></div></div> <p>实现效果：</p> <p><span><img height="39.0089" originheight="187" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162907.46099908384585577623348751757980:50001231000000:2800:DBF8BB9D53192A88E679B5B5FDE476A251F4A5C3B82315BA04F4CC46F51CB1AE.png" title="点击放大" width="266"></span></p> </li><li>图片占位区域、自定义导航内容及列表内容构建。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L91-L201" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Home page content.</span></li><li><span class="hljs-title function_">Scroll</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">scrollController</span>) {</li><li>  <span class="hljs-title function_">Column</span>() {</li><li>    <span class="hljs-comment">// Image position-holder area</span></li><li>    <span class="hljs-title function_">Image</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.media.pic5'</span>))</li><li>      <span class="hljs-comment">// ...</span></li><li>
</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-comment">// Customize tabBar.</span></li><li>      <span class="hljs-title function_">Row</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">16</span> }) {</li><li>        <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">tabArray</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">string</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>          <span class="hljs-title function_">Text</span>(<span class="hljs-variable">item</span>)</li><li>            .<span class="hljs-title function_">fontColor</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentTabIndex</span> === <span class="hljs-variable">index</span> ? <span class="hljs-string">'#0a59f7'</span> : <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">Black</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>              <span class="hljs-comment">// Click to switch tabs content.</span></li><li>              <span class="hljs-keyword">this</span>.<span class="hljs-variable">contentTabController</span>.<span class="hljs-title function_">changeIndex</span>(<span class="hljs-variable">index</span>);</li><li>              <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentTabIndex</span> = <span class="hljs-variable">index</span>;</li><li>            })</li><li>        }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">string</span>) =&gt; <span class="hljs-variable">item</span>)</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>
</li><li>      <span class="hljs-comment">// Tabs</span></li><li>      <span class="hljs-title function_">Tabs</span>({ <span class="hljs-variable">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-title class_">Start</span>, <span class="hljs-variable">controller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">contentTabController</span> }) {</li><li>        <span class="hljs-title function_">TabContent</span>() {</li><li>          <span class="hljs-title function_">List</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">10</span>, <span class="hljs-variable">scroller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">listScroller</span> }) {</li><li>            <span class="hljs-title function_">CustomListItem</span>({</li><li>              <span class="hljs-variable">imgUrl</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">media</span>.<span class="hljs-title class_">pic1</span>'),</li><li>              <span class="hljs-variable">title</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">string</span>.<span class="hljs-title class_">manager_content</span>')</li><li>            })</li><li>            <span class="hljs-comment">// ...</span></li><li>          }</li><li>          <span class="hljs-comment">// ...</span></li><li>        }</li><li>        .<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'follow'</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>.<span class="hljs-title function_">scrollBar</span>(<span class="hljs-variable">BarState</span>.<span class="hljs-variable">Off</span>) <span class="hljs-comment">// Hide the scroll bar</span></li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L91-L201" target="_blank">ManagerPage.ets</a></div></div></div></div> <p>实现效果：</p> <p><span><img height="301.97650000000004" originheight="1432" originwidth="1260" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162907.85189497143766156993018913053912:50001231000000:2800:60A5875410AB47C939078B62DFB53825282CE119D370CF2C570BF560B5C2715A.png" title="点击放大" width="266"></span></p> </li><li>给List组件添加的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#nestedscroll10" target="_blank">nestedScroll</a>属性，结合calc计算实现中间自定义Tab页签区域吸顶展示的效果。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L123-L186" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Tabs</span>({ <span class="hljs-variable">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-title class_">Start</span>, <span class="hljs-variable">controller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">contentTabController</span> }) {</li><li>  <span class="hljs-title function_">TabContent</span>() {</li><li>    <span class="hljs-title function_">List</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">10</span>, <span class="hljs-variable">scroller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">listScroller</span> }) {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-comment">// Customize the tabBar to achieve ceiling suction by combining the nestedScroll attribute with Calc to calculate height.</span></li><li>    .<span class="hljs-title function_">nestedScroll</span>({</li><li>      <span class="hljs-variable">scrollForward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-title class_">PARENT_FIRST</span>, <span class="hljs-comment">// Set the effect of scrolling the component to the end: The parent component rolls first, and then rolls itself to the edge</span></li><li>      <span class="hljs-variable">scrollBackward</span>: <span class="hljs-title class_">NestedScrollMode</span>.<span class="hljs-title class_">SELF_FIRST</span> <span class="hljs-comment">// Set the effect of rolling the component to the start end: Rolls itself first, and then the parent component scrolls to the edge</span></li><li>    })</li><li>  }</li><li>  .<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'follow'</span>)</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">barHeight</span>(<span class="hljs-number">0</span>)</li><li>.<span class="hljs-title function_">height</span>(<span class="hljs-string">'calc(100% - 100vp)'</span>)</li><li>.<span class="hljs-title function_">onChange</span>((<span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>  <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentTabIndex</span> = <span class="hljs-variable">index</span>;</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/ManagerPage.ets#L123-L186" target="_blank">ManagerPage.ets</a></div></div></div></div> </li></ol> <p><strong>实现效果</strong></p> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162907.96553912329376523578439455330641:50001231000000:2800:F912331B87D1612098449A8B6FFA5A6CA21C5786931FCCACF3CA2AEAA8AD04B6.gif" title="点击放大" width="266"></span></p> </div> <div class="tiledSection"><h2 id="section16551551888">分组吸顶场景<i class="anchor-icon anchor-icon-link" anchorid="section16551551888" tips="复制节点链接"></i></h2><p><strong>场景描述</strong></p> <p>双列表同向联动，右边字母列表用于快速索引，内容列表根据首字母进行分组，常用于通讯录、城市选择、分组选择等页面。</p> <p>本场景以城市列表页面为例，左侧城市列表数据和右侧字母导航数据通过List组件来展示，并通过Stack组件使两个列表数据分层显示。在进入页面后，通过滑动左侧城市列表数据，列表字母标题吸顶展示，对应右侧字母导航内容高亮显示；点击右侧字母导航内容，左侧城市列表展示对应内容。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.3.1.1" valign="top" width="50%"><p>页面整体结构图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.3.1.2" valign="top" width="50%"><p>页面效果图</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><span><img height="463.5981" originheight="2259" originwidth="1618" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162907.82992721899141572220276029805042:50001231000000:2800:30A6A65CC10A86100684C5FA0A24B86AABE1E0160E47C0C78E136039BADF2AF2.png" title="点击放大" width="332.5"></span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p><span><img height="461.25730000000004" originheight="2258" originwidth="1093" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162907.97053696519372424165391758554362:50001231000000:2800:099C546EC12180FFFE9A2D7922EB27F17AE189D10D8F8FF40BB97DAC23DC70CA.png" title="点击放大" width="226.10000000000002"></span></p> </td> </tr>  </tbody></table></div> </div> <p><strong>实现原理</strong></p> <p>左侧List作为城市列表，右侧List为城市首字母快捷导航列表，通过ListItem对对应数据进行渲染展示，并使用Stack堆叠容器组件，字母导航列表覆盖城市列表上方，再给对应List添加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#sticky9" target="_blank">sticky</a>属性和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#onscrollindex" target="_blank">onScrollIndex()</a>方法，实现两个列表数据间的联动效果。</p> <p><strong>开发步骤</strong></p> <ol><li>城市列表使用ListItemGroup，对“当前城市”“热门城市”“城市数据”进行分组，并通过ListItem展示每个分组中的具体数据。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L70-L82" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// List data content.</span></li><li><span class="hljs-keyword">@Builder</span></li><li>textContent(<span class="hljs-attribute">content</span>: string) {</li><li>  Text(content)</li><li>    <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L70-L82" target="_blank">CityList.ets</a></div></div></div></div> <div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L97-L144" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">List</span>({ <span class="hljs-variable">scroller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityScroller</span> }) {</li><li>  <span class="hljs-comment">// Current city.</span></li><li>  <span class="hljs-title function_">ListItemGroup</span>({ <span class="hljs-variable">header</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">itemHead</span>('<span class="hljs-title class_">current</span> <span class="hljs-title class_">city</span>') }) {</li><li>    <span class="hljs-title function_">ListItem</span>() {</li><li>      <span class="hljs-title function_">Text</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentCity</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">45</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>        .<span class="hljs-title function_">padding</span>({ <span class="hljs-variable">left</span>: <span class="hljs-number">16</span>, <span class="hljs-variable">top</span>: <span class="hljs-number">12</span>, <span class="hljs-variable">bottom</span>: <span class="hljs-number">12</span> })</li><li>        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-variable">TextAlign</span>.<span class="hljs-variable">Start</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// Popular cities.</span></li><li>  <span class="hljs-title function_">ListItemGroup</span>({ <span class="hljs-variable">header</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">itemHead</span>('<span class="hljs-title class_">popular</span> <span class="hljs-title class_">cities</span>') }) {</li><li>    <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">hotCities</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">string</span>) =&gt; {</li><li>      <span class="hljs-title function_">ListItem</span>() {</li><li>        <span class="hljs-keyword">this</span>.<span class="hljs-title function_">textContent</span>(<span class="hljs-variable">item</span>);</li><li>      }</li><li>    }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">string</span>) =&gt; <span class="hljs-variable">item</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">divider</span>({</li><li>    <span class="hljs-variable">strokeWidth</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-variable">color</span>: <span class="hljs-string">'#EDEDED'</span>,</li><li>    <span class="hljs-variable">startMargin</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-variable">endMargin</span>: <span class="hljs-number">45</span></li><li>  })</li><li>
</li><li>  <span class="hljs-comment">// City data.</span></li><li>  <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">groupWorldList</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">string</span>) =&gt; {</li><li>    <span class="hljs-comment">// Traverse the first letter of the city and use it as the header of the city grouping data.</span></li><li>    <span class="hljs-title function_">ListItemGroup</span>({ <span class="hljs-variable">header</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">itemHead</span>(<span class="hljs-title class_">item</span>) }) {</li><li>      <span class="hljs-comment">// Retrieve and display corresponding city data based on letters.</span></li><li>      <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title function_">getCitiesWithGroupName</span>(<span class="hljs-variable">item</span>), (<span class="hljs-variable">cityItem</span>: <span class="hljs-title class_">City</span>) =&gt; {</li><li>        <span class="hljs-title function_">ListItem</span>() {</li><li>          <span class="hljs-keyword">this</span>.<span class="hljs-title function_">textContent</span>(<span class="hljs-variable">cityItem</span>.<span class="hljs-variable">city</span>);</li><li>        }</li><li>      }, (<span class="hljs-variable">cityItem</span>: <span class="hljs-title class_">City</span>) =&gt; <span class="hljs-variable">cityItem</span>.<span class="hljs-variable">city</span>)</li><li>    }</li><li>  })</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L97-L144" target="_blank">CityList.ets</a></div></div></div></div> </li><li>右侧字母导航列表数据，同样通过List组件进行展示。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L163-L197" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Side letter navigation data.</span></li><li><span class="hljs-title class_">Column</span>() {</li><li>  <span class="hljs-title class_">List</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">navListScroller</span> }) {</li><li>    <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">groupWorldList</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>      <span class="hljs-title class_">ListItem</span>() {</li><li>        <span class="hljs-title class_">Text</span>(item)</li><li>          <span class="hljs-comment">// ...</span></li><li>      }</li><li>    }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L163-L197" target="_blank">CityList.ets</a></div></div></div></div> </li><li>使用堆叠容器组件Stack，将字母导航内容覆盖到城市列表内容上方。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L94-L204" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Stack</span>({ <span class="hljs-variable">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-title class_">End</span> }) {</li><li>  <span class="hljs-comment">// City List Data.</span></li><li>  <span class="hljs-title function_">List</span>({ <span class="hljs-variable">scroller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">cityScroller</span> }) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-comment">// Side letter navigation data.</span></li><li>  <span class="hljs-title function_">Column</span>() {</li><li>    <span class="hljs-title function_">List</span>({ <span class="hljs-variable">scroller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">navListScroller</span> }) {</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L94-L204" target="_blank">CityList.ets</a></div></div></div></div> </li><li>最后，给城市列表添加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#sticky9" target="_blank">sticky</a>属性实现标题吸顶效果，及添加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#onscrollindex" target="_blank">onScrollIndex()</a>方法，通过selectNavIndex变量与字母导航列表内容进行关联，控制的对应字母导航内容的选中状态。<div class="p">在字母导航列表中，添加点击事件，在点击事件中通过城市列表控制器cityScroller的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#scrolltoindex" target="_blank">scrollToIndex()</a>事件，控制城市列表内容的改变，实现二者数据的联动效果。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L98-L210" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">End</span> }) {</li><li>  <span class="hljs-comment">// City List Data.</span></li><li>  <span class="hljs-title class_">List</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">cityScroller</span> }) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// By linking the selectNavIndex state variable with index, control the selection status of the navigation list.</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectNavIndex</span> = index - <span class="hljs-number">2</span>;</li><li>  })</li><li>
</li><li>  <span class="hljs-comment">// Side letter navigation data.</span></li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">List</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">navListScroller</span> }) {</li><li>      <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">groupWorldList</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-title class_">Text</span>(item)</li><li>            <span class="hljs-comment">// ...</span></li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectNavIndex</span> = index;</li><li>              <span class="hljs-comment">// Select the navigation list and set isClickScroll to true to prevent changes in the navigation list status during the scrolling process with the city list.</span></li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">isClickScroll</span> = <span class="hljs-literal">true</span>;</li><li>              <span class="hljs-comment">// By using the scrollIndex method of cityScroller, control the sliding city list to specify the Index,</span></li><li>              <span class="hljs-comment">// as there are "current city" and "popular city" in the city list, so the index needs to be incremented by 2.</span></li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">cityScroller</span>.<span class="hljs-title function_">scrollToIndex</span>(index + <span class="hljs-number">2</span>, <span class="hljs-literal">false</span>, <span class="hljs-title class_">ScrollAlign</span>.<span class="hljs-property">START</span>);</li><li>            })</li><li>        }</li><li>      }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CityList.ets#L98-L210" target="_blank">CityList.ets</a></div></div></div></div> </div> </li></ol> <p><strong>实现效果</strong></p> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162908.38402482132535800028203285799237:50001231000000:2800:2741C26FED3907CC81AD15369F46B252712AC4C920FD06579D21CFDE2FBAE031.gif" title="点击放大" width="266"></span></p> </div> <div class="tiledSection"><h2 id="section323632114913">二级联动场景<i class="anchor-icon anchor-icon-link" anchorid="section323632114913" tips="复制节点链接"></i></h2><p><strong>场景描述</strong></p> <p>通过左边一级列表的选择，联动更新右边二级列表的数据，常用于商品分类选择、编辑风格等二级类别选择页面。</p> <p>本场景以商品分类列表页面为例，分别通过List组件，对左侧分类导航和右侧导航内容进行展示。在进入页面后，点击左侧分类导航，右侧展示对应导航分类详情列表数据；滑动右侧列表内容，列表标题吸顶展示，左侧对应导航内容则高亮显示。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.3.1.1" valign="top" width="50%"><p>页面整体结构图</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.3.1.2" valign="top" width="50%"><p>页面效果图</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p><span><img height="442.6639" originheight="2259" originwidth="2210" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162908.54532857538174655598393272518242:50001231000000:2800:021AF3B95501AD393D25A2E0C8D642FE554F146983AAD4B34F0CF5BA9043B37D.png" title="点击放大" width="433.58000000000004"></span></p> </td> <td class="cellrowborder" valign="top" width="50%"><p><span><img height="447.62480000000005" originheight="2258" originwidth="1093" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162908.31255907049154310324773216267901:50001231000000:2800:4D0D85F62CC0D3EB5CE788848882A459E7C8A2B35FFF6A539970EDE486D89155.png" title="点击放大" width="216.79000000000002"></span></p> </td> </tr>  </tbody></table></div> </div> <p><strong>实现原理</strong></p> <p>左右各用一个List实现，分别设置其<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#onscrollindex" target="_blank">onScrollIndex()</a>事件，左侧List在回调中判断数据项切换时，调用右侧List滚动到相应类别的对应位置，右侧同理。</p> <p><strong>开发步骤</strong></p> <ol><li>分别通过List组件构建左侧分类导航数据和右侧分类内容数据。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CategoryPage.ets#L71-L151" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Left List Data Display.</span></li><li><span class="hljs-title function_">List</span>({ <span class="hljs-variable">scroller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">navTitleScroller</span> }) {</li><li>  <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">categoryList</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">NavTitleModel</span>, <span class="hljs-variable">index</span>: <span class="hljs-title class_">number</span>) =&gt; {</li><li>    <span class="hljs-title function_">ListItem</span>() {</li><li>      <span class="hljs-title function_">Text</span>(<span class="hljs-variable">item</span>.<span class="hljs-variable">titleName</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>    }</li><li>  }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">NavTitleModel</span>) =&gt; <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">item</span>.<span class="hljs-variable">titleName</span>))</li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>
</li><li><span class="hljs-comment">// Display of List Content on the Right.</span></li><li><span class="hljs-title function_">List</span>({ <span class="hljs-variable">scroller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">goodsListScroller</span> }) {</li><li>  <span class="hljs-title function_">ForEach</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">categoryList</span>, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">NavTitleModel</span>) =&gt; {</li><li>    <span class="hljs-title function_">ListItemGroup</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">12</span>, <span class="hljs-variable">header</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">goodsHeaderBuilder</span>(<span class="hljs-title class_">item</span>.<span class="hljs-title class_">titleName</span>) }) {</li><li>      <span class="hljs-title function_">ForEach</span>(<span class="hljs-variable">item</span>.<span class="hljs-variable">goodsList</span>, (<span class="hljs-variable">goodsItem</span>: <span class="hljs-title class_">GoodsDataModel</span>) =&gt; {</li><li>        <span class="hljs-title function_">ListItem</span>() {</li><li>          <span class="hljs-title function_">Row</span>() {</li><li>            <span class="hljs-title function_">Image</span>(<span class="hljs-variable">goodsItem</span>.<span class="hljs-variable">imgUrl</span>)</li><li>              <span class="hljs-comment">// ...</span></li><li>            <span class="hljs-title function_">Column</span>() {</li><li>              <span class="hljs-title function_">Text</span>(<span class="hljs-variable">goodsItem</span>.<span class="hljs-variable">goodsName</span>)</li><li>                <span class="hljs-comment">// ...</span></li><li>              <span class="hljs-title function_">Text</span>(<span class="hljs-string">'￥'</span> + <span class="hljs-variable">goodsItem</span>.<span class="hljs-variable">price</span>)</li><li>                <span class="hljs-comment">// ...</span></li><li>            }</li><li>            <span class="hljs-comment">// ...</span></li><li>          }</li><li>          <span class="hljs-comment">// ...</span></li><li>        }</li><li>      }, (<span class="hljs-variable">goodsItem</span>: <span class="hljs-title class_">GoodsDataModel</span>) =&gt; <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">goodsItem</span>.<span class="hljs-variable">goodsId</span>))</li><li>    }</li><li>  }, (<span class="hljs-variable">item</span>: <span class="hljs-title class_">NavTitleModel</span>) =&gt; <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">item</span>.<span class="hljs-variable">goodsList</span>))</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CategoryPage.ets#L71-L151" target="_blank">CategoryPage.ets</a></div></div></div></div> </li><li>给左侧导航列表添加点击事件，右侧分类详情列表添加<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list#onscrollindex" target="_blank">onScrollIndex()</a>事件，并调用自定义事件listChange方法，在listChange方法内部根据isGoods变量的值，调用对应列表控制器的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#scrolltoindex" target="_blank">scrollToIndex()</a>事件，实现导航列表和分类详情数据的联动效果。<div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CategoryPage.ets#L51-L63" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// List sliding event.</span></li><li>listChange(index: number, isGoods: boolean) {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentTitleId !== index) {</li><li>    <span class="hljs-keyword">this</span>.currentTitleId = index;</li><li>    <span class="hljs-keyword">if</span> (isGoods) {</li><li>      <span class="hljs-comment">// IsGoods is true, controlling the data in the right-hand list to slide to the specified index.</span></li><li>      <span class="hljs-keyword">this</span>.goodsListScroller.scrollToIndex(index);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-comment">// IsGoods is set to false, controlling the left list data to slide to the specified index.</span></li><li>      <span class="hljs-keyword">this</span>.navTitleScroller.scrollToIndex(index);</li><li>    }</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CategoryPage.ets#L51-L63" target="_blank">CategoryPage.ets</a></div></div></div></div> <div class="p"><div class="screenLinkPre"><div _ngcontent-sjl-c106="" class="highlight-div"><div _ngcontent-sjl-c106="" class="highlight-div-header"><div _ngcontent-sjl-c106="" class="highlight-div-header-left"><div _ngcontent-sjl-c106="" class="handle-button expand-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sjl-c106="" class="highlight-div-header-right"><div _ngcontent-sjl-c106="" class="handle-button ai-button"></div><div _ngcontent-sjl-c106="" class="handle-button line-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sjl-c106="" class="handle-button theme-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sjl-c106="" class="handle-button copy-button"><div _ngcontent-sjl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sjl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CategoryPage.ets#L70-L165" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Left List Data Display.</span></li><li><span class="hljs-title class_">List</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">navTitleScroller</span> }) {</li><li>  <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">categoryList</span>, <span class="hljs-function">(<span class="hljs-params">item: NavTitleModel, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-title class_">ListItem</span>() {</li><li>      <span class="hljs-title class_">Text</span>(item.<span class="hljs-property">titleName</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// Pass in the current list item index and true.</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">listChange</span>(index, <span class="hljs-literal">true</span>);</li><li>        })</li><li>    }</li><li>  }, <span class="hljs-function">(<span class="hljs-params">item: NavTitleModel</span>) =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(item.<span class="hljs-property">titleName</span>))</li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>
</li><li><span class="hljs-comment">// Display of List Content on the Right.</span></li><li><span class="hljs-title class_">List</span>({ <span class="hljs-attr">scroller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">goodsListScroller</span> }) {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li>.<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// Pass in the current list item index and false.</span></li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">listChange</span>(index, <span class="hljs-literal">false</span>)</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/CommonListFlows/blob/master/entry/src/main/ets/pages/CategoryPage.ets#L70-L165" target="_blank">CategoryPage.ets</a></div></div></div></div> </div> </li></ol> <p><strong>实现效果</strong></p> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162908.60385666367985035120635670030447:50001231000000:2800:FBD8F8E37740552145CBB62C4D72673279CA38AD298B28C9C36D01315F7D400D.gif" title="点击放大" width="266"></span></p> </div> <div class="tiledSection"><h2 id="section325845118919">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section325845118919" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/CommonListFlows" target="_blank">基于List组件实现常见列表流场景</a></li></ul> </div> </div></div>