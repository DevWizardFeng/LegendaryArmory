<h1 _ngcontent-fkg-c119="" class="doc-title ng-star-inserted" title="应用隐私保护"> 应用隐私保护 </h1>

<div _ngcontent-fkg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1664933364812">概述<i class="anchor-icon anchor-icon-link" anchorid="section1664933364812" tips="复制节点链接"></i></h2><p>移动终端及其相关业务（如移动支付、终端云）的普及，使用户隐私保护的重要性更加突出。隐私保护尊重个人权利、增加用户信任、确保个人信息安全，也是法律法规的要求。个人信息泄露和滥用可能导致个人诈骗、身份盗用、恶意广告等不良后果。</p> <p>隐私是用户的基本权利，HarmonyOS重视用户隐私。隐私保护措施能降低个人信息滥用风险，保护用户财产和利益。良好隐私保护有助于建立用户信任，保护用户和企业利益。</p> <p>为了应用隐私保护，开发者需要了解以下基本信息：</p> <ol><li>什么是隐私数据：根据个人数据的敏感程度，个人数据分为敏感个人数据和一般个人数据。健康、性生活、个人基因、宗教信仰、生物体征等属于敏感数据。</li><li><a href="/consumer/cn/doc/best-practices/bpta-app-privacy-protection#section137983974814">隐私保护的原则</a>。</li><li>隐私保护的措施：隐私保护的一些建议和方法，以及隐私保护的一些<a href="/consumer/cn/doc/best-practices/bpta-app-privacy-protection#section182128512489">最佳实践</a>。</li></ol> </div> <div class="tiledSection"><h2 id="section137983974814">隐私保护的原则<i class="anchor-icon anchor-icon-link" anchorid="section137983974814" tips="复制节点链接"></i></h2><p>应用开发者在产品设计阶段应考虑用户隐私保护，提高应用安全性。HarmonyOS应用开发需遵从隐私保护规则，应用上架时，应用市场将根据规则校验，不满足条件则无法上架。应遵循以控制力、透明度和数据最小化为核心的隐私保护原则：</p> <ol><li>数据收集及使用公开透明<p>应用采集个人数据时，应告知用户个人信息的使用方式。</p> </li><li>数据收集和使用最小化<p>应用收集个人数据应与目的相关，适当、必要。开发者应匿名化或化名个人数据，降低风险。仅收集和处理必需的个人数据，不进行无关处理。</p> </li><li>数据处理选择和控制<p>处理个人数据需征得用户同意，用户有充分的控制权。</p> </li><li>数据安全<p>技术上保证数据处理的安全性，包括加密存储和安全传输，系统默认开启或采取安全保护措施。</p> </li><li>本地化处理<p>应用开发时，数据优先在本地处理。本地无法处理的数据上传至云服务时，应遵循最小化原则，不得默认选择上传。</p> </li><li>未成年人数据保护要求<p>如果应用面向未成年人，或通过用户年龄数据识别出未成年人，开发者应根据目标市场的相关法律，专门分析未成年人个人数据保护问题，并在收集未成年人数据前征得监护人同意。</p> </li></ol> </div> <div class="tiledSection"><h2 id="section2056104415485">隐私保护常用方法<i class="anchor-icon anchor-icon-link" anchorid="section2056104415485" tips="复制节点链接"></i></h2><p>下面我们列举了应用隐私保护的一些常用方法。</p> <ol><li>使用隐私声明获取用户同意。<p>应用采集个人数据时，应告知用户个人信息的使用方式。例如，应用启动时使用隐私声明弹窗说明敏感数据的使用和收集，获得用户同意后才能获取数据。</p> </li><li>减少应用的位置信息访问权限。<p>应用不是强位置关联应用（如导航、运动健康等），推荐使用模糊定位。</p> </li><li>减少使用存储权限。<p>过多的存储访问权限可能会导致用户隐私数据的泄露，应该减少使用存储权限，仅请求访问应用程序所需的数据，可以用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-picker" target="_blank">Picker</a>来减少对用户存储数据的访问权限。</p> </li><li>动态申请敏感权限。<p>申请敏感权限需满足最小化要求，只申请必需的信息或资源权限，减少权限滥用和敏感数据泄露。</p> </li><li>数据加密处理。<p>技术上保证数据处理的安全性，包括加密存储和安全传输，应默认开启或采取安全保护措施。</p> <p>存储敏感数据应该进行加密处理，具体可以参考《<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-app-data-security">应用数据安全</a>》。</p> </li></ol> </div> <div class="tiledSection"><h2 id="section182128512489">隐私保护最佳实践<i class="anchor-icon anchor-icon-link" anchorid="section182128512489" tips="复制节点链接"></i></h2><p>下面介绍一些隐私保护的最佳实践，开发者可以参考这些实践解决应用的隐私保护问题。</p> </div> <div class="tiledSection"><h3 id="section1868672219522" class="firsth2">使用隐私声明获取用户同意<i class="anchor-icon anchor-icon-link" anchorid="section1868672219522" tips="复制节点链接"></i></h3><p>安装或使用应用程序时，应用程序可能请求访问敏感权限，如相机、麦克风、通讯录、位置等。应用程序需通过隐私声明弹窗，事先说明授权目的和使用方式，确保用户全面了解个人数据的使用情况。</p> <p>隐私声明弹窗的作用包括以下几个方面：</p> <ol><li>增强用户控制权：隐私声明弹窗允许用户授权或拒绝应用程序访问敏感权限，从而增强对个人数据的控制。</li><li>保护用户隐私：隐私声明弹窗确保用户在同意授权前了解应用程序如何使用个人数据，防止滥用，保护隐私权益。</li><li>增强透明度：隐私声明弹窗为用户提供应用程序的数据使用透明度。弹窗中提供详细说明，用户了解所需权限及其使用目的，从而放心做出授权决策。</li></ol> <p>隐私声明弹窗在HarmonyOS中用于保护用户隐私权益，增强用户对个人数据的控制。它提供透明度和选择权，使用户了解应用程序的权限要求，并自主决定是否授权。</p> <p>例如在<a href="https://gitee.com/harmonyos_samples/hmosworld" target="_blank">“HMOS世界”</a>中使用了隐私声明的弹窗，具体实现可以参考代码<a href="https://gitee.com/harmonyos_samples/hmosworld/blob/master/HMOSWorld/Application/products/phone/src/main/ets/pages/SafePage.ets" target="_blank">SafePage.ets</a>。应用首次启动后，会弹出该弹窗，当应用获得用户授权同意后，应用才能开始正常使用。</p> <p></p> <p><span><img height="535.1521" originheight="674" originwidth="670" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163352.58213391787127898132480572077534:50001231000000:2800:FCB0D938B35F310572E0CB413197B6057A9924D434997B109C727A5DF2937B8F.png" title="点击放大" width="532"></span></p> <p></p> </div> <div class="tiledSection"><h3 id="section9812122537">减少应用的位置信息访问权限<i class="anchor-icon anchor-icon-link" anchorid="section9812122537" tips="复制节点链接"></i></h3><p>限制应用的位置信息访问权限，保护个人隐私。</p> <p>仅在应用程序需要位置信息才能正常运行时，才申请位置权限，否则应避免请求该权限，以保护用户隐私和数据安全。需要申请位置权限时，提供详细说明和合理解释，确保用户了解应用访问位置信息的必要性。</p> <p>根据场景需要，使用模糊定位减少应用的位置信息访问权限。</p> </div> <p><strong>使用模糊定位获取位置信息</strong></p> <p>对于大多数与位置相关的场景，请求粗略位置信息的访问权限即可满足要求。例如，天气应用可以基于用户所在城市或地区提供准确的天气预报，而无需获取具体经纬度。HarmonyOS在API9以后，提供模糊位置信息的能力，可为应用提供精确到5公里内的用户位置估算值，这种精度对应用的许多功能而言已足够。</p> <p>表1 位置权限申请方式介绍</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.1" valign="top" width="13.309999999999999%"><p>target API level</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.2" valign="top" width="46.33%"><p><strong>申请位置权限</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.3" valign="top" width="8.290000000000001%"><p>申请结果</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.4" valign="top" width="32.07%"><p>位置的精确度</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="13.309999999999999%"><p>小于9</p> </td> <td class="cellrowborder" valign="top" width="46.33%"><p>ohos.permission.LOCATION</p> </td> <td class="cellrowborder" valign="top" width="8.290000000000001%"><p>成功</p> </td> <td class="cellrowborder" valign="top" width="32.07%"><p>获取到精准位置，精准度在米级别。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="13.309999999999999%"><p>大于等于9</p> </td> <td class="cellrowborder" valign="top" width="46.33%"><p>ohos.permission.LOCATION</p> </td> <td class="cellrowborder" valign="top" width="8.290000000000001%"><p>失败</p> </td> <td class="cellrowborder" valign="top" width="32.07%"><p>无法获取位置。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="13.309999999999999%"><p>大于等于9</p> </td> <td class="cellrowborder" valign="top" width="46.33%"><p>ohos.permission.APPROXIMATELY_LOCATION</p> </td> <td class="cellrowborder" valign="top" width="8.290000000000001%"><p>成功</p> </td> <td class="cellrowborder" valign="top" width="32.07%"><p>获取到模糊位置，精确度为5公里。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="13.309999999999999%"><p>大于等于9</p> </td> <td class="cellrowborder" valign="top" width="46.33%"><p>同时申请ohos.permission.APPROXIMATELY_LOCATION和ohos.permission.LOCATION</p> </td> <td class="cellrowborder" valign="top" width="8.290000000000001%"><p>成功</p> </td> <td class="cellrowborder" valign="top" width="32.07%"><p>获取到精准位置，精准度在米级别。</p> </td> </tr>  </tbody></table></div> </div> <p>在API9以后，当应用同时申请 `ohos.permission.APPROXIMATELY_LOCATION` 和 `ohos.permission.LOCATION` 权限时，可以获取用户精准位置，精准度达到米级。如果应用仅申请 `ohos.permission.APPROXIMATELY_LOCATION` 权限，权限弹框仅显示模糊位置权限。用户授权后，应用将获得模糊位置权限，只能获取模糊位置。这两种情况下的权限申请弹框如下：</p> <div class="fignone"><span class="figcap"><b>图1 </b>权限申请弹窗</span></div> <p></p> <p><span><img height="548.2659000000001" originheight="702" originwidth="681" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163353.38975140001918439420960773210392:50001231000000:2800:E0B96C0380F149A1063D40EE7DBC2762FF53A97A5880E5388B0270505FD26171.png" title="点击放大" width="532"></span></p> <p>接下来介绍模糊位置申请的实现方法：</p> <ol><li><p>在module.json5配置文件中声明ohos.permission.APPROXIMATELY_LOCATION权限。</p> <div class="screenLinkPre"><div _ngcontent-fkg-c106="" class="highlight-div"><div _ngcontent-fkg-c106="" class="highlight-div-header"><div _ngcontent-fkg-c106="" class="highlight-div-header-left"><div _ngcontent-fkg-c106="" class="handle-button expand-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fkg-c106="" class="highlight-div-header-right"><div _ngcontent-fkg-c106="" class="handle-button ai-button"></div><div _ngcontent-fkg-c106="" class="handle-button line-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fkg-c106="" class="handle-button theme-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fkg-c106="" class="handle-button copy-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fkg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/module.json5#L2-L77" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"requestPermissions"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.APPROXIMATELY_LOCATION"</span>,</li><li>        <span class="hljs-string">"reason"</span>: <span class="hljs-string">"$string:location_reason"</span>,</li><li>        <span class="hljs-string">"usedScene"</span>: {</li><li>          <span class="hljs-string">"abilities"</span>: [</li><li>            <span class="hljs-string">"EntryAbility"</span></li><li>          ],</li><li>          <span class="hljs-string">"when"</span>: <span class="hljs-string">"always"</span></li><li>        }</li><li>      },</li><li>      <span class="hljs-comment">// ...</span></li><li>    ]</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/module.json5#L2-L77" target="_blank">module.json5</a></div></div></div></div> </li><li><p>在需要使用位置信息的代码块中，动态申请 ohos.permission.APPROXIMATELY_LOCATION权限。</p> <div class="screenLinkPre"><div _ngcontent-fkg-c106="" class="highlight-div"><div _ngcontent-fkg-c106="" class="highlight-div-header"><div _ngcontent-fkg-c106="" class="highlight-div-header-left"><div _ngcontent-fkg-c106="" class="handle-button expand-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fkg-c106="" class="highlight-div-header-right"><div _ngcontent-fkg-c106="" class="handle-button ai-button"></div><div _ngcontent-fkg-c106="" class="handle-button line-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fkg-c106="" class="handle-button theme-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fkg-c106="" class="handle-button copy-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fkg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/ApproximatelyLocationDemo.ets#L29-L58" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> accessManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>
</li><li>accessManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>(), [<span class="hljs-string">'ohos.permission.APPROXIMATELY_LOCATION'</span>])</li><li>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">grantStatus</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = data.<span class="hljs-property">authResults</span>;</li><li>    <span class="hljs-keyword">if</span> (grantStatus.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; grantStatus[<span class="hljs-number">0</span>] === <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-comment">// The user is authorized to continue to access the target operation</span></li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'request permissions granted'</span>);</li><li>      <span class="hljs-comment">// ...</span></li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-comment">// The user rejects the authorization</span></li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'request permissions denied'</span>);</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`request permissions result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>  })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/ApproximatelyLocationDemo.ets#L29-L58" target="_blank">ApproximatelyLocationDemo.ets</a></div></div></div></div> </li><li><p>获取位置信息的接口相同，但模糊定位和精确定位的返回结果精确度不同。</p> <div class="screenLinkPre"><div _ngcontent-fkg-c106="" class="highlight-div"><div _ngcontent-fkg-c106="" class="highlight-div-header"><div _ngcontent-fkg-c106="" class="highlight-div-header-left"><div _ngcontent-fkg-c106="" class="handle-button expand-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fkg-c106="" class="highlight-div-header-right"><div _ngcontent-fkg-c106="" class="handle-button ai-button"></div><div _ngcontent-fkg-c106="" class="handle-button line-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fkg-c106="" class="handle-button theme-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fkg-c106="" class="handle-button copy-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fkg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/ApproximatelyLocationDemo.ets#L76-L90" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">requestInfo</span>: <span class="hljs-title class_">geoLocationManager</span>.<span class="hljs-title class_">LocationRequest</span> = {</li><li>  <span class="hljs-string">'priority'</span>: <span class="hljs-title class_">geoLocationManager</span>.<span class="hljs-title class_">LocationRequestPriority</span>.<span class="hljs-title class_">FIRST_FIX</span>,</li><li>  <span class="hljs-string">'scenario'</span>: <span class="hljs-title class_">geoLocationManager</span>.<span class="hljs-title class_">LocationRequestScenario</span>.<span class="hljs-title class_">UNSET</span>,</li><li>  <span class="hljs-string">'timeInterval'</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-string">'distanceInterval'</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-string">'maxAccuracy'</span>: <span class="hljs-number">0</span></li><li>};</li><li><span class="hljs-variable">geoLocationManager</span>.<span class="hljs-title function_">getCurrentLocation</span>(<span class="hljs-variable">requestInfo</span>).<span class="hljs-title function_">then</span>(<span class="hljs-variable">result</span> =&gt; {</li><li>  <span class="hljs-variable">Logger</span>.<span class="hljs-title function_">info</span>(`<span class="hljs-variable">geoLocation</span> <span class="hljs-variable">current</span> <span class="hljs-variable">location</span>:<span class="hljs-title class_">error</span>: ${<span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">result</span>)}`)</li><li>  <span class="hljs-comment">// ...</span></li><li>}).<span class="hljs-keyword">catch</span>((<span class="hljs-variable">error</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>  <span class="hljs-variable">Logger</span>.<span class="hljs-title function_">error</span>(`<span class="hljs-variable">geoLocation</span> <span class="hljs-variable">getCurrentLocation</span>: <span class="hljs-title class_">error</span>: ${<span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">error</span>)}`)</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/ApproximatelyLocationDemo.ets#L76-L90" target="_blank">ApproximatelyLocationDemo.ets</a></div></div></div></div> </li></ol> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>权限的申请具体可以参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/request-user-authorization" target="_blank">向用户申请授权</a>。</p> </div></div></div> <div class="tiledSection"><h3 id="section994451875414">减少使用存储权限<i class="anchor-icon anchor-icon-link" anchorid="section994451875414" tips="复制节点链接"></i></h3><p>应用获取“存储”权限后，能够读取手机内部存储上的所有文件，包括所有照片，这会带来隐私风险：它可能在用户不知情的情况下，分析文件和图片，泄露用户隐私。</p> <p>用户往往不愿意授予应用对其所有照片和视频的访问权限。因此，HarmonyOS在API9版本之后引入了Picker选择器，以满足用户正常的数据访问需求，同时最小化应用的数据泄露风险。通过减少授权范围，降低授权的颗粒度，例如用户在发送图片时，仅允许应用访问用户选择的图片。</p> <p><span><img height="548.4654" originheight="1027" originwidth="495" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163353.99463669898023621266374526479442:50001231000000:2800:DD161E67FBAFE9B18CA2B442CCDE8657422BA100BEB2B0F399FB067930A7E7D4.png" title="点击放大" width="266"></span></p> <p>示例代码如下：</p> <div class="screenLinkPre"><div _ngcontent-fkg-c106="" class="highlight-div"><div _ngcontent-fkg-c106="" class="highlight-div-header"><div _ngcontent-fkg-c106="" class="highlight-div-header-left"><div _ngcontent-fkg-c106="" class="handle-button expand-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fkg-c106="" class="highlight-div-header-right"><div _ngcontent-fkg-c106="" class="handle-button ai-button"></div><div _ngcontent-fkg-c106="" class="handle-button line-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fkg-c106="" class="handle-button theme-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fkg-c106="" class="handle-button copy-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fkg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/PickerDemo.ets#L17-L66" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">Logger</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/Logger'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PickerDemo</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imageUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageUri</span>)</li><li>      <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-title class_">Button</span>($r(<span class="hljs-string">'app.string.select_picture'</span>))</li><li>      <span class="hljs-comment">// ...</span></li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">const</span> photoSelectOptions = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoSelectOptions</span>();</li><li>          photoSelectOptions.<span class="hljs-property">MIMEType</span> = photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>;</li><li>          photoSelectOptions.<span class="hljs-property">maxSelectNumber</span> = <span class="hljs-number">5</span>;</li><li>          <span class="hljs-keyword">const</span> photoViewPicker = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>          photoViewPicker.<span class="hljs-title function_">select</span>(photoSelectOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">photoSelectResult</span> =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageUri</span> = photoSelectResult.<span class="hljs-property">photoUris</span>[<span class="hljs-number">0</span>];</li><li>            <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`PhotoViewPicker.select successfully, imageUri: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.imageUri}</span>`</span>)</li><li>          }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`PhotoViewPicker.select failed with err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>)</li><li>          })</li><li>        })</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/PickerDemo.ets#L17-L66" target="_blank">PickerDemo.ets</a></div></div></div></div> </div> <div class="tiledSection"><h3 id="section16469165913549">动态申请敏感权限<i class="anchor-icon anchor-icon-link" anchorid="section16469165913549" tips="复制节点链接"></i></h3><p>敏感权限涉及访问个人数据（如：照片、通讯录、日历、本机号码、短信等）和操作敏感能力（如：相机、麦克风等）的权限，所以对于敏感权限的申请需要特别注意。</p> <ol><li>合理的权限范围：应用程序应仅请求所需敏感权限，并将权限范围限制在最小必要。这可减少权限滥用和数据泄露风险。</li><li>明确解释权限用途：应用程序应清楚、明确地说明每个敏感权限的用途，并在隐私政策和其他位置提供此信息。</li></ol> <p>在module.json5配置文件中声明相机权限，并在reason字段中说明使用目的。</p> <div class="screenLinkPre"><div _ngcontent-fkg-c106="" class="highlight-div"><div _ngcontent-fkg-c106="" class="highlight-div-header"><div _ngcontent-fkg-c106="" class="highlight-div-header-left"><div _ngcontent-fkg-c106="" class="handle-button expand-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fkg-c106="" class="highlight-div-header-right"><div _ngcontent-fkg-c106="" class="handle-button ai-button"></div><div _ngcontent-fkg-c106="" class="handle-button line-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fkg-c106="" class="handle-button theme-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fkg-c106="" class="handle-button copy-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fkg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/module.json5#L2-L79" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"requestPermissions"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.permission.APPROXIMATELY_LOCATION"</span>,</li><li>        <span class="hljs-string">"reason"</span>: <span class="hljs-string">"$string:location_reason"</span>,</li><li>        <span class="hljs-string">"usedScene"</span>: {</li><li>          <span class="hljs-string">"abilities"</span>: [</li><li>            <span class="hljs-string">"EntryAbility"</span></li><li>          ],</li><li>          <span class="hljs-string">"when"</span>: <span class="hljs-string">"always"</span></li><li>        }</li><li>      },</li><li>      <span class="hljs-comment">// ...</span></li><li>    ]</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/module.json5#L2-L79" target="_blank">module.json5</a></div></div></div></div> <div _ngcontent-fkg-c106="" class="highlight-div"><div _ngcontent-fkg-c106="" class="highlight-div-header"><div _ngcontent-fkg-c106="" class="highlight-div-header-left"><div _ngcontent-fkg-c106="" class="handle-button expand-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fkg-c106="" class="highlight-div-header-right"><div _ngcontent-fkg-c106="" class="handle-button ai-button"></div><div _ngcontent-fkg-c106="" class="handle-button line-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fkg-c106="" class="handle-button theme-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fkg-c106="" class="handle-button copy-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fkg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// string.json</span></li><li>{</li><li>  <span class="hljs-string">"string"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"name"</span>: <span class="hljs-string">"camera_reason"</span>,</li><li>      <span class="hljs-string">"value"</span>: <span class="hljs-string">"扫描二维码功能需要使用相机权限来获图片"</span></li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> <p>在扫码组件的点击事件中动态申请相机权限。</p> <div class="screenLinkPre"><div _ngcontent-fkg-c106="" class="highlight-div"><div _ngcontent-fkg-c106="" class="highlight-div-header"><div _ngcontent-fkg-c106="" class="highlight-div-header-left"><div _ngcontent-fkg-c106="" class="handle-button expand-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fkg-c106="" class="highlight-div-header-right"><div _ngcontent-fkg-c106="" class="handle-button ai-button"></div><div _ngcontent-fkg-c106="" class="handle-button line-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fkg-c106="" class="handle-button theme-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fkg-c106="" class="handle-button copy-button"><div _ngcontent-fkg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fkg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/Index.ets#L31-L44" data-highlighted="yes"><ol class="linenums"><li>accessManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>(), [<span class="hljs-string">'ohos.permission.CAMERA'</span>])</li><li>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">grantStatus</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = data.<span class="hljs-property">authResults</span>;</li><li>    <span class="hljs-keyword">if</span> (grantStatus.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; grantStatus[<span class="hljs-number">0</span>] === <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'request permissions granted'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'request permissions denied'</span>);</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>  })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/AppPrivacyProtection/entry/src/main/ets/pages/Index.ets#L31-L44" target="_blank">Index.ets</a></div></div></div></div> </div> <div class="tiledSection"><h2 id="section35577566481">总结与回顾<i class="anchor-icon anchor-icon-link" anchorid="section35577566481" tips="复制节点链接"></i></h2><p>本文主要介绍了隐私保护的重要性，列举了隐私保护的一些常见做法，并详细介绍了隐私保护的几个最佳实践：</p> <ul><li>使用隐私声明获取用户同意</li><li>减少应用的位置信息访问权限</li><li>减少使用存储权限</li><li>动态申请敏感权限</li></ul> <p>请注意，这些HarmonyOS隐私最佳实践适用于常见场景，具体实施策略应根据应用的特定需求和法律法规要求调整。你应该根据应用类型和用户定位，结合适用的隐私法规采取全面且具体的隐私保护措施。</p> </div> <div class="tiledSection"><h2 id="section18571548184811">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section18571548184811" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/tree/master/AppPrivacyProtection" target="_blank">应用隐私保护</a></li></ul> </div> </div></div>