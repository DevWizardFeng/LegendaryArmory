<h1 _ngcontent-irk-c119="" class="doc-title ng-star-inserted" title="折叠屏悬停态"> 折叠屏悬停态 </h1>

<div _ngcontent-irk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section122341777573">概述<i class="anchor-icon anchor-icon-link" anchorid="section122341777573" tips="复制节点链接"></i></h2><p>折叠屏提供独特的手持操作体验“悬停态”，用户可以将设备半折后立在桌面上，实现免手持体验。悬停态适用于不需要频繁交互的任务，如视频通话、视频播放、拍照和听歌。进入悬停态时，中间弯折区域难以操作且显示内容会变形，建议页面内容进行折痕区避让适配。</p> <p><span><img height="386.35170000000005" originheight="1924" originwidth="3974" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163116.95769721009801011593471015769460:50001231000000:2800:6D261131E6A812CA3391F30053D094212B668AE2E7EA04D9B7A2620375288463.png" title="点击放大" width="798"></span></p> <p>本文提供折叠屏悬停态的三种实现方式，并根据其特点给出各自的适用场景。</p> <ul><li><a href="/consumer/cn/doc/best-practices/bpta-folded-hover#section9671184110015">使用FolderStack组件实现悬停态</a>，适用于视频全屏播放等交互少的场景。</li><li><a href="/consumer/cn/doc/best-practices/bpta-folded-hover#section122423387410">使用FoldSplitContainer组件实现悬停态</a>，适用于分栏显示内容的场景，例如游戏画面和操作区域。</li><li><a href="/consumer/cn/doc/best-practices/bpta-folded-hover#section4691264319">自定义实现悬停态</a>，适用于页面布局复杂和悬停态触发动作自定义的场景。</li></ul> <p>实现悬停态的三种方式中，FolderStack组件使用简便，无需关注设备状态，支持自定义页面布局。FoldSplitContainer组件同样易于使用，但其固定的二分栏和三分栏布局限制了使用场景。自定义实现悬停态需要开发者自行监听设备状态并调整组件布局，支持自定义布局，且由于自实现悬停态监听，可以限制设备进入悬停态的场景（例如仅允许在横屏下半折叠时进入悬停态）以及自定义窗口旋转策略，使用更加灵活。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.1.7.1.5.1.1" valign="top" width="25%">&nbsp;&nbsp;</th> <th align="left" class="cellrowborder" id="mcps1.3.1.7.1.5.1.2" valign="top" width="25%"><p>FoldStack</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.7.1.5.1.3" valign="top" width="25%"><p>FoldSplitContainer</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.1.7.1.5.1.4" valign="top" width="25%"><p>自定义实现悬停态</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="25%"><p>展开态/折叠态是否支持自定义布局</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>支持</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>不支持，固定二分栏/三分栏</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>是否支持由其他页面进入悬停态页面</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>支持</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>支持</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>是否支持自定义设备状态进入悬停态页面</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>是否支持自定义悬停态窗口旋转策略</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>不支持</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>支持</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="25%"><p>开发难度</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>简单</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>简单</p> </td> <td class="cellrowborder" valign="top" width="25%"><p>困难</p> </td> </tr>  </tbody></table></div> </div> <p>本文以视频播放类应用的全屏播放页面为例，介绍FolderStack的自定义悬停态实现。同时，以游戏界面为例，介绍FoldSplitContainer的悬停态实现。</p> <p><span><img originheight="355" originwidth="512" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163116.15138145088247436033852561585544:50001231000000:2800:CAC480C696894D763CCCD4EB95A9188371ED73B3334D838D7BABB617BEFB6E14.png" width="512" height="355"></span></p> </div> <div class="tiledSection"><h2 id="section9671184110015">使用FolderStack组件实现悬停态<i class="anchor-icon anchor-icon-link" anchorid="section9671184110015" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section4104427551" class="firsth2">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section4104427551" tips="复制节点链接"></i></h3><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-folderstack" target="_blank">FolderStack</a>是系统提供的ArkTS组件，继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-stack-layout" target="_blank">层叠布局Stack</a>。在Stack组件的基础上，FolderStack提供监控设备是否进入悬停态并进行重新布局的能力。</p> <p>FolderStack通过upperItems字段来实现悬停态布局，当设备进入悬停态时，被upperItems字段修饰的组件会堆叠在上半屏，其他未被修饰的组件会堆叠在下半屏并且自动避让折叠屏折痕区。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>FolderStack需要撑满页面全屏，如果不撑满页面全屏，则只作为普通Stack使用。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section1968163465613">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section1968163465613" tips="复制节点链接"></i></h3><p>使用FolderStack组件实现悬停态的代码时，将页面的父容器设置为FolderStack，并将视频播放组件的ID注册到upperItems数组中。这样，悬停态时视频播放组件会自动调整到上半屏显示，视频控制组件和顶部返回组件则显示在下半屏。</p> <div class="screenLinkPre"><div _ngcontent-irk-c106="" class="highlight-div"><div _ngcontent-irk-c106="" class="highlight-div-header"><div _ngcontent-irk-c106="" class="highlight-div-header-left"><div _ngcontent-irk-c106="" class="handle-button expand-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-irk-c106="" class="highlight-div-header-right"><div _ngcontent-irk-c106="" class="handle-button ai-button"></div><div _ngcontent-irk-c106="" class="handle-button line-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-irk-c106="" class="handle-button theme-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-irk-c106="" class="handle-button copy-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-irk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/hoverview/HoverUseFolderStack.ets#L44-L53" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">FolderStack</span>({ <span class="hljs-variable">upperItems</span>: [<span class="hljs-string">'upper'</span>] }) {</li><li>  <span class="hljs-title function_">VideoPlayView</span>({ <span class="hljs-variable">avPlayerUtil</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">avPlayerUtil</span> })</li><li>    .<span class="hljs-title function_">id</span>(<span class="hljs-string">'upper'</span>)</li><li>
</li><li>  <span class="hljs-title function_">VideoControlView</span>({ <span class="hljs-variable">avPlayerUtil</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">avPlayerUtil</span> })</li><li>
</li><li>  <span class="hljs-title function_">BackTitleView</span>({</li><li>    <span class="hljs-variable">title</span>: <span class="hljs-title class_">Const</span>.<span class="hljs-title class_">PAGE_TITLES</span>[<span class="hljs-number">0</span>]</li><li>  })</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/hoverview/HoverUseFolderStack.ets#L44-L53" target="_blank">HoverUseFolderStack.ets</a></div></div></div></div> <p><span><img height="626.5896" originheight="2221" originwidth="2475" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163116.21363377107438716424600754472682:50001231000000:2800:E353751E075D9E3E554A902F240EA5F2F557D9965D1DF1AA03DA04AAD0199B00.png" title="点击放大" width="698.25"></span></p> </div> <div class="tiledSection"><h2 id="section122423387410">使用FoldSplitContainer组件实现悬停态<i class="anchor-icon anchor-icon-link" anchorid="section122423387410" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section6971757577" class="firsth2">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section6971757577" tips="复制节点链接"></i></h3><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-foldsplitcontainer" target="_blank">FoldSplitContainer</a>是系统提供的分栏类型的ArkTS组件，可以实现折叠屏二分栏、三分栏在展开态、悬停态以及折叠态的区域控制。其中二分栏是上下分栏，三分栏是在二分栏基础上加上侧边栏。</p> <p>FoldSplitContainer的primary和secondary参数分别设置二分栏的上下区域的布局，extra参数设置三分栏中侧栏区域的布局；通过LayoutOptions参数设置各区域分栏的比例。当设备进入悬停态时，FoldSplitContainer会自动避让折叠屏折痕区。</p> <p><span><img height="421.9425" originheight="484" originwidth="600" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163116.25572251417612784710881943133257:50001231000000:2800:D6C75D3D2296800FC727A936848939E46D46CD3424CF96999B6810FE1A04DD09.png" title="点击放大" width="523.6875"></span></p> </div> <div class="tiledSection"><h3 id="section43071044205711">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section43071044205711" tips="复制节点链接"></i></h3><p>使用FoldSplitContainer组件实现悬停态的代码结构是将上下屏的组件分别注册到primary和secondary参数的回调中。这样页面呈现为上下分栏布局，并且会在悬停态自动避让折痕区域。二分栏结构已实现页面布局，因此未实现extra参数对应的侧栏。</p> <div class="screenLinkPre"><div _ngcontent-irk-c106="" class="highlight-div"><div _ngcontent-irk-c106="" class="highlight-div-header"><div _ngcontent-irk-c106="" class="highlight-div-header-left"><div _ngcontent-irk-c106="" class="handle-button expand-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-irk-c106="" class="highlight-div-header-right"><div _ngcontent-irk-c106="" class="handle-button ai-button"></div><div _ngcontent-irk-c106="" class="handle-button line-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-irk-c106="" class="handle-button theme-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-irk-c106="" class="handle-button copy-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-irk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/hoverview/HoverUseFoldSplitContainer.ets#L59-L66" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">FoldSplitContainer</span>({</li><li>  <span class="hljs-attr">primary</span>: <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">primaryArea</span>();</li><li>  },</li><li>  <span class="hljs-attr">secondary</span>: <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">secondaryArea</span>();</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/hoverview/HoverUseFoldSplitContainer.ets#L59-L66" target="_blank">HoverUseFoldSplitContainer.ets</a></div></div></div></div> <p><span><img height="626.5896" originheight="2221" originwidth="2475" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163116.53442233812578277199656883837190:50001231000000:2800:D176B2A6839042118E2C33EBDE7F5DE750BD64B8C22077AAE10CAA74226F0A7F.png" title="点击放大" width="698.25"></span></p> </div> <div class="tiledSection"><h2 id="section4691264319">自定义实现悬停态<i class="anchor-icon anchor-icon-link" anchorid="section4691264319" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section465633465810" class="firsth2">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section465633465810" tips="复制节点链接"></i></h3><p>自定义悬停态布局需要在折叠屏进入半折叠态时通过设置窗口横向显示、规避折痕避让区，调整页面内组件的尺寸和位置来实现，可分为监听悬停态和调整布局两部分。</p> <ol><li>监听悬停态：通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#displayonfoldstatuschange10" target="_blank">display.on('foldStatusChange')</a>接口监听设备是否进入半折叠态，同时通过display的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#属性" target="_blank">orientation属性</a>判断设备是否横屏，当两种状态都满足时即判断设备进入悬停态。</li><li>调整布局：当设备进入悬停态后，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#displaygetcurrentfoldcreaseregion10" target="_blank">display.getCurrentFoldCreaseRegion()</a>接口获取折叠屏折痕区域的位置和大小，计算并设置上下半屏组件的尺寸和位置完成悬停态布局。</li></ol> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>在退出应用或者退出需要监听折叠态变化的页面时，需要调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#displayofffoldstatuschange10" target="_blank">display.off('foldStatusChange')</a>接口取消监听，避免出现意想不到的问题。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section16287924105919">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section16287924105919" tips="复制节点链接"></i></h3><p>自定义悬停态的视频播放页UI结构与FolderStack组件结构相同，只是将FolderStack替换为普通Stack组件，主要实现悬停态监听和组件重新布局。</p> <ol><li>悬停态通过状态变量isHover进行监听。当折叠屏的折叠状态变化时，判断当前是否为悬停态并更新isHover的值。<div class="p">定义监听折叠状态变化回调方法。<div class="screenLinkPre"><div _ngcontent-irk-c106="" class="highlight-div"><div _ngcontent-irk-c106="" class="highlight-div-header"><div _ngcontent-irk-c106="" class="highlight-div-header-left"><div _ngcontent-irk-c106="" class="handle-button expand-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-irk-c106="" class="highlight-div-header-right"><div _ngcontent-irk-c106="" class="handle-button ai-button"></div><div _ngcontent-irk-c106="" class="handle-button line-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-irk-c106="" class="handle-button theme-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-irk-c106="" class="handle-button copy-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-irk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/pages/Index.ets#L42-L75" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> onFoldStatusChange: Callback&lt;display.FoldStatus&gt; = (<span class="hljs-keyword">data</span>: display.FoldStatus) =&gt; {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>    let orientation: display.Orientation = display.getDefaultDisplaySync().orientation;</li><li>
</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pageID === <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.pageID === <span class="hljs-number">3</span>) {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">data</span> === display.FoldStatus.FOLD_STATUS_HALF_FOLDED &amp;&amp; <span class="hljs-keyword">this</span>.currentWidthBreakpoint === Const.BREAKPOINT_MD &amp;&amp;</li><li>        (orientation === display.Orientation.LANDSCAPE ||</li><li>          orientation === display.Orientation.LANDSCAPE_INVERTED)) {</li><li>        <span class="hljs-keyword">this</span>.isHover = <span class="hljs-literal">true</span>;</li><li>        <span class="hljs-comment">// ...</span></li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-keyword">this</span>.isHover = <span class="hljs-literal">false</span>;</li><li>      }</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.error(<span class="hljs-number">0x0000</span>, TAG, `onFoldStatusChange <span class="hljs-keyword">catch</span> error, code: ${error.code}, message: ${error.message}`);</li><li>  }</li><li>};</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/pages/Index.ets#L42-L75" target="_blank">Index.ets</a></div></div></div></div> </div> <div class="p">在display中注册方法，监听设备折叠状态变化。<div class="screenLinkPre"><div _ngcontent-irk-c106="" class="highlight-div"><div _ngcontent-irk-c106="" class="highlight-div-header"><div _ngcontent-irk-c106="" class="highlight-div-header-left"><div _ngcontent-irk-c106="" class="handle-button expand-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-irk-c106="" class="highlight-div-header-right"><div _ngcontent-irk-c106="" class="handle-button ai-button"></div><div _ngcontent-irk-c106="" class="handle-button line-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-irk-c106="" class="handle-button theme-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-irk-c106="" class="handle-button copy-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-irk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/pages/Index.ets#L113-L117" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  display.<span class="hljs-keyword">on</span>(<span class="hljs-string">'foldStatusChange'</span>, <span class="hljs-keyword">this</span>.onFoldStatusChange);</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'Failed to register onFoldStatusChange callback. Code: '</span> + JSON.stringify(exception));</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/pages/Index.ets#L113-L117" target="_blank">Index.ets</a></div></div></div></div> </div> </li><li>当设备处于悬停状态（isHover为true）时，页面内组件需要获取折痕区的大小和位置，方法如下。<div class="screenLinkPre"><div _ngcontent-irk-c106="" class="highlight-div"><div _ngcontent-irk-c106="" class="highlight-div-header"><div _ngcontent-irk-c106="" class="highlight-div-header-left"><div _ngcontent-irk-c106="" class="handle-button expand-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-irk-c106="" class="highlight-div-header-right"><div _ngcontent-irk-c106="" class="handle-button ai-button"></div><div _ngcontent-irk-c106="" class="handle-button line-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-irk-c106="" class="handle-button theme-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-irk-c106="" class="handle-button copy-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-irk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/common/utils/DisplayUtil.ets#L21-L29" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">static</span> <span class="hljs-title function_">getFoldCreaseRegion</span>(): <span class="hljs-title class_">void</span> {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-variable">display</span>.<span class="hljs-title function_">isFoldable</span>()) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">foldRegion</span>: <span class="hljs-title class_">display</span>.<span class="hljs-title class_">FoldCreaseRegion</span> = <span class="hljs-variable">display</span>.<span class="hljs-title function_">getCurrentFoldCreaseRegion</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">rect</span>: <span class="hljs-title class_">display</span>.<span class="hljs-title class_">Rect</span> = <span class="hljs-variable">foldRegion</span>.<span class="hljs-variable">creaseRects</span>[<span class="hljs-number">0</span>];</li><li>    <span class="hljs-comment">// Height of the avoidance area in the upper half screen and height of the avoidance area.</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">creaseRegion</span>: <span class="hljs-title class_">number</span>[] = [<span class="hljs-variable">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(<span class="hljs-variable">rect</span>.<span class="hljs-variable">top</span>), <span class="hljs-variable">uiContext</span>!.<span class="hljs-title function_">px2vp</span>(<span class="hljs-variable">rect</span>.<span class="hljs-variable">height</span>)];</li><li>    <span class="hljs-variable">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'creaseRegion'</span>, <span class="hljs-variable">creaseRegion</span>);</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/common/utils/DisplayUtil.ets#L21-L29" target="_blank">DisplayUtil.ets</a></div></div></div></div> </li><li>根据折痕区的大小和位置调整布局。<div class="p">视频播放组件将上移至屏幕上方。<div class="screenLinkPre"><div _ngcontent-irk-c106="" class="highlight-div"><div _ngcontent-irk-c106="" class="highlight-div-header"><div _ngcontent-irk-c106="" class="highlight-div-header-left"><div _ngcontent-irk-c106="" class="handle-button expand-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-irk-c106="" class="highlight-div-header-right"><div _ngcontent-irk-c106="" class="handle-button ai-button"></div><div _ngcontent-irk-c106="" class="handle-button line-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-irk-c106="" class="handle-button theme-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-irk-c106="" class="handle-button copy-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-irk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/basicview/VideoPlayView.ets#L33-L46" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Column</span>() {</li><li>  <span class="hljs-title function_">XComponent</span>({</li><li>    <span class="hljs-variable">id</span>: <span class="hljs-title class_">Const</span>.<span class="hljs-title class_">X_COMPONENT_ID</span>,</li><li>    <span class="hljs-keyword">type</span>: <span class="hljs-title class_">XComponentType</span>.<span class="hljs-title class_">SURFACE</span>,</li><li>    <span class="hljs-variable">controller</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">xComponentController</span></li><li>  })</li><li>    <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">height</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">isHover</span> ? <span class="hljs-keyword">this</span>.<span class="hljs-variable">creaseRegion</span>[<span class="hljs-number">0</span>] : <span class="hljs-string">'100%'</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/basicview/VideoPlayView.ets#L33-L46" target="_blank">VideoPlayView.ets</a></div></div></div></div> </div> <p>视频控制组件位于下半屏，无需调整。</p> <div class="p">顶部返回组件应移动到屏幕下半部分的顶部。<div class="screenLinkPre"><div _ngcontent-irk-c106="" class="highlight-div"><div _ngcontent-irk-c106="" class="highlight-div-header"><div _ngcontent-irk-c106="" class="highlight-div-header-left"><div _ngcontent-irk-c106="" class="handle-button expand-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-irk-c106="" class="highlight-div-header-right"><div _ngcontent-irk-c106="" class="handle-button ai-button"></div><div _ngcontent-irk-c106="" class="handle-button line-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-irk-c106="" class="handle-button theme-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-irk-c106="" class="handle-button copy-button"><div _ngcontent-irk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-irk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/basicview/BackTitleView.ets#L29-L57" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Row</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li>.<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>.<span class="hljs-title function_">height</span>(<span class="hljs-string">'24vp'</span>)</li><li>.<span class="hljs-title function_">justifyContent</span>(<span class="hljs-variable">FlexAlign</span>.<span class="hljs-variable">Start</span>)</li><li>.<span class="hljs-title function_">position</span>({</li><li>  <span class="hljs-variable">x</span>: <span class="hljs-string">'24vp'</span>,</li><li>  <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">isHover</span> ? <span class="hljs-keyword">this</span>.<span class="hljs-title class_">creaseRegion</span>[<span class="hljs-number">0</span>] + <span class="hljs-keyword">this</span>.<span class="hljs-variable">creaseRegion</span>[<span class="hljs-number">1</span>] + <span class="hljs-number">36</span> : <span class="hljs-string">'36vp'</span></li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/FoldedHover/blob/master/entry/src/main/ets/view/basicview/BackTitleView.ets#L29-L57" target="_blank">BackTitleView.ets</a></div></div></div></div> </div> </li></ol> <p><span><img height="626.5896" originheight="2221" originwidth="2475" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163116.64463964706486577498125602157232:50001231000000:2800:E167963B776B1424771538C22763575895A5AA4F304AEA2E2304F8005156A9B9.png" title="点击放大" width="698.25"></span></p> </div> <div class="tiledSection"><h2 id="section470165318153">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section470165318153" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/FoldedHover" target="_blank">实现折叠屏悬停态</a></li></ul> </div> </div> <div></div></div>