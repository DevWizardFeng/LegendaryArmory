<h1 _ngcontent-djo-c119="" class="doc-title ng-star-inserted" title="桌面快捷方式"> 桌面快捷方式 </h1>

<div _ngcontent-djo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section927214512814">概述<i class="anchor-icon anchor-icon-link" anchorid="section927214512814" tips="复制节点链接"></i></h2><p>随着应用的功能越来越复杂，用户在使用应用时，找到某个功能的操作步骤也在变得更加繁琐。为了提升用户体验，可以对应用中常用的功能创建对应的桌面快捷方式，以达到快速启动应用、一键直达特定功能等目的。例如相机应用的 “快速拍照”、便签应用的 “新建便签” 和地图应用的“常用地点导航”等功能的快捷方式，用户通过快捷方式可以快速进入特定功能页面，既能大大提高操作效率，同时也增加了用户对应用的依赖性。使用快捷方式，还可以实现个性化定制的需求，创建多个快捷方式，以满足个性化的工作流程和操作偏好。</p> </div> <div class="tiledSection"><h2 id="section3968102025817">场景介绍<i class="anchor-icon anchor-icon-link" anchorid="section3968102025817" tips="复制节点链接"></i></h2><p>以导航场景为例，当用户使用地图应用导航时，通常是先搜索目的地，然后开始导航。为了提升导航效率和提高操作便捷性，可以给该地图应用添加常去地点的导航快捷方式，如去公司、回家等。添加常去地点（例如公司、家等）的快捷方式后，用户即可通过长按应用图标，打开快捷方式入口，快速开启导航。</p> <p>快捷方式创建成功后支持以下启动方式：</p> <ul><li>点击快捷方式入口列表中的“回家”项，即可快速打开地图应用，开启从当前位置到家的导航路线选择。<p><span><img height="545.5261" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162954.13814435616872197307647730164340:50001231000000:2800:1ED935896A953AEFCC939BD6F3943B0FFEAD265FBFBA3E3DB2DEC9917AFC5838.gif" title="点击放大" width="266"></span></p> </li><li>长按快捷方式入口列表中的“回家”项，可将其拖动至桌面，点击桌面对应图标，即可开启从当前位置到家的导航路线选择。<p><span><img height="545.5261" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162954.80522877994212098737063519537055:50001231000000:2800:B3F90A48B910584765B9254912E4F9BEDFBBA8F5A59DD420C4B9C4C3D9F34AED.gif" title="点击放大" width="266"></span></p> </li></ul> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>本文以单<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hap-package" target="_blank">HAP</a>包为场景，讲述了快捷方式的实现步骤。多<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hap-package" target="_blank">HAP</a>包的场景下， 步骤与单<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hap-package" target="_blank">HAP</a>包一致，都是在entry文件夹下进行shortcuts_config.json的创建和module.json5的配置。</p> </div></div></div> <div class="tiledSection"><h2 id="section1340310281298">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section1340310281298" tips="复制节点链接"></i></h2></div> <div class="tiledSection"><h3 id="section647533719295" class="firsth2">关键技术<i class="anchor-icon anchor-icon-link" anchorid="section647533719295" tips="复制节点链接"></i></h3><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#shortcuts标签" target="_blank">shortcuts</a>来配置应用的快捷方式，其配置值为数组，包含四个子标签shortcutId、label、icon、wants。</p> <ul><li>shortcutId：标识快捷方式的ID，取值为长度不超过63字节的字符串。</li><li>label：标识快捷方式的标签信息，即快捷方式对外显示的文字描述信息。取值为长度不超过255字节的字符串，可以是描述性内容，也可以是标识label的资源索引。</li><li>icon：标识快捷方式的图标，取值为资源文件的索引。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#wants标签" target="_blank">wants</a>：标识快捷方式内定义的目标<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#wants标签" target="_blank">wants</a>信息集合，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#wants标签" target="_blank">wants</a>中可配置如下参数： <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.3.4.4.1.3.1.1" valign="top" width="50%"><p>属性名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.4.4.1.3.1.2" valign="top" width="50%"><p>含义</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" valign="top" width="50%"><p>bundleName</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>表示快捷方式的目标包名。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>moduleName</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>表示快捷方式的目标模块名。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>abilityName</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>表示快捷方式的目标组件名。</p> </td> </tr> <tr><td class="cellrowborder" valign="top" width="50%"><p>parameters</p> </td> <td class="cellrowborder" valign="top" width="50%"><p>表示拉起快捷方式时的自定义数据，仅支持配置字符串类型的数据。其中键值均最大支持1024长度的字符串。</p> </td> </tr>  </tbody></table></div> </div> </li></ul> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#shortcuts标签" target="_blank">shortcuts</a>配置完成后，还需要在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file" target="_blank">module.json5配置文件</a>中配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#metadata标签" target="_blank">metadata</a>字段来指定应用的快捷方式配置文件，从而完成快捷方式的基本配置。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>通过在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file" target="_blank">module.json5配置文件</a>中配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#metadata标签" target="_blank">metadata</a>字段的快捷方式是一种在系统中创建的可以快速访问应用程序或特定功能的链接，与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/formkit-overview" target="_blank">卡片</a>的区别在于：快捷方式只允许跳转至某个具体的UIAbility，无法直接跳转至非入口页面。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section48081223204916">实现流程<i class="anchor-icon anchor-icon-link" anchorid="section48081223204916" tips="复制节点链接"></i></h3><p>给地图应用添加常用地点的导航快捷方式需要进行如下步骤：</p> <ol><li>创建页面并配置页面的路由信息。首先需要创建对应的快捷方式页面，且页面组件需要用@Entry装饰。然后在resources/base/profile下的main_pages.json文件中添加对应快捷方式页面的路由信息。<div _ngcontent-djo-c106="" class="highlight-div"><div _ngcontent-djo-c106="" class="highlight-div-header"><div _ngcontent-djo-c106="" class="highlight-div-header-left"><div _ngcontent-djo-c106="" class="handle-button expand-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djo-c106="" class="highlight-div-header-right"><div _ngcontent-djo-c106="" class="handle-button ai-button"></div><div _ngcontent-djo-c106="" class="handle-button line-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djo-c106="" class="handle-button theme-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djo-c106="" class="handle-button copy-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  "<span class="hljs-attribute">src</span>": [</li><li>    <span class="hljs-string">"pages/Index"</span>,</li><li>    <span class="hljs-string">"pages/GoHouse"</span>,</li><li>    <span class="hljs-string">"pages/GoCompany"</span></li><li>  ]</li><li>}</li></ol></pre></div></div> </li><li>在/resources/base/profile/目录下创建名为shortcuts_config.json的文件，并在文件中定义应用快捷方式的相关配置。其中shortcutId表示快捷方式的ID、label表示快捷方式对外显示的文字描述信息、icon表示快捷方式的图标、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#wants标签" target="_blank">wants</a>中则是快捷方式内定义的目标wants信息集合。通过wants中的parameters参数来指定拉起快捷方式时的自定义数据。<div _ngcontent-djo-c106="" class="highlight-div"><div _ngcontent-djo-c106="" class="highlight-div-header"><div _ngcontent-djo-c106="" class="highlight-div-header-left"><div _ngcontent-djo-c106="" class="handle-button expand-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djo-c106="" class="highlight-div-header-right"><div _ngcontent-djo-c106="" class="handle-button ai-button"></div><div _ngcontent-djo-c106="" class="handle-button line-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djo-c106="" class="handle-button theme-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djo-c106="" class="handle-button copy-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"shortcuts"</span>: [</li><li>    {</li><li>      <span class="hljs-string">"shortcutId"</span>: <span class="hljs-string">"id_company"</span>,</li><li>      <span class="hljs-string">"label"</span>: <span class="hljs-string">"$string:Go_to_the_Company"</span>,</li><li>      <span class="hljs-string">"icon"</span>: <span class="hljs-string">"$media:company"</span>,</li><li>      <span class="hljs-string">"wants"</span>: [</li><li>        {</li><li>          <span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"com.example.desktopshortcuts"</span>,</li><li>          <span class="hljs-string">"moduleName"</span>: <span class="hljs-string">"entry"</span>,</li><li>          <span class="hljs-string">"abilityName"</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>          <span class="hljs-string">"parameters"</span>: {</li><li>            <span class="hljs-string">"shortCutKey"</span>: <span class="hljs-string">"CompanyPage"</span></li><li>          }</li><li>        }</li><li>      ]</li><li>    },</li><li>    {</li><li>      <span class="hljs-string">"shortcutId"</span>: <span class="hljs-string">"id_house"</span>,</li><li>      <span class="hljs-string">"label"</span>: <span class="hljs-string">"$string:Go_to_House"</span>,</li><li>      <span class="hljs-string">"icon"</span>: <span class="hljs-string">"$media:house"</span>,</li><li>      <span class="hljs-string">"wants"</span>: [</li><li>        {</li><li>          <span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"com.example.desktopshortcuts"</span>,</li><li>          <span class="hljs-string">"moduleName"</span>: <span class="hljs-string">"entry"</span>,</li><li>          <span class="hljs-string">"abilityName"</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>          <span class="hljs-string">"parameters"</span>: {</li><li>            <span class="hljs-string">"shortCutKey"</span>: <span class="hljs-string">"HousePage"</span></li><li>          }</li><li>        }</li><li>      ]</li><li>    }</li><li>  ]</li><li>}</li></ol></pre></div></div> </li><li>在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file" target="_blank">module.json5配置文件</a>中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签" target="_blank">abilities</a>标签下的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#metadata标签" target="_blank">metadata</a>中设置resource属性值为$profile:shortcuts_config，指定应用的快捷方式配置文件，即使用shortcuts_config.json文件中的shortcuts配置。<div class="screenLinkPre"><div _ngcontent-djo-c106="" class="highlight-div"><div _ngcontent-djo-c106="" class="highlight-div-header"><div _ngcontent-djo-c106="" class="highlight-div-header-left"><div _ngcontent-djo-c106="" class="handle-button expand-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djo-c106="" class="highlight-div-header-right"><div _ngcontent-djo-c106="" class="handle-button ai-button"></div><div _ngcontent-djo-c106="" class="handle-button line-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djo-c106="" class="handle-button theme-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djo-c106="" class="handle-button copy-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DesktopShortcut/blob/master/entry/src/main/module.json5#L6-L67" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"abilities"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>        <span class="hljs-string">"srcEntry"</span>: <span class="hljs-string">"./ets/entryability/EntryAbility.ets"</span>,</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-string">"skills"</span>: [</li><li>          {</li><li>            <span class="hljs-string">"entities"</span>: [</li><li>              <span class="hljs-string">"entity.system.home"</span></li><li>            ],</li><li>            <span class="hljs-string">"actions"</span>: [</li><li>              <span class="hljs-string">"ohos.want.action.home"</span></li><li>            ]</li><li>          }</li><li>        ],</li><li>        <span class="hljs-string">"metadata"</span>: [</li><li>          {</li><li>            <span class="hljs-string">"name"</span>: <span class="hljs-string">"ohos.ability.shortcuts"</span>,</li><li>            <span class="hljs-string">"resource"</span>: <span class="hljs-string">"$profile:shortcuts_config"</span></li><li>          }</li><li>        ]</li><li>      }</li><li>    ],</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DesktopShortcut/blob/master/entry/src/main/module.json5#L6-L67" target="_blank">module.json5</a></div></div></div></div> </li><li>在Index.ets文件中定义跳转到指定页面的方法。在步骤2中，通过parameters参数来指定了拉起快捷方式时的自定义数据 ，如"shortCutKey": "HousePage"。此时，可以通过获取want中的parameters里的shortCutKey来判断用户使用了哪种快捷方式，从而进行对应的页面跳转。如用户使用了“回家”的快捷方式进行导航，则获取到的shortCutKey的值为HousePage。<div class="screenLinkPre"><div _ngcontent-djo-c106="" class="highlight-div"><div _ngcontent-djo-c106="" class="highlight-div-header"><div _ngcontent-djo-c106="" class="highlight-div-header-left"><div _ngcontent-djo-c106="" class="handle-button expand-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djo-c106="" class="highlight-div-header-right"><div _ngcontent-djo-c106="" class="handle-button ai-button"></div><div _ngcontent-djo-c106="" class="handle-button line-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djo-c106="" class="handle-button theme-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djo-c106="" class="handle-button copy-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/DesktopShortcut/blob/master/entry/src/main/ets/pages/Index.ets#L68-L86" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">goToSpecifyPage</span>(<span class="hljs-params">want?: Want</span>) {</li><li>  <span class="hljs-keyword">let</span> shortCutKey = want?.<span class="hljs-property">parameters</span>?.<span class="hljs-property">shortCutKey</span>;</li><li>
</li><li>  <span class="hljs-keyword">if</span> (shortCutKey &amp;&amp; shortCutKey === <span class="hljs-string">'CompanyPage'</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>      <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/GoCompany'</span></li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to push url. Code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (shortCutKey &amp;&amp; shortCutKey === <span class="hljs-string">'HousePage'</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>      <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/GoHouse'</span></li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to push url. Code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DesktopShortcut/blob/master/entry/src/main/ets/pages/Index.ets#L68-L86" target="_blank">Index.ets</a></div></div></div></div> </li><li>最后，需要在Index.ets文件中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#onpageshow" target="_blank">onPageShow()</a>方法中调用步骤4的goToSpecifyPage()方法，并将want作为参数传入。其中，want需要在EntryAbility.ets文件中的onNewWant()方法中通过AppStorage存入，然后在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#onpageshow" target="_blank">onPageShow()</a>方法中获取。<div class="screenLinkPre"><div _ngcontent-djo-c106="" class="highlight-div"><div _ngcontent-djo-c106="" class="highlight-div-header"><div _ngcontent-djo-c106="" class="highlight-div-header-left"><div _ngcontent-djo-c106="" class="handle-button expand-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-djo-c106="" class="highlight-div-header-right"><div _ngcontent-djo-c106="" class="handle-button ai-button"></div><div _ngcontent-djo-c106="" class="handle-button line-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-djo-c106="" class="handle-button theme-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-djo-c106="" class="handle-button copy-button"><div _ngcontent-djo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-djo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/DesktopShortcut/blob/master/entry/src/main/ets/pages/Index.ets#L90-L98" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">onPageShow</span>(): <span class="hljs-title class_">void</span> {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-variable">AppStorage</span>.<span class="hljs-title function_">has</span>(<span class="hljs-string">'want'</span>)) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">want</span>: <span class="hljs-title class_">Want</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">AppStorage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'want'</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">want</span>) {</li><li>      <span class="hljs-keyword">this</span>.<span class="hljs-title function_">goToSpecifyPage</span>(<span class="hljs-variable">want</span>);</li><li>      <span class="hljs-variable">AppStorage</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'want'</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/DesktopShortcut/blob/master/entry/src/main/ets/pages/Index.ets#L90-L98" target="_blank">Index.ets</a></div></div></div></div> </li></ol> </div> <div class="tiledSection"><h2 id="section36103560329">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section36103560329" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/DesktopShortcut" target="_blank">桌面快捷方式开发实践</a></li></ul> </div> </div> <div></div></div>