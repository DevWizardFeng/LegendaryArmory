<h1 _ngcontent-hvi-c119="" class="doc-title ng-star-inserted" title="碰一碰视频分享"> 碰一碰视频分享 </h1>

<div _ngcontent-hvi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section0661114316221">概述<i class="anchor-icon anchor-icon-link" anchorid="section0661114316221" tips="复制节点链接"></i></h2>          <p>随着全场景智慧生活的不断演进，跨设备内容分享已成为用户的核心需求之一。传统分享方式普遍存在操作繁琐（需手动选择设备或应用）、依赖特定网络环境、传输效率低等问题，影响用户体验。HarmonyOS提供了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/share-kit-guide" target="_blank">Share Kit（分享服务）</a>，并结合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-introduction" target="_blank">App Linking</a>技术，可实现内容的快速跨设备分享，直达目标应用，无需依赖第三方应用中转，提供高效、便捷、无缝的分享体验。</p>     <p>本文以视频分享场景为例，详细介绍碰一碰快速分享视频的原理与开发步骤。</p>     <p>      </p><div class="video-box" style="width: 510.75px; height: 240.239px;"><div id="wise_player_0" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163245.18054150918178111638102739430789:50001231000000:2800:BFDFFC09EA5AE5BBD8B4577CD0ADF52D3E1AF84FDC22E025177242ECCBE61A4D.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_0-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163245.18054150918178111638102739430789:50001231000000:2800:BFDFFC09EA5AE5BBD8B4577CD0ADF52D3E1AF84FDC22E025177242ECCBE61A4D.mp4" id="wise_player_0_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163245.18054150918178111638102739430789:50001231000000:2800:BFDFFC09EA5AE5BBD8B4577CD0ADF52D3E1AF84FDC22E025177242ECCBE61A4D.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-27"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-28"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:09"><div class="vjs-load-progress" style="width: 31.94%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">31.94%</span></span><div data-start="0" data-end="3.067" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:09</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_0_component_225">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_0_component_225"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_0_component_332_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_332_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_0_component_338_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_338_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_0_component_338">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_0_component_338" for="vjs_select_364" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338" id="vjs_select_364"><option id="captions-foreground-color-wise_player_0_component_338-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-White">White</option><option id="captions-foreground-color-wise_player_0_component_338-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Black">Black</option><option id="captions-foreground-color-wise_player_0_component_338-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Red">Red</option><option id="captions-foreground-color-wise_player_0_component_338-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Green">Green</option><option id="captions-foreground-color-wise_player_0_component_338-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Blue">Blue</option><option id="captions-foreground-color-wise_player_0_component_338-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_0_component_338-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_0_component_338-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_0_component_338" for="vjs_select_365" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338" id="vjs_select_365"><option id="captions-foreground-opacity-wise_player_0_component_338-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_0_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_0_component_338">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_0_component_338" for="vjs_select_366" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338" id="vjs_select_366"><option id="captions-background-color-wise_player_0_component_338-Black" value="#000" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Black">Black</option><option id="captions-background-color-wise_player_0_component_338-White" value="#FFF" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-White">White</option><option id="captions-background-color-wise_player_0_component_338-Red" value="#F00" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Red">Red</option><option id="captions-background-color-wise_player_0_component_338-Green" value="#0F0" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Green">Green</option><option id="captions-background-color-wise_player_0_component_338-Blue" value="#00F" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Blue">Blue</option><option id="captions-background-color-wise_player_0_component_338-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Yellow">Yellow</option><option id="captions-background-color-wise_player_0_component_338-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Magenta">Magenta</option><option id="captions-background-color-wise_player_0_component_338-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_0_component_338" for="vjs_select_367" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338" id="vjs_select_367"><option id="captions-background-opacity-wise_player_0_component_338-Opaque" value="1" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_0_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_0_component_338-Transparent" value="0" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_0_component_338">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_0_component_338" for="vjs_select_368" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338" id="vjs_select_368"><option id="captions-window-color-wise_player_0_component_338-Black" value="#000" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Black">Black</option><option id="captions-window-color-wise_player_0_component_338-White" value="#FFF" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-White">White</option><option id="captions-window-color-wise_player_0_component_338-Red" value="#F00" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Red">Red</option><option id="captions-window-color-wise_player_0_component_338-Green" value="#0F0" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Green">Green</option><option id="captions-window-color-wise_player_0_component_338-Blue" value="#00F" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Blue">Blue</option><option id="captions-window-color-wise_player_0_component_338-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Yellow">Yellow</option><option id="captions-window-color-wise_player_0_component_338-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Magenta">Magenta</option><option id="captions-window-color-wise_player_0_component_338-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_0_component_338" for="vjs_select_369" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338" id="vjs_select_369"><option id="captions-window-opacity-wise_player_0_component_338-Transparent" value="0" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_0_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_0_component_338-Opaque" value="1" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_0_component_338">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_0_component_338" id="vjs_select_370"><option id="captions-font-size-wise_player_0_component_338-50" value="0.50" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-50">50%</option><option id="captions-font-size-wise_player_0_component_338-75" value="0.75" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-75">75%</option><option id="captions-font-size-wise_player_0_component_338-100" value="1.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-100">100%</option><option id="captions-font-size-wise_player_0_component_338-125" value="1.25" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-125">125%</option><option id="captions-font-size-wise_player_0_component_338-150" value="1.50" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-150">150%</option><option id="captions-font-size-wise_player_0_component_338-175" value="1.75" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-175">175%</option><option id="captions-font-size-wise_player_0_component_338-200" value="2.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-200">200%</option><option id="captions-font-size-wise_player_0_component_338-300" value="3.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-300">300%</option><option id="captions-font-size-wise_player_0_component_338-400" value="4.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_0_component_338">Text Edge Style</legend><select aria-labelledby="wise_player_0_component_338" id="vjs_select_371"><option id="wise_player_0_component_338-None" value="none" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-None">None</option><option id="wise_player_0_component_338-Raised" value="raised" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Raised">Raised</option><option id="wise_player_0_component_338-Depressed" value="depressed" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Depressed">Depressed</option><option id="wise_player_0_component_338-Uniform" value="uniform" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Uniform">Uniform</option><option id="wise_player_0_component_338-Dropshadow" value="dropshadow" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_0_component_338">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_0_component_338" id="vjs_select_372"><option id="captions-font-family-wise_player_0_component_338-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_0_component_338-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_0_component_338-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_0_component_338-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_0_component_338-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-Casual">Casual</option><option id="captions-font-family-wise_player_0_component_338-Script" value="script" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-Script">Script</option><option id="captions-font-family-wise_player_0_component_338-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="0" class="wiseplayershaw"></div></div></div><p></p>    </div>    <div class="tiledSection">     <h2 id="section95975396464">典型场景<i class="anchor-icon anchor-icon-link" anchorid="section95975396464" tips="复制节点链接"></i></h2>          <p>当用户在源端（发起碰一碰操作的设备）上使用视频应用播放视频时，可通过“碰一碰”功能将该视频分享至对端（接收分享的目标设备）。根据对端是否安装视频应用以及是否配置了直达应用市场，对端收到分享的视频之后，有如下三种场景：</p>    </div>    <div class="tiledSection">     <h3 id="section478717215513" class="firsth2">场景一：目标应用已安装<i class="anchor-icon anchor-icon-link" anchorid="section478717215513" tips="复制节点链接"></i></h3>          <p>系统直接拉起目标应用视频播放页面播放视频，无需经过浏览器中转，实现一键直达，极大提高便捷度和转化率。</p>     <p></p>     <p><span><img height="545.9517000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163244.11956060074919486246123547576538:50001231000000:2800:23CB0DB1D9271DE1895CA1EAA562F5422EB6FEF4236F82BFDB231D57E49EF031.gif" title="点击放大" width="266"></span></p>    </div>    <div class="tiledSection">     <h3 id="section1881014367518">场景二：目标应用未安装，已配置直达应用市场<i class="anchor-icon anchor-icon-link" anchorid="section1881014367518" tips="复制节点链接"></i></h3>          <p>当对端未安装目标应用且开发者配置了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-direct-to-ag" target="_blank">直达应用市场</a>功能时，将直接跳转到应用市场的应用详情页。安装完成后，首次打开应用将通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-deferredlink" target="_blank">延迟链接</a>功能自动跳转到视频播放页面，无需用户重新搜索或操作。</p>     <p><span><img height="550.354" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163244.51761021121862655077885190664297:50001231000000:2800:60F0072774CBFC2028B457F02737562A86A03A7A6EED0849A2A275AC29A4802D.gif" title="点击放大" width="266"></span></p>    </div>    <div class="tiledSection">     <h3 id="section1439415370518">场景三：目标应用未安装，未配置直达应用市场（有Web页面）<i class="anchor-icon anchor-icon-link" anchorid="section1439415370518" tips="复制节点链接"></i></h3>          <p>对端收到分享的视频链接之后，系统通过浏览器打开Web页面，用户可直接查看内容。在Web页面可提供“下载”按钮，引导用户安装应用获取更佳体验，安装后仍可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-deferredlink" target="_blank">延迟链接</a>直达原内容。</p>     <p><span><img height="545.9517000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163244.92022308997939599166438734880344:50001231000000:2800:FF6FCA65A88FBA67D6A41ADC94C4C99EC60982A0EE8FB66FACDE2ABA7BC5A1F2.gif" title="点击放大" width="266"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>对于不提供Web页面的应用，建议开启<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-direct-to-ag" target="_blank">直达应用市场</a>功能，避免因无法访问内容而造成体验断裂。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section17458222303">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section17458222303" tips="复制节点链接"></i></h2>          <p>碰一碰视频分享功能主要依赖于Share Kit与App Linking实现，确保用户能够通过简单的设备接触快速分享内容并直达应用。首先，应用需要集成App Linking来保证从分享到打开的端到端体验流畅无阻，具体可参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-linking-startup" target="_blank">使用App Linking实现应用间跳转</a>。</p>     <p>碰一碰视频分享后对端跳转目标应用的流程图如下，对端无论是否安装视频应用，用户都能获得连贯流畅的体验。</p>     <p><span><img height="482.86980000000005" originheight="983" originwidth="1083" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163245.02554149470055876452485151387019:50001231000000:2800:F747232BA3B25FF0B1C86C464BF42B4D20B47A69E8F008140D69FF1E9D8EE714.png" title="点击放大" width="532"></span></p>     <p>碰一碰视频分享时序图如下：</p>     <p><span><img height="552.7613" originheight="816" originwidth="1178" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163245.91286257407439722033379919448225:50001231000000:2800:EA7E1F0A4E25C16C95D11649C928F222E268A8A708F8FEC6F498161A0A4BFCB7.png" title="点击放大" width="798"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>碰一碰分享环境要求请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/knock-share-between-phones-overview#section124151731174519" target="_blank">环境要求</a>。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section109715253119">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section109715253119" tips="复制节点链接"></i></h2>          <p>本章将详细介绍视频应用使用碰一碰分享App Linking实现直达应用，主要开发步骤如下：</p>     <ul>      <li><a href="/consumer/cn/doc/best-practices/bpta-application-knock-video-share#section97421941152319">配置App Linking服务</a></li>     </ul>     <ul>      <li><a href="/consumer/cn/doc/best-practices/bpta-application-knock-video-share#section1261410588212">碰一碰分享事件监听/取消</a></li>      <li><a href="/consumer/cn/doc/best-practices/bpta-application-knock-video-share#section89721840192313">加载预览图和发起分享</a></li>      <li><a href="/consumer/cn/doc/best-practices/bpta-application-knock-video-share#section3655631162511">对端跳转处理</a></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section97421941152319" class="firsth2">配置App Linking服务<i class="anchor-icon anchor-icon-link" anchorid="section97421941152319" tips="复制节点链接"></i></h3>          <p>为了通过碰一碰分享实现直达应用的功能，应用需集成App Linking，以确保端到端体验的完整性。当碰一碰分享成功，对端收到源端分享的App Linking链接后，系统将根据链接配置自动拉起对应应用或浏览器，从而继续播放视频。</p>     <p>App Linking的配置和使用开发者可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-linking-startup" target="_blank">使用App Linking实现应用间跳转</a>。例如这里配置的App Linking的链接为：https://www.example.com，开发者需要在entry模块的module.json5进行如下配置：</p>     <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/module.json5#L2-L73" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"abilities"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-string">"exported"</span>: <span class="hljs-keyword">true</span>,</li><li>        <span class="hljs-string">"skills"</span>: [</li><li>          {</li><li>            <span class="hljs-string">"entities"</span>: [</li><li>              <span class="hljs-string">"entity.system.home"</span>,</li><li>              <span class="hljs-comment">// entities must contain "entity.system.browsable"</span></li><li>              <span class="hljs-string">"entity.system.browsable"</span></li><li>            ],</li><li>            <span class="hljs-string">"actions"</span>: [</li><li>              <span class="hljs-string">"ohos.want.action.home"</span>,</li><li>              <span class="hljs-comment">// Actions must contain "ohos.want.action.viewData"</span></li><li>              <span class="hljs-string">"ohos.want.action.viewData"</span></li><li>            ],</li><li>            <span class="hljs-string">"uris"</span>: [</li><li>              {</li><li>                <span class="hljs-comment">// The scheme must be configured as https</span></li><li>                <span class="hljs-string">"scheme"</span>: <span class="hljs-string">"https"</span>,</li><li>                <span class="hljs-comment">// The host must be configured as the associated domain name</span></li><li>                <span class="hljs-string">"host"</span>: <span class="hljs-string">"www.example.com"</span>,</li><li>                <span class="hljs-string">"path"</span>: <span class="hljs-string">""</span></li><li>              }</li><li>            ],</li><li>            <span class="hljs-comment">// domainVerify must be set to true</span></li><li>            <span class="hljs-string">"domainVerify"</span>: <span class="hljs-keyword">true</span></li><li>          }</li><li>        ]</li><li>      }</li><li>    ],</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/module.json5#L2-L73" target="_blank">module.json5</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section1261410588212">碰一碰分享事件监听/取消<i class="anchor-icon anchor-icon-link" anchorid="section1261410588212" tips="复制节点链接"></i></h3>          <p>在视频播放页面中添加碰一碰分享事件的监听与取消功能前，需先使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-syscap#caniuse" target="_blank">canIUse()</a>接口判断设备是否支持该能力。下面将碰一碰分享的相关逻辑代码封装至KnockController类文件中，使碰一碰逻辑与UI界面分离，便于代码维护。</p>     <p>KnockController用于管理碰一碰事件监听的添加与取消，以及分享功能，支持手机和PC端碰一碰分享。它封装了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-harmony-share" target="_blank">harmonyShare（华为分享）</a>模块的相关方法，将碰一碰分享事件的监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-harmony-share#section1215414133214" target="_blank">on('knockShare')</a>、取消监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-harmony-share#section18498201183311" target="_blank">off('knockShare')</a>以及分享功能<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-harmony-share#section1862171812120" target="_blank">share()</a>分别进行了封装。需要注意的是PC端碰一碰事件的监听和取消监听需要传入窗口的ID，如immersiveListeningPC()和immersiveDisableListeningPC()方法所示。</p>     <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/controller/KnockController.ets#L17-L145" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { harmonyShare, systemShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KnockController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">KnockController</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-comment">// Knock listening status</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">isKnockListening</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(<span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span>): <span class="hljs-title class_">KnockController</span> {</li><li>    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">KnockController</span>.<span class="hljs-property">controller</span>) {</li><li>      <span class="hljs-title class_">KnockController</span>.<span class="hljs-property">controller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">KnockController</span>(context);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">KnockController</span>.<span class="hljs-property">controller</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">context: common.UIAbilityContext</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span> = context;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   * knock listening callback</span></li><li><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> target After the Huawei Share event is triggered,</span></li><li><span class="hljs-comment">   * you can call back the parameters and share them across devices.</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">immersiveCallback</span>(<span class="hljs-params">target: harmonyShare.SharableTarget</span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>
</li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   *  Add knock listening</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">immersiveListening</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.Collaboration.HarmonyShare'</span>) &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span>) {</li><li>      harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'knockShare'</span>, <span class="hljs-function">(<span class="hljs-params">target: harmonyShare.SharableTarget</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">immersiveCallback</span>(target);</li><li>      });</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span> = <span class="hljs-literal">true</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   *  remove knock listening</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">immersiveDisableListening</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.Collaboration.HarmonyShare'</span>) &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span>) {</li><li>      harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'knockShare'</span>);</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span> = <span class="hljs-literal">false</span>;</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   *  Add knock listening in 2in1 device type.</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">immersiveListeningPC</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.Collaboration.HarmonyShare'</span>) &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span>) {</li><li>        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getLastWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">mainWindowID</span>: <span class="hljs-built_in">number</span> = data.<span class="hljs-title function_">getWindowProperties</span>().<span class="hljs-property">id</span>;</li><li>          harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'knockShare'</span>, { <span class="hljs-attr">windowId</span>: mainWindowID }, <span class="hljs-function">(<span class="hljs-params">target: harmonyShare.SharableTarget</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">immersiveCallback</span>(target);</li><li>          });</li><li>        })</li><li>
</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span> = <span class="hljs-literal">true</span>;</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`getWindowProperties err, errCode: <span class="hljs-subst">${error.code}</span>, error mesage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   *  Remove knock listening in 2in1 device type.</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">immersiveDisableListeningPC</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.Collaboration.HarmonyShare'</span>) &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span>) {</li><li>        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getLastWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">mainWindowID</span>: <span class="hljs-built_in">number</span> = data.<span class="hljs-title function_">getWindowProperties</span>().<span class="hljs-property">id</span>;</li><li>          harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'knockShare'</span>, { <span class="hljs-attr">windowId</span>: mainWindowID });</li><li>        })</li><li>
</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isKnockListening</span> = <span class="hljs-literal">false</span>;</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`getWindowProperties err, errCode: <span class="hljs-subst">${error.code}</span>, error mesage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/controller/KnockController.ets#L17-L145" target="_blank">KnockController.ets</a></div></div></div></div>     <p>根据前文所述场景，碰一碰分享功能主要用于视频播放页面，因此需在VideoPlay.ets中添加相应的事件监听与取消操作。进入页面时，在aboutToAppear()和onPageShow()回调中注册监听；离开页面（包括应用退至后台等情况）时，比如在onPageHide()方法中及时调用immersiveDisableListening()方法取消监听，避免资源浪费和异常触发。</p>     <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/pages/VideoPlay.ets#L19-L143" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } from <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { KnockController } from <span class="hljs-string">'../controller/KnockController'</span>;</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct VideoPlay {</li><li>  <span class="hljs-comment">// ...</span></li><li>  aboutToAppear(): void {</li><li>    <span class="hljs-comment">// ...</span></li><li>    let context: common.UIAbilityContext = <span class="hljs-keyword">this</span>.getUIContext().getHostContext() <span class="hljs-keyword">as</span> common.UIAbilityContext;</li><li>    <span class="hljs-keyword">this</span>.knockController = KnockController.getInstance(context);</li><li>    <span class="hljs-keyword">if</span> (deviceInfo.deviceType === <span class="hljs-string">'2in1'</span>) {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveListeningPC();</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveListening();</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  onPageShow(): void {</li><li>    <span class="hljs-keyword">if</span> (deviceInfo.deviceType === <span class="hljs-string">'2in1'</span>) {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveListeningPC();</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveListening();</li><li>    }</li><li>  }</li><li>
</li><li>  onPageHide(): void {</li><li>    <span class="hljs-keyword">if</span> (deviceInfo.deviceType === <span class="hljs-string">'2in1'</span>) {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveDisableListeningPC();</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveDisableListening();</li><li>    }</li><li>  }</li><li>
</li><li>  aboutToDisappear(): void {</li><li>    <span class="hljs-keyword">if</span> (deviceInfo.deviceType === <span class="hljs-string">'2in1'</span>) {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveDisableListeningPC();</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">this</span>.knockController?.immersiveDisableListening();</li><li>    }</li><li>    <span class="hljs-keyword">this</span>.videoIndex=<span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/pages/VideoPlay.ets#L19-L143" target="_blank">VideoPlay.ets</a></div></div></div></div>    </div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>收到碰一碰分享事件回调后，需尽快调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-harmony-share#section1862171812120" target="_blank">sharableTarget.share()</a>方法发起分享，超过3秒可能会失败。</p>     </div></div></div>    <div class="tiledSection">     <h3 id="section89721840192313">加载预览图和发起分享<i class="anchor-icon anchor-icon-link" anchorid="section89721840192313" tips="复制节点链接"></i></h3>          <p>收到碰一碰事件分享回调后，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-harmony-share#section1862171812120" target="_blank">sharableTarget.share()</a>方法发起分享，并设置分享卡片的信息，包括标题（title）、描述（description）和缩略图URI（thumbnailUri）。这些参数将用于生成特定的卡片模板，详情可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/share-mobilephone-app-share" target="_blank">通过分享面板发起分享</a>。</p>     <p>utd需要设置为utd.UniformDataType.HYPERLINK，表示分享的内容为链接；content设置为<a href="/consumer/cn/doc/best-practices/bpta-application-knock-video-share#section97421941152319">配置App Linking服务</a>章节中配置的链接，链接中拼接视频的唯一标识符videoIndex。</p>     <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/controller/KnockController.ets#L47-L81" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * knock listening callback</span></li><li><span class="hljs-comment"> * @param target After the Huawei Share event is triggered,</span></li><li><span class="hljs-comment"> * you can call back the parameters and share them across devices.</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">public</span> <span class="hljs-title function_">immersiveCallback</span>(<span class="hljs-variable">target</span>: <span class="hljs-title class_">harmonyShare</span>.<span class="hljs-title class_">SharableTarget</span>) {</li><li>  <span class="hljs-comment">// share app linking</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">videoIndex</span>: <span class="hljs-title class_">number</span> = <span class="hljs-variable">AppStorage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'videoIndex'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">number</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">videoData</span>: <span class="hljs-title class_">VideoData</span> = <span class="hljs-variable">VIDEO_SOURCES</span>[<span class="hljs-variable">videoIndex</span>];</li><li>    <span class="hljs-comment">// Video thumbnail image sandbox path</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">filePath</span>: <span class="hljs-title class_">string</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">context</span>?.<span class="hljs-variable">filesDir</span> + `/${<span class="hljs-variable">videoData</span>.<span class="hljs-variable">head</span>}`;</li><li>    <span class="hljs-comment">// Get video thumbnail URI path</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">coverUri</span>: <span class="hljs-title class_">string</span> = <span class="hljs-variable">fileUri</span>.<span class="hljs-title function_">getUriFromPath</span>(<span class="hljs-variable">filePath</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">shareData</span>: <span class="hljs-title class_">systemShare</span>.<span class="hljs-title class_">SharedData</span> = <span class="hljs-variable">new</span> <span class="hljs-variable">systemShare</span>.<span class="hljs-title function_">SharedData</span>({</li><li>      <span class="hljs-comment">// Set the shared data type to Link</span></li><li>      <span class="hljs-variable">utd</span>: <span class="hljs-title class_">uniformTypeDescriptor</span>.<span class="hljs-title class_">UniformDataType</span>.<span class="hljs-title class_">HYPERLINK</span>,</li><li>      <span class="hljs-comment">// The shared App Linking link is replaced with the real address here</span></li><li>      <span class="hljs-variable">content</span>: `<span class="hljs-title class_">https</span>:<span class="hljs-comment">//www.example.com?videoIndex=${videoIndex}`,</span></li><li>      <span class="hljs-variable">thumbnailUri</span>: <span class="hljs-title class_">coverUri</span>,</li><li>      <span class="hljs-variable">title</span>: <span class="hljs-title class_">videoData</span>.<span class="hljs-title class_">name</span>,</li><li>      <span class="hljs-variable">description</span>: <span class="hljs-title class_">videoData</span>.<span class="hljs-title class_">description</span></li><li>    });</li><li>    <span class="hljs-comment">// Initiate a share</span></li><li>    <span class="hljs-variable">target</span>.<span class="hljs-title function_">share</span>(<span class="hljs-variable">shareData</span>).<span class="hljs-title function_">then</span>(() =&gt; {</li><li>      <span class="hljs-variable">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable">TAG</span>, <span class="hljs-string">'Share link success'</span>);</li><li>    }).<span class="hljs-keyword">catch</span>((<span class="hljs-variable">error</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>      <span class="hljs-variable">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable">TAG</span>, `<span class="hljs-variable">Share</span> <span class="hljs-variable">link</span>  <span class="hljs-variable">error</span>. <span class="hljs-variable">code</span>: ${<span class="hljs-variable">error</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">error</span>.<span class="hljs-variable">message</span>}`);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>    <span class="hljs-variable">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable">TAG</span>, `<span class="hljs-variable">Share</span> <span class="hljs-variable">link</span> <span class="hljs-variable">exception</span>. <span class="hljs-variable">code</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/controller/KnockController.ets#L47-L81" target="_blank">KnockController.ets</a></div></div></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>为了提升分享预览模板缩略图的清晰度和整体用户体验，建议开发者优先使用thumbnailUri参数来设置缩略图。虽然thumbnailUri和thumbnail两个参数均可用于实现缩略图效果，但是thumbnail参数由于大小限制为32KB，在实际应用中可能会导致图片模糊不清，从而影响用户体验。因此，采用thumbnailUri来指定高质量的缩略图是更为推荐的做法。</p>      </div></div></div>     <p>thumbnailUri仅支持沙箱文件URI或用户文件URI。若需将网络图片作为缩略图，请先将其下载并保存至应用沙箱内。下面的代码示例展示了如何将media目录下的图片保存到应用沙箱路径中，以便于后续图片分享操作。</p>     <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/utils/ImageUtil.ets#L17-L53" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Logger</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Logger'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'ImageUtil'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageUtil</span> {</li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   * Save image to sandbox.</span></li><li><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> context UIAbility Context.</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">saveImage</span>(<span class="hljs-params">context: common.UIAbilityContext</span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      [</li><li>        [context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.video_cover_0'</span>).<span class="hljs-property">id</span>), <span class="hljs-string">'/video_cover_0.png'</span>],</li><li>        [context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.video_cover_1'</span>).<span class="hljs-property">id</span>), <span class="hljs-string">'/video_cover_1.png'</span>],</li><li>        [context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.video_cover_2'</span>).<span class="hljs-property">id</span>), <span class="hljs-string">'/video_cover_2.png'</span>],</li><li>        [context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.video_cover_3'</span>).<span class="hljs-property">id</span>), <span class="hljs-string">'/video_cover_3.png'</span>]</li><li>      ].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">file</span>: fileIo.<span class="hljs-property">File</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>        <span class="hljs-keyword">try</span> {</li><li>          file = fileIo.<span class="hljs-title function_">openSync</span>(context.<span class="hljs-property">filesDir</span> + item[<span class="hljs-number">1</span>], fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>          <span class="hljs-keyword">let</span> writeLen = fileIo.<span class="hljs-title function_">writeSync</span>(file.<span class="hljs-property">fd</span>, (item[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Uint8Array</span>).<span class="hljs-property">buffer</span>);</li><li>          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`write data to file succeed and size is: <span class="hljs-subst">${writeLen}</span>`</span>);</li><li>        } <span class="hljs-keyword">catch</span> (err) {</li><li>          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to save image. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        } <span class="hljs-keyword">finally</span> {</li><li>          fileIo.<span class="hljs-title function_">closeSync</span>(file);</li><li>        }</li><li>      })</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`saveImage err, errCode: <span class="hljs-subst">${error.code}</span>, error mesage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/utils/ImageUtil.ets#L17-L53" target="_blank">ImageUtil.ets</a></div></div></div></div>     <p>卡片效果图如下：</p>     <p><span><img height="549.4496" originheight="661" originwidth="320" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163245.59851598936737138364224027132252:50001231000000:2800:40ABDE118CA6F9998927FB84E44DF9AB6166BEF7899D1D754DB394C67228BF9A.png" title="点击放大" width="266"></span></p>    </div>    <div class="tiledSection">     <h3 id="section3655631162511">对端跳转处理<i class="anchor-icon anchor-icon-link" anchorid="section3655631162511" tips="复制节点链接"></i></h3>          <ol>      <li>拉起应用       <p>对端收到分享的App Linking之后，系统拉起应用时有以下两种情况：</p>       <ol>        <li>应用未在后台运行：此时跳转应用，应在onCreate()方法中获取链接中的视频唯一标识符videoIndex。         <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/entryability/EntryAbility.ets#L16-L127" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">ConfigurationConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { url } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Logger</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/Logger'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'EntryAbility'</span>;</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">mVideoIndex</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getVideoIndex</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">let</span> uri = want?.<span class="hljs-property">uri</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">videoIndex</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>    <span class="hljs-comment">// Parse the parameters to obtain the app linking</span></li><li>    <span class="hljs-keyword">if</span> (uri) {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> urlObject = url.<span class="hljs-property">URL</span>.<span class="hljs-title function_">parseURL</span>(want?.<span class="hljs-property">uri</span>);</li><li>        videoIndex = urlObject.<span class="hljs-property">params</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'videoIndex'</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>      } <span class="hljs-keyword">catch</span> (err) {</li><li>        <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`parseURL err, errCode: <span class="hljs-subst">${error.code}</span>, error mesage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`getAid aid:<span class="hljs-subst">${videoIndex}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> videoIndex;</li><li>  }</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mVideoIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVideoIndex</span>(want);</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/entryability/EntryAbility.ets#L16-L127" target="_blank">EntryAbility.ets</a></div></div></div></div>         <p>在onWindowStageCreate()回调中使用windowStage.loadContent()方法加载详情页的URL为“pages/VideoPlay”。</p>         <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/entryability/EntryAbility.ets#L61-L88" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pageUrl</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'pages/Index'</span>;</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mVideoIndex</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">mVideoIndex</span> !== <span class="hljs-string">''</span>) {</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'videoIndex'</span>, <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mVideoIndex</span>));</li><li>    pageUrl = <span class="hljs-string">'pages/VideoPlay'</span>;</li><li>  }</li><li>
</li><li>  windowStage.<span class="hljs-title function_">loadContent</span>(pageUrl, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> windowObj = windowStage.<span class="hljs-title function_">getMainWindowSync</span>();</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span> = windowObj.<span class="hljs-title function_">getUIContext</span>();</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`getMainWindowSync err, errCode: <span class="hljs-subst">${error.code}</span>, error mesage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/entryability/EntryAbility.ets#L61-L88" target="_blank">EntryAbility.ets</a></div></div></div></div></li>        <li>应用已在后台运行：此时跳转应用，需在onNewWant()方法中获取链接中的视频唯一标识符 videoIndex，并通过 UIContext.getRouter().pushUrl() 实现页面跳转。         <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/entryability/EntryAbility.ets#L24-L128" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">export</span> <span class="hljs-variable">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-variable">extends</span> <span class="hljs-variable">UIAbility</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-variable">uiContext</span>: <span class="hljs-title class_">UIContext</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-variable">mVideoIndex</span>: <span class="hljs-title class_">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getVideoIndex</span>(<span class="hljs-variable">want</span>: <span class="hljs-title class_">Want</span>): <span class="hljs-title class_">string</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">onNewWant</span>(<span class="hljs-variable">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-variable">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-title class_">LaunchParam</span>): <span class="hljs-title class_">void</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">videoIndex</span>: <span class="hljs-title class_">string</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getVideoIndex</span>(<span class="hljs-variable">want</span>);</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">videoIndex</span> &amp;&amp; <span class="hljs-variable">videoIndex</span> !== <span class="hljs-string">''</span>) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-variable">page</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">uiContext</span>?.<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">getState</span>();</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable">page</span>?.<span class="hljs-variable">name</span> === <span class="hljs-string">'VideoPlay'</span>) {</li><li>        <span class="hljs-variable">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'videoIndex'</span>, <span class="hljs-variable">Number</span>.<span class="hljs-title function_">parseInt</span>(<span class="hljs-variable">videoIndex</span>));</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-keyword">this</span>.<span class="hljs-variable">uiContext</span>?.<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>          <span class="hljs-variable">url</span>: <span class="hljs-string">'pages/VideoPlay'</span>,</li><li>          <span class="hljs-variable">params</span>: {</li><li>            <span class="hljs-variable">videoIndex</span>: <span class="hljs-title class_">videoIndex</span></li><li>          }</li><li>        }).<span class="hljs-keyword">catch</span>((<span class="hljs-variable">error</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>          <span class="hljs-variable">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable">TAG</span>, `<span class="hljs-variable">pushUrl</span> <span class="hljs-variable">err</span>, <span class="hljs-variable">errCode</span>: ${<span class="hljs-variable">error</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">error</span> <span class="hljs-variable">mesage</span>: ${<span class="hljs-variable">error</span>.<span class="hljs-variable">message</span>}`);</li><li>        });</li><li>      }</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/entryability/EntryAbility.ets#L24-L128" target="_blank">EntryAbility.ets</a></div></div></div></div></li>        <li>获取视频的唯一标识符videoIndex后，在视频播放页面根据该videoIndex并播放相应的视频内容。         <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/pages/VideoPlay.ets#L32-L142" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">VideoPlay</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-meta">@StorageLink</span>(<span class="hljs-string">'videoIndex'</span>) <span class="hljs-attr">videoIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> params = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">getParams</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;;</li><li>    <span class="hljs-keyword">if</span> (params &amp;&amp; params.<span class="hljs-property">videoIndex</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoIndex</span> = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(params.<span class="hljs-property">videoIndex</span>);</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">VideoPlayingView</span>({</li><li>        <span class="hljs-attr">videoList</span>: <span class="hljs-variable constant_">VIDEO_SOURCES</span>,</li><li>        <span class="hljs-attr">videoIndex</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">videoIndex</span></li><li>      })</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/pages/VideoPlay.ets#L32-L142" target="_blank">VideoPlay.ets</a></div></div></div></div></li>       </ol></li>      <li>配置直达应用市场与延迟链接       <p>为提升用户未安装应用时的体验，可配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-direct-to-ag" target="_blank">直达应用市场</a>功能，引导用户下载安装应用。配置完成后，当对端收到源端分享的App Linking链接时，若设备未安装目标应用，系统将直接跳转至应用市场的应用详情页，支持一键下载安装。</p>       <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163245.11727271253408245664192748071777:50001231000000:2800:2C41F77FDC338BEB8ABB0FA7B46E3A6597661D0D46C37CA86CC9915A44771193.gif" title="点击放大" width="266"></span></p>       <p>同时，需要实现<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-deferredlink" target="_blank">延迟链接</a>功能，确保安装后首次启动可直达内容。安装完应用之后，开发者可以在用户首次打开应用时，使用延迟链接，直接跳转到视频播放页面，这一流程不仅优化了用户体验，还有助于提升链接的转化率。</p>       <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163245.45008253592308658165094727740374:50001231000000:2800:58EACCA314ED57FE42A9BF358B6A51280F64079441AEC068009DC1F183E75D48.gif" title="点击放大" width="266"></span></p>       <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/applinking-deferredlink-api#section15555111210233" target="_blank">deferredLink.popDeferredLink()</a>接口获取原始App Linking链接，并根据解析该链接直接跳转至视频播放页面。</p>       <div class="screenLinkPre"><div _ngcontent-hvi-c106="" class="highlight-div"><div _ngcontent-hvi-c106="" class="highlight-div-header"><div _ngcontent-hvi-c106="" class="highlight-div-header-left"><div _ngcontent-hvi-c106="" class="handle-button expand-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hvi-c106="" class="highlight-div-header-right"><div _ngcontent-hvi-c106="" class="handle-button ai-button"></div><div _ngcontent-hvi-c106="" class="handle-button line-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hvi-c106="" class="handle-button theme-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hvi-c106="" class="handle-button copy-button"><div _ngcontent-hvi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hvi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/pages/Index.ets#L27-L116" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-comment">//Get the deferred link parameter and go to video play page</span></li><li>    deferredLink.<span class="hljs-title function_">popDeferredLink</span>()</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">link: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Succeeded in getting deferred link, result: <span class="hljs-subst">${link}</span>`</span>);</li><li>        <span class="hljs-keyword">const</span> videoIndex = url.<span class="hljs-property">URL</span>.<span class="hljs-title function_">parseURL</span>(link)?.<span class="hljs-property">params</span>?.<span class="hljs-title function_">get</span>(<span class="hljs-string">'videoIndex'</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>        <span class="hljs-keyword">if</span> (videoIndex) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({</li><li>            <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/VideoPlay'</span>,</li><li>            <span class="hljs-attr">params</span>: { videoIndex }</li><li>          });</li><li>        }</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to get deferred link. code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      });</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/knock-share/blob/master/entry/src/main/ets/pages/Index.ets#L27-L116" target="_blank">Index.ets</a></div></div></div></div></li>      <li>Web页面开发与部署       <p>当应用未安装且未配置直达应用市场时，系统会打开浏览器加载视频播放Web页面来播放视频，保证应用在未安装的情况下也能体验播放视频功能，特别是与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/applinking-deferredlink" target="_blank">延迟链接</a>结合使用，详细请参见<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-social-share#section157709544229" target="_blank">Web页面开发与部署（可选）</a>。</p>       <p><span><img height="549.9018" originheight="2334" originwidth="1129" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163245.36943427130870588142675120456752:50001231000000:2800:7369E75B760D1384D2CFBC8B6E35C1C89CD819592E242CF4C2A70C8C7DD107EC.png" title="点击放大" width="266"></span></p></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section34571114153117">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section34571114153117" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section16943163462314" class="firsth2">碰一碰分享后，目标应用无法拉起、Web视频播放页面无法跳转异常等<i class="anchor-icon anchor-icon-link" anchorid="section16943163462314" tips="复制节点链接"></i></h3>          <p>对端成功接收到源端分享的App Linking链接，但是未拉起目标应用，具体请查看<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-social-share#section1057235918212" target="_blank">AGC上显示了配置成功，但是配置到目标方后无法拉起如何解决</a>。Web视频播放页面跳转异常请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-social-share#section129769325414" target="_blank">Web页面跳转应用异常</a>。</p>     <p>更多关于碰一碰分享之后对端跳转问题请参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-social-share#section1181324774617" target="_blank">社交分享跳转：常见问题</a>。</p>    </div>    <div class="tiledSection">     <h3 id="section2038561144112">碰一碰分享预览图模糊<i class="anchor-icon anchor-icon-link" anchorid="section2038561144112" tips="复制节点链接"></i></h3>          <p>碰一碰预览图模糊不清，可能是因为图片本身画质低或者使用了thumbnail参数来设置预览图，这种情况需要更换更高质量的图片，优先使用thumbnailUri参数来设置缩略图。因为thumbnail仅支持32KB以下大小的图片，无法保证预览图的高清。</p>    </div>    <div class="tiledSection">     <h2 id="section548892519388">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section548892519388" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitee.com/harmonyos_samples/knock-share" target="_blank">基于Share Kit碰一碰视频快速分享</a></li>     </ul>    </div>    <p></p>   </div>   <div></div></div>