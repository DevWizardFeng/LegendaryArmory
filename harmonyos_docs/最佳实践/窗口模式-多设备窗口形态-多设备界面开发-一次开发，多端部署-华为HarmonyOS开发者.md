<h1 _ngcontent-dap-c119="" class="doc-title ng-star-inserted" title="窗口模式"> 窗口模式 </h1>

<div _ngcontent-dap-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section157110141098">概述<i class="anchor-icon anchor-icon-link" anchorid="section157110141098" tips="复制节点链接"></i></h2>          <p>应用窗口模式指应用主窗口启动时的显示方式。HarmonyOS目前支持全屏、分屏、自由悬浮多窗三种应用窗口模式。这种对多种应用窗口模式的支持能力，也称为操作系统的“多窗口能力”。</p>     <ul>      <li><strong>全屏</strong>：应用主窗口启动时铺满整个屏幕。</li>      <li><strong>分屏</strong>：应用主窗口启动时占据屏幕的某个部分，当前支持二分屏。两个分屏窗口之间具有分界线，可通过拖拽分界线调整两个部分的窗口尺寸。</li>     </ul>     <p><strong>自由悬浮多窗</strong>分为自由多窗和悬浮窗。</p>     <ul>      <li><strong>自由多窗</strong>：自由窗口的大小和位置可自由调整。同一个屏幕上可同时显示多个自由窗口，这些自由窗口按照打开或者获取焦点的顺序在Z轴排布。当自由窗口被点击或触摸时，其Z轴高度提升，并获取焦点。</li>      <li><strong>悬浮窗</strong>：悬浮窗是一种在设备屏幕上悬浮的非全屏应用窗口。一般用于在已有全屏任务运行的基础上，临时处理另一个任务，或短时间多任务并行使用。如浏览网页的同时回复消息。</li>     </ul>    </div>    <p><span><img height="167.99200000000002" originheight="980" originwidth="5367" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163106.71110903102105680505194465451187:50001231000000:2800:91712FB059499859C770A2DB84EF50501C166B7FEA7D6EC935C63C8CC1ABED38.png" title="点击放大" width="920"></span></p>    <div class="tiledSection">     <h3 id="section921561411472" class="firsth2">实现窗口模式<i class="anchor-icon anchor-icon-link" anchorid="section921561411472" tips="复制节点链接"></i></h3>          <p>窗口模式是由系统提供的能力，不需要开发者单独开发功能，所以开发者只需要考虑悬浮或者分屏之后应用界面的适配问题。</p>     <p>当应用需要配置是否支持悬浮窗/分屏能力时，可以通过在module.json5配置文件中<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签" target="_blank">abilities标签</a>下添加<strong>supportWindowMode</strong>字段来实现。<strong>supportWindowMode</strong>属性主要标识当前UIAbility所支持的窗口模式，详细请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-window-support" target="_blank">应用声明支持智慧多窗</a>。</p>     <p><strong>supportWindowMode</strong>属性主要标识当前UIAbility所支持的窗口模式，默认值为["fullscreen", "split", "floating"]，即全屏、分屏、悬浮窗全部支持。开发者可以通过配置<strong>supportWindowMode</strong>属性来定制支持的窗口模式。支持的字段及含义如下表所示。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.1" valign="top" width="26.02%">          <p>字段</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.2" valign="top" width="73.98%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="26.02%">          <p>fullscreen</p></td>         <td class="cellrowborder" valign="top" width="73.98%">          <p>窗口支持全屏显示。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="26.02%">          <p>split</p></td>         <td class="cellrowborder" valign="top" width="73.98%">          <p>窗口支持分屏显示。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="26.02%">          <p>floating</p></td>         <td class="cellrowborder" valign="top" width="73.98%">          <p>手机/折叠屏表示窗口支持悬浮窗显示，平板设备中表示窗口支持悬浮窗和自由多窗显示，pc设备中表示支持自由多窗显示。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>如果当前窗口处于自由多窗模式，应用可通过调用 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#setsupportedwindowmodes15" target="_blank">setSupportedWindowModes()</a>方法来动态修改其支持的窗口模式，仅在2in1和tablet上可正常调用。</li>        <li>智慧多窗详情，开发者可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-window-guide" target="_blank">智慧多窗应用开发指南</a>。</li>       </ol>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="section7695513909">获取窗口模式<i class="anchor-icon anchor-icon-link" anchorid="section7695513909" tips="复制节点链接"></i></h3>          <p>开发者可以通过获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#windowstatustype11" target="_blank">windowStatusType</a>的值来判断设备目前的窗口模式。</p>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L35-L218" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">public</span> <span class="hljs-attr">onStatusTypeChange</span>: <span class="hljs-function">(<span class="hljs-params">statusType: <span class="hljs-variable language_">window</span>.WindowStatusType</span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">statusType: <span class="hljs-variable language_">window</span>.WindowStatusType</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindowInfo</span>.<span class="hljs-property">windowStatusType</span> = statusType;</li><li>}</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-title function_">updateWindowInfo</span>(): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// First time get window status.</span></li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindowInfo</span>.<span class="hljs-property">windowStatusType</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindow</span>.<span class="hljs-title function_">getWindowStatus</span>();</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindow</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'windowStatusChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onStatusTypeChange</span>);</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L35-L218" target="_blank">WindowUtil.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section14881194210478">不同设备支持哪些窗口模式<i class="anchor-icon anchor-icon-link" anchorid="section14881194210478" tips="复制节点链接"></i></h3>          <p>窗口模式与产品设计强相关，不同产品支持的窗口模式不同。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.1" valign="top" width="20%">          <p>设备</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.2" valign="top" width="20%">          <p><strong>全屏</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.3" valign="top" width="19.99%">          <p>分屏</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.4" valign="top" width="20.01%">          <p>自由多窗</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.6.1.5" valign="top" width="20%">          <p>悬浮窗</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="20%">          <p>手机</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持（默认）</p></td>         <td class="cellrowborder" valign="top" width="19.99%">          <p>支持</p></td>         <td class="cellrowborder" valign="top" width="20.01%">          <p>不支持</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">          <p>折叠屏</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持（默认）</p></td>         <td class="cellrowborder" valign="top" width="19.99%">          <p>支持</p></td>         <td class="cellrowborder" valign="top" width="20.01%">          <p>不支持</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">          <p>平板</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持（默认）</p></td>         <td class="cellrowborder" valign="top" width="19.99%">          <p>支持</p></td>         <td class="cellrowborder" valign="top" width="20.01%">          <p>支持</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="20%">          <p>电脑</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持</p></td>         <td class="cellrowborder" valign="top" width="19.99%">          <p>支持</p></td>         <td class="cellrowborder" valign="top" width="20.01%">          <p>支持（默认）</p></td>         <td class="cellrowborder" valign="top" width="20%">          <p>支持</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>平板设备和电脑设备同时支持自由多窗和悬浮窗，开启自由多窗模式，FLOATING代表自由多窗模式；关闭自由多窗模式，FLOATING代表悬浮窗模式。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="section761413272489">WindowType和WindowStatusType的使用区别<i class="anchor-icon anchor-icon-link" anchorid="section761413272489" tips="复制节点链接"></i></h3>          <ul>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#windowtype7" target="_blank">WindowType</a>表示窗口的类型枚举。       <p>HarmonyOS的窗口模块将窗口界面分为系统窗口、应用窗口两种基本类型。</p>       <ul>        <li><strong>系统窗口</strong>：系统窗口指完成系统特定功能的窗口。如音量条、壁纸、通知栏、状态栏、导航栏等。</li>        <li><strong>应用窗口</strong>：应用窗口区别于系统窗口，指与应用显示相关的窗口。根据显示内容的不同，应用窗口又分为应用主窗口、应用子窗口两种类型。         <ul>          <li>应用主窗口：应用主窗口用于显示应用界面，会在“任务管理界面”显示。</li>          <li>应用子窗口：应用子窗口用于显示应用的弹窗、悬浮窗等辅助窗口，不会在“任务管理界面”显示。应用子窗口的生命周期跟随应用主窗口。</li>         </ul></li>       </ul></li>     </ul>     <ul>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#windowstatustype11" target="_blank">WindowStatusType</a>表示窗口模式枚举。       <p>应用窗口模式指应用主窗口启动时的显示方式。HarmonyOS目前支持全屏、分屏、自由窗口三种应用窗口模式。这种对多种应用窗口模式的支持能力，也称为操作系统的“多窗口能力”。</p>       <ul>        <li><strong>全屏</strong>：应用主窗口启动时铺满整个屏幕。</li>        <li><strong>分屏</strong>：应用主窗口启动时占据屏幕的某个部分，当前支持二分屏。两个分屏窗口之间具有分界线，可通过拖拽分界线调整两个部分的窗口尺寸。</li>        <li><strong>自由悬浮窗口</strong>：分为自由多窗和悬浮窗。         <ul>          <li><strong>自由多窗</strong>：自由窗口的大小和位置可自由调整。同一个屏幕上可同时显示多个自由窗口，这些自由窗口按照打开或者获取焦点的顺序在Z轴排布。当自由窗口被点击或触摸时，其Z轴高度提升，并获取焦点。</li>          <li><strong>悬浮窗</strong>：悬浮窗是一种在设备屏幕上悬浮的非全屏应用窗口。一般用于在已有全屏任务运行的基础上，临时处理另一个任务，或短时间多任务并行使用。如浏览网页的同时回复消息。</li>         </ul></li>       </ul></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section16516172911324">窗口模式开发场景<i class="anchor-icon anchor-icon-link" anchorid="section16516172911324" tips="复制节点链接"></i></h2>          <p>在应用窗口模式变化时，通常伴随窗口尺寸变化，以及页面布局或功能差异。开发者适配多设备上不同窗口模式时，按需对窗口的不同变化做出响应。</p>    </div>    <div class="tiledSection">     <h3 id="section19593152791013" class="firsth2">监听窗口模式变化<i class="anchor-icon anchor-icon-link" anchorid="section19593152791013" tips="复制节点链接"></i></h3>         </div>    <p>开发者可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#onwindowstatuschange11" target="_blank">on('windowStatusChange')</a>开启窗口模式变化的监听，当窗口windowStatusType发生变化时进行通知。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L35-L218" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">public</span> <span class="hljs-attr">onStatusTypeChange</span>: <span class="hljs-function">(<span class="hljs-params">statusType: <span class="hljs-variable language_">window</span>.WindowStatusType</span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">statusType: <span class="hljs-variable language_">window</span>.WindowStatusType</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindowInfo</span>.<span class="hljs-property">windowStatusType</span> = statusType;</li><li>}</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-title function_">updateWindowInfo</span>(): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// First time get window status.</span></li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindowInfo</span>.<span class="hljs-property">windowStatusType</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindow</span>.<span class="hljs-title function_">getWindowStatus</span>();</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindow</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'windowStatusChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onStatusTypeChange</span>);</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L35-L218" target="_blank">WindowUtil.ets</a></div></div></div></div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>在窗口模式变化时，系统内窗口尺寸还未刷新，如果开发者需要获取新窗口尺寸，应该在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#onwindowsizechange7" target="_blank">on('windowSizeChange')</a>事件回调中获取。</p>     </div></div></div>    <div class="tiledSection">     <h3 id="section52032021116">获取窗口尺寸<i class="anchor-icon anchor-icon-link" anchorid="section52032021116" tips="复制节点链接"></i></h3>         </div>    <p>开发者获取指定窗口对象Window后，在该对象上使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9" target="_blank">getWindowProperties()</a>获取窗口各个属性，在属性windowRect中获取窗口宽高信息。如果要在页面中获取窗口宽高信息，需要注意获取的正确时机。参考代码如下：</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L181-L189" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// First time get window size.</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">mainWindow</span>.<span class="hljs-title function_">getWindowProperties</span>().<span class="hljs-variable">windowRect</span>.<span class="hljs-variable">width</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">mainWindow</span>.<span class="hljs-title function_">getWindowProperties</span>().<span class="hljs-variable">windowRect</span>.<span class="hljs-variable">height</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">windowSize</span>: <span class="hljs-title class_">window</span>.<span class="hljs-title class_">Size</span> = {</li><li>  <span class="hljs-variable">width</span>: <span class="hljs-title class_">width</span>,</li><li>  <span class="hljs-variable">height</span>: <span class="hljs-title class_">height</span></li><li>}</li><li><span class="hljs-keyword">this</span>.<span class="hljs-variable">mainWindowInfo</span>.<span class="hljs-variable">windowSize</span> = <span class="hljs-variable">windowSize</span>;</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L181-L189" target="_blank">WindowUtil.ets</a></div></div></div></div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ol>       <li>页面生命周期<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#abouttoappear" target="_blank">aboutToAppear</a>阶段，不代表此时窗口可见，仅代表当前组件已创建，此时获取到的窗口尺寸信息（windowRect）可能有误。建议在页面生命周期<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#onpageshow" target="_blank">onPageShow</a>阶段获取，该阶段会在窗口可见后调用，此时可以拿到窗口正确的宽高信息。</li>       <li>获取到的windowRect是实际上的窗口大小，如果应用在小窗模式下，则实际展示效果是根据scale进行缩放后的。</li>      </ol>     </div></div></div>    <div class="tiledSection">     <h3 id="section15481429111113">监听窗口尺寸变化<i class="anchor-icon anchor-icon-link" anchorid="section15481429111113" tips="复制节点链接"></i></h3>          <p>获取窗口实例对象后，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#onwindowsizechange7" target="_blank">window.on('windowSizeChange')</a>方法实现对窗口尺寸大小变化的监听。</p>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L40-L220" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">public</span> <span class="hljs-attr">onWindowSizeChange</span>: <span class="hljs-function">(<span class="hljs-params">windowSize: <span class="hljs-variable language_">window</span>.Size</span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">windowSize: <span class="hljs-variable language_">window</span>.Size</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindowInfo</span>.<span class="hljs-property">windowSize</span> = windowSize;</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindowInfo</span>.<span class="hljs-property">widthBp</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">getWindowWidthBreakpoint</span>();</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindowInfo</span>.<span class="hljs-property">heightBp</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>!.<span class="hljs-title function_">getWindowHeightBreakpoint</span>();</li><li>};</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-title function_">updateWindowInfo</span>(): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-comment">// Register for window size change monitoring, update window size and width/height breakpoint.</span></li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainWindow</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'windowSizeChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onWindowSizeChange</span>);</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L40-L220" target="_blank">WindowUtil.ets</a></div></div></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>需要注意的是，在window侧如果窗口大小没发生变化，此监听不会被触发。如直接旋转180度的情况下，窗口大小并没有改变，此时不会通知回调。在这种情况下，应用可以通过监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#displayonaddremovechange" target="_blank">display.on('change')</a>事件，感知屏幕显示方向变化。</p>      </div></div></div>     <p>在使用多窗口功能时，窗口的尺寸会发生变化，可能影响布局。以下是两种情况的具体描述：</p>     <ul>      <li><strong>进入分屏模式</strong><strong>：</strong>当手机设备进入分屏模式时，窗口高度缩小为原来的1/2或1/3，宽度保持不变。由于内容页面大小未作相应调整，垂直方向的内容可能被截断，且页面无法滚动查看完整内容。开发者可参考<a href="/consumer/cn/doc/best-practices/bpta-multi-device-window-mode#section2763122110135">窗口模式变化常见问题</a>。</li>      <li><strong>进入竖向悬浮窗模式</strong>：在这种模式中，窗口内容会根据窗口大小进行等比缩放。但是，窗口的高宽比变为3:4.575，这与全屏模式（通常为16:9或4:3）的比例不同。纵向比例相对于横向较小，这也可能导致内容截断现象。开发者可参考<a href="/consumer/cn/doc/best-practices/bpta-multi-device-window-mode#section2763122110135">窗口模式变化常见问题</a>。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section1578965913915">定制窗口模式支持策略<i class="anchor-icon anchor-icon-link" anchorid="section1578965913915" tips="复制节点链接"></i></h3>          <p>如果开发者希望在不同的设备上支持不同的窗口模式，可通过<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-modular-design#section1260019161216" target="_blank">多HAP工程</a>实现。</p>     <p>在单HAP工程下，开发者只能在module.json5中定制一种窗口支持策略。在不同的HAP工程下，开发者可以通过在module.json5配置文件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签" target="_blank">abilities标签</a>下添加supportWindowMode字段，为每个HAP定制一种窗口支持策略。</p>    </div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>建立多HAP工程示例代码，可参考<a href="https://gitee.com/harmonyos_samples/multi-hap" target="_blank">多HAP构建功能</a>。</p>     </div></div></div>    <div class="tiledSection">     <h3 id="section447315366267">折叠开合场景下状态监听建议<i class="anchor-icon anchor-icon-link" anchorid="section447315366267" tips="复制节点链接"></i></h3>          <p><strong>折叠展开过程中应用可感知的部分回调</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.3.1.3.1.1" valign="top" width="45.16%">          <p>监听方法</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.3.1.3.1.2" valign="top" width="54.84%">          <p>功能</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="45.16%">          <p>display.on('foldStatusChange')</p></td>         <td class="cellrowborder" valign="top" width="54.84%">          <p>用于监听设备物理折叠状态变化，如折叠、展开、半折叠之间的状态变化。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="45.16%">          <p>display.on('foldDisplayModeChange')</p></td>         <td class="cellrowborder" valign="top" width="54.84%">          <p>用于监听设备屏幕显示模式变化，如主屏显示、子屏显示、全屏幕显示、双屏显示等状态之间的变化。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="45.16%">          <p>window.on('windowRectChange')</p></td>         <td class="cellrowborder" valign="top" width="54.84%">          <p>用于监听窗口位置信息变化，表示窗口坐标或者窗口宽高发生改变。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="45.16%">          <p>window.on('avoidAreaChange')</p></td>         <td class="cellrowborder" valign="top" width="54.84%">          <p>用于监听窗口避让区域的信息变化，表示窗口与状态栏、导航条等系统UI交叠区域发生改变。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="45.16%">          <p>window.on('displayIdChange')</p></td>         <td class="cellrowborder" valign="top" width="54.84%">          <p>用于监听本窗口所处屏幕变化事件。比如，当前窗口移动到其他屏幕时，可以从该接口监听到这个行为。</p></td>        </tr>             </tbody></table></div>     </div>     <p>屏幕管理的生命周期如下图</p>     <p></p>     <p><span><img height="424.08380000000005" originheight="3440" originwidth="4842" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163107.65478773228311920936254737538717:50001231000000:2800:3B5A727F0935E05F7B5C632F337A7697AE2827D4257541B2B78ED7C2F88E21A4.jpg" title="点击放大" width="598.5"></span></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>建议与窗口内容布局相关的逻辑放在对应监听接口中实现，不要在屏幕状态变化回调中主动获取窗口状态数据（rect、displayId、avoidArea、density），换用对应的信息变化监听接口。</li>        <li>建议在每种监听接口中只处理该接口返回的数据，不要默认在接口A中查询到的接口B中的数据始终是正确的，如windowRectChange回调中不要使用getWindowAvoidArea接口主动查询避让区域，换用on('avoidAreaChange')监听接口。</li>        <li>建议布局数据相关的回调中只做UI刷新逻辑，不要在其中做IO等耗时逻辑。</li>       </ol>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section579413164399">分屏窗口模式适配<i class="anchor-icon anchor-icon-link" anchorid="section579413164399" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section45094167129" class="firsth2">分屏布局适配<i class="anchor-icon anchor-icon-link" anchorid="section45094167129" tips="复制节点链接"></i></h3>          <p>目前支持两种分屏样式：“上下分屏”和“左右分屏”。</p>     <p><span><img height="275.1105" originheight="3351" originwidth="6480" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163107.45167482572021471471656178298816:50001231000000:2800:61BED36E7D89D3B53B653149A1757272F39A421A337DB906B741D645B3E4A0F7.png" title="点击放大" width="532"></span></p>     <p>分屏比例指的是分屏下两应用间尺寸的比例，调整分屏比例会调整应用窗口的大小。</p>     <p>分屏模式的分屏比例是由产品定义，开发者无法控制。常见产品的分屏比例，可参考下表。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.4.1.1" valign="top" width="33.33333333333333%">          <p>设备</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.4.1.2" valign="top" width="33.33333333333333%">          <p>默认分屏比例</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.4.1.3" valign="top" width="33.33333333333333%">          <p>分屏可调节档位</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>手机、平板、阔折叠（内屏）、三折叠F态</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>1:1</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>“上下分屏”（竖屏）: 1:1, 1:2, 2:1</p>          <p>“左右分屏”（横屏）: 1:1</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>双折叠屏（Mate X5）展开态、三折叠M态</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>1:1</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>“上下分屏”和 “左右分屏”: 1:1</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>三折叠G态</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>1:1</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>当三折叠横屏：</p>          <p>“上下分屏”：不支持</p>          <p>“左右分屏” : 1:1, 1:2, 2:1</p>          <p>当三折叠竖屏：</p>          <p>“上下分屏”：1:1, 1:2, 2:1</p>          <p>“左右分屏” : 不支持</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>手机上下分屏开发实践，开发者可参考链接：<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-screen-layout#section1395830175918">小方形屏</a>。</p>      </div></div></div>     <p>当手机设备进入分屏模式时，窗口高度缩小为原来的1/2或1/3，宽度保持不变。由于内容页面大小未作相应调整，垂直方向的内容可能被截断，且页面无法滚动查看完整内容，开发者可参考<a href="/consumer/cn/doc/best-practices/bpta-multi-device-window-mode#section2763122110135">窗口模式变化常见问题</a>。</p>    </div>    <div class="tiledSection">     <h3 id="section1097954210153">实现应用内分屏<i class="anchor-icon anchor-icon-link" anchorid="section1097954210153" tips="复制节点链接"></i></h3>          <p>分屏一般用于两个应用长时间并行使用的场景。例如：边看购物攻略边浏览商品；边看视频边玩游戏；看学习类视频的同时做笔记等。除了通过手势触发分屏之外，应用可以自主选择启动分屏。</p>     <p>应用内分屏功能允许<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-window-support#section2205081316" target="_blank">声明支持分屏</a>的应用在全屏显示模式下，通过调用startAbility方法启动UIAbility并形成分屏。该功能能够增强应用的多任务处理能力，提升用户的操作体验。</p>    </div>    <p><strong>开发步骤：</strong></p>    <ol>     <li>在应用中获取UIAbilityContext 对象，这是启动分屏所必需的上下文对象，用于后续调用startAbility接口。      <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L234-L234" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> context = <span class="hljs-keyword">this</span>.uiContext?.getHostContext() <span class="hljs-keyword">as</span> common.UIAbilityContext;</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L234-L234" target="_blank">WindowUtil.ets</a></div></div></div></div></li>     <li>调用startAbility接口启动UIAbility，形成分屏。调用startAbility接口时，设置StartOptions对象，需要指定窗口模式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilityconstant#windowmode12" target="_blank">windowMode</a>（需设置为WINDOW_MODE_SPLIT_PRIMARY或者WINDOW_MODE_SPLIT_SECONDARY），并可根据需要设置其他StartOptions属性或startAbility参数，如Want对象。      <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L231-L241" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">setSplitScreen</span>(<span class="hljs-variable">bundleName</span>: <span class="hljs-title class_">string</span>, <span class="hljs-variable">abilityName</span>: <span class="hljs-title class_">string</span>, <span class="hljs-variable">moduleName</span>: <span class="hljs-title class_">string</span>): <span class="hljs-title class_">void</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-comment">// Create StartOptions and set them to the main window mode.</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">option</span>: <span class="hljs-title class_">StartOptions</span> = { <span class="hljs-variable">windowMode</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-title class_">WindowMode</span>.<span class="hljs-title class_">WINDOW_MODE_SPLIT_PRIMARY</span> };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">want</span>: <span class="hljs-title class_">Want</span> = { <span class="hljs-variable">bundleName</span>: <span class="hljs-title class_">bundleName</span>, <span class="hljs-variable">abilityName</span>: <span class="hljs-title class_">abilityName</span>, <span class="hljs-variable">moduleName</span>: <span class="hljs-title class_">moduleName</span> };</li><li>  <span class="hljs-variable">context</span>.<span class="hljs-title function_">startAbility</span>(<span class="hljs-variable">want</span>, <span class="hljs-variable">option</span>);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L231-L241" target="_blank">WindowUtil.ets</a></div></div></div></div></li>     <li>若继续执行上述步骤，可继续启动其他UIAbility窗口，呈现左右分屏或替换一侧的分屏窗口。</li>     <li>如果想结束应用内分屏，则执行terminateSelf()方法。      <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L245-L248" data-highlighted="yes"><ol class="linenums"><li>cancelSplitScreen(): <span class="hljs-keyword">void</span> {</li><li>  <span class="hljs-keyword">let</span> context = <span class="hljs-keyword">this</span>.uiContext?.getHostContext() <span class="hljs-keyword">as</span> common.UIAbilityContext;</li><li>  context.terminateSelf();</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L245-L248" target="_blank">WindowUtil.ets</a></div></div></div></div></li>     <li>应用内分屏只支持左右分屏，折叠屏折叠态以及直板机由于只支持上下分屏，所以不进入分屏，折叠机展开态会进入分屏。开发者可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-window-support" target="_blank">应用声明支持智慧多窗</a>。</li>    </ol>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>应用分屏完整代码，开发者请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-window-support#section152819561687" target="_blank">应用内分屏</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="section151195853214">自由窗口模式适配<i class="anchor-icon anchor-icon-link" anchorid="section151195853214" tips="复制节点链接"></i></h2>          <p>自由多窗是一种多窗口显示模式，它允许用户在同一屏幕上同时运行多个应用窗口。自由窗口是默认居中启动并向右下方层叠排布，支持无极缩放的窗口。启动后，窗口的大小和位置可自由调整。同一个屏幕上可同时显示多个自由窗口，这些自由窗口按照打开或者获取焦点的顺序在Z轴排布。当自由窗口被点击或触摸时，将导致其Z轴高度提升，并获取焦点。自由窗口下默认显示标题栏，标题栏左侧显示应用图标，右侧显示三键：放大、缩小和关闭，长按或鼠标hover可显示切换至分屏菜单。</p>     <p><span><img height="515.8538000000001" originheight="2278" originwidth="3524" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163108.80838031736222811347601388438395:50001231000000:2800:C31DE74975A15588E3FBBEBCD9ED68E5A2C2E25847D63BAA8B16ABB22D9CF3C5.png" title="点击放大" width="798"></span></p>     <ul>      <li>在电脑设备上，应用启动时默认应为自由窗口模式，而非全屏模式。在适配电脑设备时，存在拖动自由窗口导致尺寸过小而引起页面布局异常的问题，开发者可参考<a href="/consumer/cn/doc/best-practices/bpta-multi-device-window-mode#section6754152523715">如何限制自由窗窗口尺寸</a>，确保页面正常显示。</li>      <li>在平板设备上，用户需要下拉控制中心，点击自由多窗按钮，切换至自由多窗模式，窗口默认以自由窗口层叠显示。进入自由多窗模式后设备强制横屏，不支持切换竖屏。为优化窗口显示内容，DPI默认调整为最小档，并记忆调整前的DPI，用户可在设置-显示和亮度-字体大小和界面缩放中按需调整。退出自由多窗时恢复到记忆的DPI，如果用户在自由多窗模式下主动调整过DPI，则保持当前值不恢复记忆。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section6754152523715" class="firsth2">如何限制自由窗窗口尺寸<i class="anchor-icon anchor-icon-link" anchorid="section6754152523715" tips="复制节点链接"></i></h3>          <p>自适应布局可以保证窗口尺寸在一定范围内变化时，页面的显示是正常的。当窗口尺寸变化较大时，就需要额外借助响应式布局能力（如断点等）调整页面结构以保证显示正常。通常每个断点都需要开发者精心适配，以获得最佳的显示效果，考虑到设计及开发成本等实际因素的限制，应用不可能适配从零到正无穷的所有窗口宽度。</p>     <p>不同设备或不同设备状态，系统默认的自由窗口尺寸的调节范围可能不同。开发者可以在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签" target="_blank">应用配置文件</a>中限制应用中各个Ability的自由窗口尺寸调节范围。配置文件中影响自由窗口尺寸调节范围的字段如下表所示。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.4.1.1" valign="top" width="33.33333333333333%">          <p>配置文件字段</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.4.1.2" valign="top" width="33.33333333333333%">          <p>数据类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.4.1.3" valign="top" width="33.33333333333333%">          <p>描述</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>minWindowWidth</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>数值</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标识该ability支持的最小的窗口宽度,，宽度单位为vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>minWindowHeight</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>数值</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标识该ability支持的最小的窗口高度,，高度单位为vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>maxWindowWidth</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>数值</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标识该ability支持的最大的窗口宽度，宽度单位为vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>maxWindowHeight</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>数值</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标识该ability支持的最大的窗口高度,，高度单位为vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>minWindowRatio</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>数值</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标识该ability支持的最小的宽高比。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>maxWindowRatio</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>数值</p></td>         <td class="cellrowborder" valign="top" width="33.33333333333333%">          <p>标识该ability支持的最大的宽高比。</p></td>        </tr>             </tbody></table></div>     </div>     <p>开发者可通过两种方式限制自由窗口的最大和最小尺寸</p>     <ul>      <li>通过配置文件分别限制自由窗口的最大和最小尺寸。       <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/orientationDevelopment/entry/src/main/module.json5#L2-L66" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"abilities"</span>: [</li><li>      {</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-string">"minWindowWidth"</span>: <span class="hljs-number">320</span>,</li><li>        <span class="hljs-string">"minWindowHeight"</span>: <span class="hljs-number">240</span>,</li><li>        <span class="hljs-string">"maxWindowWidth"</span>: <span class="hljs-number">1440</span>,</li><li>        <span class="hljs-string">"maxWindowHeight"</span>: <span class="hljs-number">900</span>,</li><li>        <span class="hljs-string">"minWindowRatio"</span>: <span class="hljs-number">0.5</span>,</li><li>        <span class="hljs-string">"maxWindowRatio"</span>: <span class="hljs-number">2</span></li><li>      }</li><li>    ],</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/orientationDevelopment/entry/src/main/module.json5#L2-L66" target="_blank">module.json5</a></div></div></div></div></li>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#setwindowlimits11" target="_blank">setWindowLimits()</a>接口设置当前应用窗口的尺寸限制。       <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L252-L267" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">setWindowLimits</span>(<span class="hljs-variable">maxWidth</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">maxHeight</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">minWidth</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">minHeight</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">void</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">windowLimits</span>: <span class="hljs-title class_">window</span>.<span class="hljs-title class_">WindowLimits</span> = {</li><li>    <span class="hljs-variable">maxWidth</span>: <span class="hljs-title class_">maxWidth</span>,</li><li>    <span class="hljs-variable">maxHeight</span>: <span class="hljs-title class_">maxHeight</span>,</li><li>    <span class="hljs-variable">minWidth</span>: <span class="hljs-title class_">minWidth</span>,</li><li>    <span class="hljs-variable">minHeight</span>: <span class="hljs-title class_">minHeight</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">promise</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">mainWindow</span>.<span class="hljs-title function_">setWindowLimits</span>(<span class="hljs-variable">windowLimits</span>);</li><li>  <span class="hljs-variable">promise</span>.<span class="hljs-title function_">then</span>((<span class="hljs-variable">data</span>: <span class="hljs-title class_">window</span>.<span class="hljs-title class_">WindowLimits</span>) =&gt; {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testLog'</span>, `<span class="hljs-variable">Succeeded</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">changing</span> <span class="hljs-variable">the</span> <span class="hljs-variable">window</span> <span class="hljs-variable">limits</span>. <span class="hljs-variable">Cause</span>: ${<span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">data</span>)}`);</li><li>  }).<span class="hljs-keyword">catch</span>((<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testLog'</span>,</li><li>      `<span class="hljs-variable">Failed</span> <span class="hljs-variable">to</span> <span class="hljs-variable">change</span> <span class="hljs-variable">the</span> <span class="hljs-variable">window</span> <span class="hljs-variable">limits</span>. <span class="hljs-variable">Cause</span> <span class="hljs-variable">code</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>  });</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L252-L267" target="_blank">WindowUtil.ets</a></div></div></div></div></li>     </ul>    </div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>如果开发者希望针对不同设备类型配置不同的最小值，可通过<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-modular-design#section1260019161216" target="_blank">多HAP工程</a>实现。</p>     </div></div></div>    <div class="tiledSection">     <h3 id="section323513274320">主动调节窗口大小<i class="anchor-icon anchor-icon-link" anchorid="section323513274320" tips="复制节点链接"></i></h3>          <p>改变窗口大小有以下两种方式：</p>     <ol>      <li>通过窗口热区拖拽进行窗口缩放。       <p>应用窗口拖拽缩放是在电脑和平板设备上使用自由多窗模式时常见的操作，指鼠标点击或手指触控应用窗口边缘，使得应用窗口跟随鼠标或手指位置移动而变化大小的现象，如下图所示。</p>       <p>        </p><div class="video-box" style="width: 920px; height: 614.509px;"><div id="wise_player_0" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163110.41503645096523999544433674729016:50001231000000:2800:43746AA9F3270A75A524D2A5B7678E65477FBF90DFF22460795FB71A5DE8982B.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_0-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163110.41503645096523999544433674729016:50001231000000:2800:43746AA9F3270A75A524D2A5B7678E65477FBF90DFF22460795FB71A5DE8982B.mp4" id="wise_player_0_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163110.41503645096523999544433674729016:50001231000000:2800:43746AA9F3270A75A524D2A5B7678E65477FBF90DFF22460795FB71A5DE8982B.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-27"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-28"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:10"><div class="vjs-load-progress" style="width: 6.17%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">6.17%</span></span><div data-start="0" data-end="0.678" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:10</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_0_component_225">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_0_component_225"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_0_component_332_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_332_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_0_component_338_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_338_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_0_component_338">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_0_component_338" for="vjs_select_364" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338" id="vjs_select_364"><option id="captions-foreground-color-wise_player_0_component_338-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-White">White</option><option id="captions-foreground-color-wise_player_0_component_338-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Black">Black</option><option id="captions-foreground-color-wise_player_0_component_338-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Red">Red</option><option id="captions-foreground-color-wise_player_0_component_338-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Green">Green</option><option id="captions-foreground-color-wise_player_0_component_338-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Blue">Blue</option><option id="captions-foreground-color-wise_player_0_component_338-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_0_component_338-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_0_component_338-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338 captions-foreground-color-wise_player_0_component_338-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_0_component_338" for="vjs_select_365" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338" id="vjs_select_365"><option id="captions-foreground-opacity-wise_player_0_component_338-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_0_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338 captions-foreground-opacity-wise_player_0_component_338-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_0_component_338">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_0_component_338" for="vjs_select_366" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338" id="vjs_select_366"><option id="captions-background-color-wise_player_0_component_338-Black" value="#000" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Black">Black</option><option id="captions-background-color-wise_player_0_component_338-White" value="#FFF" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-White">White</option><option id="captions-background-color-wise_player_0_component_338-Red" value="#F00" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Red">Red</option><option id="captions-background-color-wise_player_0_component_338-Green" value="#0F0" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Green">Green</option><option id="captions-background-color-wise_player_0_component_338-Blue" value="#00F" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Blue">Blue</option><option id="captions-background-color-wise_player_0_component_338-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Yellow">Yellow</option><option id="captions-background-color-wise_player_0_component_338-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Magenta">Magenta</option><option id="captions-background-color-wise_player_0_component_338-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-color-wise_player_0_component_338 captions-background-color-wise_player_0_component_338-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_0_component_338" for="vjs_select_367" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338" id="vjs_select_367"><option id="captions-background-opacity-wise_player_0_component_338-Opaque" value="1" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_0_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_0_component_338-Transparent" value="0" aria-labelledby="captions-background-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338 captions-background-opacity-wise_player_0_component_338-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_0_component_338">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_0_component_338" for="vjs_select_368" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338" id="vjs_select_368"><option id="captions-window-color-wise_player_0_component_338-Black" value="#000" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Black">Black</option><option id="captions-window-color-wise_player_0_component_338-White" value="#FFF" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-White">White</option><option id="captions-window-color-wise_player_0_component_338-Red" value="#F00" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Red">Red</option><option id="captions-window-color-wise_player_0_component_338-Green" value="#0F0" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Green">Green</option><option id="captions-window-color-wise_player_0_component_338-Blue" value="#00F" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Blue">Blue</option><option id="captions-window-color-wise_player_0_component_338-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Yellow">Yellow</option><option id="captions-window-color-wise_player_0_component_338-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Magenta">Magenta</option><option id="captions-window-color-wise_player_0_component_338-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-color-wise_player_0_component_338 captions-window-color-wise_player_0_component_338-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_0_component_338" for="vjs_select_369" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338" id="vjs_select_369"><option id="captions-window-opacity-wise_player_0_component_338-Transparent" value="0" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_0_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_0_component_338-Opaque" value="1" aria-labelledby="captions-window-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338 captions-window-opacity-wise_player_0_component_338-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_0_component_338">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_0_component_338" id="vjs_select_370"><option id="captions-font-size-wise_player_0_component_338-50" value="0.50" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-50">50%</option><option id="captions-font-size-wise_player_0_component_338-75" value="0.75" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-75">75%</option><option id="captions-font-size-wise_player_0_component_338-100" value="1.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-100">100%</option><option id="captions-font-size-wise_player_0_component_338-125" value="1.25" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-125">125%</option><option id="captions-font-size-wise_player_0_component_338-150" value="1.50" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-150">150%</option><option id="captions-font-size-wise_player_0_component_338-175" value="1.75" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-175">175%</option><option id="captions-font-size-wise_player_0_component_338-200" value="2.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-200">200%</option><option id="captions-font-size-wise_player_0_component_338-300" value="3.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-300">300%</option><option id="captions-font-size-wise_player_0_component_338-400" value="4.00" aria-labelledby="captions-font-size-wise_player_0_component_338 captions-font-size-wise_player_0_component_338-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_0_component_338">Text Edge Style</legend><select aria-labelledby="wise_player_0_component_338" id="vjs_select_371"><option id="wise_player_0_component_338-None" value="none" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-None">None</option><option id="wise_player_0_component_338-Raised" value="raised" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Raised">Raised</option><option id="wise_player_0_component_338-Depressed" value="depressed" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Depressed">Depressed</option><option id="wise_player_0_component_338-Uniform" value="uniform" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Uniform">Uniform</option><option id="wise_player_0_component_338-Dropshadow" value="dropshadow" aria-labelledby="wise_player_0_component_338 wise_player_0_component_338-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_0_component_338">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_0_component_338" id="vjs_select_372"><option id="captions-font-family-wise_player_0_component_338-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_0_component_338-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_0_component_338-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_0_component_338-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_0_component_338-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-Casual">Casual</option><option id="captions-font-family-wise_player_0_component_338-Script" value="script" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-Script">Script</option><option id="captions-font-family-wise_player_0_component_338-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_0_component_338 captions-font-family-wise_player_0_component_338-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="0" class="wiseplayershaw"></div></div></div><p></p>       <p>对于窗口拖拽缩放有两种限制方式：</p>       <ul>        <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#setwindowlimits15" target="_blank">setWindowLimits()</a>限制窗口大小；</li>        <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#setresizebydragenabled14" target="_blank">setResizeByDragEnabled()</a>禁止/使能通过拖拽方式缩放主窗口或启用装饰的子窗口的功能。</li>       </ul>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>主窗口和带标题栏的子窗口默认可以通过热区拖拽进行窗口大小缩放，不带标题栏的子窗口和悬浮窗不可以通过热区拖拽进行窗口大小缩放。</p>        </div></div></div></li>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#resize9" target="_blank">resize()</a>方法修改窗口大小。</li>     </ol>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L271-L281" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">resize</span>(<span class="hljs-variable">width</span>: <span class="hljs-title class_">number</span>, <span class="hljs-variable">height</span>: <span class="hljs-title class_">number</span>): <span class="hljs-title class_">void</span> {</li><li>  <span class="hljs-keyword">this</span>.<span class="hljs-variable">mainWindow</span>.<span class="hljs-title function_">resize</span>(<span class="hljs-variable">width</span>, <span class="hljs-variable">height</span>, (<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-variable">errCode</span>: <span class="hljs-title class_">number</span> = <span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>;</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">errCode</span>) {</li><li>      <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testLog'</span>,</li><li>        `<span class="hljs-variable">Failed</span> <span class="hljs-variable">to</span> <span class="hljs-variable">change</span> <span class="hljs-variable">the</span> <span class="hljs-variable">window</span> <span class="hljs-variable">size</span>. <span class="hljs-variable">Cause</span> <span class="hljs-variable">code</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testLog'</span>, <span class="hljs-string">'Succeeded in changing the window size.'</span>);</li><li>  });</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/ResponsiveLayout/blob/master/entry/src/main/ets/utils/WindowUtil.ets#L271-L281" target="_blank">WindowUtil.ets</a></div></div></div></div>     <p><strong>根据组件内容大小修改浮动窗口</strong></p>     <p>可以通过组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-area-change-event#onareachange" target="_blank">onAreaChange()</a>方法监听组件区域变化并根据返回的内容大小修改浮动窗口大小。</p>    </div>    <div class="tiledSection">     <h3 id="section1758193815438">如何设置窗口拖拽热区<i class="anchor-icon anchor-icon-link" anchorid="section1758193815438" tips="复制节点链接"></i></h3>         </div>    <p>应用窗口拖动是在电脑和平板设备上使用自由多窗时常见的操作，指鼠标点击或手指触控应用窗口在屏幕区域内拖动，应用窗口跟随鼠标或手指位置移动的现象，如下图所示。对于使用默认标题栏的窗口，系统提供了高性能的应用窗口拖动能力。而对于没有标题栏或需要自定义标题栏的窗口，需要开发者调用系统提供的拖动能力来实现。本章节将重点探讨这一类窗口拖动场景的高性能开发方法。</p>    <p><span><img height="464.83500000000004" originheight="569" originwidth="640" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163108.13628129076472590053297708942315:50001231000000:2800:15F1A9E837D42A9EC2E893133CD4438C996CEAFEEE35FEEA73D429A05316A67D.gif" title="点击放大" width="523.6875"></span></p>    <p><strong>实现方案</strong></p>    <p>由于使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#movewindowto9" target="_blank">moveWindowTo()</a>来进行窗口移动，会导致不跟手的问题，且在扩展屏场景下不支持跨屏移动。因此，对于采用方舟UI框架（ArkUI）开发应用程序的开发者，推荐使用startMoving()接口实现高性能应用窗口拖动。开发者可以在任意组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch#ontouch" target="_blank">onTouch()</a>方法中注册自定义回调函数，当收到TouchType.Down类型事件时，调用startMoving()接口实现窗口拖动。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="layoutFixed idpTab">      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.35.1.4.1.1" valign="top" width="27.48274827482748%">         <p>接口</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.35.1.4.1.2" valign="top" width="20.72207220722072%">         <p>说明</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.35.1.4.1.3" valign="top" width="51.795179517951794%">         <p>使用场景</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" valign="top" width="27.48274827482748%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#movewindowto9" target="_blank">moveWindowTo()</a></p></td>        <td class="cellrowborder" valign="top" width="20.72207220722072%">         <p>移动窗口位置。</p></td>        <td class="cellrowborder" valign="top" width="51.795179517951794%">         <p>在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态下，窗口相对于屏幕移动；在非自由窗口状态下，窗口相对于父窗口移动，也可用于设置子窗启动位置。</p></td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="27.48274827482748%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#startmoving14" target="_blank">startMoving()</a></p></td>        <td class="cellrowborder" valign="top" width="20.72207220722072%">         <p>开始移动窗口。</p></td>        <td class="cellrowborder" valign="top" width="51.795179517951794%">         <p>窗口将跟随鼠标移动，抬手终止移动，且窗口类型无限制。</p></td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="27.48274827482748%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#startmoving15" target="_blank">startMoving(offsetX: number, offsetY: number)</a></p></td>        <td class="cellrowborder" valign="top" width="20.72207220722072%">         <p>指定鼠标在窗口内的位置并移动窗口。</p></td>        <td class="cellrowborder" valign="top" width="51.795179517951794%">         <p>若鼠标快速移动，窗口移动时鼠标可能会在窗口外，这时，可指定窗口移动时鼠标在窗口内相对窗口左上角的偏移量，先移动窗口到预期鼠标位置后，再开始移动窗口。</p></td>       </tr>       <tr>        <td class="cellrowborder" valign="top" width="27.48274827482748%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#stopmoving15" target="_blank">stopMoving()</a></p></td>        <td class="cellrowborder" valign="top" width="20.72207220722072%">         <p>停止窗口移动。</p></td>        <td class="cellrowborder" valign="top" width="51.795179517951794%">         <p>用于在窗口拖拽移动过程中，通过此接口来停止窗口移动，可绑定快捷键或删除拖拽事件时使用。</p></td>       </tr>           </tbody></table></div>    </div>    <p></p>    <p><strong>示例代码</strong></p>    <p>对于采用方舟UI框架（ArkUI）开发应用程序的开发者，如下代码展示窗口跟随标题栏组件拖动的实现。当该标题栏组件收到点击事件，开发者可通过getMainWindowSync()方法获取该标题栏组件对应的窗口对象，进而对该窗口对象调用startMoving()接口进入窗口拖动逻辑。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/CustomTitleBarWindowDrag/entry/src/main/ets/pages/Index.ets#L17-L52" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COLUMN_WIDTH</span> = <span class="hljs-number">108</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COLUMN_TOP</span> = <span class="hljs-number">50</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COLUMN_LEFT</span> = <span class="hljs-number">100</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// get the window manager from AppStorage</span></li><li>  <span class="hljs-keyword">private</span> windowStage = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'window'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Blank</span>(<span class="hljs-string">'60'</span>)</li><li>        .<span class="hljs-title function_">color</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>        .<span class="hljs-title function_">onTouch</span>(<span class="hljs-function">(<span class="hljs-params">event: TouchEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> === <span class="hljs-title class_">TouchType</span>.<span class="hljs-property">Down</span>) {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">wnd</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowStage</span>.<span class="hljs-title function_">getMainWindowSync</span>();</li><li>              <span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">"SystemCapability.Window.SessionManager"</span>)) {</li><li>                wnd.<span class="hljs-title function_">startMoving</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'wnd Succeeded in starting moving window'</span>);</li><li>                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start moving. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>                });</li><li>              }</li><li>            } <span class="hljs-keyword">catch</span> (exception) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start moving. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>            }</li><li>          }</li><li>        })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-variable constant_">COLUMN_WIDTH</span>).<span class="hljs-title function_">position</span>({ <span class="hljs-attr">top</span>: <span class="hljs-variable constant_">COLUMN_TOP</span>, <span class="hljs-attr">left</span>: <span class="hljs-variable constant_">COLUMN_LEFT</span> }).<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>);</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/CustomTitleBarWindowDrag/entry/src/main/ets/pages/Index.ets#L17-L52" target="_blank">Index.ets</a></div></div></div></div>    <div class="tiledSection">     <h3 id="section6205417153714">设置应用启动时的窗口模式、大小与位置<i class="anchor-icon anchor-icon-link" anchorid="section6205417153714" tips="复制节点链接"></i></h3>          <p>电脑上启动应用窗口有两种方式：</p>     <ol>      <li>通过双击桌面应用图片或点击应用中心图标启动应用。</li>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability-1" target="_blank">UIAbilityContext.startAbility()</a>接口启动，其中startOption参数设置启动时的窗口模式、所处屏幕id、窗口位置、窗口大小等信息。</li>     </ol>     <p>应用启动自由窗口时设置主窗口的位置和大小有多种方式，按照生效优先级由高到低排序为：全屏显示 &gt; 使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-startoptions" target="_blank">startOptions</a>参数指定启动窗口的大小和位置 &gt; 使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#setwindowrectautosave14" target="_blank">setWindowRectAutoSave()</a>方法开启窗口尺寸记忆 &gt; 使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-config-m#metadata标签" target="_blank">metadata标签</a>配置最大化 &gt; 使用metadata标签配置大小和位置。</p>     <ul>      <li>全屏显示       <ol>        <li>在<a href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/module-configuration-file.md" target="_blank">module.json5配置文件</a>中的<a href="https://gitee.com/openharmony/docs/blob/master/zh-cn/application-dev/quick-start/module-configuration-file.md#abilities标签" target="_blank">abilities标签</a>下，取消supportWindowMode字段支持的floating，仅配置[fullscreen]或[fullscreen, split]。         <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/module.json5#L14-L89" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">"abilities"</span>: [</li><li>  {</li><li>    <span class="hljs-string">"name"</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>    <span class="hljs-string">"srcEntry"</span>: <span class="hljs-string">"./ets/entryability/EntryAbility.ets"</span>,</li><li>    <span class="hljs-string">"supportWindowMode"</span>: [</li><li>      <span class="hljs-string">"fullscreen"</span></li><li>    ],</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"description"</span>: <span class="hljs-string">"$string:EntryAbility_desc"</span>,</li><li>    <span class="hljs-string">"icon"</span>: <span class="hljs-string">"$media:layered_image"</span>,</li><li>    <span class="hljs-string">"label"</span>: <span class="hljs-string">"$string:EntryAbility_label"</span>,</li><li>    <span class="hljs-string">"startWindowIcon"</span>: <span class="hljs-string">"$media:startIcon"</span>,</li><li>    <span class="hljs-string">"startWindowBackground"</span>: <span class="hljs-string">"$color:start_window_background"</span>,</li><li>    <span class="hljs-string">"exported"</span>: <span class="hljs-keyword">true</span>,</li><li>    <span class="hljs-string">"skills"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"entities"</span>: [</li><li>          <span class="hljs-string">"entity.system.home"</span></li><li>        ],</li><li>        <span class="hljs-string">"actions"</span>: [</li><li>          <span class="hljs-string">"action.system.home"</span></li><li>        ]</li><li>      }</li><li>    ]</li><li>  },</li><li>  {</li><li>    <span class="hljs-string">"name"</span>: <span class="hljs-string">"SubEntryAbility"</span>,</li><li>    <span class="hljs-string">"srcEntry"</span>: <span class="hljs-string">"./ets/entryability/SubEntryAbility.ets"</span>,</li><li>    <span class="hljs-string">"supportWindowMode"</span>: [</li><li>      <span class="hljs-string">"fullscreen"</span>,</li><li>      <span class="hljs-string">"floating"</span></li><li>    ],</li><li>    <span class="hljs-string">"launchType"</span>: <span class="hljs-string">"specified"</span>,</li><li>    <span class="hljs-string">"description"</span>: <span class="hljs-string">"$string:EntryAbility_desc"</span>,</li><li>    <span class="hljs-string">"icon"</span>: <span class="hljs-string">"$media:layered_image"</span>,</li><li>    <span class="hljs-string">"label"</span>: <span class="hljs-string">"$string:EntryAbility_label"</span>,</li><li>    <span class="hljs-string">"startWindowIcon"</span>: <span class="hljs-string">"$media:startIcon"</span>,</li><li>    <span class="hljs-string">"startWindowBackground"</span>: <span class="hljs-string">"$color:start_window_background"</span>,</li><li>    <span class="hljs-string">"exported"</span>: <span class="hljs-keyword">true</span>,</li><li>    <span class="hljs-string">"skills"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"entities"</span>: [</li><li>          <span class="hljs-string">"entity.system.home"</span></li><li>        ],</li><li>        <span class="hljs-string">"actions"</span>: [</li><li>          <span class="hljs-string">"action.system.home"</span></li><li>        ]</li><li>      }</li><li>    ]</li><li>  }</li><li>],</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/module.json5#L14-L89" target="_blank">module.json5</a></div></div></div></div>         </li>        <li>将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#startability-1" target="_blank">startAbility()</a>接口的入参StartOptions选项中的windowMode参数设置为WINDOW_MODE_FULLSCREEN。         <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/ets/pages/Index.ets#L93-L115" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-variable">bundleName</span>: <span class="hljs-string">'com.example.pcproject'</span>,</li><li>  <span class="hljs-variable">abilityName</span>: <span class="hljs-string">'SubEntryAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  (<span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">common</span>.<span class="hljs-variable">UIAbilityContext</span>).<span class="hljs-title function_">startAbility</span>(<span class="hljs-variable">want</span>, {</li><li>    <span class="hljs-variable">windowMode</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-title class_">WindowMode</span>.<span class="hljs-title class_">WINDOW_MODE_FULLSCREEN</span>,</li><li>    <span class="hljs-variable">supportWindowModes</span>: [<span class="hljs-variable">bundleManager</span>.<span class="hljs-variable">SupportWindowMode</span>.<span class="hljs-variable">FULL_SCREEN</span>]</li><li>  })</li><li>    .<span class="hljs-title function_">then</span>(() =&gt; {</li><li>      <span class="hljs-comment">// Carry out normal business operations</span></li><li>      <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable">DOMAIN</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'startAbility succeed'</span>);</li><li>    })</li><li>    .<span class="hljs-keyword">catch</span>((<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>      <span class="hljs-comment">// Handle business logic errors</span></li><li>      <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable">DOMAIN</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>,</li><li>        `<span class="hljs-variable">startAbility</span> <span class="hljs-variable">failed</span>. <span class="hljs-variable">Cause</span> <span class="hljs-variable">code</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-comment">// Handle the err of incorrect input parameters</span></li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable">DOMAIN</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>,</li><li>    `<span class="hljs-variable">startAbility</span> <span class="hljs-variable">failed</span>. <span class="hljs-variable">Cause</span> <span class="hljs-variable">code</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/ets/pages/Index.ets#L93-L115" target="_blank">Index.ets</a></div></div></div></div></li>        <li>将startAbility()接口的入参StartOptions选项中的supportWindowModes参数设置为[bundleManager.SupportWindowMode.FULL_SCREEN]或[bundleManager.SupportWindowMode.FULL_SCREEN, bundleManager.SupportWindowMode.SPLIT]。         <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/ets/pages/Index.ets#L128-L149" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.pcproject'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'SubEntryAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>).<span class="hljs-title function_">startAbility</span>(want, {</li><li>    <span class="hljs-attr">supportWindowModes</span>: [bundleManager.<span class="hljs-property">SupportWindowMode</span>.<span class="hljs-property">FULL_SCREEN</span>]</li><li>  })</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-comment">// Carry out normal business operations</span></li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'startAbility succeed'</span>);</li><li>    })</li><li>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-comment">// Handle business logic errors</span></li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>,</li><li>        <span class="hljs-string">`startAbility failed. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-comment">// Handle the err of incorrect input parameters</span></li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>,</li><li>    <span class="hljs-string">`startAbility failed. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/ets/pages/Index.ets#L128-L149" target="_blank">Index.ets</a></div></div></div></div>         <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">           <p>在UIAbility启动模式为specified模式时，设置StartOptions选项中的supportWindowModes参数不生效。</p>          </div></div></div></li>       </ol></li>      <li>StartOptions指定大小位置       <p>可通过StartOptions选项的windowLeft、windowTop、windowWidth、windowHeight设置窗口的位置和大小。</p>       <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/ets/pages/Index.ets#L162-L188" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-variable">bundleName</span>: <span class="hljs-string">'com.example.pcproject'</span>,</li><li>  <span class="hljs-variable">abilityName</span>: <span class="hljs-string">'SubEntryAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  (<span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">common</span>.<span class="hljs-variable">UIAbilityContext</span>).<span class="hljs-title function_">startAbility</span>(<span class="hljs-variable">want</span>, {</li><li>    <span class="hljs-variable">windowLeft</span>: <span class="hljs-number">700</span>,</li><li>    <span class="hljs-variable">windowTop</span>: <span class="hljs-number">300</span>,</li><li>    <span class="hljs-variable">windowWidth</span>: <span class="hljs-number">1600</span>,</li><li>    <span class="hljs-variable">windowHeight</span>: <span class="hljs-number">1000</span>,</li><li>    <span class="hljs-variable">minWindowWidth</span>: <span class="hljs-number">800</span>,</li><li>    <span class="hljs-variable">minWindowHeight</span>: <span class="hljs-number">600</span></li><li>  })</li><li>    .<span class="hljs-title function_">then</span>(() =&gt; {</li><li>      <span class="hljs-comment">// Carry out normal business operations</span></li><li>      <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable">DOMAIN</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'startAbility succeed'</span>);</li><li>    })</li><li>    .<span class="hljs-keyword">catch</span>((<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>      <span class="hljs-comment">// Handle business logic errors</span></li><li>      <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable">DOMAIN</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>,</li><li>        `<span class="hljs-variable">startAbility</span> <span class="hljs-variable">failed</span>. <span class="hljs-variable">Cause</span> <span class="hljs-variable">code</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-comment">// Handle the err of incorrect input parameters</span></li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable">DOMAIN</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>,</li><li>    `<span class="hljs-variable">startAbility</span> <span class="hljs-variable">failed</span>. <span class="hljs-variable">Cause</span> <span class="hljs-variable">code</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>}, <span class="hljs-variable">message</span>: ${<span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>}`);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/PCProject/entry/src/main/ets/pages/Index.ets#L162-L188" target="_blank">Index.ets</a></div></div></div></div>       </li>      <li>窗口尺寸记忆(目前只支持电脑)       <p>在同一个UIAbility下，应用可以通过setWindowRectAutoSave()接口开启窗口记忆，记忆最后关闭的主窗口尺寸，此主窗口再次启动时，以记忆的尺寸按照规则进行打开。</p>       <p>在同一个UIAbility下，也可以通过setWindowRectAutoSave(enabled: boolean, isSaveBySpecifiedFlag: boolean) 接口，针对每个主窗口尺寸单独进行记忆，只有在UIAbility启动模式为specified模式，且isSaveBySpecifiedFlag设置为true时，才能针对每个主窗口尺寸进行单独记忆。</p>       <p>窗口记忆规则及示例代码可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#setwindowrectautosave14" target="_blank">setWindowRectAutoSave()</a> 和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#setwindowrectautosave17" target="_blank">setWindowRectAutoSave(enabled: boolean, isSaveBySpecifiedFlag: boolean)</a> 。</p></li>      <li>metadata标签配置大小和位置       <p>配置主窗启动时是否以最大化状态显示，可以在module.json5的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-config-m#metadata标签" target="_blank">metadata标签</a>属性字段中添加name为ohos.ability.window.isMaximize，value取值为true的配置项。其中，value的取值为true或false，取值为true表示最大化启动，取值为false表示不以最大化状态启动，未配置时默认为false。该方案可以避免在onWindowStageCreate里调用maximize出现闪烁的现象。</p>       <p>也可以在metadata标签中配置窗口启动时的大小和位置，具体属性字段和使用方式可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-config-m" target="_blank">窗口元数据配置</a>。</p>       <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">         <p>主窗最大化显示需满足supportWindowMode字段配置中必须包含fullscreen和floating选项。</p>         <p>如果窗口设置的大小和位置超出屏幕之外，会自动调整至当前屏幕内。</p>         <p>当left和top都不配置或配置不生效时，按照系统层叠规则显示。</p>        </div></div></div></li>      <li>窗口层叠规格        <div class="tablenoborder">        <div class="tbBox"><table class="layoutFixed idpTab">         <thead>          <tr>           <th align="left" class="cellrowborder" id="mcps1.3.40.5.5.1.1.3.1.1" valign="top" width="11.82%">            <p><strong>规格名称</strong></p></th>           <th align="left" class="cellrowborder" id="mcps1.3.40.5.5.1.1.3.1.2" valign="top" width="88.18%">            <p><strong>规格描述</strong></p></th>          </tr>         </thead>                   <tbody><tr>           <td class="cellrowborder" valign="top" width="11.82%">            <p>窗口默认大小</p></td>           <td class="cellrowborder" valign="top" width="88.18%">            <p>应用首次启动窗口默认大小：宽高各占屏幕尺寸的67%，在工作区（去除Dock和状态栏的屏幕区域）居中显示。</p></td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="11.82%">            <p>系统尺寸限制</p></td>           <td class="cellrowborder" valign="top" width="88.18%">            <p>自由窗口的系统默认最小宽度为320vp，最小高度为72vp，最大宽度和高度都为3840vp；应用未设置windowLimits时，通过window.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowlimits11" target="_blank">getWindowLimits()</a>接口会默认返回前面系统的尺寸限制。</p></td>          </tr>          <tr>           <td class="cellrowborder" valign="top" width="11.82%">            <p>默认窗口模式</p></td>           <td class="cellrowborder" valign="top" width="88.18%">            <p>支持floating模式的窗口，默认以自由窗口方式打开。</p></td>          </tr>                 </tbody></table></div>       </div>       <div class="p">        多自由窗口层叠规则：        <ol>         <li>找到除了置顶窗口外的最上层窗口(包括后台窗口)，作为基准，进行层叠显示(分别向右和向下偏移)；</li>         <li>如果偏移后的窗口位置有部分超出了工作区，则将超出方向的坐标位置修改为工作区的起点位置；</li>         <li>支持多实例的应用，打开第二个窗口时，参考上一个多实例窗口的位置进行层叠。</li>        </ol>       </div></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section8433735123611">悬浮窗口模式适配<i class="anchor-icon anchor-icon-link" anchorid="section8433735123611" tips="复制节点链接"></i></h2>          <p>针对应用进入悬浮窗出现的页面内容截断、挤压、堆叠等问题，开发者可以参考多设备界面开发中的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-responsive">界面布局响应式变化</a>和<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive">界面元素自适应变化</a>内容，使应用可以自适应窗口的大小变化。</p>     <p>常见悬浮布局适配问题分为以下三类</p>     <ul>      <li><a href="/consumer/cn/doc/best-practices/bpta-multi-device-window-mode#section1611382919595">布局适配问题</a>：这类问题一般是由于进入分屏/悬浮窗时，由于窗口高度缩小，导致的布局混乱、被截断等问题。</li>      <li><a href="/consumer/cn/doc/best-practices/bpta-multi-device-window-mode#section561523134011">沉浸模式下顶部窗口控制条避让问题</a>：在沉浸模式下，应用分屏后视图和悬浮窗顶部重合的区域无法响应操作的问题。</li>      <li><a href="/consumer/cn/doc/best-practices/bpta-multi-device-window-mode#section16977171113215">横屏悬浮窗适配问题</a>：对于横向游戏和视频应用横向的悬浮窗适配问题。</li>     </ul>    </div>    <div class="tiledSection">     <h2 id="section2763122110135">窗口模式变化常见问题<i class="anchor-icon anchor-icon-link" anchorid="section2763122110135" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section1611382919595" class="firsth2">界面被截断，无法上下滑动，应用分屏后内容显示不全，无法通过上下滑动展示未显示的内容<i class="anchor-icon anchor-icon-link" anchorid="section1611382919595" tips="复制节点链接"></i></h3>         </div>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163108.10650598190548615458284773854129:50001231000000:2800:FE39B18E76578A04CF94446272224A0CFB47B4FD2FB11AC10E619BF3342911C8.gif" title="点击放大" width="266"></span></p>    <p><strong>原因</strong></p>    <p>应用只适配了全屏大小，当应用分屏/悬浮窗后，窗口会变小，导致页面显示不全，超出窗口的区域无法显示。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question1Incorrect.ets#L22-L58" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question1Incorrect {</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-built_in">Column</span>({ space: <span class="hljs-number">12</span> }) {</li><li>        Text('Text1')</li><li>          <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">50</span>)</li><li>          <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>          <span class="hljs-selector-class">.textAlign</span>(TextAlign.Center)</li><li>          <span class="hljs-selector-class">.height</span>(<span class="hljs-number">350</span>)</li><li>          <span class="hljs-selector-class">.backgroundColor</span>(Color.Brown)</li><li>
</li><li>        Text('Text2')</li><li>          <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">50</span>)</li><li>          <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>          <span class="hljs-selector-class">.textAlign</span>(TextAlign.Center)</li><li>          <span class="hljs-selector-class">.height</span>(<span class="hljs-number">350</span>)</li><li>          <span class="hljs-selector-class">.backgroundColor</span>(Color.Orange)</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question1Incorrect.ets#L22-L58" target="_blank">Question1Incorrect.ets</a></div></div></div></div>    <p><strong>解决措施</strong></p>    <p>使用一多的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout#延伸能力">延伸能力</a>，增加Scroll组件，让列表或者文字区域可以按照指定方向滑动。示例代码如下：</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question1Correct.ets#L21-L57" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question1Correct {</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      Scroll() {</li><li>        <span class="hljs-built_in">Column</span>({ space: <span class="hljs-number">12</span> }) {</li><li>          Text('Text1')</li><li>            <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">50</span>)</li><li>            <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>            <span class="hljs-selector-class">.textAlign</span>(TextAlign.Center)</li><li>            <span class="hljs-selector-class">.height</span>(<span class="hljs-number">350</span>)</li><li>            <span class="hljs-selector-class">.backgroundColor</span>(Color.Brown)</li><li>
</li><li>          Text('Text2')</li><li>            <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">50</span>)</li><li>            <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>            <span class="hljs-selector-class">.textAlign</span>(TextAlign.Center)</li><li>            <span class="hljs-selector-class">.height</span>(<span class="hljs-number">350</span>)</li><li>            <span class="hljs-selector-class">.backgroundColor</span>(Color.Orange)</li><li>        }</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question1Correct.ets#L21-L57" target="_blank">Question1Correct.ets</a></div></div></div></div>    <p>优化后效果如下图所示。</p>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163108.34686517440806752267332722650940:50001231000000:2800:6BFBB0AA99D6B97F26118434980F1F590F9B7C23149D9C0B15F59F02F3D64558.gif" title="点击放大" width="266"></span></p>    <div class="tiledSection">     <h3 id="section11641134335915">XComponent视频画面在分屏页面显示不全，视频播放界面分屏后，视频被截断显示不全<i class="anchor-icon anchor-icon-link" anchorid="section11641134335915" tips="复制节点链接"></i></h3>         </div>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163108.15365378089439907062336403802982:50001231000000:2800:6E721CDED02960A692039667CB01A00A830456C73A793142B63FB898318007F5.gif" title="点击放大" width="266"></span></p>    <p><strong>原因</strong></p>    <p>在进入分屏页面，窗口的height变成了屏幕的1/2，应用没有对这种情况进适配，导致XComponent宽度没变为之前的1/2导致视频形变。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question2Incorrect.ets#L24-L62" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question2Incorrect {</li><li>  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">aspect</span>: number = <span class="hljs-number">9</span> / <span class="hljs-number">16</span>; <span class="hljs-comment">// default video height/width ratio value</span></li><li>  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">xComponentWidth</span>: number = this.getUIContext().px2vp(display.getDefaultDisplaySync().<span class="hljs-attribute">width</span>);</li><li>  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">xComponentHeight</span>: number = this.getUIContext().px2vp(display.getDefaultDisplaySync().<span class="hljs-attribute">width</span> * this.aspect);</li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-built_in">Stack</span>() {</li><li>        <span class="hljs-built_in">XComponent</span>({ id: 'video_player_id', type: XComponentType.SURFACE, controller: this.xComponentController })</li><li>          <span class="hljs-comment">// ...</span></li><li>          <span class="hljs-selector-class">.width</span>(this.xComponentWidth)</li><li>          <span class="hljs-selector-class">.height</span>(this.xComponentHeight)</li><li>      }</li><li>      <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>      <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')</li><li>      <span class="hljs-selector-class">.backgroundColor</span>(Color.Black)</li><li>    }</li><li>    <span class="hljs-selector-class">.hideTitleBar</span>(true)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question2Incorrect.ets#L24-L62" target="_blank">Question2Incorrect.ets</a></div></div></div></div>    <p><strong>解决措施</strong></p>    <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-layout-constraints#aspectratio" target="_blank">aspectRatio</a>属性指定XComponent组件的宽高比。设置aspectRatio属性后，组件宽高会受父组件内容区大小限制。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question2Correct.ets#L24-L59" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question2Correct {</li><li>  <span class="hljs-keyword">@State</span> <span class="hljs-attribute">aspect</span>: number = <span class="hljs-number">9</span> / <span class="hljs-number">16</span>; <span class="hljs-comment">// default video width/height ratio value</span></li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-built_in">Stack</span>() {</li><li>        <span class="hljs-built_in">XComponent</span>({ id: 'video_player_id', type: XComponentType.SURFACE, controller: this.xComponentController })</li><li>          <span class="hljs-comment">// ...</span></li><li>          <span class="hljs-selector-class">.aspectRatio</span>(this.aspect)</li><li>      }</li><li>      <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>      <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')</li><li>      <span class="hljs-selector-class">.backgroundColor</span>(Color.Black)</li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question2Correct.ets#L24-L59" target="_blank">Question2Correct.ets</a></div></div></div></div>    <p>优化后效果如下图所示。</p>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.98530984665297883976127402986704:50001231000000:2800:EE4BAF041D15EC601189D61D457C006A33D7362FA04CF4C02A399E8C370FF872.gif" title="点击放大" width="266"></span></p>    <div class="tiledSection">     <h3 id="section19321649708">Video组件在分屏状态下截断，Video组件在分屏状态下，视频播放界面被截断显示不全<i class="anchor-icon anchor-icon-link" anchorid="section19321649708" tips="复制节点链接"></i></h3>         </div>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.34708844859010356093345274373903:50001231000000:2800:180AC30BF5C5B8F090F4F8DE51C9ADBEB1304462BBD5A01D4FC2AE192DC0958D.gif" title="点击放大" width="266"></span></p>    <p><strong>原因</strong></p>    <p>给Video组件宽高设置的均为100%，Video组件默认保持宽高比进行缩小或者放大，使得视频铺满屏幕。当应用分屏后，由于窗口宽度不变，高度变为原来的1/2，Video组件的高度会超出窗口高度，导致视频显示不全。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question3Incorrect.ets#L21-L37" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question3Incorrect {</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-built_in">Column</span>() {</li><li>        <span class="hljs-selector-tag">Video</span>({ src: $rawfile('testVideo2.mp4') })</li><li>          <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')</li><li>          <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>          <span class="hljs-selector-class">.autoPlay</span>(true)</li><li>          <span class="hljs-selector-class">.controls</span>(false)</li><li>      }</li><li>      <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')</li><li>      <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>    }</li><li>    <span class="hljs-selector-class">.hideTitleBar</span>(true)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question3Incorrect.ets#L21-L37" target="_blank">Question3Incorrect.ets</a></div></div></div></div>    <p><strong>解决措施</strong></p>    <p>给Video组件设置.objectFit(ImageFit.Contain)属性，使视频保持宽高进行缩小或者放大，使得视频完全显示在Video组件边界内。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question3Correct.ets#L22-L41" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question3Correct {</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-built_in">Column</span>() {</li><li>        <span class="hljs-selector-tag">Video</span>({ src: $rawfile('testVideo2.mp4') })</li><li>          <span class="hljs-comment">// ...</span></li><li>          <span class="hljs-selector-class">.objectFit</span>(ImageFit.Contain)</li><li>      }</li><li>      <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')</li><li>      <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>    }</li><li>    <span class="hljs-selector-class">.hideTitleBar</span>(true)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question3Correct.ets#L22-L41" target="_blank">Question3Correct.ets</a></div></div></div></div>    <p>优化后效果如下图所示。</p>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.44382434404925123650173553302233:50001231000000:2800:DB43DD7E031A27F6D644F12E9CBDD717074F52562755464D5EF1BCFDA6F3638D.gif" title="点击放大" width="266"></span></p>    <div class="tiledSection">     <h3 id="section2139142125910">子组件超出父组件的范围，子组件显示超出了父组件范围，无法通过上下滑动显示完全<i class="anchor-icon anchor-icon-link" anchorid="section2139142125910" tips="复制节点链接"></i></h3>         </div>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.96715498406344456083502556097224:50001231000000:2800:27645C46D362C461754EEED5B4819FA849FABA5D5FB4845DBA25B0C7DA26493B.gif" title="点击放大" width="266"></span></p>    <p><strong>原因</strong></p>    <p>子组件设置为了固定值，当应用分屏的时候，屏幕高度变为原来的1/2，父组件高度会随之变小。如果此时子组件高度大于父组件，就会导致子组件无法完全显示。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question4Incorrect.ets#L23-L96" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question4Incorrect {</li><li>
</li><li>  <span class="hljs-keyword">@Builder</span></li><li>  customDialogComp() {</li><li>    <span class="hljs-built_in">Column</span>() {</li><li>      Text('Top')</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>      Scroll() {</li><li>        Text('Middle')</li><li>          <span class="hljs-comment">// ...</span></li><li>      }</li><li>      <span class="hljs-selector-class">.layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>
</li><li>      Text('Bottom')</li><li>        <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-selector-class">.height</span>(<span class="hljs-number">500</span>)</li><li>    <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.SpaceBetween)</li><li>  }</li><li>
</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question4Incorrect.ets#L23-L96" target="_blank">Question4Incorrect.ets</a></div></div></div></div>    <p><strong>解决措施</strong></p>    <p>子组件使用constraintSize约束子组件跟随父容器的大小。建议用子组件占用父组件的高度百分比，而不是绝对值。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question4Correct.ets#L26-L67" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Builder</span></li><li>customDialogComp() {</li><li>  <span class="hljs-built_in">Column</span>() {</li><li>    Text('Top')</li><li>      <span class="hljs-comment">// ...</span></li><li>
</li><li>    Scroll() {</li><li>      Text('Middle')</li><li>        <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-selector-class">.layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>
</li><li>    Text('Bottom')</li><li>      <span class="hljs-comment">// ...</span></li><li>  }</li><li>  <span class="hljs-selector-class">.height</span>(<span class="hljs-number">500</span>)</li><li>  <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.SpaceBetween)</li><li>  <span class="hljs-selector-class">.constraintSize</span>({</li><li>    maxHeight: '<span class="hljs-number">90%</span>'</li><li>  })</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question4Correct.ets#L26-L67" target="_blank">Question4Correct.ets</a></div></div></div></div>    <p>优化后效果如下图所示。</p>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.69025998803439512858385844745836:50001231000000:2800:3BFC6ECFE3CA5EA2A301C275D3DCFC826B02B9E0929C32A15D6B7F551D4BF4ED.gif" title="点击放大" width="266"></span></p>    <div class="tiledSection">     <h3 id="section12503111320116">Image组件在分屏状态下显示异常，应用进入分屏后，随着窗口变小，Image组件显示不全，页面布局显示异常<i class="anchor-icon anchor-icon-link" anchorid="section12503111320116" tips="复制节点链接"></i></h3>         </div>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.76661190400152599442473913255700:50001231000000:2800:DBED01F6B7E8D73591992E3D746E7E96D5B3CD894BF1278AEB1EDCDAE5A34E0B.gif" title="点击放大" width="266"></span></p>    <p><strong>原因</strong></p>    <p>在进入分屏页面，窗口的height变成了屏幕的1/2，导致image组件的height变小，image图片形变。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question5Incorrect.ets#L22-L102" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question5Incorrect {</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-attribute">Flex</span>({ direction: FlexDirection.Column, alignItems: ItemAlign.Center }) {</li><li>        Text("Login Page")</li><li>          <span class="hljs-comment">// ...</span></li><li>        Text("Login in to access more services")</li><li>          <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-built_in">Image</span>($r('app.media.login_pic'))</li><li>          <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-built_in">Column</span>() {</li><li>          <span class="hljs-built_in">TextInput</span>({ placeholder:  "Account" })</li><li>            <span class="hljs-comment">// ...</span></li><li>
</li><li>          <span class="hljs-built_in">TextInput</span>({ placeholder:"Password" })</li><li>            <span class="hljs-comment">// ...</span></li><li>        }</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-selector-tag">Button</span>($r('app.string.login'))</li><li>          <span class="hljs-comment">// ...</span></li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question5Incorrect.ets#L22-L102" target="_blank">Question5Incorrect.ets</a></div></div></div></div>    <p><strong>解决措施</strong></p>    <p>推荐开发者通过一多的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout#隐藏能力">隐藏能力</a>来实现，按照其预设的显示优先级，随容器组件尺寸变化显示或隐藏，通过设置布局优先级（displayPriority属性）来控制显隐。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question5Correct.ets#L22-L102" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question5Correct {</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-attribute">Flex</span>({ direction: FlexDirection.Column, alignItems: ItemAlign.Center }) {</li><li>        Text("Login Page")</li><li>          <span class="hljs-comment">// ...</span></li><li>          <span class="hljs-selector-class">.displayPriority</span>(<span class="hljs-number">4</span>)</li><li>
</li><li>        Text("Login in to access more services")</li><li>          <span class="hljs-comment">// ...</span></li><li>          <span class="hljs-selector-class">.displayPriority</span>(<span class="hljs-number">3</span>)</li><li>
</li><li>        <span class="hljs-built_in">Image</span>($r('app.media.login_pic'))</li><li>          <span class="hljs-comment">// ...</span></li><li>          <span class="hljs-selector-class">.displayPriority</span>(<span class="hljs-number">2</span>)</li><li>
</li><li>        <span class="hljs-built_in">Column</span>() {</li><li>          <span class="hljs-built_in">TextInput</span>({ placeholder: "Account" })</li><li>            <span class="hljs-comment">// ...</span></li><li>
</li><li>          <span class="hljs-built_in">TextInput</span>({ placeholder: "Password" })</li><li>            <span class="hljs-comment">// ...</span></li><li>        }</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-selector-class">.displayPriority</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-selector-tag">Button</span>($r('app.string.login'))</li><li>          <span class="hljs-comment">// ...</span></li><li>          <span class="hljs-selector-class">.displayPriority</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question5Correct.ets#L22-L102" target="_blank">Question5Correct.ets</a></div></div></div></div>    <p>优化后效果如下图所示。</p>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.81892346118514148334337062343464:50001231000000:2800:099706666438F078D131063619C2E1BEF6D703107361D0EB9A4DF52C8229317C.gif" title="点击放大" width="266"></span></p>    <div class="tiledSection">     <h3 id="section891510271815">弹窗布局错乱，进入分屏后弹窗页面内容显示错乱，底部按钮挡住弹窗内容<i class="anchor-icon anchor-icon-link" anchorid="section891510271815" tips="复制节点链接"></i></h3>         </div>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163109.11246698701133907924255394943688:50001231000000:2800:1CA66FC925399AA7F46CD56D50770F51B8A95C74B875182300F4050CB988B0D1.gif" title="点击放大" width="266"></span></p>    <p><strong>原因</strong></p>    <p>应用未考虑分屏窗口尺寸变小的情况，弹窗高度设置为固定值，且底部按钮使用position属性设置了固定位置，导致整体布局错乱。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question6Incorrect.ets#L22-L83" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">CustomDialog</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">CustomDialogComp1</span> {</li><li>  <span class="hljs-variable">controller</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">CustomDialogController</span>({ <span class="hljs-string">'builder'</span>: <span class="hljs-string">''</span> });</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-title function_">Text</span>(<span class="hljs-string">"Welcome to My App"</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-title function_">Scroll</span>() {</li><li>          <span class="hljs-title function_">Text</span>(<span class="hljs-string">"This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice"</span>)</li><li>            <span class="hljs-comment">// ...</span></li><li>        }</li><li>      }</li><li>
</li><li>      <span class="hljs-title function_">Row</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">12</span> }) {</li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">"Disagree"</span>)</li><li>          <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">"Agree"</span>)</li><li>          <span class="hljs-comment">// ...</span></li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">56</span>)</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-variable">VerticalAlign</span>.<span class="hljs-variable">Top</span>)</li><li>      .<span class="hljs-title function_">position</span>({</li><li>        <span class="hljs-variable">bottom</span>: <span class="hljs-number">0</span>,</li><li>        <span class="hljs-variable">left</span>: <span class="hljs-number">0</span></li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">constraintSize</span>({</li><li>      <span class="hljs-variable">maxHeight</span>: <span class="hljs-string">'80%'</span></li><li>    })</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question6Incorrect.ets#L22-L83" target="_blank">Question6Incorrect.ets</a></div></div></div></div>    <p><strong>解决措施</strong></p>    <p>使用constraintSize属性给弹窗高度限定最大值，同时使用Scroll组件包裹弹窗内容区域（一多的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout#延伸能力">延伸能力</a>），通过给内容区域的Column组件设置layoutWeight（一多的<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-multi-device-adaptive-layout#占比能力">占比能力</a>）属性，使其占据剩余空间，使操作按钮居于底部显示。当内容高度超过内容区域高度的时候可以滚动进行查看。</p>    <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question6Correct.ets#L22-L80" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">CustomDialog</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">CustomDialogComp</span> {</li><li>  <span class="hljs-variable">controller</span>: <span class="hljs-title class_">CustomDialogController</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">CustomDialogController</span>({ <span class="hljs-string">'builder'</span>: <span class="hljs-string">''</span> });</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-title function_">Text</span>(<span class="hljs-string">"Welcome to My App"</span>)</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-title function_">Scroll</span>() {</li><li>          <span class="hljs-title function_">Text</span>(<span class="hljs-string">"This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice,This is a user notice"</span>)</li><li>            <span class="hljs-comment">// ...</span></li><li>        }</li><li>      }</li><li>      .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>
</li><li>      <span class="hljs-title function_">Row</span>({ <span class="hljs-variable">space</span>: <span class="hljs-number">12</span> }) {</li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">"Disagree"</span>)</li><li>          <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">"Agree"</span>)</li><li>          <span class="hljs-comment">// ...</span></li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">56</span>)</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-variable">VerticalAlign</span>.<span class="hljs-variable">Top</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">constraintSize</span>({</li><li>      <span class="hljs-variable">maxHeight</span>: <span class="hljs-string">'80%'</span></li><li>    })</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">400</span>)</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question6Correct.ets#L22-L80" target="_blank">Question6Correct.ets</a></div></div></div></div>    <p>优化后效果如下图所示。</p>    <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163110.18367499491288581465696458160493:50001231000000:2800:1648D037794D2EFD4B39DF6C48BBD849CD236C32B20E92AE7E5F85EE1B10EBAB.gif" title="点击放大" width="266"></span></p>    <div class="tiledSection">     <h3 id="section561523134011">沉浸模式下顶部窗口控制条避让问题<i class="anchor-icon anchor-icon-link" anchorid="section561523134011" tips="复制节点链接"></i></h3>          <p>沉浸式应用在悬浮窗场景下，顶部操作栏无法操作，应用分屏后，视图和悬浮窗顶部重合的区域无法响应操作。</p>     <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163110.28250090668839756612672808435271:50001231000000:2800:96054BD972F822AC2525EBC1D9A22905576AC4AE85C010E66E5191996D8557A1.gif" title="点击放大" width="266"></span></p>     <p><strong>原因</strong></p>     <p>沉浸式应用顶部没有避让，导致悬浮窗顶部bar与应用的顶部区域重叠，重叠区域中的按钮无法响应点击事件。</p>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question7Incorrect.ets#L24-L67" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">Question7Incorrect</span> {</li><li>  <span class="hljs-keyword">private</span> windowClass = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>).<span class="hljs-property">windowStage</span>.<span class="hljs-title function_">getMainWindowSync</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span>.<span class="hljs-title function_">setSpecificSystemBarEnabled</span>(<span class="hljs-string">'status'</span>, <span class="hljs-literal">false</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span>.<span class="hljs-title function_">setSpecificSystemBarEnabled</span>(<span class="hljs-string">'status'</span>, <span class="hljs-literal">true</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Stack</span>() {</li><li>        <span class="hljs-comment">// ...</span></li><li>
</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.icon_pause'</span>))</li><li>            <span class="hljs-comment">// ...</span></li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getPromptAction</span>().<span class="hljs-title function_">showToast</span>({</li><li>                <span class="hljs-attr">message</span>: <span class="hljs-string">'Action success'</span></li><li>              });</li><li>            })</li><li>        }</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">End</span>)</li><li>        .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Top</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">hideTitleBar</span>(<span class="hljs-literal">true</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question7Incorrect.ets#L24-L67" target="_blank">Question7Incorrect.ets</a></div></div></div></div>     <p><strong>解决措施</strong></p>     <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowavoidarea9" target="_blank">getWindowAvoidArea()</a>可获取屏幕顶部需要规避的矩阵区域topRect，获取到该值后应用可对应做布局避让。同时，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#onavoidareachange9" target="_blank">on('avoidAreaChange')</a>监听系统规避区域变化以进行布局的动态调整。具体可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-window-controlbar-adapt" target="_blank">顶部窗口控制条避让适配智慧多窗</a>。</p>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question7Correct.ets#L24-L81" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li>export struct Question7Correct {</li><li>  <span class="hljs-keyword">private</span> windowClass = (<span class="hljs-keyword">this</span>.getUIContext().getHostContext() <span class="hljs-keyword">as</span> common.UIAbilityContext).windowStage.getMainWindowSync();</li><li>  <span class="hljs-meta">@State</span> topSafeHeight: number = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> windowStatus: WindowStatusType = window.WindowStatusType.FULL_SCREEN;</li><li>
</li><li>  aboutToAppear(): void {</li><li>    <span class="hljs-keyword">this</span>.windowClass.setSpecificSystemBarEnabled(<span class="hljs-string">'status'</span>, <span class="hljs-literal">false</span>);</li><li>    <span class="hljs-keyword">this</span>.windowStatus = <span class="hljs-keyword">this</span>.windowClass.getWindowStatus();</li><li>
</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.windowStatus === window.WindowStatusType.FLOATING) {</li><li>      <span class="hljs-keyword">this</span>.topSafeHeight = <span class="hljs-keyword">this</span>.getUIContext().px2vp(<span class="hljs-keyword">this</span>.windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_SYSTEM).topRect.height);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">this</span>.windowClass.on(<span class="hljs-string">'windowStatusChange'</span>, <span class="hljs-keyword">data</span> =&gt; {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">data</span> === window.WindowStatusType.FLOATING) {</li><li>        <span class="hljs-keyword">this</span>.topSafeHeight =</li><li>          <span class="hljs-keyword">this</span>.getUIContext().px2vp(<span class="hljs-keyword">this</span>.windowClass.getWindowAvoidArea(window.AvoidAreaType.TYPE_SYSTEM).topRect.height);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-keyword">this</span>.topSafeHeight = <span class="hljs-number">0</span>;</li><li>      }</li><li>    })</li><li>  }</li><li>
</li><li>  aboutToDisappear(): void {</li><li>    <span class="hljs-keyword">this</span>.windowClass.setSpecificSystemBarEnabled(<span class="hljs-string">'status'</span>, <span class="hljs-literal">true</span>);</li><li>  }</li><li>
</li><li>  build() {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question7Correct.ets#L24-L81" target="_blank">Question7Correct.ets</a></div></div></div></div>     <p>优化后效果如下图所示。</p>     <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163110.67064765027752264334242128629514:50001231000000:2800:412A16012C4A8A14CEDFA9547F3B3657A79343CB02A67BD62EEDEE3E2FA6D905.gif" title="点击放大" width="266"></span></p>    </div>    <div class="tiledSection">     <h3 id="section16977171113215">视频或游戏类应用在横屏模式下开启悬浮窗，若应用未适配横屏悬浮窗，可能会导致内容显示不全，影响用户体验<i class="anchor-icon anchor-icon-link" anchorid="section16977171113215" tips="复制节点链接"></i></h3>          <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163110.70854650549488199166293837142483:50001231000000:2800:0B41E8427DE2A0A935AC03231F3C3FAC3081A65A695263C481D262CA79DBAD5E.gif" title="点击放大" width="266"></span></p>     <p><strong>原因</strong></p>     <p>悬浮窗默认是竖屏，需要应用主动适配横屏的属性值。</p>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question8Incorrect.ets##L21-L38" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">@Component</span></li><li>export struct Question8Incorrect {</li><li>  <span class="hljs-built_in">build</span>() {</li><li>    <span class="hljs-built_in">NavDestination</span>() {</li><li>      <span class="hljs-built_in">Column</span>() {</li><li>        <span class="hljs-selector-tag">Video</span>({ src: $rawfile('testVideo1.mp4') })</li><li>          <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')</li><li>          <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>          <span class="hljs-selector-class">.autoPlay</span>(true)</li><li>          <span class="hljs-selector-class">.objectFit</span>(ImageFit.Contain)</li><li>          <span class="hljs-selector-class">.controls</span>(false)</li><li>      }</li><li>      <span class="hljs-selector-class">.height</span>('<span class="hljs-number">100%</span>')</li><li>      <span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')</li><li>    }</li><li>    <span class="hljs-selector-class">.hideTitleBar</span>(true)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question8Incorrect.ets##L21-L38" target="_blank">Question8Incorrect.ets</a></div></div></div></div>     <p><strong>解决措施</strong></p>     <p>开发者可以通过在module.json5配置文件中abilities标签下的preferMultiWindowOrientation属性增加"landscape_auto"。</p>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/orientationDevelopment/entry/src/main/configlandscapeauto/module.json5#L2-L63" data-highlighted="yes"><ol class="linenums"><li>{</li><li>  <span class="hljs-string">"module"</span>: {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-string">"abilities"</span>: [</li><li>      {</li><li>        <span class="hljs-string">"name"</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-string">"preferMultiWindowOrientation"</span>: <span class="hljs-string">"landscape_auto"</span>,</li><li>        <span class="hljs-comment">// ...</span></li><li>      }</li><li>    ],</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/orientationDevelopment/entry/src/main/configlandscapeauto/module.json5#L2-L63" target="_blank">module.json5</a></div></div></div></div>     <p>该场景下多窗布局动态可变为横向，需要配合API（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#enablelandscapemultiwindow12" target="_blank">enableLandscapeMultiWindow()</a>/<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#disablelandscapemultiwindow12" target="_blank">disableLandscapeMultiWindow()</a>）使用。</p>     <div class="screenLinkPre"><div _ngcontent-dap-c106="" class="highlight-div"><div _ngcontent-dap-c106="" class="highlight-div-header"><div _ngcontent-dap-c106="" class="highlight-div-header-left"><div _ngcontent-dap-c106="" class="handle-button expand-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dap-c106="" class="highlight-div-header-right"><div _ngcontent-dap-c106="" class="handle-button ai-button"></div><div _ngcontent-dap-c106="" class="handle-button line-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dap-c106="" class="handle-button theme-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dap-c106="" class="handle-button copy-button"><div _ngcontent-dap-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dap-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question8Correct.ets#L24-L53" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Component</span></li><li><span class="hljs-keyword">export</span> struct <span class="hljs-title class_">Question8Correct</span> {</li><li>  <span class="hljs-keyword">private</span> windowClass = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>).<span class="hljs-property">windowStage</span>.<span class="hljs-title function_">getMainWindowSync</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span>.<span class="hljs-title function_">enableLandscapeMultiWindow</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">windowClass</span>.<span class="hljs-title function_">disableLandscapeMultiWindow</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/MultiWindowPractice/blob/master/entry/src/main/ets/pages/Question8Correct.ets#L24-L53" target="_blank">Question8Correct.ets</a></div></div></div></div>     <p>优化后效果如下图所示。</p>     <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163110.55427414841887750361291794514591:50001231000000:2800:C13974F9298CED105C903E393B4AA3BD3D6363122A4BBB01FFEC85201D3459A4.gif" title="点击放大" width="266"></span></p>    </div>   </div>   <div></div></div>