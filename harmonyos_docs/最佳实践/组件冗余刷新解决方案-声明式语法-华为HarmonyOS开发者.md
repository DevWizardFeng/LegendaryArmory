<h1 _ngcontent-thy-c119="" class="doc-title ng-star-inserted" title="组件冗余刷新解决方案"> 组件冗余刷新解决方案 </h1>

<div _ngcontent-thy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section872772982412">简介<i class="anchor-icon anchor-icon-link" anchorid="section872772982412" tips="复制节点链接"></i></h2><p>自定义组件中的变量被状态装饰器（@State，@Prop等）装饰后成为状态变量，而状态变量的改变会引起使用该变量的UI组件渲染刷新。状态变量的不合理使用可能会带来冗余刷新等性能问题。开发者可以使用状态变量组件定位工具（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hidumper" target="_blank">hidumper</a>）获取状态管理相关信息，例如自定义组件拥有的状态变量、状态变量的同步对象和关联组件等，了解状态变量影响UI的范围，写出高性能应用代码。</p> <p>下面通过一个点击按钮更改状态变量引起组件刷新的场景示例，结合hidumper工具，介绍状态变量使用范围不当，导致UI冗余刷新的问题定位。</p> </div> <div class="tiledSection"><h2 id="section84244372244">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section84244372244" tips="复制节点链接"></i></h2><p>在以下代码中，创建了自定义组件ComponentA、SpecialImage，每个组件都拥有一些状态变量和UI组件。组件ComponentA中存在Move和Scale两个按钮，在按钮的点击回调中改变状态变量的值刷新相应的组件。</p> <div class="screenLinkPre"><div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/Component_Redundancy_Refresh_Optimization/entry/src/main/ets/segment/segment1.ets#L2-L132" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// constant declaration</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">animationDuration</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">500</span>; <span class="hljs-comment">// Move animation duration</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">opacityChangeValue</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.1</span>; <span class="hljs-comment">// The value of each change in opacity</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">opacityChangeRange</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// Range of opacity changes</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">translateYChangeValue</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">180</span>; <span class="hljs-comment">// The value of translateY each time it changes</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">translateYChangeRange</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">250</span>; <span class="hljs-comment">// The range in which translateY changes</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">scaleXChangeValue</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.6</span>; <span class="hljs-comment">// The value of scaleX for each change</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">scaleXChangeRange</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.8</span>; <span class="hljs-comment">// The value of scaleX for each change</span></li><li>
</li><li><span class="hljs-comment">// Style Attribute Classes</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">UIStyle</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">translateX</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">translateY</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">scaleX</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.3</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">scaleY</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.3</span>;</li><li>}</li><li>
</li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ComponentA</span> {</li><li>  @<span class="hljs-title function_">Link</span> <span class="hljs-variable">uiStyle</span>: <span class="hljs-title class_">UIStyle</span>; <span class="hljs-comment">// Properties of uiStyle used by multiple components</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-comment">// Components that use state variables</span></li><li>      <span class="hljs-title function_">SpecialImage</span>({ <span class="hljs-variable">specialImageUiStyle</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span> })</li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-comment">// 需要替换为开发者所需的图像资源文件</span></li><li>        <span class="hljs-title function_">Image</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'150vp'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'150vp'</span>)</li><li>          .<span class="hljs-title function_">scale</span>({</li><li>            <span class="hljs-variable">x</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span>.<span class="hljs-title class_">scaleX</span>,</li><li>            <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span>.<span class="hljs-title class_">scaleY</span></li><li>          })</li><li>        <span class="hljs-title function_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-variable">FontWeight</span>.<span class="hljs-variable">Bold</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">translate</span>({</li><li>        <span class="hljs-variable">x</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span>.<span class="hljs-title class_">translateX</span>,</li><li>        <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span>.<span class="hljs-title class_">translateY</span></li><li>      })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'95%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'200vp'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-variable">top</span>: <span class="hljs-string">'10vp'</span>,</li><li>        <span class="hljs-variable">left</span>: <span class="hljs-string">'15vp'</span>,</li><li>        <span class="hljs-variable">right</span>: <span class="hljs-string">'15vp'</span></li><li>      })</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'16vp'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>)</li><li>      <span class="hljs-comment">// Modify the value of a state variable via a button click callback, causing the corresponding component to refresh.</span></li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">'Move'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>            <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">animateTo</span>({ <span class="hljs-variable">duration</span>: <span class="hljs-title class_">animationDuration</span> }, () =&gt; {</li><li>              <span class="hljs-keyword">this</span>.<span class="hljs-variable">uiStyle</span>.<span class="hljs-variable">translateY</span> = (<span class="hljs-keyword">this</span>.<span class="hljs-variable">uiStyle</span>.<span class="hljs-variable">translateY</span> + <span class="hljs-variable">translateYChangeValue</span>) % <span class="hljs-variable">translateYChangeRange</span>;</li><li>            })</li><li>          })</li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">'Scale'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>            <span class="hljs-keyword">this</span>.<span class="hljs-variable">uiStyle</span>.<span class="hljs-variable">scaleX</span> = (<span class="hljs-keyword">this</span>.<span class="hljs-variable">uiStyle</span>.<span class="hljs-variable">scaleX</span> + <span class="hljs-variable">scaleXChangeValue</span>) % <span class="hljs-variable">scaleXChangeRange</span>;</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-variable">top</span>: <span class="hljs-string">'10vp'</span>,</li><li>            <span class="hljs-variable">left</span>: <span class="hljs-string">'15vp'</span>,</li><li>            <span class="hljs-variable">right</span>: <span class="hljs-string">'15vp'</span></li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'35%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-variable">FlexAlign</span>.<span class="hljs-variable">End</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SpecialImage</span> {</li><li>  @<span class="hljs-title function_">Link</span> <span class="hljs-variable">specialImageUiStyle</span>: <span class="hljs-title class_">UIStyle</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-variable">opacityNum</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.5</span>; <span class="hljs-comment">// Default transparency</span></li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isRenderSpecialImage</span>(): <span class="hljs-title class_">number</span> {</li><li>    <span class="hljs-comment">// Image transparency increases by 0.1 each time it is rendered, cycling between 0 and 1.</span></li><li>    <span class="hljs-keyword">this</span>.<span class="hljs-variable">opacityNum</span> = (<span class="hljs-keyword">this</span>.<span class="hljs-variable">opacityNum</span> + <span class="hljs-variable">opacityChangeValue</span>) % <span class="hljs-variable">opacityChangeRange</span>;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">opacityNum</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-comment">// 需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title function_">Image</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>        .<span class="hljs-title function_">size</span>({ <span class="hljs-variable">width</span>: <span class="hljs-number">78</span>, <span class="hljs-variable">height</span>: <span class="hljs-number">78</span> })</li><li>        .<span class="hljs-title function_">scale</span>({</li><li>          <span class="hljs-variable">x</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">specialImageUiStyle</span>.<span class="hljs-title class_">scaleX</span>,</li><li>          <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">specialImageUiStyle</span>.<span class="hljs-title class_">scaleY</span></li><li>        })</li><li>        .<span class="hljs-title function_">opacity</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title function_">isRenderSpecialImage</span>())</li><li>      <span class="hljs-title function_">Text</span>(<span class="hljs-string">"SpecialImage"</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-variable">FontWeight</span>.<span class="hljs-variable">Bold</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'95%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({</li><li>      <span class="hljs-variable">top</span>: <span class="hljs-string">'10vp'</span>,</li><li>      <span class="hljs-variable">left</span>: <span class="hljs-string">'15vp'</span>,</li><li>      <span class="hljs-variable">right</span>: <span class="hljs-string">'15vp'</span></li><li>    })</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'16vp'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'200vp'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>)</li><li>  }</li><li>}</li><li>
</li><li>
</li><li>@<span class="hljs-title function_">Entry</span></li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DFXStateBeforeOptimization</span> {</li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-variable">uiStyle</span>: <span class="hljs-title class_">UIStyle</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">UIStyle</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-title function_">ComponentA</span>({</li><li>        <span class="hljs-variable">uiStyle</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span></li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xDCDCDC</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/Component_Redundancy_Refresh_Optimization/entry/src/main/ets/segment/segment1.ets#L2-L132" target="_blank">segment1.ets</a></div></div></div></div> <p>运行上述示例并分别点击按钮，可以看到点击Move按钮和Scale按钮时组件SpecialImage都出现了刷新，运行效果图如下。</p> <div class="fignone"><span class="figcap"><b>图1 </b>修改代码前点击Scale按钮和Move按钮时运行动图</span><p><span><img height="535.356255" originheight="1080" originwidth="523" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162940.59555676836742108159931184179077:50001231000000:2800:9768EDDE417AE2AD417D8F48A2CAC719C184F973A48507512B33EC5B29B66C1E.gif" title="点击放大" width="267.33000000000004"></span></p> <p></p> </div> <p>点击Move按钮的时候SpecialImage组件却发生了旋转动画，这就造成了冗余刷新。</p> </div> <div class="tiledSection"><h2 id="section0288031132513">问题定位<i class="anchor-icon anchor-icon-link" anchorid="section0288031132513" tips="复制节点链接"></i></h2><p>下面通过这个示例代码结合hidumper工具来介绍冗余刷新的问题定位。</p> <p>1. 首先在设备上打开应用，进入ComponentA组件所在的页面。</p> <p>2. 使用以下命令获取示例应用的窗口Id。当前运行的示例应用包名为performancelibrary，可以在输出结果中找到对应窗口名performancelibrary0的WinId，即为应用的窗口Id。或者当应用正处于前台运行时，Focus window的值就是应用的窗口Id。此处示例应用的窗口Id为11，后面的流程中使用的命令都需要指定窗口Id。</p> <div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>hdc shell <span class="hljs-string">"hidumper -s WindowManagerService -a '-a'"</span></li></ol></pre></div></div> <div class="fignone"><span class="figcap"><b>图2 </b>命令行获取应用窗口Id运行界面</span></div> <p><span><img height="285.833625" originheight="511" originwidth="1111" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162940.54013153463866774047007584204381:50001231000000:2800:557D5085D0CC118B019FE6932734ED099A9467A08774590DC0D99F55104F491A.png" title="点击放大" width="621.4425"></span></p> <p>3. 基于上一步获取的窗口Id 11，使用-viewHierarchy命令携带-r 参数递归打印应用的自定义组件树。</p> <div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>hdc shell <span class="hljs-string">"hidumper -s WindowManagerService -a '-w 11 -jsdump -viewHierarchy -r'"</span></li></ol></pre></div></div> <p>打印应用的自定义组件树结果如下：</p> <div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-yaml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-string">-----------------ViewPUHierarchy-----------------</span></li><li>[<span class="hljs-string">-viewHierarchy</span>, <span class="hljs-string">viewId=4</span>, <span class="hljs-string">isRecursive=true</span>]</li><li>
</li><li>
</li><li><span class="hljs-string">|--DFXStateBeforeOptimization[4]ViewPU</span> {<span class="hljs-attr">isViewActive:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_:</span> <span class="hljs-literal">false</span>}</li><li>  <span class="hljs-string">|--ComponentA[6]ViewPU</span> {<span class="hljs-attr">isViewActive:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_:</span> <span class="hljs-literal">false</span>}</li><li>    <span class="hljs-string">|--SpecialImage[8]ViewPU</span> {<span class="hljs-attr">isViewActive:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">isDeleting_:</span> <span class="hljs-literal">false</span>}</li></ol></pre></div></div> <p>从结果中找到目标组件ComponentA，后面括号中的内容即为组件ComponentA的节点Id 6。</p> <p>4. 使用命令-stateVariables携带参数-viewId（参数的值为ComponentA的节点Id）获取自定义组件ComponentA中的状态变量信息。</p> <div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>hdc shell <span class="hljs-string">"hidumper -s WindowManagerService -a '-w 11 -jsdump -stateVariables -viewId=6'"</span></li></ol></pre></div></div> <p>打印组件ComponentA的状态变量信息如下：</p> <div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>--------------<span class="hljs-variable">ViewPUState</span> <span class="hljs-variable">Variables</span>--------------</li><li>[-<span class="hljs-variable">stateVariables</span>, <span class="hljs-variable">viewId</span>=<span class="hljs-number">6</span>, <span class="hljs-variable">isRecursive</span>=<span class="hljs-keyword">false</span>]</li><li>
</li><li>|--<span class="hljs-variable">ComponentA</span>[<span class="hljs-number">6</span>]</li><li>  @<span class="hljs-title function_">Link</span> <span class="hljs-string">'uiStyle'</span>[-<span class="hljs-number">1</span>]</li><li>  |--<span class="hljs-variable">Owned</span> <span class="hljs-variable">by</span> @<span class="hljs-title function_">Component</span> <span class="hljs-string">'ComponentA'</span>[<span class="hljs-number">6</span>]</li><li>  |--<span class="hljs-variable">Sync</span> <span class="hljs-variable">peers</span>: {</li><li>    @<span class="hljs-title function_">Link</span> <span class="hljs-string">'specialImageUiStyle'</span>[-<span class="hljs-number">2</span>] &lt;@<span class="hljs-title class_">Component</span> '<span class="hljs-title class_">SpecialImage</span>'[<span class="hljs-number">8</span>]&gt;</li><li>  }</li><li>  <span class="hljs-variable">dependencies</span>: <span class="hljs-title class_">variable</span> <span class="hljs-title class_">assignment</span> <span class="hljs-title class_">affects</span> <span class="hljs-title class_">elmtIds</span>: <span class="hljs-title class_">Column</span>[<span class="hljs-number">9</span>], <span class="hljs-variable">Image</span>[<span class="hljs-number">10</span>]</li><li>  |--<span class="hljs-variable">Dependent</span> <span class="hljs-variable">elements</span>: <span class="hljs-title class_">Column</span>[<span class="hljs-number">9</span>], <span class="hljs-variable">Image</span>[<span class="hljs-number">10</span>]; @<span class="hljs-title function_">Component</span> <span class="hljs-string">'SpecialImage'</span>[<span class="hljs-number">8</span>], <span class="hljs-variable">Image</span>[<span class="hljs-number">18</span>]</li><li>
</li></ol></pre></div></div> <p>结果显示ComponentA拥有@Link类型的状态变量uiStyle。每条状态变量的详细信息都包含状态变量的所属组件、同步对象和关联组件。</p> <p>5. 以状态变量uiStyle为例。</p> <p>① Sync peers表示uiStyle在自定义组件SpecialImage中存在@Link类型的状态变量specialImageUiStyle订阅数据变化。</p> <p>② Dependent elements表示当前状态变量和其同步对象的关联组件SpecialImage。</p> <p>所以当uiStyle变化时，影响的组件范围为自定义组件SpecialImage以及系统组件Column[9]和Image[10]。</p> <p>示例中组件SpecialImage仅使用了uiStyle传递到specialImageUiStyle中的属性scaleX、scaleY。但点击Move按钮修改uiStyle中的属性translateY时，引起的uiStyle变化也会导致组件SpecialImage的刷新。所以，可以将uiStyle中的属性scaleX、scaleY提取到状态变量scaleStyle中，属性translateX和translateY提取到状态变量translateStyle中，仅传递scaleStyle给组件SpecialImage，避免不必要的刷新。</p> <p>由于提取后存在Class的嵌套，因此需要使用@Observed/@ObjectLink装饰器装饰相应的Class和状态变量。修改后的部分代码如下：</p> <div class="screenLinkPre"><div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/Component_Redundancy_Refresh_Optimization/entry/src/main/ets/segment/segment2.ets#L2-L151" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// constant declaration</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">animationDuration</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">500</span>; <span class="hljs-comment">// Move animation duration</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">opacityChangeValue</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.1</span>; <span class="hljs-comment">// The value of each change in opacity</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">opacityChangeRange</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// Range of opacity changes</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">translateYChangeValue</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">180</span>; <span class="hljs-comment">// The value of translateY each time it changes</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">translateYChangeRange</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">250</span>; <span class="hljs-comment">// The range in which translateY changes</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">scaleXChangeValue</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.6</span>; <span class="hljs-comment">// The value of scaleX for each change</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">scaleXChangeRange</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.8</span>; <span class="hljs-comment">// The value of scaleX for each change</span></li><li>
</li><li><span class="hljs-comment">// Style property class, nested ScaleStyle, TranslateStyle</span></li><li>@<span class="hljs-title function_">Observed</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">UIStyle</span> {</li><li>  <span class="hljs-variable">translateStyle</span>: <span class="hljs-title class_">TranslateStyle</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">TranslateStyle</span>();</li><li>  <span class="hljs-variable">scaleStyle</span>: <span class="hljs-title class_">ScaleStyle</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">ScaleStyle</span>();</li><li>}</li><li>
</li><li><span class="hljs-comment">// Zoom Property Class</span></li><li>@<span class="hljs-title function_">Observed</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ScaleStyle</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">scaleX</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.3</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">scaleY</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.3</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// Displacement Attribute Class</span></li><li>@<span class="hljs-title function_">Observed</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TranslateStyle</span> {</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">translateX</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-variable">translateY</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ComponentA</span> {</li><li>  @<span class="hljs-title function_">ObjectLink</span> <span class="hljs-variable">scaleStyle</span>: <span class="hljs-title class_">ScaleStyle</span>;</li><li>  @<span class="hljs-title function_">ObjectLink</span> <span class="hljs-variable">translateStyle</span>: <span class="hljs-title class_">TranslateStyle</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-title function_">SpecialImage</span>({</li><li>        <span class="hljs-variable">specialImageScaleStyle</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">scaleStyle</span></li><li>      })</li><li>      <span class="hljs-comment">// Other UI components</span></li><li>        <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-comment">// 需要替换为开发者所需的图像资源文件</span></li><li>          <span class="hljs-title function_">Image</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-string">'150vp'</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'150vp'</span>)</li><li>            .<span class="hljs-title function_">scale</span>({</li><li>              <span class="hljs-variable">x</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">scaleStyle</span>.<span class="hljs-title class_">scaleX</span>,</li><li>              <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">scaleStyle</span>.<span class="hljs-title class_">scaleY</span></li><li>            })</li><li>          <span class="hljs-title function_">Text</span>(<span class="hljs-string">'Hello World'</span>)</li><li>            .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-variable">FontWeight</span>.<span class="hljs-variable">Bold</span>)</li><li>        }</li><li>
</li><li>      .<span class="hljs-title function_">translate</span>({</li><li>        <span class="hljs-variable">x</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">translateStyle</span>.<span class="hljs-title class_">translateX</span>,</li><li>        <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">translateStyle</span>.<span class="hljs-title class_">translateY</span></li><li>      })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'95%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'200vp'</span>)</li><li>      .<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-variable">top</span>: <span class="hljs-string">'10vp'</span>,</li><li>        <span class="hljs-variable">left</span>: <span class="hljs-string">'15vp'</span>,</li><li>        <span class="hljs-variable">right</span>: <span class="hljs-string">'15vp'</span></li><li>      })</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'16vp'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>)</li><li>      <span class="hljs-comment">// Modify the value of a state variable via a button click callback, causing the corresponding component to refresh.</span></li><li>      <span class="hljs-title function_">Column</span>() {</li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">'Move'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>            <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">animateTo</span>({ <span class="hljs-variable">duration</span>: <span class="hljs-title class_">animationDuration</span> }, () =&gt; {</li><li>              <span class="hljs-keyword">this</span>.<span class="hljs-variable">translateStyle</span>.<span class="hljs-variable">translateY</span> =</li><li>                (<span class="hljs-keyword">this</span>.<span class="hljs-variable">translateStyle</span>.<span class="hljs-variable">translateY</span> + <span class="hljs-variable">translateYChangeValue</span>) % <span class="hljs-variable">translateYChangeRange</span>;</li><li>            })</li><li>          })</li><li>        <span class="hljs-title function_">Button</span>(<span class="hljs-string">'Scale'</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>            <span class="hljs-keyword">this</span>.<span class="hljs-variable">scaleStyle</span>.<span class="hljs-variable">scaleX</span> = (<span class="hljs-keyword">this</span>.<span class="hljs-variable">scaleStyle</span>.<span class="hljs-variable">scaleX</span> + <span class="hljs-variable">scaleXChangeValue</span>) % <span class="hljs-variable">scaleXChangeRange</span>;</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-variable">top</span>: <span class="hljs-string">'10vp'</span>,</li><li>            <span class="hljs-variable">left</span>: <span class="hljs-string">'15vp'</span>,</li><li>            <span class="hljs-variable">right</span>: <span class="hljs-string">'15vp'</span></li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'35%'</span>)</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-variable">FlexAlign</span>.<span class="hljs-variable">End</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SpecialImage</span> {</li><li>  @<span class="hljs-title function_">Link</span> <span class="hljs-variable">specialImageScaleStyle</span>: <span class="hljs-title class_">ScaleStyle</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-variable">opacityNum</span>: <span class="hljs-title class_">number</span> = <span class="hljs-number">0.5</span>; <span class="hljs-comment">// Default transparency</span></li><li>
</li><li>  <span class="hljs-comment">// isRenderSpecialImage function</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isRenderSpecialImage</span>(): <span class="hljs-title class_">number</span> {</li><li>    <span class="hljs-comment">// Image transparency increases by 0.1 each time it is rendered, cycling between 0 and 1.</span></li><li>    <span class="hljs-keyword">this</span>.<span class="hljs-variable">opacityNum</span> = (<span class="hljs-keyword">this</span>.<span class="hljs-variable">opacityNum</span> + <span class="hljs-variable">opacityChangeValue</span>) % <span class="hljs-variable">opacityChangeRange</span>;</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">opacityNum</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Column</span>() {</li><li>      <span class="hljs-comment">// 需要替换为开发者所需的图像资源文件</span></li><li>      <span class="hljs-title function_">Image</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>        .<span class="hljs-title function_">size</span>({ <span class="hljs-variable">width</span>: <span class="hljs-number">78</span>, <span class="hljs-variable">height</span>: <span class="hljs-number">78</span> })</li><li>        .<span class="hljs-title function_">scale</span>({</li><li>          <span class="hljs-variable">x</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">specialImageScaleStyle</span>.<span class="hljs-title class_">scaleX</span>,</li><li>          <span class="hljs-variable">y</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">specialImageScaleStyle</span>.<span class="hljs-title class_">scaleY</span></li><li>        })</li><li>        .<span class="hljs-title function_">opacity</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title function_">isRenderSpecialImage</span>())</li><li>      <span class="hljs-title function_">Text</span>(<span class="hljs-string">"SpecialImage"</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-variable">FontWeight</span>.<span class="hljs-variable">Bold</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'95%'</span>)</li><li>    .<span class="hljs-title function_">margin</span>({</li><li>      <span class="hljs-variable">top</span>: <span class="hljs-string">'10vp'</span>,</li><li>      <span class="hljs-variable">left</span>: <span class="hljs-string">'15vp'</span>,</li><li>      <span class="hljs-variable">right</span>: <span class="hljs-string">'15vp'</span></li><li>    })</li><li>    .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-string">'16vp'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'200vp'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable">Color</span>.<span class="hljs-variable">White</span>)</li><li>  }</li><li>}</li><li>
</li><li>@<span class="hljs-title function_">Entry</span></li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DFXStateAfterOptimization</span> {</li><li>  @<span class="hljs-title function_">State</span> <span class="hljs-variable">uiStyle</span>: <span class="hljs-title class_">UIStyle</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">UIStyle</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>    <span class="hljs-title function_">Stack</span>() {</li><li>      <span class="hljs-title function_">ComponentA</span>({</li><li>        <span class="hljs-variable">scaleStyle</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span>.<span class="hljs-title class_">scaleStyle</span>,</li><li>        <span class="hljs-variable">translateStyle</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">uiStyle</span>.<span class="hljs-title class_">translateStyle</span>,</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xDCDCDC</span>)</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/BestPracticeSnippets/blob/master/ArkUI/Component_Redundancy_Refresh_Optimization/entry/src/main/ets/segment/segment2.ets#L2-L151" target="_blank">segment2.ets</a></div></div></div></div> <p>修改后的示例运行效果图如下，只有点击Scale按钮时SpecialImage产生刷新现象，点击Move按钮时SpecialImage不会刷新。</p> <div class="fignone"><span class="figcap"><b>图3 </b>修改代码后点击Scale按钮和Move按钮时运行动图</span><p><span><img height="538.315771" originheight="1080" originwidth="523" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162940.44095168378970793000492294249169:50001231000000:2800:13B0573DF46DAF73494FFE64574444E1E192CFEEF283F92BC8F7839513CBD835.gif" title="点击放大" width="271.32"></span></p> </div> <p>可以使用上文步骤再次获取ComponentA组件的状态变量信息如下，可以看到ComponentA中状态变量scaleStyle影响组件SpecialImage[8]和Image[18]，状态变量translateStyle影响组件Column[9]，translateStyle的变化不会再导致SpecialImage的刷新。</p> <div _ngcontent-thy-c106="" class="highlight-div"><div _ngcontent-thy-c106="" class="highlight-div-header"><div _ngcontent-thy-c106="" class="highlight-div-header-left"><div _ngcontent-thy-c106="" class="handle-button expand-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-thy-c106="" class="highlight-div-header-right"><div _ngcontent-thy-c106="" class="handle-button ai-button"></div><div _ngcontent-thy-c106="" class="handle-button line-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-thy-c106="" class="handle-button theme-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-thy-c106="" class="handle-button copy-button"><div _ngcontent-thy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-thy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li>--------------<span class="hljs-variable">ViewPUState</span> <span class="hljs-variable">Variables</span>--------------</li><li>[-<span class="hljs-variable">stateVariables</span>, <span class="hljs-variable">viewId</span>=<span class="hljs-number">6</span>, <span class="hljs-variable">isRecursive</span>=<span class="hljs-keyword">false</span>]</li><li>
</li><li>|--<span class="hljs-variable">ComponentA</span>[<span class="hljs-number">6</span>]</li><li>  @<span class="hljs-title function_">ObjectLink</span> <span class="hljs-string">'scaleStyle'</span>[-<span class="hljs-number">1</span>]</li><li>  |--<span class="hljs-variable">Owned</span> <span class="hljs-variable">by</span> @<span class="hljs-title function_">Component</span> <span class="hljs-string">'ComponentA'</span>[<span class="hljs-number">6</span>]</li><li>  |--<span class="hljs-variable">Sync</span> <span class="hljs-variable">peers</span>: {</li><li>    @<span class="hljs-title function_">Link</span> <span class="hljs-string">'specialImageScaleStyle'</span>[-<span class="hljs-number">3</span>] &lt;@<span class="hljs-title class_">Component</span> '<span class="hljs-title class_">SpecialImage</span>'[<span class="hljs-number">8</span>]&gt;</li><li>  }</li><li>  <span class="hljs-variable">dependencies</span>: <span class="hljs-title class_">variable</span> <span class="hljs-title class_">assignment</span> <span class="hljs-title class_">affects</span> <span class="hljs-title class_">elmtIds</span>: <span class="hljs-title class_">Image</span>[<span class="hljs-number">10</span>]</li><li>  |--<span class="hljs-variable">Dependent</span> <span class="hljs-variable">elements</span>: <span class="hljs-title class_">Image</span>[<span class="hljs-number">10</span>]; @<span class="hljs-title function_">Component</span> <span class="hljs-string">'SpecialImage'</span>[<span class="hljs-number">8</span>], <span class="hljs-variable">Image</span>[<span class="hljs-number">18</span>]</li><li>  @<span class="hljs-title function_">ObjectLink</span> <span class="hljs-string">'translateStyle'</span>[-<span class="hljs-number">2</span>]</li><li>  |--<span class="hljs-variable">Owned</span> <span class="hljs-variable">by</span> @<span class="hljs-title function_">Component</span> <span class="hljs-string">'ComponentA'</span>[<span class="hljs-number">6</span>]</li><li>  |--<span class="hljs-variable">Sync</span> <span class="hljs-variable">peers</span>: <span class="hljs-title class_">none</span></li><li>  <span class="hljs-variable">dependencies</span>: <span class="hljs-title class_">variable</span> <span class="hljs-title class_">assignment</span> <span class="hljs-title class_">affects</span> <span class="hljs-title class_">elmtIds</span>: <span class="hljs-title class_">Column</span>[<span class="hljs-number">9</span>]</li><li>  |--<span class="hljs-variable">Dependent</span> <span class="hljs-variable">elements</span>: <span class="hljs-title class_">Column</span>[<span class="hljs-number">9</span>]</li><li>
</li></ol></pre></div></div> </div> </div> <div></div></div>