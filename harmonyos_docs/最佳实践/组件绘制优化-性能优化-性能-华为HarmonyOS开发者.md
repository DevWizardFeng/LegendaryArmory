<h1 _ngcontent-hbg-c119="" class="doc-title ng-star-inserted" title="组件绘制优化"> 组件绘制优化 </h1>

<div _ngcontent-hbg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>应用启动性能与FrameNode树的节点数量及属性相关，建议采取以下UI组件优化方案：</p>    <div class="tiledSection">     <h2 id="section1922265142317">避免在自定义组件生命周期内执行高耗时操作<i class="anchor-icon anchor-icon-link" anchorid="section1922265142317" tips="复制节点链接"></i></h2>          <div class="fignone">      <span class="figcap"><b>图1 </b>自定义组件生命周期流程图</span>     </div>     <p></p>     <p><span><img height="419.94750000000005" originheight="677" originwidth="843" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163407.82422147305086276809841796856431:50001231000000:2800:1C3FD9D870BEB14FB6EE6D4EB84318A23EB10A18E41CEDC395B9F6FEB7DD72E8.png" title="点击放大" width="523.6875"></span></p>     <p>自定义组件生命周期如上图所示。创建完成后，在执行build函数前，将先调用aboutToAppear()生命周期回调函数。此时若执行耗时操作，将阻塞UI渲染，增加UI主线程负担。因此，应避免在自定义组件的生命周期内执行高耗时操作。具体原理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-page-custom-components-lifecycle" target="_blank">自定义组件生命周期</a>。具体优化案例请参阅<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-ui-component-performance-optimization#section18755173594714">避免在自定义组件的生命周期内执行高耗时操作</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section56031073327">按需注册组件属性<i class="anchor-icon anchor-icon-link" anchorid="section56031073327" tips="复制节点链接"></i></h2>          <p>在开发应用UI界面时，为每个组件设置属性，进行UI样式和行为逻辑处理。如果单个组件设置多个属性且该组件在应用中频繁使用，单个属性的设置将显著影响应用性能。具体优化案例请参阅<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-ui-component-performance-optimization#section14178121175019">按需注册组件属性</a>。</p>    </div>    <div class="tiledSection">     <h2 id="section185157383443">减少布局计算<i class="anchor-icon anchor-icon-link" anchorid="section185157383443" tips="复制节点链接"></i></h2>          <p>当组件的宽高不需要自适应时，建议在UI描述中明确指定组件的宽高数值。如果组件外部的容器尺寸发生变化，例如在拖拽缩放等场景下，组件本身的宽高固定，理论上该组件在布局阶段不会参与Measure阶段，节点中已保存了相应的大小信息。如果组件内容较多，由于避免了整体的测算过程，性能将显著提升。具体优化案例，请参阅<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-improve-layout-performance#section151587885316">利用布局边界减少布局计算</a>、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-improve-layout-performance#section114841451194917">给定List组件宽高</a><strong>。</strong></p>    </div>   </div>   <div></div></div>