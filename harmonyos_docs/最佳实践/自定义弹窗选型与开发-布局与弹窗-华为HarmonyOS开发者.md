<h1 _ngcontent-atf-c119="" class="doc-title ng-star-inserted" title="自定义弹窗选型与开发"> 自定义弹窗选型与开发 </h1>

<div _ngcontent-atf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1338176438">概述<i class="anchor-icon anchor-icon-link" anchorid="section1338176438" tips="复制节点链接"></i></h2><p>在进行弹窗开发时，需要针对不同的弹窗类型选择对应的实现方案，例如常见的弹窗类型包括文本提示弹窗、对话框、菜单、操作栏等。本文将围绕弹窗的基本类型、不同类型弹窗的特性展开，结合当前推荐的弹窗类型、能力支持情况、弹窗的使用建议，来介绍弹窗的选型与开发流程。帮助开发者解决在使用弹窗时的常见问题（例如：实现侧滑拦截、切换页面返回后弹窗不消失等）。</p> </div> <div class="tiledSection"><h2 id="section1896702217104">弹窗能力介绍<i class="anchor-icon anchor-icon-link" anchorid="section1896702217104" tips="复制节点链接"></i></h2><p>本章节将从弹窗的关键特性、能力支持、使用建议三个方面对弹窗的能力进行介绍：</p> <ul><li><a href="/consumer/cn/doc/best-practices/bpta-customdialog-selection-and-development#section43517717431">关键特性</a>：从交互角度出发，介绍开发者对于弹窗的高频要求。</li><li><a href="/consumer/cn/doc/best-practices/bpta-customdialog-selection-and-development#section183771115161711">能力支持</a>：详细说明当前推荐弹窗方案所支持的具体能力与功能。</li><li><a href="/consumer/cn/doc/best-practices/bpta-customdialog-selection-and-development#section1627323364216">使用建议</a>：对比当前推荐弹窗方案的区别，提供弹窗选型的建议。</li></ul> </div> <div class="tiledSection"><h3 id="section43517717431" class="firsth2">弹窗的关键特性<i class="anchor-icon anchor-icon-link" anchorid="section43517717431" tips="复制节点链接"></i></h3><p>在进行弹窗开发时，除了弹窗的内容、样式以外，从用户交互角度出发，弹窗还有一些常见的交互诉求如：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><tbody><tr><th class="firstcol" id="mcps1.3.3.3.1.5.1.1" valign="top" width="25%"><p>交互诉求</p> </th> <td class="cellrowborder" valign="top" width="25%"><ul><li>是否允许<strong>侧滑手势关闭弹窗</strong>，由交互决定，不让用户太轻易退出。</li></ul> </td> <td class="cellrowborder" valign="top" width="25%"><ul><li><strong>点击弹窗外是否关闭弹窗</strong>，弹窗内容比较关键或重要时，为确保用户关注并处理，可能不允许点击弹窗外关闭。</li></ul> </td> <td class="cellrowborder" valign="top" width="25%"><ul><li>是否需要<strong>自定义配置进出场动画</strong>以及动画类型。</li></ul> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.3.1.5.2.1" valign="top" width="25%"><p>效果图</p> </th> <td class="cellrowborder" valign="top" width="25%"><p><span><img height="426.2037000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162912.59196136484060650535361618789735:50001231000000:2800:33B7E29DACCABA2FDDC871C4C042F61D8F892BEB22908CC05B7EFC397370CB4E.gif" title="点击放大" width="206"></span></p> </td> <td class="cellrowborder" valign="top" width="25%"><p><span><img height="426.2037000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162913.67725351037025867069765559205950:50001231000000:2800:87746CA25B3866591F5B3B69B4350744EC2C4279BDEAED49FD782D503674C91A.gif" title="点击放大" width="206"></span></p> </td> <td class="cellrowborder" valign="top" width="25%"><p><span><img height="426.2037000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162913.70484229227997760830213609418664:50001231000000:2800:FE14BA677EA89F645BA6CC290D1442C1B388F5F7BDDAB33692DDDB7401B6A4A9.gif" title="点击放大" width="206"></span></p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.3.1.5.3.1" valign="top" width="25%"><p>交互诉求</p> </th> <td class="cellrowborder" valign="top" width="25%"><ul><li>弹窗的内容是否需要在<strong>跳转后，保留在之前页面</strong>，如隐私弹窗。</li></ul> </td> <td class="cellrowborder" valign="top" width="25%"><ul><li>是否抢占焦点，部分使用dialog实现的自定义弹窗在<strong>弹出时会抢占焦点</strong>，导致键盘被收起再弹出。</li></ul> </td> <td class="cellrowborder" valign="top" width="25%"><ul><li>是否需要弹窗<strong>与键盘避让</strong>，为了确保在键盘弹窗时，弹窗及其内容不会被遮挡，也有不需要避让的场景，例如评论回复弹窗。</li></ul> </td> </tr> <tr><th class="firstcol" id="mcps1.3.3.3.1.5.4.1" valign="top" width="25%"><p>效果图</p> </th> <td class="cellrowborder" valign="top" width="25%"><p><span><img height="426.2037000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162913.60546733770436126187392518165737:50001231000000:2800:5AA0C01903F1F1628785F47BCFCD69535EA5370CB7D3B61EB9522F651DC22659.gif" title="点击放大" width="206"></span></p> </td> <td class="cellrowborder" valign="top" width="25%"><p><span><img height="426.2037000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162913.95622110445724797544150191290600:50001231000000:2800:2A8DDDE7657AAB0249D6CFC6023A2E33C249777B5FBF99A1C0451732612E63CB.gif" title="点击放大" width="206"></span></p> </td> <td class="cellrowborder" valign="top" width="25%"><p><span><img height="426.2037000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162913.65032224734966556362099499265627:50001231000000:2800:ACE3784AAFB46E409A40F29CE8FB17D552956077E73285906C37EBF075E8E920.gif" title="点击放大" width="206"></span></p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section183771115161711">能力支持情况<i class="anchor-icon anchor-icon-link" anchorid="section183771115161711" tips="复制节点链接"></i></h3><p>当前系统提供了多种自定义弹窗能力，具体如下：</p> <ul><li><strong>主要推荐的弹窗</strong><ol><li>基于UIContext实现的自定义弹窗：UIContext弹窗是一种基于上下文（Context）的弹窗管理机制，通过ComponentContent封装内容可以与UI界面解耦，调用更加灵活，可以满足开发者的封装诉求。具有较高的灵活性，弹窗样式完全自定义。当关联的UIContext销毁时（如页面关闭），弹窗会自动关闭，无需手动管理。其次，弹窗的层级由UIContext管理，与页面路由解耦，适合复杂场景。当前实现弹窗的主要API有<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#openbindsheet12" target="_blank">UIContext.openBindSheet()</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialog12" target="_blank">UIContext.getPromptAction().openCustomDialog()</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getoverlaymanager12" target="_blank">UIContext.getOverlayManager()</a>等。</li><li>基于Navigation.Dialog实现的自定义弹窗：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation#页面显示类型" target="_blank">NavDestination.Dialog</a>是基于Navigation组件实现的弹窗效果，它本质上属于路由页面，存在于路由栈中，可用于实现模态、半模态等形式，适用于透明页面、切换页面弹窗不消失等场景。<p>以上两种弹窗在技术实现上具备良好的灵活性和拓展性，对页面解耦及弹窗样式自定义等能力支持度较高，关于它们的具体能力支持详情，可参考：<a href="/consumer/cn/doc/best-practices/bpta-customdialog-selection-and-development#table14106534122814">能力支持</a>。</p> </li></ol> </li><li><strong>不推荐使用的弹窗</strong><ol><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-components-custom-dialog" target="_blank">基础自定义弹出框 (CustomDialog)</a>：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-methods-custom-dialog-box#customdialogcontroller" target="_blank">CustomDialogController</a> 在使用上存在较多限制，不支持动态创建和动态刷新，只能在@Component修饰的自定义组件内部使用。这导致弹窗的创建与管理必须依赖具体组件，增加了代码复杂度和维护成本。此外，当一个页面需要展示多个自定义弹窗时，需为每个弹窗单独声明对应的 CustomDialogController，进一步造成 UI 层代码冗余，难以实现弹窗与页面逻辑的解耦。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction" target="_blank">@ohos.promptAction (弹窗)</a>：@ohos.promptAction是一种全局方法，在没有UIContext上下文的场景中执行时会有问题，或者因为开发者不能指定UIContext可能导致弹窗显示到非开发者预期的窗口里，所以不推荐使用。此外，其采用系统默认弹窗样式，无法进行深度样式自定义，适用于希望保持与系统风格一致的简单提示类弹窗，适用范围较为有限。</li></ol> </li></ul> </div> <p>由于弹窗类型的差异，其在功能实现、交互体验和适配场景上存在一定局限性。当前主要推荐的弹窗能力支持情况梳理如下表，供参考：</p>  <div class="tablenoborder"><a name="ZH-CN_TOPIC_0000002490707082__table14106534122814"></a><a name="table14106534122814"></a><div class="tbBox"><table id="table14106534122814" class="layoutFixed idpTab"><tbody><tr><th class="firstcol" id="mcps1.3.6.1.6.1.1" rowspan="2" valign="top"><p><strong>场景描述</strong></p> </th> <td class="cellrowborder" colspan="3" valign="top"><p><strong>UIContext弹窗</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>Navigation</strong></p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><strong>UIContext.openBindSheet()</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>UIContext.getPromptAction().openCustomDialog()</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>UIContext.getOverlayManager</strong><strong>()</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>NavDestination.Dialog</strong></p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.6.1.6.3.1" valign="top" width="14.799999999999999%"><p>弹窗侧滑拦截/响应</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.6.1.6.4.1" valign="top" width="14.799999999999999%"><p>点击弹窗外关闭弹窗</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>×</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>×</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.6.1.6.5.1" valign="top" width="14.799999999999999%"><p>自定义显示和退出动画</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>×</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>⍻ (默认不支持动画，可通过自定义动画的方式配置）</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>⍻ (API version 13之前，默认无系统转场动画。从API version 13开始，支持系统转场动画。）</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.6.1.6.6.1" valign="top" width="14.799999999999999%"><p>切换页面弹窗不消失</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.6.1.6.7.1" valign="top" width="14.799999999999999%"><p>弹窗获取焦点选择</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.6.1.6.8.1" valign="top" width="14.799999999999999%"><p>键盘避让模式选择</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>×</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>⍻ (结合窗口设置)</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>⍻ (结合窗口设置)</p> </td> </tr>  </tbody></table></div> </div> <p>上述六种场景均可与前文常见的交互诉求相对应，除此之外，还有一些能力支持情况，例如是否支持页面与弹窗解耦、弹窗样式自定义等，具体如下：</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><tbody><tr><th class="firstcol" id="mcps1.3.8.1.6.1.1" valign="top" width="14.799999999999999%"><p>页面解耦</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.8.1.6.2.1" valign="top" width="14.799999999999999%"><p>弹窗样式自定义（背景、圆角等）</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.8.1.6.3.1" valign="top" width="14.799999999999999%"><p>弹窗蒙层</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.8.1.6.4.1" valign="top" width="14.799999999999999%"><p>层级管理</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.8.1.6.5.1" valign="top" width="14.799999999999999%"><p>路由解耦</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>×</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.8.1.6.6.1" valign="top" width="14.799999999999999%"><p>事件分发到页面</p> </th> <td class="cellrowborder" valign="top" width="20.32%"><p>×</p> </td> <td class="cellrowborder" valign="top" width="23.119999999999997%"><p>×</p> </td> <td class="cellrowborder" valign="top" width="20.95%"><p>√</p> </td> <td class="cellrowborder" valign="top" width="20.810000000000002%"><p>√</p> </td> </tr>  </tbody></table></div> </div> <div class="tiledSection"><h3 id="section1627323364216">弹窗使用建议<i class="anchor-icon anchor-icon-link" anchorid="section1627323364216" tips="复制节点链接"></i></h3><p>目前，UIContext弹窗和Navigation Dialog作为主推的弹窗类型，它们在位置与展示形式、适用场景等方面存在一些差异，建议开发者结合开发需求和场景进行选择。</p>  <div class="tablenoborder"><div class="tbBox"><table class="layoutFixed idpTab"><tbody><tr><th class="firstcol" id="mcps1.3.9.3.1.6.1.1" rowspan="2" valign="top">&nbsp;&nbsp;</th> <td class="cellrowborder" colspan="3" valign="top"><p><strong>UIContext弹窗</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>Navigation</strong></p> </td> </tr> <tr><td class="cellrowborder" valign="top"><p><strong>UIContext.openBindSheet()</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>UIContext.getPromptAction().openCustomDialog()</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>UIContext.getOverlayManager</strong><strong>()</strong></p> </td> <td class="cellrowborder" valign="top"><p><strong>NavDestination.Dialog</strong></p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.9.3.1.6.3.1" valign="top" width="7.04%"><p><strong>位置与展示形式</strong></p> </th> <td class="cellrowborder" valign="top" width="19.42%"><p>通常从屏幕底部弹出，是一种半模态弹窗，占据部分屏幕高度。</p> </td> <td class="cellrowborder" valign="top" width="27.63%"><p>默认居中显示，可通过isModal参数设置为模态或非模态。</p> </td> <td class="cellrowborder" valign="top" width="20.349999999999998%"><p>可以在屏幕的任意位置显示，独立于页面布局，可覆盖在所有组件之上，弹窗之下。</p> </td> <td class="cellrowborder" valign="top" width="25.56%"><p>基于Navigation导航路由形式，以Component组件页面存在于路由栈中，默认透明显示。</p> </td> </tr> <tr><th class="firstcol" id="mcps1.3.9.3.1.6.4.1" valign="top" width="7.04%"><p><strong>适用场景</strong></p> </th> <td class="cellrowborder" valign="top" width="19.42%"><p>适合用于展示一些底部操作选项列表，如底部操作，底部列表选项等。</p> </td> <td class="cellrowborder" valign="top" width="27.63%"><p>适用于各种需要高度自定义弹窗内容和样式的场景，如操作确认提示、表单输入弹窗等。</p> </td> <td class="cellrowborder" valign="top" width="20.349999999999998%"><p>用于实现全局的悬浮提示或操作按钮，如客服入口浮球、活动图标入口、引导提示等。</p> </td> <td class="cellrowborder" valign="top" width="25.56%"><p>适用于各个形式的弹窗，但需要注意该弹窗实际是以页面形式实现的，会占用页面栈。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section11338152810516">应用常见弹窗场景实现<i class="anchor-icon anchor-icon-link" anchorid="section11338152810516" tips="复制节点链接"></i></h2><p>根据不同的业务需求，弹窗有多种类型可供选择。本文选取了几种常见的弹窗实现案例，结合对应的能力特点进行介绍。</p> </div> <div class="tiledSection"><h3 id="section1425118160448" class="firsth2">实现类Toast的图文提示框<i class="anchor-icon anchor-icon-link" anchorid="section1425118160448" tips="复制节点链接"></i></h3><p>图文提示弹窗常用于显示用户操作的结果，如成功或失败提示，也可以在等待系统响应时展示加载动画等。</p> </div> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162913.25742486040852177282795632613147:50001231000000:2800:89CA251E1664CF77D175C5831CFD0CA8AEF4DEC72821320E7ABA5C65DD5E173F.gif" title="点击放大" width="266"></span></p> <p><strong>实现方案</strong></p> <p>由于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#showtoast" target="_blank">showToast</a>仅支持弹出文本类型，无法实现图文混合形式的提示弹窗，针对此类场景可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialog12" target="_blank">UIContext.getPromptAction().openCustomDialog()</a>实现。</p> <p><strong>示例代码</strong></p> <p>通过@Builder自定义构建函数buildText()，用于封装图文提示弹窗的内容和样式，给弹窗添加图片Image和文本Text。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L76-L96" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Graphic and text prompt.</span></li><li><span class="hljs-keyword">@Builder</span></li><li>function buildText(<span class="hljs-attribute">params</span>: Params) {</li><li>  <span class="hljs-built_in">Row</span>() {</li><li>    <span class="hljs-built_in">Image</span>($r('app.media.checkmark_circle'))</li><li>      <span class="hljs-selector-class">.width</span>(<span class="hljs-number">24</span>)</li><li>      <span class="hljs-selector-class">.height</span>(<span class="hljs-number">24</span>)</li><li>      <span class="hljs-selector-class">.margin</span>({ right: <span class="hljs-number">16</span> })</li><li>    Text(params.text)</li><li>      <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">16</span>)</li><li>  }</li><li>  <span class="hljs-selector-class">.focusable</span>(false)</li><li>  <span class="hljs-selector-class">.justifyContent</span>(FlexAlign.Center)</li><li>  <span class="hljs-selector-class">.backgroundColor</span>(Color.White)</li><li>  <span class="hljs-selector-class">.padding</span>({ left: <span class="hljs-number">24</span>, right: <span class="hljs-number">24</span> })</li><li>  <span class="hljs-selector-class">.height</span>(<span class="hljs-number">50</span>)</li><li>  <span class="hljs-selector-class">.borderRadius</span>(<span class="hljs-number">24</span>)</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L76-L96" target="_blank">Index.ets</a></div></div></div></div> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialog12" target="_blank">UIContext.getPromptAction().openCustomDialog()</a>打开弹窗，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#basedialogoptions11" target="_blank">BaseDialogOptions</a>配置弹窗样式。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L367-L379" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Open the graphic and text prompts</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">uiContext</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setContext</span>(<span class="hljs-variable">uiContext</span>);</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setContentNode</span>(<span class="hljs-variable">imageTipsContentNode</span>);</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setOptions</span>({</li><li>  <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">false</span>,</li><li>  <span class="hljs-variable">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-title class_">Bottom</span>,</li><li>  <span class="hljs-variable">offset</span>: { <span class="hljs-variable">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-variable">dy</span>: -<span class="hljs-number">80</span> }</li><li>});</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">openDialog</span>();</li><li><span class="hljs-title function_">setTimeout</span>(() =&gt; {</li><li>  <span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">closeDialog</span>(<span class="hljs-variable">imageTipsContentNode</span>);</li><li>}, <span class="hljs-number">3000</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L367-L379" target="_blank">Index.ets</a></div></div></div></div> <p>需要注意的是，dialog类型弹窗在弹出时会抢占焦点，此处如果存在正在输入的文本框，会导致键盘收起。在需要保持原有界面可用性的场景下，用户希望弹窗不主动获取焦点，避免打断用户的当前操作，可以通过设置弹窗的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#basedialogoptions11" target="_blank">promptAction.BaseDialogOptions</a>的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-focus#focusable" target="_blank">focusable</a>属性为false，即不允许弹窗获取焦点。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/4dbd0c1c22e20baf9ab2ff77a6210033fe7d30d5/entry/src/main/ets/pages/Index.ets#L371-L376" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setOptions</span>({</li><li>  <span class="hljs-variable">isModal</span>: <span class="hljs-keyword">false</span>,</li><li>  <span class="hljs-variable">alignment</span>: <span class="hljs-title class_">DialogAlignment</span>.<span class="hljs-title class_">Bottom</span>,</li><li>  <span class="hljs-variable">offset</span>: { <span class="hljs-variable">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-variable">dy</span>: -<span class="hljs-number">80</span> },</li><li>  <span class="hljs-variable">focusable</span>: <span class="hljs-keyword">false</span></li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/4dbd0c1c22e20baf9ab2ff77a6210033fe7d30d5/entry/src/main/ets/pages/Index.ets#L371-L376" target="_blank">Index.ets</a></div></div></div></div> <div class="tiledSection"><h3 id="section11613152212500">实现隐私弹窗效果<i class="anchor-icon anchor-icon-link" anchorid="section11613152212500" tips="复制节点链接"></i></h3><p>隐私弹窗主要用于确保法律合规性，要求应用在收集用户数据前必须获得用户的同意。当用户打开隐私弹窗时，可以通过点击弹窗内的超链接跳转至详细的隐私协议页面。返回后，隐私弹窗依旧保持显示状态，确保用户能够在充分了解相关信息的基础上做出选择。</p> </div> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162914.96040411908569313027941232381083:50001231000000:2800:9E440997E6D38576E7EFBB6C1143ACDE562834F8D68C11D28D1020F117C9AA1B.gif" title="点击放大" width="266"></span></p> <p>在隐私页面中，需要关注的点主要有两个：</p> <p>1、当点击隐私弹窗中隐私界面链接，跳转到新页面，弹窗应该处于页面下层，并且返回页面时，弹窗的状态依旧保留；</p> <p>2、用户执行侧滑手势时，可以设置拦截用户侧滑操作，让用户需要点击确认或者拒绝方式退出弹窗；</p> <p><strong>实现方案</strong></p> <p>可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-promptaction#opencustomdialog12" target="_blank">UIContext.getPromptAction().openCustomDialog()</a>实现，其支持通过levelMode和levelUniqueId配置页面级弹窗。</p> <ul><li><strong>切换</strong><strong>页面弹窗不消失</strong><p>首先，引入自定义弹窗的封装类<strong>PromptActionClass</strong>，其定义了弹窗的打开和关闭方法，以及选项设置。</p> <div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptActionClass</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/PromptActionClass'</span>;</li></ol></pre></div></div> <p>通过自定义弹窗选项<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#basedialogoptions11" target="_blank">BaseDialogOptions</a>中的levelMode和levelUniqueId设置弹出框在指定页面内弹出，此参数接收页面内的节点id，设置后，弹出框显示时会自动查询此id对应的节点所在的Navigation页面，并将其挂载在此页面下。如下代码示例所示，Button节点为指定页面的节点，设置自定义id后，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getframenodebyid12" target="_blank">getFrameNodeById()</a>方法获取该节点，再通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-api#getuniqueid12" target="_blank">getUniqueId</a>获取节点的内部id，并将其作为levelUniqueId的值传入。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/PrivacyDialog.ets#L101-L154" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Column</span>() {</li><li>  <span class="hljs-title function_">Row</span>() {</li><li>    <span class="hljs-title function_">Image</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.media.chevron_left'</span>))</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">16</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">16</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-variable">left</span>: <span class="hljs-number">12</span> })</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-number">40</span>)</li><li>  .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">48</span>)</li><li>  .<span class="hljs-title function_">margin</span>({ <span class="hljs-variable">top</span>: <span class="hljs-number">42</span> })</li><li>  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#e6eaeb'</span>)</li><li>  .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>    <span class="hljs-keyword">this</span>.<span class="hljs-variable">pageStack</span>.<span class="hljs-title function_">pop</span>();</li><li>  })</li><li>
</li><li>  <span class="hljs-title function_">Row</span>() {</li><li>    <span class="hljs-title function_">Button</span>(<span class="hljs-string">'OPEN'</span>)</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'privacyDialog'</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-variable">bottom</span>: <span class="hljs-number">16</span> })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#0A59F7'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>        <span class="hljs-keyword">const</span> <span class="hljs-variable">node</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-title class_">null</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getFrameNodeById</span>(<span class="hljs-string">'privacyDialog'</span>);</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-variable">uiContext</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>        <span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setContext</span>(<span class="hljs-variable">uiContext</span>);</li><li>        <span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setContentNode</span>(<span class="hljs-variable">privacyContentNode</span>);</li><li>        <span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setOptions</span>({</li><li>          <span class="hljs-variable">levelMode</span>: <span class="hljs-title class_">LevelMode</span>.<span class="hljs-title class_">EMBEDDED</span>,</li><li>          <span class="hljs-variable">levelUniqueId</span>: <span class="hljs-title class_">node</span>?.<span class="hljs-title class_">getUniqueId</span>(),</li><li>          <span class="hljs-variable">onWillDismiss</span>: (<span class="hljs-variable">dismissDialogAction</span>: <span class="hljs-title class_">DismissDialogAction</span>) =&gt; {</li><li>            <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0xFF00</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">dismissDialogAction</span>.<span class="hljs-variable">reason</span>));</li><li>          }</li><li>        })</li><li>        <span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">openDialog</span>();</li><li>      })</li><li>  }</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">alignItems</span>(<span class="hljs-variable">VerticalAlign</span>.<span class="hljs-variable">Center</span>)</li><li>}</li><li>.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>.<span class="hljs-title function_">padding</span>({</li><li>  <span class="hljs-variable">left</span>: <span class="hljs-number">16</span>,</li><li>  <span class="hljs-variable">right</span>: <span class="hljs-number">16</span>,</li><li>  <span class="hljs-variable">bottom</span>: <span class="hljs-number">32</span></li><li>})</li><li>.<span class="hljs-title function_">justifyContent</span>(<span class="hljs-variable">FlexAlign</span>.<span class="hljs-variable">SpaceBetween</span>)</li><li>.<span class="hljs-title function_">alignItems</span>(<span class="hljs-variable">HorizontalAlign</span>.<span class="hljs-variable">Start</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/PrivacyDialog.ets#L101-L154" target="_blank">PrivacyDialog.ets</a></div></div></div></div> </li></ul> <ul><li><strong>侧滑拦截</strong><p>通过UIContext.getPromptAction弹窗的onWillDismiss回调函数实现侧滑拦截。当用户执行点击遮障层关闭、侧滑、三键back、键盘ESC关闭交互操作时，注册该回调函数后，弹窗不会立刻关闭。在回调函数中通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-popup#dismissreason12枚举说明" target="_blank">DismissReason</a>枚举确定关闭原因，从而选择是否关闭弹窗。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/PrivacyDialog.ets#L131-L137" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setOptions</span>({</li><li>  <span class="hljs-variable">levelMode</span>: <span class="hljs-title class_">LevelMode</span>.<span class="hljs-title class_">EMBEDDED</span>,</li><li>  <span class="hljs-variable">levelUniqueId</span>: <span class="hljs-title class_">node</span>?.<span class="hljs-title class_">getUniqueId</span>(),</li><li>  <span class="hljs-variable">onWillDismiss</span>: (<span class="hljs-variable">dismissDialogAction</span>: <span class="hljs-title class_">DismissDialogAction</span>) =&gt; {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0xFF00</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">dismissDialogAction</span>.<span class="hljs-variable">reason</span>));</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/PrivacyDialog.ets#L131-L137" target="_blank">PrivacyDialog.ets</a></div></div></div></div> </li></ul> <p>API 16之前的版本，可以使用NavDestinationMode.DIALOG弹窗实现，Dialog方式本质上是基于路由页面出入路由栈的方式实现对弹窗的保留。</p> <p><strong>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation#页面显示类型" target="_blank">NavDestinationMode.DIALOG弹窗</a>实现</strong></p> <ul><li><strong>切换页面弹窗不消失</strong><p>若使用NavDestinationMode.DIALOG模式实现弹窗，即需要将NavDestination的显示模式mode设置为NavDestinationMode.DIALOG弹窗类型。</p> <div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">NavDestination</span>() {</li><li>  <span class="hljs-comment">// ... 弹窗内容</span></li><li>}</li><li><span class="hljs-selector-class">.mode</span>(NavDestinationMode.DIALOG)</li></ol></pre></div></div> </li></ul> <ul><li><strong>侧滑拦截</strong><p>通过NavDestination的回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination#onbackpressed10" target="_blank">onBackPressed()</a>实现侧滑拦截。当点击物理返回按钮或使用手势滑动时，触发该回调。返回值为true时，表示重写返回键逻辑，即可实现侧滑拦截。</p> <div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-built_in">NavDestination</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li><li><span class="hljs-selector-class">.hideTitleBar</span>(true)</li><li><span class="hljs-selector-class">.mode</span>(NavDestinationMode.DIALOG)</li><li><span class="hljs-selector-class">.onBackPressed</span>((): boolean =&gt; {</li><li>  return true;</li><li>})</li></ol></pre></div></div> </li></ul> <div class="tiledSection"><h3 id="section1786251810520">实现进度展示弹窗<i class="anchor-icon anchor-icon-link" anchorid="section1786251810520" tips="复制节点链接"></i></h3><p>展示进度条的弹窗是一种常见的弹窗组件，用于在耗时操作中向用户反馈任务进度，此类弹窗中主要涉及的特点在于弹窗与页面之间的数据交互，刷新弹窗的内容。</p> </div> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162914.90294226979149382936003408521802:50001231000000:2800:480AFB1A75C317B9DFEEB3241DEA8B67A3F31A72C8FA32B6D1B55D60F342939E.gif" title="点击放大" width="266"></span></p> <p><strong>实现方案</strong></p> <ul><li><strong>在页面中更新弹窗内容</strong>：<p>更新弹窗中自定义组件的内容可以通过ComponentContent提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-componentcontent#update" target="_blank">update()</a>方法来实现，即contentNode.update()更新弹窗的数据并同步到UI进行展示。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-php" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L171-L189" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_ invoke__">Text</span>(isProgressRunning ? <span class="hljs-variable">$r</span>(<span class="hljs-string">'app.string.pause'</span>) : <span class="hljs-variable">$r</span>(<span class="hljs-string">'app.string.start'</span>))</li><li>  .<span class="hljs-title function_ invoke__">fontSize</span>(<span class="hljs-number">16</span>)</li><li>  .<span class="hljs-title function_ invoke__">fontColor</span>(<span class="hljs-string">'#0A59F7'</span>)</li><li>  .<span class="hljs-title function_ invoke__">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">8</span> })</li><li>  .<span class="hljs-title function_ invoke__">onClick</span>(() =&gt; {</li><li>    isProgressRunning = !isProgressRunning;</li><li>    <span class="hljs-keyword">if</span> (isProgressRunning) {</li><li>      timer = <span class="hljs-title function_ invoke__">setInterval</span>(() =&gt; {</li><li>        <span class="hljs-keyword">if</span> (value === <span class="hljs-number">100</span>) {</li><li>          value = <span class="hljs-number">0</span>;</li><li>        }</li><li>        value += <span class="hljs-number">10</span>;</li><li>        progressContentNode.<span class="hljs-title function_ invoke__">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProgressParams</span>(<span class="hljs-variable">$r</span>(<span class="hljs-string">'app.string.progress'</span>), value, isProgressRunning));</li><li>      }, <span class="hljs-number">1000</span>)</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-title function_ invoke__">clearInterval</span>(timer);</li><li>    }</li><li>    progressContentNode.<span class="hljs-title function_ invoke__">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProgressParams</span>(<span class="hljs-variable">$r</span>(<span class="hljs-string">'app.string.progress'</span>), value, isProgressRunning));</li><li>  })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L171-L189" target="_blank">Index.ets</a></div></div></div></div> </li></ul> <ul><li><strong>点击弹窗外是否关闭弹窗</strong><p>为保证任务在进度条弹窗关闭后仍持续运行，需将弹窗配置为非自动取消，即设置autoCancel为true。这样用户点击弹窗外区域关闭弹窗时，不会中断任务流程。后续重新打开弹窗时，进度条将根据当前任务状态继续更新。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L460-L473" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Open the progress bar pop-up window</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">uiContext</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setContext</span>(<span class="hljs-variable">uiContext</span>);</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setContentNode</span>(<span class="hljs-variable">progressContentNode</span>);</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">setOptions</span>({</li><li>  <span class="hljs-variable">autoCancel</span>: <span class="hljs-keyword">true</span>,</li><li>  <span class="hljs-variable">transition</span>: <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title class_">asymmetric</span>(</li><li>    <span class="hljs-title class_">TransitionEffect</span>.<span class="hljs-title class_">OPACITY</span>.<span class="hljs-title class_">animation</span>({ <span class="hljs-variable">duration</span>: <span class="hljs-number">1000</span> }),</li><li>    <span class="hljs-variable">TransitionEffect</span>.<span class="hljs-variable">OPACITY</span>.<span class="hljs-title function_">animation</span>({ <span class="hljs-variable">delay</span>: <span class="hljs-number">500</span>, <span class="hljs-variable">duration</span>: <span class="hljs-number">1000</span> })</li><li>  )</li><li>})</li><li><span class="hljs-variable">PromptActionClass</span>.<span class="hljs-title function_">openDialog</span>();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L460-L473" target="_blank">Index.ets</a></div></div></div></div> </li><li><strong>自定义弹窗显示和退出动画</strong><p>在应用开发中，系统弹窗的显示和退出动画通常不满足需求。若要实现自定义弹窗出入动画，可以使用以下方式：1）渐隐渐显的方式弹出；2）从左往右弹出，从右往左收回；3）从下往上的抽屉式弹出，关闭时从上往下收回。本文以渐隐渐显的方式为例，介绍自定义弹窗的显示和退出动画。</p> <p>可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction#basedialogoptions11" target="_blank">BaseDialogOptions</a>的transition参数设置弹窗显示和退出的过渡效果，以此实现以渐隐渐显的方式呈现自定义弹窗的显示和退出动画。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L467-L470" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attribute">transition</span>: TransitionEffect.<span class="hljs-built_in">asymmetric</span>(</li><li>  TransitionEffect.OPACITY.<span class="hljs-built_in">animation</span>({ <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span> }),</li><li>  TransitionEffect.OPACITY.<span class="hljs-built_in">animation</span>({ <span class="hljs-attribute">delay</span>: <span class="hljs-number">500</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span> })</li><li>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L467-L470" target="_blank">Index.ets</a></div></div></div></div> </li></ul> <div class="tiledSection"><h3 id="section87501558165417">实现底部操作弹窗<i class="anchor-icon anchor-icon-link" anchorid="section87501558165417" tips="复制节点链接"></i></h3><p>操作栏弹窗通常是指在应用界面中，用户点击操作栏（如右上角的“更多”按钮）后触发的半模态菜单，通常具备分享、增删改查类功能。操作列表弹窗的内容主体是列表，分为固定高度，可变高度两种。</p> </div> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162914.66536746721326637319745228263750:50001231000000:2800:39E0581AB8B8DB27E50EC105339B115043FD466995C720A78170BD0BFEF010FA.gif" title="点击放大" width="266"></span></p> <p><strong>实现方案</strong></p> <p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#openbindsheet12" target="_blank">openBindsheet</a>，通过ComponentContent封装半模态页面中显示的组件内容，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#sheetoptions" target="_blank">SheetOptions</a>设置半模态页面样式。</p> <ul><li><strong>固定高度操作弹窗</strong><p>设置height为SheetSize.MEDIUM，此时弹窗为固定高度显示，无法跟手拖动。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L500-L522" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">Text</span>($<span class="hljs-title function_">r</span>(<span class="hljs-string">'app.string.operation_list'</span>))</li><li>  .<span class="hljs-title function_">onClick</span>(() =&gt; {</li><li>    <span class="hljs-comment">// Open the operation list pop-up window</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">contentNode</span> =</li><li>      <span class="hljs-variable">new</span> <span class="hljs-title function_">ComponentContent</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-variable">buildActionList</span>));</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">uiContext</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">uniqueId</span> = <span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUniqueId</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">frameNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-title class_">null</span> = <span class="hljs-variable">uiContext</span>.<span class="hljs-title function_">getFrameNodeByUniqueId</span>(<span class="hljs-variable">uniqueId</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">targetId</span> = <span class="hljs-variable">frameNode</span>?.<span class="hljs-title function_">getFirstChild</span>()?.<span class="hljs-title function_">getUniqueId</span>();</li><li>    <span class="hljs-variable">uiContext</span>.<span class="hljs-title function_">openBindSheet</span>(<span class="hljs-variable">contentNode</span>, {</li><li>      <span class="hljs-variable">title</span>: { <span class="hljs-variable">title</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">string</span>.<span class="hljs-title class_">more</span>') },</li><li>      <span class="hljs-variable">height</span>: <span class="hljs-title class_">SheetSize</span>.<span class="hljs-title class_">MEDIUM</span>,</li><li>      <span class="hljs-variable">backgroundColor</span>: <span class="hljs-string">'#F1F3F5'</span>,</li><li>      <span class="hljs-variable">preferType</span>: <span class="hljs-title class_">SheetType</span>.<span class="hljs-title class_">BOTTOM</span></li><li>    }, <span class="hljs-variable">targetId</span>)</li><li>      .<span class="hljs-title function_">then</span>(() =&gt; {</li><li>        <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0xFF00</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">'openBindSheet success'</span>);</li><li>      })</li><li>      .<span class="hljs-keyword">catch</span>((<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>        <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0xFF00</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">'openBindSheet error: '</span> + <span class="hljs-variable">err</span>.<span class="hljs-variable">code</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>);</li><li>      })</li><li>  })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L500-L522" target="_blank">Index.ets</a></div></div></div></div> </li><li><strong>可变高度操作弹窗</strong><p>可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition#sheetoptions" target="_blank">SheetOptions</a>的detents参数设置为可变高度，跟手拖动。</p> <div class="screenLinkPre"><div _ngcontent-atf-c106="" class="highlight-div"><div _ngcontent-atf-c106="" class="highlight-div-header"><div _ngcontent-atf-c106="" class="highlight-div-header-left"><div _ngcontent-atf-c106="" class="handle-button expand-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-atf-c106="" class="highlight-div-header-right"><div _ngcontent-atf-c106="" class="handle-button ai-button"></div><div _ngcontent-atf-c106="" class="handle-button line-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-atf-c106="" class="handle-button theme-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-atf-c106="" class="handle-button copy-button"><div _ngcontent-atf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-atf-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L538-L550" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">uiContext</span>.<span class="hljs-title function_">openBindSheet</span>(<span class="hljs-variable">contentNode</span>, {</li><li>  <span class="hljs-variable">title</span>: { <span class="hljs-variable">title</span>: $<span class="hljs-title class_">r</span>('<span class="hljs-title class_">app</span>.<span class="hljs-title class_">string</span>.<span class="hljs-title class_">more</span>') },</li><li>  <span class="hljs-variable">height</span>: <span class="hljs-title class_">SheetSize</span>.<span class="hljs-title class_">MEDIUM</span>,</li><li>  <span class="hljs-variable">backgroundColor</span>: <span class="hljs-string">'#F1F3F5'</span>,</li><li>  <span class="hljs-variable">preferType</span>: <span class="hljs-title class_">SheetType</span>.<span class="hljs-title class_">BOTTOM</span>,</li><li>  <span class="hljs-variable">detents</span>: [<span class="hljs-variable">SheetSize</span>.<span class="hljs-variable">MEDIUM</span>, <span class="hljs-variable">SheetSize</span>.<span class="hljs-variable">LARGE</span>, <span class="hljs-number">200</span>]</li><li>}, <span class="hljs-variable">targetId</span>)</li><li>  .<span class="hljs-title function_">then</span>(() =&gt; {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0xFF00</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">'openBindSheet success'</span>);</li><li>  })</li><li>  .<span class="hljs-keyword">catch</span>((<span class="hljs-variable">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0xFF00</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">'openBindSheet error: '</span> + <span class="hljs-variable">err</span>.<span class="hljs-variable">code</span> + <span class="hljs-string">' '</span> + <span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>);</li><li>  })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development/blob/master/entry/src/main/ets/pages/Index.ets#L538-L550" target="_blank">Index.ets</a></div></div></div></div> <p><span><img height="550.3407000000001" originheight="720" originwidth="348" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211162914.30127478216532735845004104857288:50001231000000:2800:B81BDF97286D313DCAFA06C18D5D06DB57A8269EB6C8BE051AC1BD726267BDC2.gif" title="点击放大" width="266"></span></p> </li></ul> <div class="tiledSection"><h3 id="section548091125818">实现评论回复弹窗<i class="anchor-icon anchor-icon-link" anchorid="section548091125818" tips="复制节点链接"></i></h3><p>评论回复模块在图文和视频应用中被广泛使用，包含编辑区域、好友列表、常用表情列表和表情面板（见下图），它允许用户进行输入文字、表情、@好友、选择图片等操作。具体实现方案请参见：<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-comment-reply-pop-up-window" target="_blank">评论回复弹窗开发实践</a>。</p> </div> <div class="tiledSection"><h2 id="section12684155814810">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section12684155814810" tips="复制节点链接"></i></h2><ul><li><a href="https://gitee.com/harmonyos_samples/custom-dialog-selection-and-development" target="_blank">自定义弹窗选型与开发</a></li></ul> </div> <p></p> </div></div>