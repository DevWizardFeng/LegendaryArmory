<h1 _ngcontent-ske-c119="" class="doc-title ng-star-inserted" title="视频场景Wi-Fi加载低功耗建议"> 视频场景Wi-Fi加载低功耗建议 </h1>

<div _ngcontent-ske-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section103291628287">建议<i class="anchor-icon anchor-icon-link" anchorid="section103291628287" tips="复制节点链接"></i></h2></div> <p>视频场景数据缓存下载方式：建议每20s下载一次，每次下载3到5s，以避免小流量持续下载导致Wi-Fi功耗增加。</p> <div class="tiledSection"><h2 id="section7181529165813">开发步骤<i class="anchor-icon anchor-icon-link" anchorid="section7181529165813" tips="复制节点链接"></i></h2><p>调用系统的<span style="color: rgb(36,39,40);">setHandoverCb()</span>接口，实现聚合方式缓存视频，具体的接口调用方法如下：</p> <p>1.监听系统接管状态，要注册系统handover起始回调，接收变化通知，包含接管start回调及接管结束回调。</p> <p>setHandoverCb(HandoverStartCb startCb, HandoverCompleteCb completeCb);</p> <p>2.当应用需要短时间使用网络链路，需要反馈期望使用网络的earliestBegin时间及最晚忍受时间，系统会参考多个应用的时间进行拉齐，统一在一段时间内恢复网络的正常使用。transDesc中包含期望的最早时间和可以忍受的最晚时间。</p> <p>setTransDesc(transDesc);</p> <p>3.当应用有优先级不高且不影响基本功能的业务时，比如上传log等，应用可以在发送数据的请求中标识该请求，系统会进行统一调度。out中传入系统自主控制delegation的标志位。</p> <p>send(out);</p> </div> <div class="tiledSection"><h2 id="section991981435712">调测验证<i class="anchor-icon anchor-icon-link" anchorid="section991981435712" tips="复制节点链接"></i></h2><p>相同大小的文件下载存在两种方式：按聚合方式下载和小流量持续下载。数据包与时间的关系如下：</p> <ol><li>按聚合方式下载时，例如每20s下载一次，每次下载3到5s，Wi-Fi器件在大部分时间处于idle状态，实测Wi-Fi功耗为35mA。<p><span><img height="107.449636" originheight="193" originwidth="765" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163445.93336999714730281314053536601928:50001231000000:2800:21E53184B7DE0AEC1A6901D89F4DC1F3191CCC616DF37A9819FE466A2893F05C.png" title="点击放大" width="455.8575"></span></p> </li><li>当以小流量持续下载时，例如每1s下载一次，Wi-Fi器件的空闲时间会减少。实测结果显示，小流量持续下载的Wi-Fi功耗为55mA，而聚合下载的功耗为35mA。因此，建议应用采用聚合方式下载，以避免小流量持续下载导致的高Wi-Fi功耗。<p class="msonormal"><span><img height="159.195015" originheight="174" originwidth="435" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163445.00338139060153936281751267954547:50001231000000:2800:1EE71A3EBE919830F6C633651A63201443689983A4AAF1167A99F750D15ABBE8.png" title="点击放大" width="454.86"></span></p> </li></ol> </div> </div> <div></div></div>