<h1 _ngcontent-cxu-c119="" class="doc-title ng-star-inserted" title="视频投播"> 视频投播 </h1>

<div _ngcontent-cxu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section2078033351418">概述<i class="anchor-icon anchor-icon-link" anchorid="section2078033351418" tips="复制节点链接"></i></h2>          <p>系统投播功能让用户能够轻松将手机上的音视频投放到其他设备（如PC/2in1设备、华为智慧屏）上继续播放，实现跨设备切换，带来流畅的观影体验。为简化开发流程，系统提供了标准化的音视频投播解决方案，开发者仅需配置资源信息、监听投播状态并实现播放控制（如播放、暂停），即可快速集成该功能。</p>     <p>本文将结合实际案例，详细介绍如何高效利用系统投播组件和接口实现视频投播，帮助开发者提升开发效率，包含如下关键步骤：</p>     <ul>      <li><a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section198061041155312">接入播控中心</a>：播控中心系统提供的播放管理模块，可以后台管理应用播放任务，是投播接入的必备条件。</li>      <li><a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section1850441982916">本端控制远端设备状态</a>：手机端实现遥控器功能，直接控制远端设备的播放状态、进度、音量等。</li>      <li><a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section13876193232918">远端视频状态回传本端</a>：能够实时同步播放进度至手机端显示。</li>      <li><a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section1133113013013">视频资源切换</a>和<a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section6237193134112">设备切换</a>：支持投播过程中集数的切换及投播设备的切换。</li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p><strong>设备限制：</strong></p>       <p>详细版本、设备和使用限制见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/distributed-playback-guide#section1557419538816" target="_blank">约束与限制</a>。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section0899193812142">用户体验<i class="anchor-icon anchor-icon-link" anchorid="section0899193812142" tips="复制节点链接"></i></h2>          <p><strong>体验视频</strong></p>     <p>      </p><div class="video-box" style="width: 715.621px; height: 402.537px;"><div id="wise_player_0" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.28764407392472630602118327864591:50001231000000:2800:F0E348D81557051704F9AC52ED633929420646D5B140035598C51C02A6915244.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_0-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.28764407392472630602118327864591:50001231000000:2800:F0E348D81557051704F9AC52ED633929420646D5B140035598C51C02A6915244.mp4" id="wise_player_0_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.28764407392472630602118327864591:50001231000000:2800:F0E348D81557051704F9AC52ED633929420646D5B140035598C51C02A6915244.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-1144"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-1145"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 1:00"><div class="vjs-load-progress" style="width: 7.49%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">7.49%</span></span><div data-start="0" data-end="4.495" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">1:00</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_0_component_1329">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_0_component_1329"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_0_component_1436_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_1436_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_0_component_1442_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_1442_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_0_component_1442">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_0_component_1442" for="vjs_select_1468" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442" id="vjs_select_1468"><option id="captions-foreground-color-wise_player_0_component_1442-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-White">White</option><option id="captions-foreground-color-wise_player_0_component_1442-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-Black">Black</option><option id="captions-foreground-color-wise_player_0_component_1442-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-Red">Red</option><option id="captions-foreground-color-wise_player_0_component_1442-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-Green">Green</option><option id="captions-foreground-color-wise_player_0_component_1442-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-Blue">Blue</option><option id="captions-foreground-color-wise_player_0_component_1442-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_0_component_1442-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_0_component_1442-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442 captions-foreground-color-wise_player_0_component_1442-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_0_component_1442" for="vjs_select_1469" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-opacity-wise_player_0_component_1442" id="vjs_select_1469"><option id="captions-foreground-opacity-wise_player_0_component_1442-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-opacity-wise_player_0_component_1442 captions-foreground-opacity-wise_player_0_component_1442-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_0_component_1442-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_0_component_1442 captions-foreground-opacity-wise_player_0_component_1442 captions-foreground-opacity-wise_player_0_component_1442-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_0_component_1442">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_0_component_1442" for="vjs_select_1470" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442" id="vjs_select_1470"><option id="captions-background-color-wise_player_0_component_1442-Black" value="#000" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-Black">Black</option><option id="captions-background-color-wise_player_0_component_1442-White" value="#FFF" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-White">White</option><option id="captions-background-color-wise_player_0_component_1442-Red" value="#F00" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-Red">Red</option><option id="captions-background-color-wise_player_0_component_1442-Green" value="#0F0" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-Green">Green</option><option id="captions-background-color-wise_player_0_component_1442-Blue" value="#00F" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-Blue">Blue</option><option id="captions-background-color-wise_player_0_component_1442-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-Yellow">Yellow</option><option id="captions-background-color-wise_player_0_component_1442-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-Magenta">Magenta</option><option id="captions-background-color-wise_player_0_component_1442-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442 captions-background-color-wise_player_0_component_1442-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_0_component_1442" for="vjs_select_1471" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-opacity-wise_player_0_component_1442" id="vjs_select_1471"><option id="captions-background-opacity-wise_player_0_component_1442-Opaque" value="1" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-opacity-wise_player_0_component_1442 captions-background-opacity-wise_player_0_component_1442-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_0_component_1442-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-opacity-wise_player_0_component_1442 captions-background-opacity-wise_player_0_component_1442-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_0_component_1442-Transparent" value="0" aria-labelledby="captions-background-wise_player_0_component_1442 captions-background-opacity-wise_player_0_component_1442 captions-background-opacity-wise_player_0_component_1442-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_0_component_1442">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_0_component_1442" for="vjs_select_1472" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442" id="vjs_select_1472"><option id="captions-window-color-wise_player_0_component_1442-Black" value="#000" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-Black">Black</option><option id="captions-window-color-wise_player_0_component_1442-White" value="#FFF" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-White">White</option><option id="captions-window-color-wise_player_0_component_1442-Red" value="#F00" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-Red">Red</option><option id="captions-window-color-wise_player_0_component_1442-Green" value="#0F0" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-Green">Green</option><option id="captions-window-color-wise_player_0_component_1442-Blue" value="#00F" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-Blue">Blue</option><option id="captions-window-color-wise_player_0_component_1442-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-Yellow">Yellow</option><option id="captions-window-color-wise_player_0_component_1442-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-Magenta">Magenta</option><option id="captions-window-color-wise_player_0_component_1442-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442 captions-window-color-wise_player_0_component_1442-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_0_component_1442" for="vjs_select_1473" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-opacity-wise_player_0_component_1442" id="vjs_select_1473"><option id="captions-window-opacity-wise_player_0_component_1442-Transparent" value="0" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-opacity-wise_player_0_component_1442 captions-window-opacity-wise_player_0_component_1442-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_0_component_1442-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-opacity-wise_player_0_component_1442 captions-window-opacity-wise_player_0_component_1442-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_0_component_1442-Opaque" value="1" aria-labelledby="captions-window-wise_player_0_component_1442 captions-window-opacity-wise_player_0_component_1442 captions-window-opacity-wise_player_0_component_1442-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_0_component_1442">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_0_component_1442" id="vjs_select_1474"><option id="captions-font-size-wise_player_0_component_1442-50" value="0.50" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-50">50%</option><option id="captions-font-size-wise_player_0_component_1442-75" value="0.75" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-75">75%</option><option id="captions-font-size-wise_player_0_component_1442-100" value="1.00" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-100">100%</option><option id="captions-font-size-wise_player_0_component_1442-125" value="1.25" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-125">125%</option><option id="captions-font-size-wise_player_0_component_1442-150" value="1.50" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-150">150%</option><option id="captions-font-size-wise_player_0_component_1442-175" value="1.75" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-175">175%</option><option id="captions-font-size-wise_player_0_component_1442-200" value="2.00" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-200">200%</option><option id="captions-font-size-wise_player_0_component_1442-300" value="3.00" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-300">300%</option><option id="captions-font-size-wise_player_0_component_1442-400" value="4.00" aria-labelledby="captions-font-size-wise_player_0_component_1442 captions-font-size-wise_player_0_component_1442-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_0_component_1442">Text Edge Style</legend><select aria-labelledby="wise_player_0_component_1442" id="vjs_select_1475"><option id="wise_player_0_component_1442-None" value="none" aria-labelledby="wise_player_0_component_1442 wise_player_0_component_1442-None">None</option><option id="wise_player_0_component_1442-Raised" value="raised" aria-labelledby="wise_player_0_component_1442 wise_player_0_component_1442-Raised">Raised</option><option id="wise_player_0_component_1442-Depressed" value="depressed" aria-labelledby="wise_player_0_component_1442 wise_player_0_component_1442-Depressed">Depressed</option><option id="wise_player_0_component_1442-Uniform" value="uniform" aria-labelledby="wise_player_0_component_1442 wise_player_0_component_1442-Uniform">Uniform</option><option id="wise_player_0_component_1442-Dropshadow" value="dropshadow" aria-labelledby="wise_player_0_component_1442 wise_player_0_component_1442-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_0_component_1442">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_0_component_1442" id="vjs_select_1476"><option id="captions-font-family-wise_player_0_component_1442-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_1442 captions-font-family-wise_player_0_component_1442-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_0_component_1442-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_1442 captions-font-family-wise_player_0_component_1442-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_0_component_1442-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_0_component_1442 captions-font-family-wise_player_0_component_1442-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_0_component_1442-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_0_component_1442 captions-font-family-wise_player_0_component_1442-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_0_component_1442-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_0_component_1442 captions-font-family-wise_player_0_component_1442-Casual">Casual</option><option id="captions-font-family-wise_player_0_component_1442-Script" value="script" aria-labelledby="captions-font-family-wise_player_0_component_1442 captions-font-family-wise_player_0_component_1442-Script">Script</option><option id="captions-font-family-wise_player_0_component_1442-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_0_component_1442 captions-font-family-wise_player_0_component_1442-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="0" class="wiseplayershaw"></div></div></div><p></p>     <p><strong>用户体验路径</strong></p>     <p>本文案例提供本端播放和视频投播两种播放模式，体验路径和交互流程图如下。用户可以在本端和远端播放视频，在投播模式下，用户可以通过遥控界面实现快进/快退、切换上下集、音量调节（支持物理键控制）、进度条拖动跳转、选集切换控制功能，应用接入时，可根据实际需求参考本文实现，并按照<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/playback-control-access-checklist" target="_blank">应用接入播控自检表</a>完成基础功能验证，确保应用基础体验。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.1.6.1.1" valign="top" width="5.7%">          <p>用户操作阶段</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.1.6.1.2" valign="top" width="10.38%">          <p>1、本端视频播放与控制</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.1.6.1.3" valign="top" width="25.919999999999998%">          <p>2、播控中心控制本端视频</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.1.6.1.4" valign="top" width="28.23%">          <p>3、接入投播</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.1.6.1.5" valign="top" width="29.770000000000003%">          <p>4、应用遥控远端设备</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="5.7%">          <p>预期行为</p></td>         <td class="cellrowborder" valign="top" width="10.38%">          <p>1、本端视频的正常播放。</p>          <p>2、本端视频的控制（切集、倍速、音量、进度等）。</p></td>         <td class="cellrowborder" valign="top" width="25.919999999999998%">          <p>1、播控中心状态与本端视频一致。</p>          <p>2、播放中心控制本端视频播放（切集、倍速、音量、进度等）。</p></td>         <td class="cellrowborder" valign="top" width="28.23%">          <p>1、初次链接认证。</p>          <p>2、选择设备。</p></td>         <td class="cellrowborder" valign="top" width="29.770000000000003%">          <p>1、本端状态与远端状态一致。</p>          <p>2、本端播控中心遥控远端设备播放（切集、倍速、音量、进度等）。</p>          <p>3、应用遥控远端设备播放（切集、倍速、音量、进度等）。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="5.7%">&nbsp;&nbsp;</td>         <td class="cellrowborder" valign="top" width="10.38%">          <p><span><img height="147.71900826446284" originheight="345" originwidth="167" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163251.92314794319266114386728763808474:50001231000000:2800:2ABC6E6208A5CEB523B195B2EF56D293712CCF2E158AA44320E0F7EF4C1210D2.png" width="71.49600000000001" class="notEnlarge"></span></p></td>         <td class="cellrowborder" valign="top" width="25.919999999999998%">          <p></p>          <p><span><img height="125.71162348493147" originheight="842" originwidth="1448" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163251.20988951061874918332565957411885:50001231000000:2800:4B7B503C33BBDB94957D8AF5FE12C0D6F4C5CDAB05E7320BAF8567709403AA5F.jpg" title="点击放大" width="214.46399999999997"></span></p></td>         <td class="cellrowborder" valign="top" width="28.23%">          <p><span><img height="139.7829906832118" originheight="844" originwidth="1451" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163251.53645250224352238103257607311084:50001231000000:2800:D0A6350EB470ED7768C9C858705E9118E8503C7FD25017DCD88D0CC1D6BE8281.jpg" title="点击放大" width="235.716"></span></p></td>         <td class="cellrowborder" valign="top" width="29.770000000000003%">          <p><span><img height="107.95916057862591" originheight="744" originwidth="1748" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163251.55236299860750790337381980038782:50001231000000:2800:9A0B4CCCE9459442E52676A050936150A2EB02BAAB619EA06A9FAAC67D980E67.jpg" title="点击放大" width="249.88400000000001"></span></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section221874617142">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section221874617142" tips="复制节点链接"></i></h2>          <p><strong>名词解释</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.1" valign="top" width="31.540000000000003%">          <p>概念</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.1.3.1.2" valign="top" width="68.46%">          <p>解释</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="31.540000000000003%">          <p><strong>媒体会话（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession" target="_blank">AVSession</a>）</strong></p></td>         <td class="cellrowborder" valign="top" width="68.46%">          <p>音视频管控服务，用于对系统中所有音视频行为进行统一的管理。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="31.540000000000003%">          <p><strong>投播组件（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-multimedia-avcastpicker" target="_blank">AVCastPicker</a></strong><strong>）</strong></p></td>         <td class="cellrowborder" valign="top" width="68.46%">          <p>系统级的投播组件，可嵌入应用界面的UI组件。当用户点击该组件后，系统将进行设备发现、连接、认证等流程，应用仅需要通过接口获取投播中相关的回调信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="31.540000000000003%">          <p><strong>投播控制器（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller" target="_blank">AVCastController</a></strong><strong>）</strong></p></td>         <td class="cellrowborder" valign="top" width="68.46%">          <p>在投播后，由应用发起的用于控制远端播放的接口，包括播放、暂停、调节音量、设置播放模式、设置播放速度等能力。</p></td>        </tr>             </tbody></table></div>     </div>     <p>投播功能通过AVSession建立设备连接，由AVCastController控制远端播放。详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/distributed-playback-overview#分布式投播交互过程" target="_blank">运作机制</a>。</p>     <p><span><img height="334.20439500000003" originheight="1106" originwidth="2413" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163251.50837590147789024008279227655152:50001231000000:2800:CD14755E3754A3F78A5D0C250036EB93955D7E7656481B79FFABB08E6D055B97.png" title="点击放大" width="729.1725"></span></p>    </div>    <div class="tiledSection">     <h2 id="section1972655317141">模块设计<i class="anchor-icon anchor-icon-link" anchorid="section1972655317141" tips="复制节点链接"></i></h2>          <p>建议应用封装三个模块：</p>     <ul>      <li>VideoPlayerController：应用封装的本地视频控制器，控制本端视频资源的暂停、播放、进度、音量、倍速。</li>      <li>VideoSessionController：应用封装的媒体会话控制器，本端视频播放时用于本应用与播控中心的同步、切换设备发起投播、结束投播。</li>      <li>VideoCastController：应用封装的投播视频控制器，控制远端设备视频资源的暂停、播放、进度、音量、倍速。</li>     </ul>    </div>    <p>完成投播功能，建议参考如下流程接入，其中本端视频显示和控制可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-components-video-player" target="_blank">视频播放组件</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-playback" target="_blank">使用AVPlayer播放视频(ArkTS)</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-ndk-avplayer-for-video-playback" target="_blank">使用AVPlayer播放视频(C/C++)</a>等视频实现方案根据功能诉求自行实现，本文从接入播控中心进行介绍。</p>    <p><span><img height="222.281969" originheight="536" originwidth="1650" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163251.01235502241811100908618753782045:50001231000000:2800:E5B88A3AE115E07951792B2EEB57C56041123AC1DC065703CE5ABE8BCF5F8743.png" title="点击放大" width="684.2850000000001"></span></p>    <div class="tiledSection">     <h2 id="section198061041155312">接入播控中心<i class="anchor-icon anchor-icon-link" anchorid="section198061041155312" tips="复制节点链接"></i></h2>          <p>投播功能依赖于播控中心，因此必须接入播控中心才能实现投播功能。播控中心不仅能够控制本端设备的播放，还能控制远端设备的播放。本章节将简要介绍应用接入播控中心的开发流程。</p>     <p></p>     <p><span><img height="547.1487" originheight="1026" originwidth="496" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163251.62015096042238725399728732557227:50001231000000:2800:3CDF3B43976C72C1A868CB23D5CEC9FC77CF7621575B28701142B0F357DACF70.gif" title="点击放大" width="266"></span></p>    </div>    <div class="tiledSection">     <h3 id="section15774202314195" class="firsth2">媒体会话初始化<i class="anchor-icon anchor-icon-link" anchorid="section15774202314195" tips="复制节点链接"></i></h3>          <ol>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-f#avsessioncreateavsession10" target="_blank">avSession.createAVSession()</a>创建avsession，类型为video。</li>      <li>设置后台长时播放任务，确保应用退至后台后播放不会停止。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setlaunchability10" target="_blank">videoSession.setLaunchAbility()</a>设置一个WantAgent用于拉起会话的Ability。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#activate10" target="_blank">videoSession.activate()</a>激活videoSession。</li>     </ol>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L39-L56" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">videoSession</span> = <span class="hljs-variable">await</span> <span class="hljs-variable">avSession</span>.<span class="hljs-title function_">createAVSession</span>(<span class="hljs-variable">context</span>, <span class="hljs-string">'VIDEO_SESSION'</span>, <span class="hljs-string">'video'</span>);</li><li><span class="hljs-comment">// Set up a background task.</span></li><li><span class="hljs-variable">BackgroundTaskManager</span>.<span class="hljs-title function_">startContinuousTask</span>(<span class="hljs-variable">context</span>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">wantAgentInfo</span>: <span class="hljs-title class_">wantAgent</span>.<span class="hljs-title class_">WantAgentInfo</span> = {</li><li>  <span class="hljs-variable">wants</span>: [</li><li>    {</li><li>      <span class="hljs-variable">bundleName</span>: <span class="hljs-title class_">context</span>.<span class="hljs-title class_">abilityInfo</span>.<span class="hljs-title class_">bundleName</span>,</li><li>      <span class="hljs-variable">abilityName</span>: <span class="hljs-title class_">context</span>.<span class="hljs-title class_">abilityInfo</span>.<span class="hljs-title class_">name</span></li><li>    }</li><li>  ],</li><li>  <span class="hljs-variable">operationType</span>: <span class="hljs-title class_">wantAgent</span>.<span class="hljs-title class_">OperationType</span>.<span class="hljs-title class_">START_ABILITIES</span>,</li><li>  <span class="hljs-variable">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-variable">wantAgentFlags</span>: [<span class="hljs-variable">wantAgent</span>.<span class="hljs-variable">WantAgentFlags</span>.<span class="hljs-variable">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">agent</span> = <span class="hljs-variable">wantAgent</span>.<span class="hljs-title function_">getWantAgent</span>(<span class="hljs-variable">wantAgentInfo</span>);</li><li><span class="hljs-variable">videoSession</span>.<span class="hljs-title function_">setLaunchAbility</span>(<span class="hljs-variable">agent</span>);</li><li><span class="hljs-variable">videoSession</span>.<span class="hljs-title function_">activate</span>();</li><li><span class="hljs-keyword">return</span> <span class="hljs-variable">new</span> <span class="hljs-title function_">VideoSessionController</span>(<span class="hljs-variable">videoSession</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L39-L56" target="_blank">VideoSessionController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section1937135313212">设置媒体会话元数据<i class="anchor-icon anchor-icon-link" anchorid="section1937135313212" tips="复制节点链接"></i></h3>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setavmetadata10" target="_blank">videoSession.setAVMetadata()</a>上传元数据，从而在播控中心界面进行展示。如媒体ID（assetId）、标题（title）、播控中心显示的图片（mediaImage）、媒体时长（duration）。</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L68-L75" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">metadata</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVMetadata</span> = {</li><li>  <span class="hljs-variable">assetId</span>: `${<span class="hljs-variable">curSource</span>.<span class="hljs-variable">index</span>}`,</li><li>  <span class="hljs-variable">title</span>: <span class="hljs-title class_">curSource</span>.<span class="hljs-title class_">name</span>,</li><li>  <span class="hljs-variable">mediaImage</span>: <span class="hljs-title class_">headPixel</span>,</li><li>  <span class="hljs-variable">duration</span>: <span class="hljs-title class_">duration</span>,</li><li>  <span class="hljs-variable">filter</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">ProtocolType</span>.<span class="hljs-title class_">TYPE_DLNA</span> | <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">ProtocolType</span>.<span class="hljs-title class_">TYPE_CAST_PLUS_STREAM</span></li><li>};</li><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">videoSession</span>.<span class="hljs-title function_">setAVMetadata</span>(<span class="hljs-variable">metadata</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L68-L75" target="_blank">VideoSessionController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section214223623512">本应用播放状态同步到播控中心<i class="anchor-icon anchor-icon-link" anchorid="section214223623512" tips="复制节点链接"></i></h3>          <p>当设置元数据后，播控中心会显示进度条并自动计算播放进度，但播放状态变更（如暂停、播放、进度跳转）、音量调节和倍速设置等操作不会自动同步到播控中心。开发者需要主动监听本地的播放状态变化（包括进度跳转、倍速调整、音量修改等事件），并主动将这些状态同步到播控中心，以确保两端状态一致。</p>     <p>以下是videoSession状态更新的示例代码，特别注意的是，在更新进度状态时，需要传入当前时间戳updateTime和视频播放的时间进度elapsedTime。</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L103-L106" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">videoSession</span>.<span class="hljs-title function_">setAVPlaybackState</span>({</li><li>  <span class="hljs-variable">state</span>: <span class="hljs-title class_">state</span> === <span class="hljs-string">'playing'</span> ? <span class="hljs-variable">avSession</span>.<span class="hljs-variable">PlaybackState</span>.<span class="hljs-variable">PLAYBACK_STATE_PLAY</span> :</li><li>  <span class="hljs-variable">avSession</span>.<span class="hljs-variable">PlaybackState</span>.<span class="hljs-variable">PLAYBACK_STATE_PAUSE</span>,</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L103-L106" target="_blank">VideoSessionController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section537628143614">播控中心控制应用播放<i class="anchor-icon anchor-icon-link" anchorid="section537628143614" tips="复制节点链接"></i></h3>          <p>当用户在播控中心进行操作（如播放、暂停、停止、进度跳转、快进、快退等）时，这些操作不会自动同步到应用端，开发者需要主动通过avCastController.on('controlCommand')监听这些事件，并在回调函数中主动更新应用播放器的状态以保持同步，例如在收到播放指令时调用本地播放器的play()方法，在收到跳转指令时调整播放进度等，确保播控中心与应用端的操作状态完全一致。</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L144-L145" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.videoSession.<span class="hljs-keyword">on</span>(<span class="hljs-string">'play'</span>, () =&gt; avPlayerController.setAVPlayerPlaying());</li><li><span class="hljs-keyword">this</span>.videoSession.<span class="hljs-keyword">on</span>(<span class="hljs-string">'pause'</span>, () =&gt; avPlayerController.setAVPlayerPause());</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoSessionController.ets#L144-L145" target="_blank">VideoSessionController.ets</a></div></div></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>这里注册的交互监听所有on()事件建议在退出播放页时通过videoSession.off()事件销毁。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section152612403284">投播基础功能<i class="anchor-icon anchor-icon-link" anchorid="section152612403284" tips="复制节点链接"></i></h2>          <p>为确保投播功能正常使用，应用在发起投播前需要完成播控中心<a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section15774202314195">初始化</a>。如未完成此关键步骤，则导致投播功能不可用。</p>    </div>    <div class="tiledSection">     <h3 id="section162691951162814" class="firsth2">创建投播<i class="anchor-icon anchor-icon-link" anchorid="section162691951162814" tips="复制节点链接"></i></h3>          <p>在完成创建投播后，远端设备即可正常播放视频，本端会停止播放并页面跳转。</p>     <p>      </p><div class="video-box" style="width: 667.379px; height: 375.401px;"><div id="wise_player_1" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.84898028431648012065801403271862:50001231000000:2800:696B6912171DCAE740BC14B2ECE951B445314D771F835245C29D50E5876CF377.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_1-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.84898028431648012065801403271862:50001231000000:2800:696B6912171DCAE740BC14B2ECE951B445314D771F835245C29D50E5876CF377.mp4" id="wise_player_1_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.84898028431648012065801403271862:50001231000000:2800:696B6912171DCAE740BC14B2ECE951B445314D771F835245C29D50E5876CF377.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-1512"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-1513"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:13"><div class="vjs-load-progress" style="width: 5.77%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">5.77%</span></span><div data-start="0" data-end="0.794" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:13</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_1_component_1697">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_1_component_1697"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_1_component_1804_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_1_component_1804_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_1_component_1810_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_1_component_1810_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_1_component_1810">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_1_component_1810" for="vjs_select_1836" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810" id="vjs_select_1836"><option id="captions-foreground-color-wise_player_1_component_1810-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-White">White</option><option id="captions-foreground-color-wise_player_1_component_1810-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-Black">Black</option><option id="captions-foreground-color-wise_player_1_component_1810-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-Red">Red</option><option id="captions-foreground-color-wise_player_1_component_1810-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-Green">Green</option><option id="captions-foreground-color-wise_player_1_component_1810-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-Blue">Blue</option><option id="captions-foreground-color-wise_player_1_component_1810-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_1_component_1810-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_1_component_1810-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810 captions-foreground-color-wise_player_1_component_1810-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_1_component_1810" for="vjs_select_1837" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-opacity-wise_player_1_component_1810" id="vjs_select_1837"><option id="captions-foreground-opacity-wise_player_1_component_1810-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-opacity-wise_player_1_component_1810 captions-foreground-opacity-wise_player_1_component_1810-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_1_component_1810-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_1_component_1810 captions-foreground-opacity-wise_player_1_component_1810 captions-foreground-opacity-wise_player_1_component_1810-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_1_component_1810">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_1_component_1810" for="vjs_select_1838" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810" id="vjs_select_1838"><option id="captions-background-color-wise_player_1_component_1810-Black" value="#000" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-Black">Black</option><option id="captions-background-color-wise_player_1_component_1810-White" value="#FFF" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-White">White</option><option id="captions-background-color-wise_player_1_component_1810-Red" value="#F00" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-Red">Red</option><option id="captions-background-color-wise_player_1_component_1810-Green" value="#0F0" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-Green">Green</option><option id="captions-background-color-wise_player_1_component_1810-Blue" value="#00F" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-Blue">Blue</option><option id="captions-background-color-wise_player_1_component_1810-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-Yellow">Yellow</option><option id="captions-background-color-wise_player_1_component_1810-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-Magenta">Magenta</option><option id="captions-background-color-wise_player_1_component_1810-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810 captions-background-color-wise_player_1_component_1810-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_1_component_1810" for="vjs_select_1839" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-opacity-wise_player_1_component_1810" id="vjs_select_1839"><option id="captions-background-opacity-wise_player_1_component_1810-Opaque" value="1" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-opacity-wise_player_1_component_1810 captions-background-opacity-wise_player_1_component_1810-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_1_component_1810-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-opacity-wise_player_1_component_1810 captions-background-opacity-wise_player_1_component_1810-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_1_component_1810-Transparent" value="0" aria-labelledby="captions-background-wise_player_1_component_1810 captions-background-opacity-wise_player_1_component_1810 captions-background-opacity-wise_player_1_component_1810-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_1_component_1810">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_1_component_1810" for="vjs_select_1840" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810" id="vjs_select_1840"><option id="captions-window-color-wise_player_1_component_1810-Black" value="#000" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-Black">Black</option><option id="captions-window-color-wise_player_1_component_1810-White" value="#FFF" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-White">White</option><option id="captions-window-color-wise_player_1_component_1810-Red" value="#F00" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-Red">Red</option><option id="captions-window-color-wise_player_1_component_1810-Green" value="#0F0" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-Green">Green</option><option id="captions-window-color-wise_player_1_component_1810-Blue" value="#00F" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-Blue">Blue</option><option id="captions-window-color-wise_player_1_component_1810-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-Yellow">Yellow</option><option id="captions-window-color-wise_player_1_component_1810-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-Magenta">Magenta</option><option id="captions-window-color-wise_player_1_component_1810-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810 captions-window-color-wise_player_1_component_1810-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_1_component_1810" for="vjs_select_1841" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-opacity-wise_player_1_component_1810" id="vjs_select_1841"><option id="captions-window-opacity-wise_player_1_component_1810-Transparent" value="0" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-opacity-wise_player_1_component_1810 captions-window-opacity-wise_player_1_component_1810-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_1_component_1810-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-opacity-wise_player_1_component_1810 captions-window-opacity-wise_player_1_component_1810-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_1_component_1810-Opaque" value="1" aria-labelledby="captions-window-wise_player_1_component_1810 captions-window-opacity-wise_player_1_component_1810 captions-window-opacity-wise_player_1_component_1810-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_1_component_1810">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_1_component_1810" id="vjs_select_1842"><option id="captions-font-size-wise_player_1_component_1810-50" value="0.50" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-50">50%</option><option id="captions-font-size-wise_player_1_component_1810-75" value="0.75" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-75">75%</option><option id="captions-font-size-wise_player_1_component_1810-100" value="1.00" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-100">100%</option><option id="captions-font-size-wise_player_1_component_1810-125" value="1.25" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-125">125%</option><option id="captions-font-size-wise_player_1_component_1810-150" value="1.50" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-150">150%</option><option id="captions-font-size-wise_player_1_component_1810-175" value="1.75" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-175">175%</option><option id="captions-font-size-wise_player_1_component_1810-200" value="2.00" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-200">200%</option><option id="captions-font-size-wise_player_1_component_1810-300" value="3.00" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-300">300%</option><option id="captions-font-size-wise_player_1_component_1810-400" value="4.00" aria-labelledby="captions-font-size-wise_player_1_component_1810 captions-font-size-wise_player_1_component_1810-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_1_component_1810">Text Edge Style</legend><select aria-labelledby="wise_player_1_component_1810" id="vjs_select_1843"><option id="wise_player_1_component_1810-None" value="none" aria-labelledby="wise_player_1_component_1810 wise_player_1_component_1810-None">None</option><option id="wise_player_1_component_1810-Raised" value="raised" aria-labelledby="wise_player_1_component_1810 wise_player_1_component_1810-Raised">Raised</option><option id="wise_player_1_component_1810-Depressed" value="depressed" aria-labelledby="wise_player_1_component_1810 wise_player_1_component_1810-Depressed">Depressed</option><option id="wise_player_1_component_1810-Uniform" value="uniform" aria-labelledby="wise_player_1_component_1810 wise_player_1_component_1810-Uniform">Uniform</option><option id="wise_player_1_component_1810-Dropshadow" value="dropshadow" aria-labelledby="wise_player_1_component_1810 wise_player_1_component_1810-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_1_component_1810">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_1_component_1810" id="vjs_select_1844"><option id="captions-font-family-wise_player_1_component_1810-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_1_component_1810 captions-font-family-wise_player_1_component_1810-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_1_component_1810-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_1_component_1810 captions-font-family-wise_player_1_component_1810-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_1_component_1810-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_1_component_1810 captions-font-family-wise_player_1_component_1810-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_1_component_1810-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_1_component_1810 captions-font-family-wise_player_1_component_1810-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_1_component_1810-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_1_component_1810 captions-font-family-wise_player_1_component_1810-Casual">Casual</option><option id="captions-font-family-wise_player_1_component_1810-Script" value="script" aria-labelledby="captions-font-family-wise_player_1_component_1810 captions-font-family-wise_player_1_component_1810-Script">Script</option><option id="captions-font-family-wise_player_1_component_1810-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_1_component_1810 captions-font-family-wise_player_1_component_1810-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="1" class="wiseplayershaw"></div></div></div><p></p>     <p>创建投播时需要setExtras()告知系统可投播、绘制AVCastPicker、videosession监听设备改变事件，用户点击AVCastPicker组件后会弹出设备选择半模态，在选择设备后，应用需要设置投播媒体信息，调用prepare、start启动播放。时序图如下，具体实现见开发步骤：</p>     <p><strong>时序图</strong></p>     <p><span><img height="444.60570000000007" originheight="1110" originwidth="1658" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163252.72039697591552999283322676881040:50001231000000:2800:8ED9D6638728F7600F80F27634B0FF7B30B1988E74363CCC522549AA8895C016.png" title="点击放大" width="665"></span></p>     <p><strong>开发步骤</strong></p>     <ol>      <li>videosession创建后，创建投播前，声明当前应用支持投播。        <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L150-L152" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">await</span> videoSession.setExtras({</li><li>  <span class="hljs-string">'requireAbilityList'</span>: [<span class="hljs-string">'url-cast'</span>]</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L150-L152" target="_blank">VideoPlayingView.ets</a></div></div></div></div></li>      <li>绘制AVCastPicker，AVCastPicker是投播组件，点击后系统会弹出设备选择半模态。        <p><span><img height="533.948849" originheight="920" originwidth="669" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163252.93599773208207857436409366407965:50001231000000:2800:0E7DA4C2B2E9AECF91FEB38B5AB4DF89A57C989507C00512D8F8F2A8E311AB6E.jpg" title="点击放大" width="390.96015"></span></p>       <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L279-L295" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">AVCastPicker</span>({</li><li>  <span class="hljs-variable">normalColor</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-title class_">White</span>,</li><li>  <span class="hljs-variable">pickerStyle</span>: <span class="hljs-title class_">AVCastPickerStyle</span>.<span class="hljs-title class_">STYLE_PANEL</span>,</li><li>  <span class="hljs-variable">sessionType</span>: <span class="hljs-string">'video'</span>,</li><li>  <span class="hljs-comment">// ...</span></li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L279-L295" target="_blank">VideoPlayingView.ets</a></div></div></div></div></li>      <li>当用户选择设备并设备切换成功后触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#onoutputdevicechange10" target="_blank">videoSession.on('outputDeviceChange')</a>事件，应用可选择停止本地播放并跳转到遥控页面（或保持本端继续播放），此时播控中心会自动接管远端设备的播放控制，开发者无需额外设置。        <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L153-L188" data-highlighted="yes"><ol class="linenums"><li>videoSession.<span class="hljs-title function_">on</span>(<span class="hljs-string">'outputDeviceChange'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">connectState</span>: avSession.<span class="hljs-property">ConnectionState</span>,</li><li>  <span class="hljs-attr">device</span>: avSession.<span class="hljs-property">OutputDeviceInfo</span>) =&gt; {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`device <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(device)}</span>`</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`connectState <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(connectState)}</span>`</span>);</li><li>  <span class="hljs-comment">// The linked device is a remote device.</span></li><li>  <span class="hljs-keyword">if</span> (device.<span class="hljs-property">devices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">castCategory</span> === avSession.<span class="hljs-property">AVCastCategory</span>.<span class="hljs-property">CATEGORY_REMOTE</span> &amp;&amp;</li><li>    connectState === avSession.<span class="hljs-property">ConnectionState</span>.<span class="hljs-property">STATE_CONNECTED</span>) {</li><li>    <span class="hljs-comment">// Page jump</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">remoteControlPathStack</span>.<span class="hljs-title function_">replacePath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'detail'</span>, <span class="hljs-attr">param</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTime</span> });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">castingList</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">videoType</span>);</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">releaseAVPlayer</span>();</li><li>    <span class="hljs-comment">// The linked device is the local device.</span></li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (device.<span class="hljs-property">devices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">castCategory</span> === avSession.<span class="hljs-property">AVCastCategory</span>.<span class="hljs-property">CATEGORY_REMOTE</span> &amp;&amp;</li><li>    connectState === avSession.<span class="hljs-property">ConnectionState</span>.<span class="hljs-property">STATE_DISCONNECTED</span>) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">avCastController</span>) {</li><li>      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">avCastController</span>.<span class="hljs-title function_">releaseAVCast</span>();</li><li>      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">avSessionController</span>!.<span class="hljs-title function_">stopCasting</span>();</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">avCastController</span> = <span class="hljs-literal">undefined</span>;</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L153-L188" target="_blank">VideoPlayingView.ets</a></div></div></div></div></li>      <li>设置avCastController资源，完成以下三步后远端设备即可投播视频，以播放网络资源为例。        <ol>        <li>构建<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10" target="_blank">avSession.AVQueueItem</a>。需要传入assetId（播放列表媒体ID，应用自定义）、title（媒体标题）、artist（媒体专辑作者）、mediaUri（媒体URI）、mediaType（媒体类型）、mediaImage（媒体图片像素数据）、duration（媒体播放时长）。</li>        <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#prepare10-1" target="_blank">avCastController.prepare(playItem)</a>准备播放媒体资源，即进行播放资源的加载和缓冲。</li>        <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#start10-1" target="_blank">avCastController.start(playItem)</a>启动播放媒体资源。</li>       </ol>       <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L55-L70" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">playItem</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVQueueItem</span> = {</li><li>  <span class="hljs-variable">itemId</span>: <span class="hljs-title class_">videoIndex</span>,</li><li>  <span class="hljs-variable">description</span>: {</li><li>    <span class="hljs-variable">assetId</span>: <span class="hljs-string">'VIDEO-'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title class_">stringify</span>(<span class="hljs-title class_">videoIndex</span>),</li><li>    <span class="hljs-variable">title</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">name</span>,</li><li>    <span class="hljs-variable">artist</span>: <span class="hljs-string">'ExampleArtist'</span>,</li><li>    <span class="hljs-variable">mediaUri</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">url</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">string</span>,</li><li>    <span class="hljs-variable">mediaType</span>: <span class="hljs-string">'VIDEO'</span>,</li><li>    <span class="hljs-variable">mediaImage</span>: <span class="hljs-title class_">imgPixel</span>,</li><li>    <span class="hljs-variable">mediaSize</span>: <span class="hljs-number">1000</span>,</li><li>    <span class="hljs-variable">startPosition</span>: <span class="hljs-title class_">startPosition</span>,</li><li>    <span class="hljs-variable">duration</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">duration</span></li><li>  }</li><li>};</li><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">prepare</span>(<span class="hljs-variable">playItem</span>);</li><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">start</span>(<span class="hljs-variable">playItem</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L55-L70" target="_blank">VideoCastController.ets</a></div></div></div></div>       <p>若需要投播本地资源，需要打开沙箱文件，并在fdSrc中传入文件fd实现。</p>       <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L75-L93" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">file</span> = <span class="hljs-variable">await</span> <span class="hljs-variable">fileIo</span>.<span class="hljs-keyword">open</span>(<span class="hljs-variable">context</span>.<span class="hljs-variable">filesDir</span> + <span class="hljs-string">'/'</span> + <span class="hljs-keyword">this</span>.<span class="hljs-variable">videoDataArray</span>[<span class="hljs-variable">videoIndex</span>].<span class="hljs-variable">url</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">avFileDescriptor</span>: <span class="hljs-title class_">media</span>.<span class="hljs-title class_">AVFileDescriptor</span> = { <span class="hljs-variable">fd</span>: <span class="hljs-title class_">file</span>.<span class="hljs-title class_">fd</span> };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">playItem</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVQueueItem</span> = {</li><li>    <span class="hljs-variable">itemId</span>: <span class="hljs-title class_">videoIndex</span>,</li><li>    <span class="hljs-variable">description</span>: {</li><li>      <span class="hljs-variable">assetId</span>: <span class="hljs-string">'VIDEO-'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title class_">stringify</span>(<span class="hljs-title class_">videoIndex</span>),</li><li>      <span class="hljs-variable">title</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">name</span>,</li><li>      <span class="hljs-variable">artist</span>: <span class="hljs-string">'ExampleArtist'</span>,</li><li>      <span class="hljs-variable">mediaType</span>: <span class="hljs-string">'VIDEO'</span>,</li><li>      <span class="hljs-variable">mediaImage</span>: <span class="hljs-title class_">imgPixel</span>,</li><li>      <span class="hljs-variable">mediaSize</span>: <span class="hljs-number">1000</span>,</li><li>      <span class="hljs-variable">fdSrc</span>: <span class="hljs-title class_">avFileDescriptor</span>,</li><li>      <span class="hljs-variable">startPosition</span>: <span class="hljs-title class_">startPosition</span>,</li><li>      <span class="hljs-variable">duration</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">duration</span></li><li>    }</li><li>  };</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">prepare</span>(<span class="hljs-variable">playItem</span>);</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">start</span>(<span class="hljs-variable">playItem</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L75-L93" target="_blank">VideoCastController.ets</a></div></div></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section6237193134112">设备切换<i class="anchor-icon anchor-icon-link" anchorid="section6237193134112" tips="复制节点链接"></i></h3>          <p>      </p><div class="video-box" style="width: 732.591px; height: 412.082px;"><div id="wise_player_2" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.65902015308508163651975445911585:50001231000000:2800:2B2E3162019CBCF7F77AD17B58A0361704BBDFB22845967498345B4A6D15350D.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_2-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.65902015308508163651975445911585:50001231000000:2800:2B2E3162019CBCF7F77AD17B58A0361704BBDFB22845967498345B4A6D15350D.mp4" id="wise_player_2_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163252.65902015308508163651975445911585:50001231000000:2800:2B2E3162019CBCF7F77AD17B58A0361704BBDFB22845967498345B4A6D15350D.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-27"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-28"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:09"><div class="vjs-load-progress" style="width: 7.83%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">7.83%</span></span><div data-start="0" data-end="0.726" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:09</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_2_component_225">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_2_component_225"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_2_component_332_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_2_component_332_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_2_component_338_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_2_component_338_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_2_component_338">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_2_component_338" for="vjs_select_364" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338" id="vjs_select_364"><option id="captions-foreground-color-wise_player_2_component_338-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-White">White</option><option id="captions-foreground-color-wise_player_2_component_338-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Black">Black</option><option id="captions-foreground-color-wise_player_2_component_338-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Red">Red</option><option id="captions-foreground-color-wise_player_2_component_338-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Green">Green</option><option id="captions-foreground-color-wise_player_2_component_338-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Blue">Blue</option><option id="captions-foreground-color-wise_player_2_component_338-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_2_component_338-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_2_component_338-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_2_component_338" for="vjs_select_365" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338" id="vjs_select_365"><option id="captions-foreground-opacity-wise_player_2_component_338-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_2_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_2_component_338">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_2_component_338" for="vjs_select_366" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338" id="vjs_select_366"><option id="captions-background-color-wise_player_2_component_338-Black" value="#000" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Black">Black</option><option id="captions-background-color-wise_player_2_component_338-White" value="#FFF" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-White">White</option><option id="captions-background-color-wise_player_2_component_338-Red" value="#F00" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Red">Red</option><option id="captions-background-color-wise_player_2_component_338-Green" value="#0F0" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Green">Green</option><option id="captions-background-color-wise_player_2_component_338-Blue" value="#00F" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Blue">Blue</option><option id="captions-background-color-wise_player_2_component_338-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Yellow">Yellow</option><option id="captions-background-color-wise_player_2_component_338-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Magenta">Magenta</option><option id="captions-background-color-wise_player_2_component_338-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_2_component_338" for="vjs_select_367" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338" id="vjs_select_367"><option id="captions-background-opacity-wise_player_2_component_338-Opaque" value="1" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_2_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_2_component_338-Transparent" value="0" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_2_component_338">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_2_component_338" for="vjs_select_368" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338" id="vjs_select_368"><option id="captions-window-color-wise_player_2_component_338-Black" value="#000" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Black">Black</option><option id="captions-window-color-wise_player_2_component_338-White" value="#FFF" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-White">White</option><option id="captions-window-color-wise_player_2_component_338-Red" value="#F00" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Red">Red</option><option id="captions-window-color-wise_player_2_component_338-Green" value="#0F0" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Green">Green</option><option id="captions-window-color-wise_player_2_component_338-Blue" value="#00F" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Blue">Blue</option><option id="captions-window-color-wise_player_2_component_338-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Yellow">Yellow</option><option id="captions-window-color-wise_player_2_component_338-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Magenta">Magenta</option><option id="captions-window-color-wise_player_2_component_338-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_2_component_338" for="vjs_select_369" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338" id="vjs_select_369"><option id="captions-window-opacity-wise_player_2_component_338-Transparent" value="0" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_2_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_2_component_338-Opaque" value="1" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_2_component_338">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_2_component_338" id="vjs_select_370"><option id="captions-font-size-wise_player_2_component_338-50" value="0.50" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-50">50%</option><option id="captions-font-size-wise_player_2_component_338-75" value="0.75" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-75">75%</option><option id="captions-font-size-wise_player_2_component_338-100" value="1.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-100">100%</option><option id="captions-font-size-wise_player_2_component_338-125" value="1.25" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-125">125%</option><option id="captions-font-size-wise_player_2_component_338-150" value="1.50" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-150">150%</option><option id="captions-font-size-wise_player_2_component_338-175" value="1.75" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-175">175%</option><option id="captions-font-size-wise_player_2_component_338-200" value="2.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-200">200%</option><option id="captions-font-size-wise_player_2_component_338-300" value="3.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-300">300%</option><option id="captions-font-size-wise_player_2_component_338-400" value="4.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_2_component_338">Text Edge Style</legend><select aria-labelledby="wise_player_2_component_338" id="vjs_select_371"><option id="wise_player_2_component_338-None" value="none" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-None">None</option><option id="wise_player_2_component_338-Raised" value="raised" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Raised">Raised</option><option id="wise_player_2_component_338-Depressed" value="depressed" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Depressed">Depressed</option><option id="wise_player_2_component_338-Uniform" value="uniform" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Uniform">Uniform</option><option id="wise_player_2_component_338-Dropshadow" value="dropshadow" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_2_component_338">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_2_component_338" id="vjs_select_372"><option id="captions-font-family-wise_player_2_component_338-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_2_component_338-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_2_component_338-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_2_component_338-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_2_component_338-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-Casual">Casual</option><option id="captions-font-family-wise_player_2_component_338-Script" value="script" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-Script">Script</option><option id="captions-font-family-wise_player_2_component_338-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="2" class="wiseplayershaw"></div></div></div><p></p>     <p>设备切换依赖于videosession监听设备改变事件，可以通过stopCasting终止投播切换设备，也可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastpickerhelper#select14" target="_blank">avCastPicker.select()</a>进行切换。均会触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#onoutputdevicechange10" target="_blank">videoSession.on('outputDeviceChange')</a>事件，当切换到远端设备播放，本端应该跳转到遥控器界面，当切换回本端设备播放，应当停止投播并跳转到视频播放页面。应用时序图如下，具体实现见开发步骤。</p>     <p><strong>时序图</strong></p>     <p><span><img height="489.83900000000006" originheight="1197" originwidth="1950" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163252.18334209466442512752679002726570:50001231000000:2800:FC8B75F99E2EA3AE2C1240CB59E0561AECD7C63DE77E3CB85FA5BE0C96BE51D8.png" title="点击放大" width="798"></span></p>     <p><strong>开发步骤</strong></p>     <p>可以直接使用AVCastPicker切换设备，系统会自动弹出设备选择半模态弹窗，用户可直接选择目标设备完成切换。开发者无需额外处理弹窗逻辑。也可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastpickerhelper#select14" target="_blank">avCastPicker.select()</a> 接口切换设备。</p>     <p>当设备切换时，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsessioncontroller#onoutputdevicechange10" target="_blank">videoSession.on('outputDeviceChange')</a>事件将被触发，开发者可在回调中处理设备切换逻辑：若切换至远端设备则跳转至遥控页面，若切回本端设备则恢复本地播放，实现播放控制的无缝切换。</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L156-L191" data-highlighted="yes"><ol class="linenums"><li>videoSession.on(<span class="hljs-string">'outputDeviceChange'</span>, async (connectState: avSession.ConnectionState,</li><li>  device: avSession.OutputDeviceInfo) =&gt; {</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, `device ${JSON.stringify(device)}`);</li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, `connectState ${JSON.stringify(connectState)}`);</li><li>  <span class="hljs-comment">// The linked device is a remote device.</span></li><li>  <span class="hljs-keyword">if</span> (device.devices[<span class="hljs-number">0</span>].castCategory === avSession.AVCastCategory.CATEGORY_REMOTE &amp;&amp;</li><li>    connectState === avSession.ConnectionState.STATE_CONNECTED) {</li><li>    <span class="hljs-comment">// Page jump</span></li><li>    <span class="hljs-keyword">this</span>.remoteControlPathStack.replacePath({ name: <span class="hljs-string">'detail'</span>, param: <span class="hljs-keyword">this</span>.currentTime });</li><li>    <span class="hljs-keyword">this</span>.castingList.push(<span class="hljs-keyword">this</span>.videoType);</li><li>    await <span class="hljs-keyword">this</span>.releaseAVPlayer();</li><li>    <span class="hljs-comment">// The linked device is the local device.</span></li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (device.devices[<span class="hljs-number">0</span>].castCategory === avSession.AVCastCategory.CATEGORY_REMOTE &amp;&amp;</li><li>    connectState === avSession.ConnectionState.STATE_DISCONNECTED) {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.avCastController) {</li><li>      await <span class="hljs-keyword">this</span>.avCastController.releaseAVCast();</li><li>      await <span class="hljs-keyword">this</span>.avSessionController!.stopCasting();</li><li>      <span class="hljs-keyword">this</span>.avCastController = undefined;</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (device.devices[<span class="hljs-number">0</span>].castCategory === avSession.AVCastCategory.CATEGORY_LOCAL) {</li><li>    <span class="hljs-keyword">this</span>.remoteControlPathStack.clear();</li><li>    let videoType = <span class="hljs-keyword">this</span>.castingList[<span class="hljs-number">0</span>];</li><li>    <span class="hljs-keyword">this</span>.castingList = [];</li><li>    let videoPlayParam = new VideoPlayParam(videoType, <span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.avplayerContinueIndex);</li><li>    <span class="hljs-keyword">this</span>.videoPlayPathStack.replacePath({ name: <span class="hljs-string">'detail'</span>, param: videoPlayParam });</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.avCastController) {</li><li>      await <span class="hljs-keyword">this</span>.avCastController.releaseAVCast();</li><li>      await <span class="hljs-keyword">this</span>.avSessionController!.stopCasting();</li><li>      <span class="hljs-keyword">this</span>.avCastController = undefined;</li><li>    }</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L156-L191" target="_blank">VideoPlayingView.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section13876193232918">远端视频状态回传本端<i class="anchor-icon anchor-icon-link" anchorid="section13876193232918" tips="复制节点链接"></i></h3>          <p>      </p><div class="video-box" style="width: 596.591px; height: 335.582px;"><div id="wise_player_3" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163253.15732891837825302059059336396221:50001231000000:2800:E73A7F5B02F521B5E919EB8A4565139E602E5098F2629D42315A447DC8AF92DD.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_3-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163253.15732891837825302059059336396221:50001231000000:2800:E73A7F5B02F521B5E919EB8A4565139E602E5098F2629D42315A447DC8AF92DD.mp4" id="wise_player_3_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163253.15732891837825302059059336396221:50001231000000:2800:E73A7F5B02F521B5E919EB8A4565139E602E5098F2629D42315A447DC8AF92DD.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-408"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-409"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:09"><div class="vjs-load-progress" style="width: 11.29%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">11.29%</span></span><div data-start="0" data-end="1.031" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:09</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_3_component_593">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_3_component_593"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_3_component_700_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_3_component_700_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_3_component_706_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_3_component_706_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_3_component_706">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_3_component_706" for="vjs_select_732" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706" id="vjs_select_732"><option id="captions-foreground-color-wise_player_3_component_706-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-White">White</option><option id="captions-foreground-color-wise_player_3_component_706-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Black">Black</option><option id="captions-foreground-color-wise_player_3_component_706-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Red">Red</option><option id="captions-foreground-color-wise_player_3_component_706-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Green">Green</option><option id="captions-foreground-color-wise_player_3_component_706-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Blue">Blue</option><option id="captions-foreground-color-wise_player_3_component_706-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_3_component_706-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_3_component_706-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_3_component_706" for="vjs_select_733" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706" id="vjs_select_733"><option id="captions-foreground-opacity-wise_player_3_component_706-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_3_component_706-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_3_component_706">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_3_component_706" for="vjs_select_734" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706" id="vjs_select_734"><option id="captions-background-color-wise_player_3_component_706-Black" value="#000" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Black">Black</option><option id="captions-background-color-wise_player_3_component_706-White" value="#FFF" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-White">White</option><option id="captions-background-color-wise_player_3_component_706-Red" value="#F00" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Red">Red</option><option id="captions-background-color-wise_player_3_component_706-Green" value="#0F0" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Green">Green</option><option id="captions-background-color-wise_player_3_component_706-Blue" value="#00F" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Blue">Blue</option><option id="captions-background-color-wise_player_3_component_706-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Yellow">Yellow</option><option id="captions-background-color-wise_player_3_component_706-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Magenta">Magenta</option><option id="captions-background-color-wise_player_3_component_706-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_3_component_706" for="vjs_select_735" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706" id="vjs_select_735"><option id="captions-background-opacity-wise_player_3_component_706-Opaque" value="1" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_3_component_706-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_3_component_706-Transparent" value="0" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_3_component_706">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_3_component_706" for="vjs_select_736" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706" id="vjs_select_736"><option id="captions-window-color-wise_player_3_component_706-Black" value="#000" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Black">Black</option><option id="captions-window-color-wise_player_3_component_706-White" value="#FFF" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-White">White</option><option id="captions-window-color-wise_player_3_component_706-Red" value="#F00" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Red">Red</option><option id="captions-window-color-wise_player_3_component_706-Green" value="#0F0" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Green">Green</option><option id="captions-window-color-wise_player_3_component_706-Blue" value="#00F" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Blue">Blue</option><option id="captions-window-color-wise_player_3_component_706-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Yellow">Yellow</option><option id="captions-window-color-wise_player_3_component_706-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Magenta">Magenta</option><option id="captions-window-color-wise_player_3_component_706-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_3_component_706" for="vjs_select_737" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706" id="vjs_select_737"><option id="captions-window-opacity-wise_player_3_component_706-Transparent" value="0" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_3_component_706-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_3_component_706-Opaque" value="1" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_3_component_706">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_3_component_706" id="vjs_select_738"><option id="captions-font-size-wise_player_3_component_706-50" value="0.50" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-50">50%</option><option id="captions-font-size-wise_player_3_component_706-75" value="0.75" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-75">75%</option><option id="captions-font-size-wise_player_3_component_706-100" value="1.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-100">100%</option><option id="captions-font-size-wise_player_3_component_706-125" value="1.25" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-125">125%</option><option id="captions-font-size-wise_player_3_component_706-150" value="1.50" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-150">150%</option><option id="captions-font-size-wise_player_3_component_706-175" value="1.75" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-175">175%</option><option id="captions-font-size-wise_player_3_component_706-200" value="2.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-200">200%</option><option id="captions-font-size-wise_player_3_component_706-300" value="3.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-300">300%</option><option id="captions-font-size-wise_player_3_component_706-400" value="4.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_3_component_706">Text Edge Style</legend><select aria-labelledby="wise_player_3_component_706" id="vjs_select_739"><option id="wise_player_3_component_706-None" value="none" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-None">None</option><option id="wise_player_3_component_706-Raised" value="raised" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Raised">Raised</option><option id="wise_player_3_component_706-Depressed" value="depressed" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Depressed">Depressed</option><option id="wise_player_3_component_706-Uniform" value="uniform" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Uniform">Uniform</option><option id="wise_player_3_component_706-Dropshadow" value="dropshadow" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_3_component_706">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_3_component_706" id="vjs_select_740"><option id="captions-font-family-wise_player_3_component_706-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_3_component_706-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_3_component_706-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_3_component_706-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_3_component_706-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-Casual">Casual</option><option id="captions-font-family-wise_player_3_component_706-Script" value="script" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-Script">Script</option><option id="captions-font-family-wise_player_3_component_706-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="3" class="wiseplayershaw"></div></div></div><p></p>     <p>当视频在远端设备播放时，为了控制远端视频的播放应用需要监听远端视频播放状态并同步显示本端，通过远端设备或本端播控中心控制，都会直接改变远端设备的播放状态，并触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#onplaybackstatechange10" target="_blank">avCastController.on('playbackStateChange')</a>。应用时序图如下，具体实现见开发步骤。</p>     <p><strong>时序图</strong></p>     <p><span><img height="425.6" originheight="1154" originwidth="2157" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163252.55266525485574358905179022419765:50001231000000:2800:B8F0215A3600BB02E017926D4F4665F3DD603FE159C283EA284142CD4AD98FEC.png" title="点击放大" width="798"></span></p>     <p><strong>开发步骤</strong></p>     <p>当需要在本地遥控界面同步显示远端视频的播放状态时，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#onplaybackstatechange10" target="_blank">avCastController.on('playbackStateChange')</a> 监听状态变化，并使用过滤器筛选目标状态。</p>     <p>建议使用@Track修饰器标记这些经常改变的状态变量，以便页面自动响应数据更新。该机制可统一获取播放状态（如播放/暂停）、音量、总时长及倍速等信息，以下代码以获取已播放时长为例：</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L28-L233" data-highlighted="yes"><ol class="linenums"><li>@<span class="hljs-title function_">Observed</span></li><li><span class="hljs-variable">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoCastController</span> {</li><li>  @<span class="hljs-title function_">Track</span> <span class="hljs-variable">state</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">PlaybackState</span> = <span class="hljs-variable">avSession</span>.<span class="hljs-variable">PlaybackState</span>.<span class="hljs-variable">PLAYBACK_STATE_INITIAL</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   * Sets up AV cast playback state change callbacks.</span></li><li><span class="hljs-comment">   * Handles playback completion, position updates, volume changes and errors.</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-title function_">setAVCastCallback</span>() {</li><li>    <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playbackStateChange'</span>, [<span class="hljs-string">'state'</span>], <span class="hljs-variable">async</span> (<span class="hljs-variable">playbackState</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVPlaybackState</span>) =&gt; {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable">playbackState</span>.<span class="hljs-variable">state</span>) {</li><li>        <span class="hljs-keyword">this</span>.<span class="hljs-variable">state</span> = <span class="hljs-variable">playbackState</span>.<span class="hljs-variable">state</span>;</li><li>      }</li><li>    });</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L28-L233" target="_blank">VideoCastController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section1850441982916">本端控制远端设备状态<i class="anchor-icon anchor-icon-link" anchorid="section1850441982916" tips="复制节点链接"></i></h3>          <p>      </p><div class="video-box" style="width: 618.75px; height: 348.052px;"><div id="wise_player_4" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163253.34159623389352309827858013252203:50001231000000:2800:176650D24515034411FE333E8EFFCE05C78D0813475518B52488BDA1F2086A0C.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_4-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163253.34159623389352309827858013252203:50001231000000:2800:176650D24515034411FE333E8EFFCE05C78D0813475518B52488BDA1F2086A0C.mp4" id="wise_player_4_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163253.34159623389352309827858013252203:50001231000000:2800:176650D24515034411FE333E8EFFCE05C78D0813475518B52488BDA1F2086A0C.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-776"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-777"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:07"><div class="vjs-load-progress" style="width: 13.66%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">13.66%</span></span><div data-start="0" data-end="1.056" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:07</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_4_component_961">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_4_component_961"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_4_component_1068_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_4_component_1068_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_4_component_1074_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_4_component_1074_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_4_component_1074">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_4_component_1074" for="vjs_select_1100" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074" id="vjs_select_1100"><option id="captions-foreground-color-wise_player_4_component_1074-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-White">White</option><option id="captions-foreground-color-wise_player_4_component_1074-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-Black">Black</option><option id="captions-foreground-color-wise_player_4_component_1074-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-Red">Red</option><option id="captions-foreground-color-wise_player_4_component_1074-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-Green">Green</option><option id="captions-foreground-color-wise_player_4_component_1074-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-Blue">Blue</option><option id="captions-foreground-color-wise_player_4_component_1074-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_4_component_1074-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_4_component_1074-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074 captions-foreground-color-wise_player_4_component_1074-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_4_component_1074" for="vjs_select_1101" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-opacity-wise_player_4_component_1074" id="vjs_select_1101"><option id="captions-foreground-opacity-wise_player_4_component_1074-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-opacity-wise_player_4_component_1074 captions-foreground-opacity-wise_player_4_component_1074-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_4_component_1074-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_4_component_1074 captions-foreground-opacity-wise_player_4_component_1074 captions-foreground-opacity-wise_player_4_component_1074-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_4_component_1074">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_4_component_1074" for="vjs_select_1102" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074" id="vjs_select_1102"><option id="captions-background-color-wise_player_4_component_1074-Black" value="#000" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-Black">Black</option><option id="captions-background-color-wise_player_4_component_1074-White" value="#FFF" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-White">White</option><option id="captions-background-color-wise_player_4_component_1074-Red" value="#F00" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-Red">Red</option><option id="captions-background-color-wise_player_4_component_1074-Green" value="#0F0" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-Green">Green</option><option id="captions-background-color-wise_player_4_component_1074-Blue" value="#00F" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-Blue">Blue</option><option id="captions-background-color-wise_player_4_component_1074-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-Yellow">Yellow</option><option id="captions-background-color-wise_player_4_component_1074-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-Magenta">Magenta</option><option id="captions-background-color-wise_player_4_component_1074-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074 captions-background-color-wise_player_4_component_1074-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_4_component_1074" for="vjs_select_1103" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-opacity-wise_player_4_component_1074" id="vjs_select_1103"><option id="captions-background-opacity-wise_player_4_component_1074-Opaque" value="1" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-opacity-wise_player_4_component_1074 captions-background-opacity-wise_player_4_component_1074-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_4_component_1074-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-opacity-wise_player_4_component_1074 captions-background-opacity-wise_player_4_component_1074-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_4_component_1074-Transparent" value="0" aria-labelledby="captions-background-wise_player_4_component_1074 captions-background-opacity-wise_player_4_component_1074 captions-background-opacity-wise_player_4_component_1074-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_4_component_1074">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_4_component_1074" for="vjs_select_1104" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074" id="vjs_select_1104"><option id="captions-window-color-wise_player_4_component_1074-Black" value="#000" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-Black">Black</option><option id="captions-window-color-wise_player_4_component_1074-White" value="#FFF" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-White">White</option><option id="captions-window-color-wise_player_4_component_1074-Red" value="#F00" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-Red">Red</option><option id="captions-window-color-wise_player_4_component_1074-Green" value="#0F0" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-Green">Green</option><option id="captions-window-color-wise_player_4_component_1074-Blue" value="#00F" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-Blue">Blue</option><option id="captions-window-color-wise_player_4_component_1074-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-Yellow">Yellow</option><option id="captions-window-color-wise_player_4_component_1074-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-Magenta">Magenta</option><option id="captions-window-color-wise_player_4_component_1074-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074 captions-window-color-wise_player_4_component_1074-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_4_component_1074" for="vjs_select_1105" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-opacity-wise_player_4_component_1074" id="vjs_select_1105"><option id="captions-window-opacity-wise_player_4_component_1074-Transparent" value="0" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-opacity-wise_player_4_component_1074 captions-window-opacity-wise_player_4_component_1074-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_4_component_1074-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-opacity-wise_player_4_component_1074 captions-window-opacity-wise_player_4_component_1074-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_4_component_1074-Opaque" value="1" aria-labelledby="captions-window-wise_player_4_component_1074 captions-window-opacity-wise_player_4_component_1074 captions-window-opacity-wise_player_4_component_1074-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_4_component_1074">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_4_component_1074" id="vjs_select_1106"><option id="captions-font-size-wise_player_4_component_1074-50" value="0.50" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-50">50%</option><option id="captions-font-size-wise_player_4_component_1074-75" value="0.75" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-75">75%</option><option id="captions-font-size-wise_player_4_component_1074-100" value="1.00" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-100">100%</option><option id="captions-font-size-wise_player_4_component_1074-125" value="1.25" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-125">125%</option><option id="captions-font-size-wise_player_4_component_1074-150" value="1.50" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-150">150%</option><option id="captions-font-size-wise_player_4_component_1074-175" value="1.75" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-175">175%</option><option id="captions-font-size-wise_player_4_component_1074-200" value="2.00" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-200">200%</option><option id="captions-font-size-wise_player_4_component_1074-300" value="3.00" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-300">300%</option><option id="captions-font-size-wise_player_4_component_1074-400" value="4.00" aria-labelledby="captions-font-size-wise_player_4_component_1074 captions-font-size-wise_player_4_component_1074-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_4_component_1074">Text Edge Style</legend><select aria-labelledby="wise_player_4_component_1074" id="vjs_select_1107"><option id="wise_player_4_component_1074-None" value="none" aria-labelledby="wise_player_4_component_1074 wise_player_4_component_1074-None">None</option><option id="wise_player_4_component_1074-Raised" value="raised" aria-labelledby="wise_player_4_component_1074 wise_player_4_component_1074-Raised">Raised</option><option id="wise_player_4_component_1074-Depressed" value="depressed" aria-labelledby="wise_player_4_component_1074 wise_player_4_component_1074-Depressed">Depressed</option><option id="wise_player_4_component_1074-Uniform" value="uniform" aria-labelledby="wise_player_4_component_1074 wise_player_4_component_1074-Uniform">Uniform</option><option id="wise_player_4_component_1074-Dropshadow" value="dropshadow" aria-labelledby="wise_player_4_component_1074 wise_player_4_component_1074-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_4_component_1074">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_4_component_1074" id="vjs_select_1108"><option id="captions-font-family-wise_player_4_component_1074-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_4_component_1074 captions-font-family-wise_player_4_component_1074-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_4_component_1074-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_4_component_1074 captions-font-family-wise_player_4_component_1074-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_4_component_1074-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_4_component_1074 captions-font-family-wise_player_4_component_1074-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_4_component_1074-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_4_component_1074 captions-font-family-wise_player_4_component_1074-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_4_component_1074-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_4_component_1074 captions-font-family-wise_player_4_component_1074-Casual">Casual</option><option id="captions-font-family-wise_player_4_component_1074-Script" value="script" aria-labelledby="captions-font-family-wise_player_4_component_1074 captions-font-family-wise_player_4_component_1074-Script">Script</option><option id="captions-font-family-wise_player_4_component_1074-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_4_component_1074 captions-font-family-wise_player_4_component_1074-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="4" class="wiseplayershaw"></div></div></div><p></p>     <p><strong>时序图</strong></p>     <p><span><img height="196.08190000000002" originheight="537" originwidth="2178" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163252.20707911691086830390735742271892:50001231000000:2800:0D8E0F92B26C3E015C0248B8704C438329070D40E69ED74ADFCB47ACD07E537A.png" title="点击放大" width="798"></span></p>     <p><strong>开发步骤</strong></p>     <p>控制远端设备状态可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#sendcontrolcommand10" target="_blank">avCastController.sendControlCommand()</a>接口实现，支持多种播放控制命令，包括：暂停、停止、下一首、上一首、快进、快退、跳转、音量调节和倍速设置。只需修改command字段即可切换不同功能，具体命令与功能的对应关系请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#avcontrolcommandtype10" target="_blank">AVCastControlCommandType</a>。</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L176-L179" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title">setAVCastPlay</span>()</span> {</li><li>  <span class="hljs-keyword">let</span> avCommand: avSession.AVCastControlCommand = { command: <span class="hljs-string">'play'</span> };</li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.avCastController.sendControlCommand(avCommand);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L176-L179" target="_blank">VideoCastController.ets</a></div></div></div></div>     <p>在控制跳转、音量调节和倍速设置时，需要传入时间（单位ms）、音量、倍速参数。</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L206-L219" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">public</span> <span class="hljs-variable">async</span> <span class="hljs-title function_">setAVCastSeek</span>(<span class="hljs-variable">timeMS</span>: <span class="hljs-title class_">number</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">avCommand</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVCastControlCommand</span> = { <span class="hljs-variable">command</span>: <span class="hljs-string">'seek'</span>, <span class="hljs-variable">parameter</span>: <span class="hljs-title class_">timeMS</span> };</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">sendControlCommand</span>(<span class="hljs-variable">avCommand</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">public</span> <span class="hljs-variable">async</span> <span class="hljs-title function_">setAVCastVolume</span>(<span class="hljs-variable">volume</span>: <span class="hljs-title class_">number</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">avCommand</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVCastControlCommand</span> = { <span class="hljs-variable">command</span>: <span class="hljs-string">'setVolume'</span>, <span class="hljs-variable">parameter</span>: <span class="hljs-title class_">volume</span> };</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">sendControlCommand</span>(<span class="hljs-variable">avCommand</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">public</span> <span class="hljs-variable">async</span> <span class="hljs-title function_">setAVCastSpeed</span>(<span class="hljs-variable">speed</span>: <span class="hljs-title class_">media</span>.<span class="hljs-title class_">PlaybackSpeed</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">avCommand</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVCastControlCommand</span> = { <span class="hljs-variable">command</span>: <span class="hljs-string">'setSpeed'</span>, <span class="hljs-variable">parameter</span>: <span class="hljs-title class_">speed</span> };</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">sendControlCommand</span>(<span class="hljs-variable">avCommand</span>);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L206-L219" target="_blank">VideoCastController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section1133113013013">资源切换<i class="anchor-icon anchor-icon-link" anchorid="section1133113013013" tips="复制节点链接"></i></h3>          <p>在完成本集播放/用户触发集数切换时不需要断开连接，重新设置资源即可。</p>     <ol>      <li>构建<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10" target="_blank">avSession.AVQueueItem</a>。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#prepare10-1" target="_blank">avCastController.prepare(playItem)</a>。</li>      <li><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#start10-1" target="_blank">avCastController.start(playItem)</a>。</li>     </ol>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L55-L69" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">playItem</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVQueueItem</span> = {</li><li>  <span class="hljs-variable">itemId</span>: <span class="hljs-title class_">videoIndex</span>,</li><li>  <span class="hljs-variable">description</span>: {</li><li>    <span class="hljs-variable">assetId</span>: <span class="hljs-string">'VIDEO-'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title class_">stringify</span>(<span class="hljs-title class_">videoIndex</span>),</li><li>    <span class="hljs-variable">title</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">name</span>,</li><li>    <span class="hljs-variable">subtitle</span>: <span class="hljs-string">'video'</span>,</li><li>    <span class="hljs-variable">mediaUri</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">url</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">string</span>,</li><li>    <span class="hljs-variable">mediaType</span>: <span class="hljs-string">'VIDEO'</span>,</li><li>    <span class="hljs-variable">mediaImage</span>: <span class="hljs-title class_">imgPixel</span>,</li><li>    <span class="hljs-variable">startPosition</span>: <span class="hljs-title class_">startPosition</span>,</li><li>    <span class="hljs-variable">duration</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">videoDataArray</span>[<span class="hljs-title class_">videoIndex</span>].<span class="hljs-variable">duration</span></li><li>  }</li><li>};</li><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">prepare</span>(<span class="hljs-variable">playItem</span>);</li><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>.<span class="hljs-title function_">start</span>(<span class="hljs-variable">playItem</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/controller/VideoCastController.ets#L55-L69" target="_blank">VideoCastController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h2 id="section21397519278">扩展功能<i class="anchor-icon anchor-icon-link" anchorid="section21397519278" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section1892158155818" class="firsth2">悬浮球快捷控制<i class="anchor-icon anchor-icon-link" anchorid="section1892158155818" tips="复制节点链接"></i></h3>          <p>建议应用集成悬浮球快捷控制功能，便于用户快速返回投播页面进行操作控制，实现效果如图：</p>     <p></p>     <p><span><img height="547.1487" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163252.55994828919314616983815206721352:50001231000000:2800:7BC1FEFA052C8A18F19EC2823CCBB35509308B64EB9C0AF5DC736993F2B801EF.gif" width="266" class="notEnlarge"></span></p>     <p></p>     <p>可以通过为页面设置浮层实现。</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/pages/Index.ets#L256-L260" data-highlighted="yes"><ol class="linenums"><li>.<span class="hljs-title function_">overlay</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title function_">OverlayNode</span>(), {</li><li>  <span class="hljs-variable">align</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-title class_">BottomEnd</span>,</li><li>  <span class="hljs-variable">offset</span>: { <span class="hljs-variable">x</span>: -<span class="hljs-number">24</span>,</li><li>    <span class="hljs-variable">y</span>: -<span class="hljs-number">136</span> }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/pages/Index.ets#L256-L260" target="_blank">Index.ets</a></div></div></div></div>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-less" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/pages/Index.ets#L52-L139" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">@Builder</span></li><li><span class="hljs-built_in">OverlayNode</span>() {</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/pages/Index.ets#L52-L139" target="_blank">Index.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section1895194813140">手机物理音量键同步远端<i class="anchor-icon anchor-icon-link" anchorid="section1895194813140" tips="复制节点链接"></i></h3>          <p>音量同步需要通过遥控器页面的焦点管理和按键监听实现，具体流程为：当遥控器页面获焦时，监听音量加减按键事件，在事件回调中调用音量调节函数并同步更新播控中心状态。典型实现示例如下：</p>     <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/pages/RemoteControlPage.ets#L70-L95" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">upOptions</span>: <span class="hljs-title class_">inputConsumer</span>.<span class="hljs-title class_">KeyPressedConfig</span> = {</li><li>  <span class="hljs-variable">key</span>: <span class="hljs-title class_">KeyCode</span>.<span class="hljs-title class_">KEYCODE_VOLUME_UP</span>,</li><li>  <span class="hljs-variable">action</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-variable">isRepeat</span>: <span class="hljs-keyword">true</span>,</li><li>}</li><li><span class="hljs-variable">inputConsumer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'keyPressed'</span>, <span class="hljs-variable">upOptions</span>, <span class="hljs-variable">async</span> ()=&gt; {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastPlayerController</span>) {</li><li>    <span class="hljs-variable">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'currentVolume'</span> + <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">currentVolume</span>));</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">volume</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentVolume</span> + <span class="hljs-number">10</span>;</li><li>    <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastPlayerController</span>.<span class="hljs-title function_">setAVCastVolume</span>(<span class="hljs-variable">volume</span>);</li><li>  }</li><li>})</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">downOptions</span>: <span class="hljs-title class_">inputConsumer</span>.<span class="hljs-title class_">KeyPressedConfig</span> = {</li><li>  <span class="hljs-variable">key</span>: <span class="hljs-title class_">KeyCode</span>.<span class="hljs-title class_">KEYCODE_VOLUME_DOWN</span>,</li><li>  <span class="hljs-variable">action</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-variable">isRepeat</span>: <span class="hljs-keyword">true</span>,</li><li>}</li><li><span class="hljs-variable">inputConsumer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'keyPressed'</span>, <span class="hljs-variable">downOptions</span>,<span class="hljs-variable">async</span> ()=&gt; {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastPlayerController</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">volume</span> = <span class="hljs-keyword">this</span>.<span class="hljs-variable">currentVolume</span> - <span class="hljs-number">10</span>;</li><li>    <span class="hljs-keyword">if</span>(<span class="hljs-variable">volume</span> &lt; <span class="hljs-number">0</span>){</li><li>      <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastPlayerController</span>.<span class="hljs-title function_">setAVCastVolume</span>(<span class="hljs-number">0</span>);</li><li>    }</li><li>    <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastPlayerController</span>.<span class="hljs-title function_">setAVCastVolume</span>(<span class="hljs-variable">volume</span>);</li><li>  }</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/pages/RemoteControlPage.ets#L70-L95" target="_blank">RemoteControlPage.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section1565618441483">投屏转投播<i class="anchor-icon anchor-icon-link" anchorid="section1565618441483" tips="复制节点链接"></i></h3>          <p>用户通过“无线投屏”功能实现手机等设备和大屏等的镜像投屏，然后打开视频应用进入视频播放，此时会自动切换为资源投播，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/distributed-playback-guide#section15717184018447" target="_blank">镜像投屏自动切换资源投播</a>。目前投播暂不支持视频弹幕功能，若应用想优先保证弹幕体验，可不接入此功能。</p>    </div>    <div class="tiledSection">     <h2 id="section494472317545">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section494472317545" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section1998116218567" class="firsth2">播控中心、本端应用、远端投播三端进度不一致<i class="anchor-icon anchor-icon-link" anchorid="section1998116218567" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>在投播时，应用在本端、远端、播控中心均有进度条显示，三个进度条进度显示不一致。</p>     <p><strong>解决措施</strong></p>     <p>1、远端和播控中心进度自动保持一致，应用无需进行设置。</p>     <p>2、本端应通过监听远端设备的进度条进行更新同步，在控制时调用avCastController.sendControlCommand(avCommand)改变播放状态、进度，不主动改变本端显示的状态。</p>     <p><strong>参考链接</strong></p>     <p><a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section13876193232918">远端视频状态回传本端</a></p>    </div>    <div class="tiledSection">     <h3 id="section22471243154810">投播时AVcastPicker无法搜索到设备<i class="anchor-icon anchor-icon-link" anchorid="section22471243154810" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>使用AVCastPicker投播时，无法搜索到目标设备。</p>     <p><strong>解决措施</strong></p>     <ol>      <li>确认远端设备状态，锁屏、息屏时无法搜索到设备。</li>      <li>AVSession接入。</li>      <li>应用是否设置媒体信息。</li>      <li>AVCastPicker显示期间AVSession没有销毁重建。</li>      <li>AVSession接入后告知当前应用支持投播。        <div class="screenLinkPre"><div _ngcontent-cxu-c106="" class="highlight-div"><div _ngcontent-cxu-c106="" class="highlight-div-header"><div _ngcontent-cxu-c106="" class="highlight-div-header-left"><div _ngcontent-cxu-c106="" class="handle-button expand-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cxu-c106="" class="highlight-div-header-right"><div _ngcontent-cxu-c106="" class="handle-button ai-button"></div><div _ngcontent-cxu-c106="" class="handle-button line-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cxu-c106="" class="handle-button theme-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cxu-c106="" class="handle-button copy-button"><div _ngcontent-cxu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cxu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L150-L152" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">await</span> videoSession.setExtras({</li><li>  <span class="hljs-string">'requireAbilityList'</span>: [<span class="hljs-string">'url-cast'</span>]</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/VideoCast/blob/master/entry/src/main/ets/view/VideoPlayingView.ets#L150-L152" target="_blank">VideoPlayingView.ets</a></div></div></div></div></li>      <li>确认filter是否过滤掉设备。</li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section142432237212">投播后远端黑屏<i class="anchor-icon anchor-icon-link" anchorid="section142432237212" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>投播后远端黑屏，无法播放视频。</p>     <p><strong>解决措施</strong></p>     <p>1、是否正确配置元数据。</p>     <p>2、调用prepare()和start()。</p>    </div>    <div class="tiledSection">     <h3 id="section12907450194">投播后，播控中心按钮置灰<i class="anchor-icon anchor-icon-link" anchorid="section12907450194" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>投播后，播控中心按钮灰色无法点击调控。</p>     <p><strong>解决措施</strong></p>     <p>播放、暂停、音量变化：监听AVCastController.on('playbackStateChange')。</p>     <p>上一集：监听AVCastController.on('playPrevious')。</p>     <p>下一集：监听AVCastController.on('playNext')。</p>     <p>快进、快退、进度条：监听AVCastController.on('seekDone')。</p>    </div>    <div class="tiledSection">     <h3 id="section826819482145">AVCastPicker无法直接切换资源<i class="anchor-icon anchor-icon-link" anchorid="section826819482145" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>A视频投播成功后，在B视频播放的页面点击AVCastPicker切集，调起的半模态只可以切换A视频的播放设备。</p>     <p><strong>解决措施</strong></p>     <p>在本应用正在投播时，应用可自绘制AVCastPicker按钮，在点击事件中调用<a href="/consumer/cn/doc/best-practices/bpta-vdeocast#section1133113013013">资源切换</a>函数实现。</p>    </div>    <div class="tiledSection">     <h2 id="section34141420585">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section34141420585" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitee.com/harmonyos_samples/VideoCast" target="_blank">视频投播</a></li>     </ul>    </div>   </div>   <div></div></div>