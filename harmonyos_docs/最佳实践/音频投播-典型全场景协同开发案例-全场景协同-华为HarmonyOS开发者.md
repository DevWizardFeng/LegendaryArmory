<h1 _ngcontent-itk-c119="" class="doc-title ng-star-inserted" title="音频投播"> 音频投播 </h1>

<div _ngcontent-itk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="section1342105061110">概述<i class="anchor-icon anchor-icon-link" anchorid="section1342105061110" tips="复制节点链接"></i></h2>          <p>系统投播功能支持用户将手机上的音视频无缝流转到其他设备（如PC/2in1设备、华为智慧屏）上继续播放，实现跨终端自由切换，无需受到有线设备的束缚。为简化开发流程，系统提供了标准化的音视频投播解决方案，开发者仅需配置资源信息、监听投播状态并实现播放控制（如播放、暂停等），即可快速集成该功能。</p>     <p>本文将结合实际案例，详细介绍如何高效利用系统投播组件和接口实现音频投播，帮助开发者提升开发效率，包含如下关键步骤：</p>     <ul>      <li><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section157951042142811">接入播控中心</a>：播控中心提供音视频统一管控能力和音频后台约束能力，是投播接入的必备条件。</li>      <li><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section148446619451">创建投播</a>：通过调用投播组件的设备选择接口，并注册媒体会话的设备改变事件监听，可以将手机端音视频无缝迁移到指定远端设备上继续播放。</li>      <li>       <p><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section23051450141317">本端控制远端音频播放</a>：通过手机端可以直接控制远端设备的音频播放状态，包括播放、暂停和播放进度等。</p></li>      <li><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section178775217533">远端音频状态回传本端</a>：将远端设备的播放状态实时同步到手机端显示，包括播放、暂停和播放进度等。</li>      <li><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section153951118172510">资源切换</a>和<a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section10877141421614">投播音质切换</a>：支持投播过程中不同音频的切换及不同音质的切换。</li>     </ul>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>支持投播的设备规格和使用限制参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/distributed-playback-guide#section1557419538816" target="_blank">约束与限制</a>。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section840510510378">用户体验<i class="anchor-icon anchor-icon-link" anchorid="section840510510378" tips="复制节点链接"></i></h2>          <p><strong>体验视频</strong></p>     <div class="fignone">      <span class="figcap"><b>图1 </b>音频投播流程体验视频</span>      <div class="video-box" style="width: 426.137px; height: 196.5px;"><div id="wise_player_0" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.33101344608173021609514754969562:50001231000000:2800:CE02C2CAB196A6FC09DB2C7140C637295A6F03541DD94938D8CDA56D7FB0A4DD.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_0-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.33101344608173021609514754969562:50001231000000:2800:CE02C2CAB196A6FC09DB2C7140C637295A6F03541DD94938D8CDA56D7FB0A4DD.mp4" id="wise_player_0_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.33101344608173021609514754969562:50001231000000:2800:CE02C2CAB196A6FC09DB2C7140C637295A6F03541DD94938D8CDA56D7FB0A4DD.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-776"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-777"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:31"><div class="vjs-load-progress" style="width: 15.01%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">15.01%</span></span><div data-start="0" data-end="4.661" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:31</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_0_component_961">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_0_component_961"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_0_component_1068_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_1068_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_0_component_1074_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_0_component_1074_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_0_component_1074">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_0_component_1074" for="vjs_select_1100" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074" id="vjs_select_1100"><option id="captions-foreground-color-wise_player_0_component_1074-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-White">White</option><option id="captions-foreground-color-wise_player_0_component_1074-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-Black">Black</option><option id="captions-foreground-color-wise_player_0_component_1074-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-Red">Red</option><option id="captions-foreground-color-wise_player_0_component_1074-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-Green">Green</option><option id="captions-foreground-color-wise_player_0_component_1074-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-Blue">Blue</option><option id="captions-foreground-color-wise_player_0_component_1074-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_0_component_1074-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_0_component_1074-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074 captions-foreground-color-wise_player_0_component_1074-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_0_component_1074" for="vjs_select_1101" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-opacity-wise_player_0_component_1074" id="vjs_select_1101"><option id="captions-foreground-opacity-wise_player_0_component_1074-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-opacity-wise_player_0_component_1074 captions-foreground-opacity-wise_player_0_component_1074-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_0_component_1074-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_0_component_1074 captions-foreground-opacity-wise_player_0_component_1074 captions-foreground-opacity-wise_player_0_component_1074-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_0_component_1074">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_0_component_1074" for="vjs_select_1102" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074" id="vjs_select_1102"><option id="captions-background-color-wise_player_0_component_1074-Black" value="#000" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-Black">Black</option><option id="captions-background-color-wise_player_0_component_1074-White" value="#FFF" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-White">White</option><option id="captions-background-color-wise_player_0_component_1074-Red" value="#F00" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-Red">Red</option><option id="captions-background-color-wise_player_0_component_1074-Green" value="#0F0" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-Green">Green</option><option id="captions-background-color-wise_player_0_component_1074-Blue" value="#00F" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-Blue">Blue</option><option id="captions-background-color-wise_player_0_component_1074-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-Yellow">Yellow</option><option id="captions-background-color-wise_player_0_component_1074-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-Magenta">Magenta</option><option id="captions-background-color-wise_player_0_component_1074-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074 captions-background-color-wise_player_0_component_1074-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_0_component_1074" for="vjs_select_1103" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-opacity-wise_player_0_component_1074" id="vjs_select_1103"><option id="captions-background-opacity-wise_player_0_component_1074-Opaque" value="1" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-opacity-wise_player_0_component_1074 captions-background-opacity-wise_player_0_component_1074-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_0_component_1074-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-opacity-wise_player_0_component_1074 captions-background-opacity-wise_player_0_component_1074-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_0_component_1074-Transparent" value="0" aria-labelledby="captions-background-wise_player_0_component_1074 captions-background-opacity-wise_player_0_component_1074 captions-background-opacity-wise_player_0_component_1074-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_0_component_1074">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_0_component_1074" for="vjs_select_1104" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074" id="vjs_select_1104"><option id="captions-window-color-wise_player_0_component_1074-Black" value="#000" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-Black">Black</option><option id="captions-window-color-wise_player_0_component_1074-White" value="#FFF" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-White">White</option><option id="captions-window-color-wise_player_0_component_1074-Red" value="#F00" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-Red">Red</option><option id="captions-window-color-wise_player_0_component_1074-Green" value="#0F0" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-Green">Green</option><option id="captions-window-color-wise_player_0_component_1074-Blue" value="#00F" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-Blue">Blue</option><option id="captions-window-color-wise_player_0_component_1074-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-Yellow">Yellow</option><option id="captions-window-color-wise_player_0_component_1074-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-Magenta">Magenta</option><option id="captions-window-color-wise_player_0_component_1074-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074 captions-window-color-wise_player_0_component_1074-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_0_component_1074" for="vjs_select_1105" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-opacity-wise_player_0_component_1074" id="vjs_select_1105"><option id="captions-window-opacity-wise_player_0_component_1074-Transparent" value="0" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-opacity-wise_player_0_component_1074 captions-window-opacity-wise_player_0_component_1074-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_0_component_1074-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-opacity-wise_player_0_component_1074 captions-window-opacity-wise_player_0_component_1074-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_0_component_1074-Opaque" value="1" aria-labelledby="captions-window-wise_player_0_component_1074 captions-window-opacity-wise_player_0_component_1074 captions-window-opacity-wise_player_0_component_1074-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_0_component_1074">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_0_component_1074" id="vjs_select_1106"><option id="captions-font-size-wise_player_0_component_1074-50" value="0.50" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-50">50%</option><option id="captions-font-size-wise_player_0_component_1074-75" value="0.75" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-75">75%</option><option id="captions-font-size-wise_player_0_component_1074-100" value="1.00" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-100">100%</option><option id="captions-font-size-wise_player_0_component_1074-125" value="1.25" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-125">125%</option><option id="captions-font-size-wise_player_0_component_1074-150" value="1.50" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-150">150%</option><option id="captions-font-size-wise_player_0_component_1074-175" value="1.75" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-175">175%</option><option id="captions-font-size-wise_player_0_component_1074-200" value="2.00" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-200">200%</option><option id="captions-font-size-wise_player_0_component_1074-300" value="3.00" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-300">300%</option><option id="captions-font-size-wise_player_0_component_1074-400" value="4.00" aria-labelledby="captions-font-size-wise_player_0_component_1074 captions-font-size-wise_player_0_component_1074-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_0_component_1074">Text Edge Style</legend><select aria-labelledby="wise_player_0_component_1074" id="vjs_select_1107"><option id="wise_player_0_component_1074-None" value="none" aria-labelledby="wise_player_0_component_1074 wise_player_0_component_1074-None">None</option><option id="wise_player_0_component_1074-Raised" value="raised" aria-labelledby="wise_player_0_component_1074 wise_player_0_component_1074-Raised">Raised</option><option id="wise_player_0_component_1074-Depressed" value="depressed" aria-labelledby="wise_player_0_component_1074 wise_player_0_component_1074-Depressed">Depressed</option><option id="wise_player_0_component_1074-Uniform" value="uniform" aria-labelledby="wise_player_0_component_1074 wise_player_0_component_1074-Uniform">Uniform</option><option id="wise_player_0_component_1074-Dropshadow" value="dropshadow" aria-labelledby="wise_player_0_component_1074 wise_player_0_component_1074-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_0_component_1074">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_0_component_1074" id="vjs_select_1108"><option id="captions-font-family-wise_player_0_component_1074-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_1074 captions-font-family-wise_player_0_component_1074-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_0_component_1074-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_0_component_1074 captions-font-family-wise_player_0_component_1074-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_0_component_1074-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_0_component_1074 captions-font-family-wise_player_0_component_1074-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_0_component_1074-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_0_component_1074 captions-font-family-wise_player_0_component_1074-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_0_component_1074-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_0_component_1074 captions-font-family-wise_player_0_component_1074-Casual">Casual</option><option id="captions-font-family-wise_player_0_component_1074-Script" value="script" aria-labelledby="captions-font-family-wise_player_0_component_1074 captions-font-family-wise_player_0_component_1074-Script">Script</option><option id="captions-font-family-wise_player_0_component_1074-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_0_component_1074 captions-font-family-wise_player_0_component_1074-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="0" class="wiseplayershaw"></div></div></div>     </div>     <p><strong>用户体验路径</strong></p>     <p>本文案例提供本端播放和音频投播两种播放模式，体验路径和交互流程图如下。在投播模式下，可以通过本端的播放界面或播控中心对远端的音频进行播放控制，如播放、暂停、播放进度跳转、上一首/下一首切换和点击切换音频。应用接入音频投播时，可根据实际需求参考本文实现相关功能，并按照<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/playback-control-access-checklist" target="_blank">应用接入播控自检表</a>完成基础功能验证，确保应用基础体验。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <caption>        <b>表1 </b>音频投播体验路径和交互流程       </caption>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.2.6.1.1" valign="top" width="8.77%">          <p>用户操作阶段</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.2.6.1.2" valign="top" width="9.86%">          <p>本端音频播放与控制</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.2.6.1.3" valign="top" width="21.52%">          <p>播控中心控制本端音频</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.2.6.1.4" valign="top" width="21.91%">          <p>接入音频投播</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.2.6.2.6.1.5" valign="top" width="37.940000000000005%">          <p>本端控制远端音频播放</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="8.77%">          <p>预期行为</p></td>         <td class="cellrowborder" valign="top" width="9.86%">          <ol>           <li>本端音频正常播放</li>           <li>通过播放页面控制本端音频播放</li>          </ol></td>         <td class="cellrowborder" valign="top" width="21.52%">          <ol>           <li>播控中心与本端音频播放状态一致</li>           <li>通过播控中心控制本端音频播放</li>          </ol></td>         <td class="cellrowborder" valign="top" width="21.91%">          <ol>           <li>初次连接认证</li>           <li>选择投播设备</li>          </ol></td>         <td class="cellrowborder" valign="top" width="37.940000000000005%">          <ol>           <li>本端与远端播放状态一致</li>           <li>通过播放页面控制远端音频播放</li>           <li>通过播控中心控制远端音频播放</li>          </ol></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="8.77%">          <p>操作示意图</p></td>         <td class="cellrowborder" valign="top" width="9.86%">          <div class="fignone">           <span class="figcap"><b>图2 </b></span>           <br><span><img height="137.73984858912596" originheight="2258" originwidth="1093" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163254.25409648829659257390479276412098:50001231000000:2800:546DD3A3E63B818EFC394B402FE0BDC9D6AE7A20415D992FCFC63F216C8BB14D.png" title="点击放大" width="66.71199999999999"></span>          </div></td>         <td class="cellrowborder" valign="top" width="21.52%">          <div class="fignone">           <span class="figcap"><b>图3 </b></span>           <br><span><img height="108.0366364812419" originheight="2261" originwidth="3637" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163254.44745984557298712826922849271759:50001231000000:2800:D37B36F7FF71F2322F9A9E09FC8A50ADA8B901FB49CEF51BB55B165C0A96CF19.png" title="点击放大" width="173.98399999999998"></span>          </div></td>         <td class="cellrowborder" valign="top" width="21.91%">          <div class="fignone">           <span class="figcap"><b>图4 </b></span>           <br><span><img height="109.92334279081767" originheight="2258" originwidth="3637" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163254.67318317658433470311116412533067:50001231000000:2800:7921EB84DBB7FE8F161720069B3D0C9D7F49094D5E202C788FBF6B48277AC015.png" title="点击放大" width="177.572"></span>          </div></td>         <td class="cellrowborder" valign="top" width="37.940000000000005%">          <div class="fignone">           <span class="figcap"><b>图5 </b></span>           <br><span><img height="111.4450285714286" originheight="1957" originwidth="5691" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163254.45366242447835064814751415220366:50001231000000:2800:D864176D55210D3D39A0DBC93443A56479D76C56DF860C703FB530E0ECEBD7D7.png" title="点击放大" width="325.048"></span>          </div></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section513141061615">实现原理<i class="anchor-icon anchor-icon-link" anchorid="section513141061615" tips="复制节点链接"></i></h2>          <p><strong>名词解释</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="layoutFixed idpTab">       <caption>        <b>表2 </b>音视频投播相关名词解释       </caption>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.3.1.1" valign="top" width="21.38%">          <p>概念</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.3.3.2.3.1.2" valign="top" width="78.62%">          <p>解释</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" valign="top" width="21.38%">          <p><strong>媒体会话（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession" target="_blank">AVSession</a>）</strong></p></td>         <td class="cellrowborder" valign="top" width="78.62%">          <p>音视频管控服务，用于统一管理系统中接入播控中心的音视频行为。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="21.38%">          <p><strong>投播组件（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-multimedia-avcastpicker" target="_blank">AVCastPicker</a>）</strong></p></td>         <td class="cellrowborder" valign="top" width="78.62%">          <p>可嵌入应用UI界面的系统级投播组件。用户点击该组件后，系统将执行设备发现、连接和认证等流程，应用仅需通过接口获取投播中的相关回调信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" valign="top" width="21.38%">          <p><strong>投播控制器（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller" target="_blank">AVCastController</a>）</strong></p></td>         <td class="cellrowborder" valign="top" width="78.62%">          <p>在投播建立后，由应用发起的用于控制远端播放的接口，包括播放、暂停、上一首/下一首切换和播放进度跳转等能力。</p></td>        </tr>             </tbody></table></div>     </div>     <p>投播功能的实现基于AVSession媒体会话和AVCastController投播控制器的协同工作，系统通过AVSession建立设备连接，由AVCastController向Cast+服务发送控制指令。开发者需要聚焦两个核心环节——通过AVSession实现监听设备连接，以及使用AVCastController控制远端播放并同步状态，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/distributed-playback-overview#分布式投播交互过程" target="_blank">运作机制</a>。</p>     <div class="fignone">      <span class="figcap"><b>图6 </b>音视频投播运作机制示意图</span>      <br><span><img height="239.4" originheight="1106" originwidth="2413" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163255.69248918400192015988628198581822:50001231000000:2800:FB604C2A2876EF7A506BA2BD590B993980255026ABFC8C8306EED9AF89379B11.png" title="点击放大" width="523.6875"></span>     </div>    </div>    <div class="tiledSection">     <h2 id="section296118713235">模块设计<i class="anchor-icon anchor-icon-link" anchorid="section296118713235" tips="复制节点链接"></i></h2>          <p>建议应用实现音频投播时，封装如下三个模块：</p>     <ul>      <li>本端音频控制器：控制本端音频资源的播放、暂停、上一首/下一首切换和播放进度等。</li>      <li>媒体会话控制器：将本端播放的音频接入播控中心，用于本应用发起投播、结束投播、与播控中心的播放状态同步。</li>      <li>音频投播控制器：控制远端设备音频资源的播放、暂停、上一首/下一首切换和播放进度等。</li>     </ul>     <p>实现音频投播功能，建议参考如下流程接入，其中本端音频的播放和控制可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-avplayer-for-playback" target="_blank">使用AVPlayer播放音频</a>、<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-audio-interaction-practice" target="_blank">音频播放交互场景</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-audiorenderer-for-playback" target="_blank">使用AudioRenderer开发音频播放功能</a>等方案根据功能诉求自行实现，本文将从接入播控中心开始进行详细介绍。</p>     <div class="fignone">      <span class="figcap"><b>图7 </b>接入音频投播流程图</span>      <br><span><img height="161.595" originheight="745" originwidth="2400" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163255.14743611473129153603834877925065:50001231000000:2800:95DB571E164A618F0ABB8BA2CDEA2B700C2B734FE59B75093B2C736FA8203DB3.png" title="点击放大" width="523.6875"></span>     </div>    </div>    <div class="tiledSection">     <h2 id="section157951042142811">接入播控中心<i class="anchor-icon anchor-icon-link" anchorid="section157951042142811" tips="复制节点链接"></i></h2>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/avsession-overview" target="_blank">音视频播控服务</a>用于统一管理系统中所有音视频行为，开发者须接入播控中心才能实现投播功能。播控中心不仅能控制本端设备的播放，还能控制远端设备的播放。</p>     <div class="fignone">      <span class="figcap"><b>图8 </b>播控中心控制音频播放</span>      <br><span><img height="549.2900000000001" originheight="1080" originwidth="523" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163255.24212934179694004073061957665472:50001231000000:2800:47E61A2B1B7987E18565416945583AAFC495156E31A4AE8C12D3346BF4DC0B4C.gif" title="点击放大" width="266"></span>     </div>     <p>本应用与系统播控中心通过媒体会话AVSession进行信息交互。创建并初始化媒体会话实例后，应用需要通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setavmetadata10" target="_blank">setAVMetaData()</a>接口设置会话元数据，同时使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setavplaybackstate10" target="_blank">setAVPlaybackState()</a>接口主动向播控中心同步当前播放状态，并通过on('controlCommand')注册事件监听实时响应播控中心的音频操作事件，最终实现本应用与播控中心的双向状态同步，确保两端数据的一致性。下面为应用接入播控中心的简要开发流程。</p>    </div>    <div class="tiledSection">     <h3 id="section641024718268" class="firsth2">媒体会话初始化<i class="anchor-icon anchor-icon-link" anchorid="section641024718268" tips="复制节点链接"></i></h3>          <ol>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-f#avsessioncreateavsession10" target="_blank">avSession.createAVSession()</a>创建会话类型为'audio'（音频）的会话实例AVSession。        <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L61-L61" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.AVSession = await avSession.createAVSession(<span class="hljs-keyword">this</span>.context, <span class="hljs-string">"PLAY_AUDIO"</span>, <span class="hljs-string">'audio'</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L61-L61" target="_blank">AVSessionController.ets</a></div></div></div></div></li>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setlaunchability10" target="_blank">AVSession.setLaunchAbility()</a>设置一个WantAgent用于拉起会话的Ability。        <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L83-L100" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">wantAgentInfo</span>: <span class="hljs-title class_">wantAgent</span>.<span class="hljs-title class_">WantAgentInfo</span> = {</li><li>  <span class="hljs-variable">wants</span>: [</li><li>    {</li><li>      <span class="hljs-variable">bundleName</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">context</span>.<span class="hljs-title class_">abilityInfo</span>.<span class="hljs-title class_">bundleName</span>,</li><li>      <span class="hljs-variable">abilityName</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">context</span>.<span class="hljs-title class_">abilityInfo</span>.<span class="hljs-title class_">name</span></li><li>    }</li><li>  ],</li><li>  <span class="hljs-variable">actionType</span>: <span class="hljs-title class_">wantAgent</span>.<span class="hljs-title class_">OperationType</span>.<span class="hljs-title class_">START_ABILITIES</span>,</li><li>  <span class="hljs-variable">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-variable">wantAgentFlags</span>: [<span class="hljs-variable">wantAgent</span>.<span class="hljs-variable">WantAgentFlags</span>.<span class="hljs-variable">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li><span class="hljs-variable">wantAgent</span>.<span class="hljs-title function_">getWantAgent</span>(<span class="hljs-variable">wantAgentInfo</span>).<span class="hljs-title function_">then</span>((<span class="hljs-variable">agent</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">AVSession</span>) {</li><li>    <span class="hljs-keyword">this</span>.<span class="hljs-variable">AVSession</span>.<span class="hljs-title function_">setLaunchAbility</span>(<span class="hljs-variable">agent</span>);</li><li>  }</li><li>}).<span class="hljs-keyword">catch</span>(() =&gt; {</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, `<span class="hljs-variable">getWantAgent</span> <span class="hljs-variable">failed</span>.`);</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L83-L100" target="_blank">AVSessionController.ets</a></div></div></div></div></li>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#activate10" target="_blank">AVSession.activate()</a>激活音频会话AVSession。        <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L65-L65" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.AVSession.activate();</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L65-L65" target="_blank">AVSessionController.ets</a></div></div></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section343315312467">设置媒体会话元数据<i class="anchor-icon anchor-icon-link" anchorid="section343315312467" tips="复制节点链接"></i></h3>          <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setavmetadata10" target="_blank">AVSession.setAVMetadata()</a>上传元数据，从而在播控中心展示音频相关信息，如媒体ID（assetId）、媒体标题（title）、媒体图片（mediaImage）、媒体时长（duration）等。</p>     <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L124-L150" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">metadata</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVMetadata</span>;</li><li><span class="hljs-comment">// ...</span></li><li>  <span class="hljs-variable">metadata</span> = {</li><li>    <span class="hljs-variable">assetId</span>: <span class="hljs-string">'AUDIO-'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title class_">stringify</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title class_">musicIndex</span>),</li><li>    <span class="hljs-variable">title</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">songList</span>[<span class="hljs-keyword">this</span>.<span class="hljs-title class_">musicIndex</span>].<span class="hljs-variable">title</span>,</li><li>    <span class="hljs-variable">artist</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">songList</span>[<span class="hljs-keyword">this</span>.<span class="hljs-title class_">musicIndex</span>].<span class="hljs-variable">singer</span>,</li><li>    <span class="hljs-variable">filter</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">ProtocolType</span>.<span class="hljs-title class_">TYPE_DLNA</span> | <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">ProtocolType</span>.<span class="hljs-title class_">TYPE_CAST_PLUS_STREAM</span>,</li><li>    <span class="hljs-variable">mediaImage</span>: <span class="hljs-title class_">mediaImage</span>,</li><li>    <span class="hljs-variable">duration</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">getDuration</span>(),</li><li>  };</li><li>  <span class="hljs-comment">// ...</span></li><li><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">AVSession</span>) {</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">AVSession</span>.<span class="hljs-title function_">setAVMetadata</span>(<span class="hljs-variable">metadata</span>);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L124-L150" target="_blank">AVSessionController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section995915446125">本应用播放状态同步到播控中心<i class="anchor-icon anchor-icon-link" anchorid="section995915446125" tips="复制节点链接"></i></h3>          <p>设置元数据后，开发者需要主动监听本地音频播放状态的变化（如播放、暂停、上一首/下一首切换和进度跳转等事件），并将其同步到播控中心，以确保两端播放状态一致。</p>     <p>以下为应用端调用本地播放器的播放/暂停方法时，通过AVSession更新播控中心的播放/暂停状态进行双端播放状态同步的示例代码：</p>     <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L228-L231" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">AVSession</span>?.<span class="hljs-title function_">setAVPlaybackState</span>({</li><li>  <span class="hljs-variable">state</span>: <span class="hljs-title class_">isPlay</span> ? <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">PlaybackState</span>.<span class="hljs-title class_">PLAYBACK_STATE_PLAY</span> :</li><li>  <span class="hljs-variable">avSession</span>.<span class="hljs-variable">PlaybackState</span>.<span class="hljs-variable">PLAYBACK_STATE_PAUSE</span>,</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L228-L231" target="_blank">AVSessionController.ets</a></div></div></div></div>     <p>需要注意的是，在更新播放进度时，需要同时传入音频播放的时间进度（elapsedTime）和当前时间戳（updateTime），以下为示例代码：</p>     <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L245-L250" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">AVSession</span>?.<span class="hljs-title function_">setAVPlaybackState</span>({</li><li>  <span class="hljs-variable">position</span>: {</li><li>    <span class="hljs-variable">elapsedTime</span>: <span class="hljs-title class_">position</span>,</li><li>    <span class="hljs-variable">updateTime</span>: <span class="hljs-title class_">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title class_">getTime</span>()</li><li>  }</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L245-L250" target="_blank">AVSessionController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section769314507911">播控中心控制应用播放<i class="anchor-icon anchor-icon-link" anchorid="section769314507911" tips="复制节点链接"></i></h3>          <p>当用户在播控中心操作音频（如播放、暂停、上一首/下一首切换和进度跳转等事件）时，这些操作不会自动同步到应用端。开发者需要通过AVSession.on('controlCommand')监听这些操作事件，并在回调函数中主动更新应用的播放状态，以确保应用端与播控中心的播放状态一致。</p>     <p>以下为应用端监听到播控中心的播放/暂停操作事件时，主动调用本地播放器的播放/暂停方法进行双端播放状态同步的示例代码：</p>     <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L175-L176" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.AVSession?.<span class="hljs-keyword">on</span>(<span class="hljs-string">'play'</span>, () =&gt; controller?.setPlaying());</li><li><span class="hljs-keyword">this</span>.AVSession?.<span class="hljs-keyword">on</span>(<span class="hljs-string">'pause'</span>, () =&gt; controller?.setPause());</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L175-L176" target="_blank">AVSessionController.ets</a></div></div></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>建议在音频不需要与播控中心进行交互时，通过AVSession.off()销毁使用AVSession.on()注册的播控中心交互事件监听。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section230414673710">投播基础功能<i class="anchor-icon anchor-icon-link" anchorid="section230414673710" tips="复制节点链接"></i></h2>          <p>为确保投播功能正常使用，应用在发起投播前需要接入播控中心。如未完成此关键步骤，将导致投播功能不可用。</p>    </div>    <div class="tiledSection">     <h3 id="section148446619451" class="firsth2">创建投播<i class="anchor-icon anchor-icon-link" anchorid="section148446619451" tips="复制节点链接"></i></h3>          <div class="fignone">      <span class="figcap"><b>图9 </b>本端播放的音频投播到远端</span>      <div class="video-box" style="width: 422.892px; height: 195px;"><div id="wise_player_1" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.43487177421664212133992354579587:50001231000000:2800:1652B5C2220C13CC562DEC8C4273D177496D24DE5BF7011083600572957C99B5.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_1-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.43487177421664212133992354579587:50001231000000:2800:1652B5C2220C13CC562DEC8C4273D177496D24DE5BF7011083600572957C99B5.mp4" id="wise_player_1_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.43487177421664212133992354579587:50001231000000:2800:1652B5C2220C13CC562DEC8C4273D177496D24DE5BF7011083600572957C99B5.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-1144"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-1145"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:07"><div class="vjs-load-progress" style="width: 0%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">0.00%</span></span><div data-start="0" data-end="0.745" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:07</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_1_component_1329">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_1_component_1329"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_1_component_1436_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_1_component_1436_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_1_component_1442_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_1_component_1442_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_1_component_1442">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_1_component_1442" for="vjs_select_1468" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442" id="vjs_select_1468"><option id="captions-foreground-color-wise_player_1_component_1442-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-White">White</option><option id="captions-foreground-color-wise_player_1_component_1442-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-Black">Black</option><option id="captions-foreground-color-wise_player_1_component_1442-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-Red">Red</option><option id="captions-foreground-color-wise_player_1_component_1442-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-Green">Green</option><option id="captions-foreground-color-wise_player_1_component_1442-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-Blue">Blue</option><option id="captions-foreground-color-wise_player_1_component_1442-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_1_component_1442-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_1_component_1442-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442 captions-foreground-color-wise_player_1_component_1442-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_1_component_1442" for="vjs_select_1469" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-opacity-wise_player_1_component_1442" id="vjs_select_1469"><option id="captions-foreground-opacity-wise_player_1_component_1442-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-opacity-wise_player_1_component_1442 captions-foreground-opacity-wise_player_1_component_1442-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_1_component_1442-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_1_component_1442 captions-foreground-opacity-wise_player_1_component_1442 captions-foreground-opacity-wise_player_1_component_1442-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_1_component_1442">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_1_component_1442" for="vjs_select_1470" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442" id="vjs_select_1470"><option id="captions-background-color-wise_player_1_component_1442-Black" value="#000" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-Black">Black</option><option id="captions-background-color-wise_player_1_component_1442-White" value="#FFF" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-White">White</option><option id="captions-background-color-wise_player_1_component_1442-Red" value="#F00" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-Red">Red</option><option id="captions-background-color-wise_player_1_component_1442-Green" value="#0F0" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-Green">Green</option><option id="captions-background-color-wise_player_1_component_1442-Blue" value="#00F" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-Blue">Blue</option><option id="captions-background-color-wise_player_1_component_1442-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-Yellow">Yellow</option><option id="captions-background-color-wise_player_1_component_1442-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-Magenta">Magenta</option><option id="captions-background-color-wise_player_1_component_1442-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442 captions-background-color-wise_player_1_component_1442-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_1_component_1442" for="vjs_select_1471" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-opacity-wise_player_1_component_1442" id="vjs_select_1471"><option id="captions-background-opacity-wise_player_1_component_1442-Opaque" value="1" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-opacity-wise_player_1_component_1442 captions-background-opacity-wise_player_1_component_1442-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_1_component_1442-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-opacity-wise_player_1_component_1442 captions-background-opacity-wise_player_1_component_1442-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_1_component_1442-Transparent" value="0" aria-labelledby="captions-background-wise_player_1_component_1442 captions-background-opacity-wise_player_1_component_1442 captions-background-opacity-wise_player_1_component_1442-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_1_component_1442">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_1_component_1442" for="vjs_select_1472" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442" id="vjs_select_1472"><option id="captions-window-color-wise_player_1_component_1442-Black" value="#000" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-Black">Black</option><option id="captions-window-color-wise_player_1_component_1442-White" value="#FFF" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-White">White</option><option id="captions-window-color-wise_player_1_component_1442-Red" value="#F00" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-Red">Red</option><option id="captions-window-color-wise_player_1_component_1442-Green" value="#0F0" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-Green">Green</option><option id="captions-window-color-wise_player_1_component_1442-Blue" value="#00F" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-Blue">Blue</option><option id="captions-window-color-wise_player_1_component_1442-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-Yellow">Yellow</option><option id="captions-window-color-wise_player_1_component_1442-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-Magenta">Magenta</option><option id="captions-window-color-wise_player_1_component_1442-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442 captions-window-color-wise_player_1_component_1442-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_1_component_1442" for="vjs_select_1473" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-opacity-wise_player_1_component_1442" id="vjs_select_1473"><option id="captions-window-opacity-wise_player_1_component_1442-Transparent" value="0" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-opacity-wise_player_1_component_1442 captions-window-opacity-wise_player_1_component_1442-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_1_component_1442-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-opacity-wise_player_1_component_1442 captions-window-opacity-wise_player_1_component_1442-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_1_component_1442-Opaque" value="1" aria-labelledby="captions-window-wise_player_1_component_1442 captions-window-opacity-wise_player_1_component_1442 captions-window-opacity-wise_player_1_component_1442-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_1_component_1442">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_1_component_1442" id="vjs_select_1474"><option id="captions-font-size-wise_player_1_component_1442-50" value="0.50" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-50">50%</option><option id="captions-font-size-wise_player_1_component_1442-75" value="0.75" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-75">75%</option><option id="captions-font-size-wise_player_1_component_1442-100" value="1.00" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-100">100%</option><option id="captions-font-size-wise_player_1_component_1442-125" value="1.25" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-125">125%</option><option id="captions-font-size-wise_player_1_component_1442-150" value="1.50" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-150">150%</option><option id="captions-font-size-wise_player_1_component_1442-175" value="1.75" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-175">175%</option><option id="captions-font-size-wise_player_1_component_1442-200" value="2.00" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-200">200%</option><option id="captions-font-size-wise_player_1_component_1442-300" value="3.00" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-300">300%</option><option id="captions-font-size-wise_player_1_component_1442-400" value="4.00" aria-labelledby="captions-font-size-wise_player_1_component_1442 captions-font-size-wise_player_1_component_1442-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_1_component_1442">Text Edge Style</legend><select aria-labelledby="wise_player_1_component_1442" id="vjs_select_1475"><option id="wise_player_1_component_1442-None" value="none" aria-labelledby="wise_player_1_component_1442 wise_player_1_component_1442-None">None</option><option id="wise_player_1_component_1442-Raised" value="raised" aria-labelledby="wise_player_1_component_1442 wise_player_1_component_1442-Raised">Raised</option><option id="wise_player_1_component_1442-Depressed" value="depressed" aria-labelledby="wise_player_1_component_1442 wise_player_1_component_1442-Depressed">Depressed</option><option id="wise_player_1_component_1442-Uniform" value="uniform" aria-labelledby="wise_player_1_component_1442 wise_player_1_component_1442-Uniform">Uniform</option><option id="wise_player_1_component_1442-Dropshadow" value="dropshadow" aria-labelledby="wise_player_1_component_1442 wise_player_1_component_1442-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_1_component_1442">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_1_component_1442" id="vjs_select_1476"><option id="captions-font-family-wise_player_1_component_1442-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_1_component_1442 captions-font-family-wise_player_1_component_1442-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_1_component_1442-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_1_component_1442 captions-font-family-wise_player_1_component_1442-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_1_component_1442-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_1_component_1442 captions-font-family-wise_player_1_component_1442-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_1_component_1442-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_1_component_1442 captions-font-family-wise_player_1_component_1442-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_1_component_1442-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_1_component_1442 captions-font-family-wise_player_1_component_1442-Casual">Casual</option><option id="captions-font-family-wise_player_1_component_1442-Script" value="script" aria-labelledby="captions-font-family-wise_player_1_component_1442 captions-font-family-wise_player_1_component_1442-Script">Script</option><option id="captions-font-family-wise_player_1_component_1442-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_1_component_1442 captions-font-family-wise_player_1_component_1442-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="1" class="wiseplayershaw"></div></div></div>     </div>     <p>创建投播需要通过setExtras()声明应用支持投播功能，初始化投播组件AVCastPicker，同时通过媒体会话注册设备改变事件监听。用户交互时，触发AVCastPicker组件弹出设备选择的半模态弹窗，待设备选定后，应用需依次执行投播媒体信息设置、投播媒体资源准备（prepare）和投播媒体资源播放启动（start）来将本端音视频资源投播到远端继续播放。</p>     <p><strong>时序图</strong></p>     <div class="fignone">      <span class="figcap"><b>图10 </b>创建投播时序图</span>      <br><span><img height="360.0975" originheight="5525" originwidth="8025" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163255.30673154166267329082287213392076:50001231000000:2800:7631DCC17DD0B2AE744BDE93E0E4DDE9DD66A9987A12E49CED823C954E768D05.png" title="点击放大" width="523.6875"></span>     </div>     <p><strong>开发步骤</strong></p>     <ol>      <li>接入播控中心后，在创建投播前，需要通过AVSession.setExtras({requireAbilityList: ['url-cast']})告知系统应用当前支持投播功能，才能成功发起投播。        <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L68-L70" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.AVSession.setExtras({</li><li>  <span class="hljs-string">'requireAbilityList'</span>: [<span class="hljs-string">'url-cast'</span>]</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AVSessionController.ets#L68-L70" target="_blank">AVSessionController.ets</a></div></div></div></div></li>      <li>在音频播放页绘制投播组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-multimedia-avcastpicker#avcastpicker" target="_blank">AVCastPicker</a>，用于拉起半模态弹窗选择投播设备。        <div class="fignone">        <span class="figcap"><b>图11 </b>发起投播界面</span>        <br><span><img height="549.2900000000001" originheight="2257" originwidth="1557" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163256.92709912699045321856169214626705:50001231000000:2800:C9404F4BD42CF25D57B14D292D93DAACE2A8E9C3F44603664D2D77BBDFB35C3F.png" title="点击放大" width="378.94360000000006"></span>       </div>       <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/TopAreaComponent.ets#L87-L89" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title function_">AVCastPicker</span>({</li><li>  <span class="hljs-variable">normalColor</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">color</span>, <span class="hljs-variable">activeColor</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">color</span>,</li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/TopAreaComponent.ets#L87-L89" target="_blank">TopAreaComponent.ets</a></div></div></div></div></li>      <li>设置播放设备变化的监听事件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#onoutputdevicechange10" target="_blank">AVSession.on('outputDeviceChange')</a>，当用户选择投播设备并切换成功后，播控中心会自动接管远端设备的播放控制，无需开发者额外设置。开发者只需在相应的回调函数中实现本端音频的播放控制逻辑即可。        <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L92-L124" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.avSessionController?.AVSession?.on(<span class="hljs-string">'outputDeviceChange'</span>, async (connectState: avSession.ConnectionState,</li><li>  device: avSession.OutputDeviceInfo) =&gt; {</li><li>  let currentDevice: avSession.DeviceInfo = device?.devices?.[<span class="hljs-number">0</span>];</li><li>  <span class="hljs-keyword">this</span>.deviceInfo = currentDevice;</li><li>  <span class="hljs-keyword">if</span> (currentDevice.castCategory === avSession.AVCastCategory.CATEGORY_REMOTE &amp;&amp;</li><li>    connectState === avSession.ConnectionState.STATE_CONNECTED) {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-keyword">this</span>.isCasting = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-keyword">this</span>.startCast(<span class="hljs-keyword">this</span>.currentTime, <span class="hljs-keyword">this</span>.selectIndex);</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>})</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L92-L124" target="_blank">ControlAreaComponent.ets</a></div></div></div></div></li>      <li>设置投播媒体资源，以投播本地资源为例，具体步骤如下：        <p>a.构建播放列表项<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10" target="_blank">avSession.AVQueueItem</a>。需要传入的媒体元数据为assetId（播放列表媒体ID，应用自定义）、title（媒体标题）、artist（媒体专辑作者）、subtitle（播放列表媒体子标题）、mediaType（媒体类型）、mediaImage（媒体图片像素数据）、fdSrc（播放列表媒体本地文件的句柄，系统通过该标识符定位具体的媒体文件）、startPosition（播放列表媒体起始播放位置）、duration（媒体播放时长）、lyricContent（播放列表媒体歌词内容）。</p>       <p>b.通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#prepare10" target="_blank">avCastController.prepare()</a>准备媒体播放资源，即进行播放资源的加载和缓冲。</p>       <p>c.通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#start10" target="_blank">avCastController.start()</a>启动播放媒体资源。</p>       <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L58-L84" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">playItem</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVQueueItem</span>;</li><li><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-variable">context</span> &amp;&amp; <span class="hljs-variable">songItem</span>.<span class="hljs-variable">lyric</span>) {</li><li>  <span class="hljs-variable">lyricContent</span> = <span class="hljs-variable">await</span> <span class="hljs-title function_">getRawStringData</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">context</span>, <span class="hljs-variable">songItem</span>.<span class="hljs-variable">lyric</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">file</span> = <span class="hljs-variable">await</span> <span class="hljs-variable">fileIo</span>.<span class="hljs-keyword">open</span>(<span class="hljs-keyword">this</span>.<span class="hljs-variable">context</span>?.<span class="hljs-variable">filesDir</span> + <span class="hljs-string">'/'</span> + <span class="hljs-variable">curSrc</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">avFileDescriptor</span>: <span class="hljs-title class_">media</span>.<span class="hljs-title class_">AVFileDescriptor</span> = { <span class="hljs-variable">fd</span>: <span class="hljs-title class_">file</span>.<span class="hljs-title class_">fd</span> };</li><li>  <span class="hljs-variable">playItem</span> = {</li><li>    <span class="hljs-variable">itemId</span>: <span class="hljs-keyword">this</span>.<span class="hljs-title class_">musicIndex</span>,</li><li>    <span class="hljs-variable">description</span>: {</li><li>      <span class="hljs-variable">assetId</span>: <span class="hljs-string">'AUDIO-'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title class_">stringify</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title class_">musicIndex</span>),</li><li>      <span class="hljs-variable">title</span>: <span class="hljs-title class_">songItem</span>.<span class="hljs-title class_">title</span>,</li><li>      <span class="hljs-variable">artist</span>: <span class="hljs-title class_">songItem</span>.<span class="hljs-title class_">singer</span>,</li><li>      <span class="hljs-variable">subtitle</span>: <span class="hljs-string">'audio'</span>,</li><li>      <span class="hljs-variable">mediaType</span>: <span class="hljs-string">'AUDIO'</span>,</li><li>      <span class="hljs-variable">albumCoverUri</span>: <span class="hljs-title class_">songItem</span>.<span class="hljs-title class_">albumCoverUri</span>,</li><li>      <span class="hljs-variable">fdSrc</span>: <span class="hljs-title class_">avFileDescriptor</span>,</li><li>      <span class="hljs-variable">startPosition</span>: <span class="hljs-title class_">startPosition</span>,</li><li>      <span class="hljs-variable">duration</span>: <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title class_">get</span>('<span class="hljs-title class_">durationTime</span>'),</li><li>      <span class="hljs-variable">lyricContent</span>: <span class="hljs-title class_">lyricContent</span>,</li><li>    }</li><li>  };</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>?.<span class="hljs-title function_">prepare</span>(<span class="hljs-variable">playItem</span>);</li><li>  <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>?.<span class="hljs-title function_">start</span>(<span class="hljs-variable">playItem</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, `<span class="hljs-keyword">open</span> <span class="hljs-variable">file</span> ${<span class="hljs-variable">err</span>}`);</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L58-L84" target="_blank">AudioCastController.ets</a></div></div></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section23051450141317">本端控制远端音频播放<i class="anchor-icon anchor-icon-link" anchorid="section23051450141317" tips="复制节点链接"></i></h3>          <div class="fignone">      <span class="figcap"><b>图12 </b>本端控制远端音频播放</span>      <div class="video-box" style="width: 424.5px; height: 195.747px;"><div id="wise_player_2" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.91069527393098288784622273080276:50001231000000:2800:D5C107787A8247DBC10EFF38C7FDEC173C6C3E9E9BB8805AC3083C9398BC03A3.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_2-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.91069527393098288784622273080276:50001231000000:2800:D5C107787A8247DBC10EFF38C7FDEC173C6C3E9E9BB8805AC3083C9398BC03A3.mp4" id="wise_player_2_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163258.91069527393098288784622273080276:50001231000000:2800:D5C107787A8247DBC10EFF38C7FDEC173C6C3E9E9BB8805AC3083C9398BC03A3.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-27"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-28"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:09"><div class="vjs-load-progress" style="width: 100%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">100.00%</span></span><div data-start="0" data-end="0.776" style="left: 0%; width: 8.55%;"></div><div data-start="8.984" data-end="9.0753" style="left: 98.99%; width: 1.01%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:09</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_2_component_225">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_2_component_225"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_2_component_332_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_2_component_332_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_2_component_338_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_2_component_338_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_2_component_338">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_2_component_338" for="vjs_select_364" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338" id="vjs_select_364"><option id="captions-foreground-color-wise_player_2_component_338-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-White">White</option><option id="captions-foreground-color-wise_player_2_component_338-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Black">Black</option><option id="captions-foreground-color-wise_player_2_component_338-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Red">Red</option><option id="captions-foreground-color-wise_player_2_component_338-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Green">Green</option><option id="captions-foreground-color-wise_player_2_component_338-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Blue">Blue</option><option id="captions-foreground-color-wise_player_2_component_338-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_2_component_338-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_2_component_338-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338 captions-foreground-color-wise_player_2_component_338-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_2_component_338" for="vjs_select_365" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338" id="vjs_select_365"><option id="captions-foreground-opacity-wise_player_2_component_338-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_2_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338 captions-foreground-opacity-wise_player_2_component_338-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_2_component_338">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_2_component_338" for="vjs_select_366" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338" id="vjs_select_366"><option id="captions-background-color-wise_player_2_component_338-Black" value="#000" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Black">Black</option><option id="captions-background-color-wise_player_2_component_338-White" value="#FFF" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-White">White</option><option id="captions-background-color-wise_player_2_component_338-Red" value="#F00" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Red">Red</option><option id="captions-background-color-wise_player_2_component_338-Green" value="#0F0" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Green">Green</option><option id="captions-background-color-wise_player_2_component_338-Blue" value="#00F" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Blue">Blue</option><option id="captions-background-color-wise_player_2_component_338-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Yellow">Yellow</option><option id="captions-background-color-wise_player_2_component_338-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Magenta">Magenta</option><option id="captions-background-color-wise_player_2_component_338-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-color-wise_player_2_component_338 captions-background-color-wise_player_2_component_338-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_2_component_338" for="vjs_select_367" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338" id="vjs_select_367"><option id="captions-background-opacity-wise_player_2_component_338-Opaque" value="1" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_2_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_2_component_338-Transparent" value="0" aria-labelledby="captions-background-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338 captions-background-opacity-wise_player_2_component_338-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_2_component_338">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_2_component_338" for="vjs_select_368" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338" id="vjs_select_368"><option id="captions-window-color-wise_player_2_component_338-Black" value="#000" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Black">Black</option><option id="captions-window-color-wise_player_2_component_338-White" value="#FFF" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-White">White</option><option id="captions-window-color-wise_player_2_component_338-Red" value="#F00" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Red">Red</option><option id="captions-window-color-wise_player_2_component_338-Green" value="#0F0" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Green">Green</option><option id="captions-window-color-wise_player_2_component_338-Blue" value="#00F" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Blue">Blue</option><option id="captions-window-color-wise_player_2_component_338-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Yellow">Yellow</option><option id="captions-window-color-wise_player_2_component_338-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Magenta">Magenta</option><option id="captions-window-color-wise_player_2_component_338-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-color-wise_player_2_component_338 captions-window-color-wise_player_2_component_338-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_2_component_338" for="vjs_select_369" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338" id="vjs_select_369"><option id="captions-window-opacity-wise_player_2_component_338-Transparent" value="0" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_2_component_338-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_2_component_338-Opaque" value="1" aria-labelledby="captions-window-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338 captions-window-opacity-wise_player_2_component_338-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_2_component_338">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_2_component_338" id="vjs_select_370"><option id="captions-font-size-wise_player_2_component_338-50" value="0.50" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-50">50%</option><option id="captions-font-size-wise_player_2_component_338-75" value="0.75" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-75">75%</option><option id="captions-font-size-wise_player_2_component_338-100" value="1.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-100">100%</option><option id="captions-font-size-wise_player_2_component_338-125" value="1.25" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-125">125%</option><option id="captions-font-size-wise_player_2_component_338-150" value="1.50" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-150">150%</option><option id="captions-font-size-wise_player_2_component_338-175" value="1.75" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-175">175%</option><option id="captions-font-size-wise_player_2_component_338-200" value="2.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-200">200%</option><option id="captions-font-size-wise_player_2_component_338-300" value="3.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-300">300%</option><option id="captions-font-size-wise_player_2_component_338-400" value="4.00" aria-labelledby="captions-font-size-wise_player_2_component_338 captions-font-size-wise_player_2_component_338-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_2_component_338">Text Edge Style</legend><select aria-labelledby="wise_player_2_component_338" id="vjs_select_371"><option id="wise_player_2_component_338-None" value="none" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-None">None</option><option id="wise_player_2_component_338-Raised" value="raised" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Raised">Raised</option><option id="wise_player_2_component_338-Depressed" value="depressed" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Depressed">Depressed</option><option id="wise_player_2_component_338-Uniform" value="uniform" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Uniform">Uniform</option><option id="wise_player_2_component_338-Dropshadow" value="dropshadow" aria-labelledby="wise_player_2_component_338 wise_player_2_component_338-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_2_component_338">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_2_component_338" id="vjs_select_372"><option id="captions-font-family-wise_player_2_component_338-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_2_component_338-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_2_component_338-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_2_component_338-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_2_component_338-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-Casual">Casual</option><option id="captions-font-family-wise_player_2_component_338-Script" value="script" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-Script">Script</option><option id="captions-font-family-wise_player_2_component_338-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_2_component_338 captions-font-family-wise_player_2_component_338-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="2" class="wiseplayershaw"></div></div></div>     </div>     <p>开发者可以采用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#sendcontrolcommand10" target="_blank">avCastController.sendControlCommand()</a>接口控制远端设备的播放状态，通过在command参数中传入不同的投播控制指令并设置相关参数，可以控制远端播放、暂停、播放进度、音量和循环模式等。具体指令与功能的对应关系可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#avcastcontrolcommandtype10" target="_blank">AVCastControlCommandType</a>。</p>     <p><strong>时序图</strong></p>     <div class="fignone">      <span class="figcap"><b>图13 </b>本端控制远端音频播放时序图</span>      <br><span><img height="116.70750000000001" originheight="2169" originwidth="9688" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163256.97800349233804933035972884895667:50001231000000:2800:B7ADFDD1CE73DA7AD181E892DD4BB1D57CAB55694C0BF0BA34E2647ED2C31536.png" title="点击放大" width="523.6875"></span>     </div>     <p><strong>开发步骤</strong></p>     <p>以下为通过传入'play'指令在本端控制远端设备播放的示例代码：</p>     <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L149-L150" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-variable">avCommand</span>: <span class="hljs-title class_">avSession</span>.<span class="hljs-title class_">AVCastControlCommand</span> = { <span class="hljs-variable">command</span>: <span class="hljs-string">'play'</span> };</li><li><span class="hljs-variable">await</span> <span class="hljs-keyword">this</span>.<span class="hljs-variable">avCastController</span>?.<span class="hljs-title function_">sendControlCommand</span>(<span class="hljs-variable">avCommand</span>);</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L149-L150" target="_blank">AudioCastController.ets</a></div></div></div></div>     <p>需要注意的是，在播放进度跳转、音量调节和循环模式设置时，需要传入时间（单位ms）、音量和循环模式参数。</p>     <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L166-L191" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">seek</span>(<span class="hljs-params">timeMS: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">avCommand</span>: avSession.<span class="hljs-property">AVCastControlCommand</span> = { <span class="hljs-attr">command</span>: <span class="hljs-string">'seek'</span>, <span class="hljs-attr">parameter</span>: timeMS };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">avCastController</span>?.<span class="hljs-title function_">sendControlCommand</span>(avCommand);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`avCastController sendControlCommand failed, the error is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">setAVCastVolume</span>(<span class="hljs-params">volume: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">avCommand</span>: avSession.<span class="hljs-property">AVCastControlCommand</span> = { <span class="hljs-attr">command</span>: <span class="hljs-string">'setVolume'</span>, <span class="hljs-attr">parameter</span>: volume };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">avCastController</span>?.<span class="hljs-title function_">sendControlCommand</span>(avCommand);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`avCastController sendControlCommand failed, the error is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">setPlayModel</span>(<span class="hljs-params">mode: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">avCommand</span>: avSession.<span class="hljs-property">AVCastControlCommand</span> = { <span class="hljs-attr">command</span>: <span class="hljs-string">'setLoopMode'</span>, <span class="hljs-attr">parameter</span>: mode };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">avCastController</span>?.<span class="hljs-title function_">sendControlCommand</span>(avCommand);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`avCastController sendControlCommand failed, the error is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L166-L191" target="_blank">AudioCastController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section178775217533">远端音频状态回传本端<i class="anchor-icon anchor-icon-link" anchorid="section178775217533" tips="复制节点链接"></i></h3>          <div class="fignone">      <span class="figcap"><b>图14 </b>远端音频状态回传本端</span>      <div class="video-box" style="width: 426px; height: 196.455px;"><div id="wise_player_3" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163259.99250030372014979492840041107266:50001231000000:2800:33A2A3E95780763673BA4E6127F23100914CDAEB40E117F22626028AD82A69D0.mp4" preload="none" class="edui-upload-video vjs-fluid vjs-default-skin video-js vjs-paused vjs_video_3-dimensions vjs-controls-enabled vjs-workinghover vjs-v7 vjs-user-active wise_player_3-dimensions vjs-v8" tabindex="-1" role="region" lang="cn" translate="no" aria-label="Video Player"><video class="vjs-tech" preload="none" videodata="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163259.99250030372014979492840041107266:50001231000000:2800:33A2A3E95780763673BA4E6127F23100914CDAEB40E117F22626028AD82A69D0.mp4" id="wise_player_3_html5_api" tabindex="-1" role="application" loop="" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/publicContent/011/111/111/0000000000011111111.20251211163259.99250030372014979492840041107266:50001231000000:2800:33A2A3E95780763673BA4E6127F23100914CDAEB40E117F22626028AD82A69D0.mp4"></video><div class="vjs-poster vjs-hidden" aria-disabled="false"></div><div class="vjs-title-bar vjs-hidden"><div class="vjs-title-bar-title" id="vjs-title-bar-title-408"></div><div class="vjs-title-bar-description" id="vjs-title-bar-description-409"></div></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button" type="button" title="Play" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play</span></button><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current Time&nbsp;</span><span class="vjs-current-time-display" role="presentation">0:00</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:00 of 0:08"><div class="vjs-load-progress" style="width: 10.9%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">10.90%</span></span><div data-start="0" data-end="0.878" style="left: 0%; width: 100%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 0%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: 0px;">0:00</div></div></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" role="presentation">0:08</span></div><div class="vjs-volume-panel vjs-control vjs-volume-panel-vertical"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-3" type="button" title="Mute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Mute</span></button><div class="vjs-volume-control vjs-control vjs-volume-vertical"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-vertical" role="slider" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="100%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-wise_player_3_component_593">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-wise_player_3_component_593"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.8x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.5x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="false"><span class="vjs-menu-item-text">1.2x</span><span class="vjs-control-text" aria-live="polite"></span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">1x</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="wise_player_3_component_700_description" aria-hidden="true" aria-label="Modal Window" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_3_component_700_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="wise_player_3_component_706_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog" aria-live="polite"><p class="vjs-modal-dialog-description vjs-control-text" id="wise_player_3_component_706_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg vjs-track-setting"><legend id="captions-text-legend-wise_player_3_component_706">Text</legend><span class="vjs-text-color"><label id="captions-foreground-color-wise_player_3_component_706" for="vjs_select_732" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706" id="vjs_select_732"><option id="captions-foreground-color-wise_player_3_component_706-White" value="#FFF" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-White">White</option><option id="captions-foreground-color-wise_player_3_component_706-Black" value="#000" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Black">Black</option><option id="captions-foreground-color-wise_player_3_component_706-Red" value="#F00" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Red">Red</option><option id="captions-foreground-color-wise_player_3_component_706-Green" value="#0F0" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Green">Green</option><option id="captions-foreground-color-wise_player_3_component_706-Blue" value="#00F" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Blue">Blue</option><option id="captions-foreground-color-wise_player_3_component_706-Yellow" value="#FF0" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Yellow">Yellow</option><option id="captions-foreground-color-wise_player_3_component_706-Magenta" value="#F0F" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Magenta">Magenta</option><option id="captions-foreground-color-wise_player_3_component_706-Cyan" value="#0FF" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706 captions-foreground-color-wise_player_3_component_706-Cyan">Cyan</option></select></span><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-wise_player_3_component_706" for="vjs_select_733" class="vjs-label">Opacity</label><select aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706" id="vjs_select_733"><option id="captions-foreground-opacity-wise_player_3_component_706-Opaque" value="1" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706-Opaque">Opaque</option><option id="captions-foreground-opacity-wise_player_3_component_706-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706 captions-foreground-opacity-wise_player_3_component_706-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg vjs-track-setting"><legend id="captions-background-wise_player_3_component_706">Text Background</legend><span class="vjs-bg-color"><label id="captions-background-color-wise_player_3_component_706" for="vjs_select_734" class="vjs-label">Color</label><select aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706" id="vjs_select_734"><option id="captions-background-color-wise_player_3_component_706-Black" value="#000" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Black">Black</option><option id="captions-background-color-wise_player_3_component_706-White" value="#FFF" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-White">White</option><option id="captions-background-color-wise_player_3_component_706-Red" value="#F00" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Red">Red</option><option id="captions-background-color-wise_player_3_component_706-Green" value="#0F0" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Green">Green</option><option id="captions-background-color-wise_player_3_component_706-Blue" value="#00F" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Blue">Blue</option><option id="captions-background-color-wise_player_3_component_706-Yellow" value="#FF0" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Yellow">Yellow</option><option id="captions-background-color-wise_player_3_component_706-Magenta" value="#F0F" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Magenta">Magenta</option><option id="captions-background-color-wise_player_3_component_706-Cyan" value="#0FF" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-color-wise_player_3_component_706 captions-background-color-wise_player_3_component_706-Cyan">Cyan</option></select></span><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-wise_player_3_component_706" for="vjs_select_735" class="vjs-label">Opacity</label><select aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706" id="vjs_select_735"><option id="captions-background-opacity-wise_player_3_component_706-Opaque" value="1" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706-Opaque">Opaque</option><option id="captions-background-opacity-wise_player_3_component_706-SemiTransparent" value="0.5" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-wise_player_3_component_706-Transparent" value="0" aria-labelledby="captions-background-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706 captions-background-opacity-wise_player_3_component_706-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window vjs-track-setting"><legend id="captions-window-wise_player_3_component_706">Caption Area Background</legend><span class="vjs-window-color"><label id="captions-window-color-wise_player_3_component_706" for="vjs_select_736" class="vjs-label">Color</label><select aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706" id="vjs_select_736"><option id="captions-window-color-wise_player_3_component_706-Black" value="#000" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Black">Black</option><option id="captions-window-color-wise_player_3_component_706-White" value="#FFF" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-White">White</option><option id="captions-window-color-wise_player_3_component_706-Red" value="#F00" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Red">Red</option><option id="captions-window-color-wise_player_3_component_706-Green" value="#0F0" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Green">Green</option><option id="captions-window-color-wise_player_3_component_706-Blue" value="#00F" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Blue">Blue</option><option id="captions-window-color-wise_player_3_component_706-Yellow" value="#FF0" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Yellow">Yellow</option><option id="captions-window-color-wise_player_3_component_706-Magenta" value="#F0F" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Magenta">Magenta</option><option id="captions-window-color-wise_player_3_component_706-Cyan" value="#0FF" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-color-wise_player_3_component_706 captions-window-color-wise_player_3_component_706-Cyan">Cyan</option></select></span><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-wise_player_3_component_706" for="vjs_select_737" class="vjs-label">Opacity</label><select aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706" id="vjs_select_737"><option id="captions-window-opacity-wise_player_3_component_706-Transparent" value="0" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706-Transparent">Transparent</option><option id="captions-window-opacity-wise_player_3_component_706-SemiTransparent" value="0.5" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-wise_player_3_component_706-Opaque" value="1" aria-labelledby="captions-window-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706 captions-window-opacity-wise_player_3_component_706-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-wise_player_3_component_706">Font Size</legend><select aria-labelledby="captions-font-size-wise_player_3_component_706" id="vjs_select_738"><option id="captions-font-size-wise_player_3_component_706-50" value="0.50" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-50">50%</option><option id="captions-font-size-wise_player_3_component_706-75" value="0.75" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-75">75%</option><option id="captions-font-size-wise_player_3_component_706-100" value="1.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-100">100%</option><option id="captions-font-size-wise_player_3_component_706-125" value="1.25" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-125">125%</option><option id="captions-font-size-wise_player_3_component_706-150" value="1.50" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-150">150%</option><option id="captions-font-size-wise_player_3_component_706-175" value="1.75" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-175">175%</option><option id="captions-font-size-wise_player_3_component_706-200" value="2.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-200">200%</option><option id="captions-font-size-wise_player_3_component_706-300" value="3.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-300">300%</option><option id="captions-font-size-wise_player_3_component_706-400" value="4.00" aria-labelledby="captions-font-size-wise_player_3_component_706 captions-font-size-wise_player_3_component_706-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="wise_player_3_component_706">Text Edge Style</legend><select aria-labelledby="wise_player_3_component_706" id="vjs_select_739"><option id="wise_player_3_component_706-None" value="none" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-None">None</option><option id="wise_player_3_component_706-Raised" value="raised" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Raised">Raised</option><option id="wise_player_3_component_706-Depressed" value="depressed" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Depressed">Depressed</option><option id="wise_player_3_component_706-Uniform" value="uniform" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Uniform">Uniform</option><option id="wise_player_3_component_706-Dropshadow" value="dropshadow" aria-labelledby="wise_player_3_component_706 wise_player_3_component_706-Dropshadow">Drop shadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-wise_player_3_component_706">Font Family</legend><select aria-labelledby="captions-font-family-wise_player_3_component_706" id="vjs_select_740"><option id="captions-font-family-wise_player_3_component_706-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-wise_player_3_component_706-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-wise_player_3_component_706-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-wise_player_3_component_706-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-wise_player_3_component_706-Casual" value="casual" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-Casual">Casual</option><option id="captions-font-family-wise_player_3_component_706-Script" value="script" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-Script">Script</option><option id="captions-font-family-wise_player_3_component_706-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-wise_player_3_component_706 captions-font-family-wise_player_3_component_706-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" title="Close Modal Dialog" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div><div wiseplayerindex="3" class="wiseplayershaw"></div></div></div>     </div>     <p>开发者可以采用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#onplaybackstatechange10" target="_blank">avCastController.on('playbackStateChange')</a>接口监听远端设备播放状态的变化，通过在filter参数中传入不同的播放状态字段和callback参数设置相应的回调函数，可以将远端的播放状态（播放、暂停、上一首/下一首切换和播放进度等信息）同步到本端。具体的播放状态属性可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avplaybackstate10" target="_blank">AVPlaybackState</a>。</p>     <p><strong>时序图</strong></p>     <div class="fignone">      <span class="figcap"><b>图15 </b>远端音频状态回传本端时序图</span>      <br><span><img height="238.4025" originheight="4463" originwidth="9775" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163257.08635206296884414949838162108311:50001231000000:2800:115DE90020CCC8086BDAED12851E8824446666D07C83D05585D5418C66D0E9AF.png" title="点击放大" width="523.6875"></span>     </div>     <p><strong>开发步骤</strong></p>     <p>开发者可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-track" target="_blank">@Track</a>装饰器管理这些经常被改变的状态变量，以便在远端播放状态变化时，实时响应并自动刷新本端音频状态。以下为获取远端已播放时长并同步给本端的示例代码：</p>     <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L30-L226" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AudioCastController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Controller</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-meta">@Track</span> <span class="hljs-attr">elapsedTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">setAVCastCallback</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">unregisterCastListener</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// ...</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">avCastController</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playbackStateChange'</span>, [<span class="hljs-string">'position'</span>], <span class="hljs-function">(<span class="hljs-params">playbackState: avSession.AVPlaybackState</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (playbackState.<span class="hljs-property">position</span>) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">elapsedTime</span> = playbackState.<span class="hljs-property">position</span>.<span class="hljs-property">elapsedTime</span>;</li><li>        }</li><li>      });</li><li>      <span class="hljs-comment">// ...</span></li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`avCastController on event failed, the error is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/controller/AudioCastController.ets#L30-L226" target="_blank">AudioCastController.ets</a></div></div></div></div>    </div>    <div class="tiledSection">     <h3 id="section153951118172510">资源切换<i class="anchor-icon anchor-icon-link" anchorid="section153951118172510" tips="复制节点链接"></i></h3>          <p>投播过程中，在完成本首播放或用户触发音频切换时，只需重新设置音频资源即可实现音频切换，无需断开投播连接。</p>     <p><strong>开发步骤</strong></p>     <ol>      <li>当切换音频时，触发音频资源的重新设置，设置资源的具体方法可参考<a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section148446619451">创建投播</a>。</li>      <li>在本端通过点击播放页面列表中的音频和上一首/下一首操作按钮的方式，或通过点击播控中心上一首/下一首操作按钮的方式来触发音频资源的重新设置。        <p>通过播放页切换音频：</p>       <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L471-L500" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_public_previous'</span>))</li><li>  <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">playNextOrPrevious</span>(<span class="hljs-string">'previous'</span>);</li><li>  })</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.ic_public_next'</span>))</li><li>  <span class="hljs-comment">// ...</span></li><li>  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">playNextOrPrevious</span>(<span class="hljs-string">'next'</span>);</li><li>  })</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L471-L500" target="_blank">ControlAreaComponent.ets</a></div></div></div></div>       <p>通过播控中心切换音频：</p>       <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L243-L248" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.avSessionController.AVSession?.on(<span class="hljs-string">'playNext'</span>, () =&gt; {</li><li>  <span class="hljs-keyword">this</span>.playNextOrPrevious(<span class="hljs-string">'next'</span>);</li><li>});</li><li><span class="hljs-keyword">this</span>.avSessionController.AVSession?.on(<span class="hljs-string">'playPrevious'</span>, () =&gt; {</li><li>  <span class="hljs-keyword">this</span>.playNextOrPrevious(<span class="hljs-string">'previous'</span>);</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L243-L248" target="_blank">ControlAreaComponent.ets</a></div></div></div></div></li>      <li>采用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#onplayprevious10" target="_blank">avCastController.on('playPrevious')</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#onplaynext10" target="_blank">avCastController.on('playNext')</a>接口监听远端上一首/下一首切换事件，并在回调函数中重新设置音频资源。        <div class="screenLinkPre"><div _ngcontent-itk-c106="" class="highlight-div"><div _ngcontent-itk-c106="" class="highlight-div-header"><div _ngcontent-itk-c106="" class="highlight-div-header-left"><div _ngcontent-itk-c106="" class="handle-button expand-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-itk-c106="" class="highlight-div-header-right"><div _ngcontent-itk-c106="" class="handle-button ai-button"></div><div _ngcontent-itk-c106="" class="handle-button line-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-itk-c106="" class="handle-button theme-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-itk-c106="" class="handle-button copy-button"><div _ngcontent-itk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-itk-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-kotlin" codehub="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L215-L220" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">this</span>.audioCastController.avCastController?.on(<span class="hljs-string">'playNext'</span>, () =&gt; {</li><li>  <span class="hljs-keyword">this</span>.playNextOrPrevious(<span class="hljs-string">'next'</span>);</li><li>});</li><li><span class="hljs-keyword">this</span>.audioCastController.avCastController?.on(<span class="hljs-string">'playPrevious'</span>, () =&gt; {</li><li>  <span class="hljs-keyword">this</span>.playNextOrPrevious(<span class="hljs-string">'previous'</span>);</li><li>});</li></ol></pre><div class="screen-link-div"><a href="https://gitee.com/harmonyos_samples/AudioCast/blob/master/entry/src/main/ets/component/ControlAreaComponent.ets#L215-L220" target="_blank">ControlAreaComponent.ets</a></div></div></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h3 id="section10877141421614">投播音质切换<i class="anchor-icon anchor-icon-link" anchorid="section10877141421614" tips="复制节点链接"></i></h3>          <p><strong>时序图</strong></p>     <div class="fignone">      <span class="figcap"><b>图16 </b>切换投播音质时序图</span>      <br><span><img height="134.6625" originheight="2494" originwidth="9688" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211163258.86867463045060657380934614967774:50001231000000:2800:D52C0C4244D15F8FE329A6CBB55A4DA2BB891D63AD5780D55F85AA54407798B8.png" title="点击放大" width="523.6875"></span>     </div>     <p>投播过程中，当用户触发音质切换功能时，开发者只需根据对应音质重新设置不同的投播资源即可实现音质的切换，无需断开投播连接。设置资源的具体方法可参考<a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section148446619451">创建投播</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>需要注意的是，要将当前音频的播放进度（startPosition）同步设置给新的音频资源，以确保切换前后音频状态的同步。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="section712783051914">常见问题<i class="anchor-icon anchor-icon-link" anchorid="section712783051914" tips="复制节点链接"></i></h2>         </div>    <div class="tiledSection">     <h3 id="section1349610281695" class="firsth2">创建AVCastPicker后应用界面未显示<i class="anchor-icon anchor-icon-link" anchorid="section1349610281695" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>打开音乐播放页，右上角的投播组件没有显示。</p>     <p><strong>可能原因</strong></p>     <ol>      <li>未初始化媒体会话AVSession。</li>      <li>未配置媒体会话元数据AVMetaDate。</li>      <li>未声明当前应用支持投播功能。</li>     </ol>     <p><strong>解决措施</strong></p>     <ol>      <li>创建并激活媒体会话AVSession。</li>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setavmetadata10" target="_blank">AVSession.setAVMetadata()</a>设置媒体会话元数据AVMetaData。</li>      <li>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setextras10" target="_blank">AVSession.setExtras()</a>声明当前应用支持投播功能。</li>     </ol>     <p><strong>参考链接</strong></p>     <ul>      <li><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section641024718268">媒体会话初始化</a></li>      <li><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section343315312467">设置媒体会话元数据</a></li>      <li><a href="/consumer/cn/doc/best-practices/bpta-audio-cast#section148446619451">创建投播</a></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="section19425133071015">投播后远端黑屏，无音频播放<i class="anchor-icon anchor-icon-link" anchorid="section19425133071015" tips="复制节点链接"></i></h3>          <p><strong>问题现象</strong></p>     <p>投播后，本端显示已切换到远端设备，但是远端黑屏，无音频播放。</p>     <p><strong>可能原因</strong></p>     <ol>      <li>未配置投播媒体元数据。</li>      <li>未加载或启动媒体资源的播放。</li>      <li>远端设备不支持当前投播的音频类型。</li>     </ol>     <p><strong>解决措施</strong></p>     <ol>      <li>配置投播媒体元数据<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10" target="_blank">avSession.AVQueueItem</a>。</li>      <li>依次调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#prepare10" target="_blank">avCastController.prepare()</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avcastcontroller#start10" target="_blank">avCastController.start()</a>接口加载并启动媒体资源的播放。</li>      <li>检查远端设备是否支持当前投播的音频类型。</li>     </ol>    </div>    <div class="tiledSection">     <h2 id="section122641843162812">示例代码<i class="anchor-icon anchor-icon-link" anchorid="section122641843162812" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitee.com/harmonyos_samples/AudioCast" target="_blank">实现音频投播功能</a></li>     </ul>    </div>   </div>   <div></div></div>