# 神兵图录 App - 项目需求文档

## 一、项目概述

### 1.1 产品名称
- 中文名：神兵图录
- 英文名：Legendary Armory

### 1.2 产品定位
一款聚焦全球传说兵器的图鉴类工具 App，提供神兵浏览、铸造传说、战斗模拟、知识挑战等功能。面向武侠/奇幻游戏玩家、兵器收藏爱好者、历史文化爱好者等小众但高粘性用户群体。

### 1.3 核心卖点
- 视觉冲击力强：传说兵器自带史诗感（轩辕剑金龙缠绕、雷神之锤闪电环绕、圣剑光芒万丈）
- 内容有深度：每件兵器背后都有英雄传说、铸造秘史和文化象征
- 跨文化融合：覆盖中国、日本、欧洲、北欧、印度等多文化体系的传说兵器
- 互动性强：兵器对战模拟、知识挑战答题、属性测试、每日占卜

### 1.4 技术方案
- **纯前端项目**，无后端服务
- 数据本地 JSON 文件存储
- 用户数据使用本地存储（LocalStorage / 首选项）
- AI 图片生成：使用豆包 Doubao-Seedream-4.5 预生成所有图片素材
- 目标平台：鸿蒙 HarmonyOS

### 1.5 当前开发状态

**版本**: v1.1.3
**完成度**: 0%
**最后更新**: 2025年12月27日

#### 开发计划

| 模块 | 功能 | 状态 | 完成度 |
|------|------|------|--------|
| **首页发现** | 轮播推荐、快速入口、搜索 | ⏳ 计划中 | 0% |
| **神兵图鉴** | 列表页、详情页、分类浏览 | ⏳ 计划中 | 0% |
| **铸造大师** | 传奇铸造师图鉴 | ⏳ 计划中 | 0% |
| **兵器百科** | 文化体系、属性元素、技能词典 | ⏳ 计划中 | 0% |
| **挑战答题** | 4种模式、成就系统、排行榜 | ⏳ 计划中 | 0% |
| **互动娱乐** | 每日神兵占卜、属性测试、对战模拟 | ⏳ 计划中 | 0% |
| **专题故事** | 专题列表、专题详情 | ⏳ 计划中 | 0% |
| **我的页面** | 收藏、历史、统计、设置 | ⏳ 计划中 | 0% |

---

## 二、功能模块

### 2.1 首页 - 发现

#### 2.1.1 轮播推荐
- **传说神兵精选轮播**：展示各文化体系的顶级神兵（如轩辕剑、雷神之锤、草薙剑等）
- 每日精选神兵（配 AI 生成高清大图 + 简短传说）
- 专题推荐（如"中国十大名剑"、"北欧神器谱"、"东方妖刀录"）

#### 2.1.2 快速入口
- 文化分类（中国/日本/欧洲/北欧/印度/阿拉伯/凯尔特）
- 兵器类型（剑/刀/锤/斧/矛/弓/法杖/其他）
- 属性分类（火/冰/雷/光/暗/风/毒）
- 品质分类（神器/传说/史诗/稀有）
- 我的收藏

#### 2.1.3 搜索
- 支持按名称、文化、类型、属性、主人搜索
- 热门搜索词推荐（如"轩辕剑"、"Excalibur"、"草薙剑"）
- 纯本地搜索，过滤 JSON 数据

---

### 2.2 铸造大师图鉴（新增模块）

#### 2.2.1 传奇铸造师概览

图鉴采用"**铸造师→神兵**"的层次结构，铸造师作为兵器的创造者，展示其铸造的传说兵器。

**核心铸造师列表（5大文化，20位大师）**：

| 文化体系 | 铸造师（中文/原名） | 代表作品 | 传说故事 |
| :--- | :--- | :--- | :--- |
| **中国** | **欧冶子** | 龙渊剑、泰阿剑、工布剑 | 春秋时期越国铸剑大师，铸剑时引天火淬炼 |
| | **干将莫邪** | 干将剑、莫邪剑 | 夫妻铸剑师，莫邪投身炉中成就绝世双剑 |
| | **风胡子** | 承影剑、含光剑、宵练剑 | 铸造春秋三大名剑，剑锋薄如蝉翼 |
| **日本** | **天目一箇神** | 草薙剑（传说参与锻造） | 日本神话中的铁匠神，独眼之神 |
| | **千代金道** | 童子切安纲、鬼丸国纲 | 平安时代名匠，作品被奉为国宝 |
| | **正宗（冈崎正宗）** | 正宗刀 | 镰仓时代最伟大刀匠，日本刀之神 |
| | **村正** | 妖刀村正 | 伊势国刀匠，作品被传闻蕴含妖气 |
| **欧洲** | **维兰德（Wayland）** | 米木龙剑、格拉墨 | 北欧神话中的铁匠，精灵族后裔 |
| | **圣丹斯坦** | 多把圣剑（传说） | 中世纪传说铁匠，圣徒身份 |
| | **赫菲斯托斯（Hephaestus）** | 阿喀琉斯之盾、雷霆权杖 | 希腊神话火神、工匠之神 |
| **北欧** | **矮人兄弟（布洛克&辛德里）** | 雷神之锤、永恒之枪、金鬃野猪 | 北欧神话中最伟大的矮人铁匠 |
| | **伊瓦尔迪之子** | 冈尼尔之矛、金发 | 精湛的矮人工匠，为众神打造宝物 |
| **印度** | **毗首羯磨（Vishvakarma）** | 苏达尔善神轮、三叉戟 | 印度神话中的建筑之神、工匠之神 |
| **阿拉伯** | **阿辛迪巴（传说铁匠）** | 佐勒菲卡尔（双刃剑） | 伊斯兰传说中的神兵铸造者 |

#### 2.2.2 铸造师详情页

- AI 生成高清铸造师大图（在铸造间工作的场景）
- 基本信息卡片：
  - 名称（原文 + 中文 + 英文）
  - 所属文化体系
  - 时代背景
  - 铸造特色（如"引天火淬炼"、"以血祭剑"）
- 传说故事：完整的铸造师传说
- 铸造技艺：独特的锻造技法
- 代表作品：该铸造师打造的神兵列表
- 历史影响：对后世的影响

---

### 2.3 神兵图鉴

#### 2.3.1 分类体系

```
├── 按文化体系（12个文化）
│   ├── 中国（轩辕剑、湛卢剑、赤霄剑、泰阿剑、龙渊剑、干将剑、莫邪剑、鱼肠剑、纯钧剑、巨阙剑、承影剑、含光剑、宵练剑、青釭剑、倚天剑、屠龙刀、方天画戟、青龙偃月刀、丈八蛇矛...）
│   ├── 日本（草薙剑、天丛云剑、三日月宗近、童子切安纲、大典太光世、数珠丸恒次、鬼丸国纲、村正、正宗、菊一文字、长船、备前长船、鬼切、蜘蛛切、雷切、天羽羽斩...）
│   ├── 希腊（宙斯雷霆、波塞冬三叉戟、哈迪斯双叉戟、阿瑞斯之剑、阿波罗之弓、阿喀琉斯之盾、阿喀琉斯之矛、珀尔修斯之剑、赫拉克勒斯之棍、阿尔忒弥斯之弓、赫淮斯托斯铁锤...）
│   ├── 北欧（雷神之锤Mjolnir、永恒之枪Gungnir、提尔锋Tyrfing、格拉墨Gram、达因斯莱夫Dainsleif、米木龙Mimung、列瓦汀Lævateinn、弗雷之剑、霜巨人之斧...）
│   ├── 凯尔特（光明之剑Claíomh Solais、应答者Fragarach、倒刺之矛Gáe Bolg、卡拉德博尔格Caladbolg、布里欧纳克Brionac、卡恩温南匕首Carnwennan、库丘林之枪、努阿达之剑...）
│   ├── 欧洲中世纪（王者之剑Excalibur、杜兰达尔Durandal、欢喜剑Joyeuse、寇尔坦纳Curtana、卡利伯恩Caliburn、克拉伦特Clarent、朗基努斯之枪、圣乔治之剑、圣米迦勒之剑、阿斯卡隆之枪...）
│   ├── 印度（苏达尔善神轮、湿婆三叉戟Trishula、梵天神箭Brahmastra、帕舒帕塔Pashupatastra、因陀罗雷杵Vajra、伽刚特尔棒Kaumodaki、毗湿奴之弓、纳拉亚那神箭、阿格尼之矛、阎摩之杖...）
│   ├── 阿拉伯（佐勒菲卡尔Zulfiqar、阿里之剑、萨拉丁之剑、大马士革弯刀、伊斯兰圣剑、阿拉伯弯刀Saif...）
│   ├── 埃及（沃斯权杖Was、科佩什弯刀Khopesh、阿努比斯之杖、荷鲁斯之矛、塞特之权杖、拉神权杖、奥西里斯之杖、图特之权杖...）
│   ├── 波斯（绿宝石神剑Shamshir-e Zomorrodnegar、波斯弯刀Shamshir、不朽军弓、扎尔之弓、鲁斯塔姆之矛、波斯战斧...）
│   ├── 中美洲（玛雅黑曜石刀剑Macuahuitl、阿兹特克投矛器Atlatl、黑曜石长矛Tepoztopilli、祭祀刀Tecpatl、羽蛇神之矛、玛雅战棒、阿兹特克战斧...）
│   └── 非洲（祖鲁短矛Assegai、埃塞俄比亚弯刀Shotel、马赛短剑Simi、祖鲁战矛Iklwa、投掷棒Rungu、努比亚战斧、马赛长矛...）
│
├── 按兵器类型（15个大类）
│   ├── 剑类（双刃直剑、单刃剑、阔剑、细剑、巨剑、圣剑、魔剑...）
│   ├── 刀类（唐刀、武士刀、弯刀、砍刀、大刀、苗刀、朴刀...）
│   ├── 重型斧锤（战锤、巨斧、双刃斧、投掷斧、狼牙棒、骨朵...）
│   ├── 长柄武器（长枪、长矛、戟、方天画戟、青龙偃月刀、薙刀...）
│   ├── 叉戟类（三叉戟、鱼叉、钢叉、虎叉...）
│   ├── 远程武器（长弓、复合弓、弩、连弩、投矛、标枪、飞斧...）
│   ├── 法杖权杖（魔法杖、祭司权杖、锡杖、禅杖、巫师法杖...）
│   ├── 匕首短刃（匕首、刺剑、袖剑、短刀、护身刀...）
│   ├── 链条武器（链锤、流星锤、鞭链、九节鞭、三节棍...）
│   ├── 镰刀类（战镰、草镰刀、苦无、钩镰...）
│   ├── 棍棒类（长棍、铁棍、狼牙棒、金箍棒、权杖...）
│   ├── 软兵器（鞭、链、绳镖、飞爪...）
│   ├── 盾牌类（圆盾、塔盾、铁盾、神盾、反击盾...）
│   ├── 爪钩类（虎爪、铁爪、飞爪、钩镰、鹰爪...）
│   └── 特殊兵器（回旋镖、手里剑、查克拉、飞轮、战扇、铁伞...）
│
├── 按属性元素（14个元素）
│   ├── 火属性（烈焰剑、炎魔之锤、火焰长矛、燃烧之刃...）
│   ├── 水属性（深海三叉戟、波涛之刃、水龙剑、潮汐之矛...）
│   ├── 冰属性（寒冰剑、霜寒之锤、极寒之矛、冰封利刃...）
│   ├── 雷属性（雷神之锤、雷切、紫电、霹雳斧、雷鸣之矛...）
│   ├── 风属性（风神剑、疾风之刃、岚切、旋风战斧...）
│   ├── 土/岩属性（大地之锤、岩石巨斧、山岳之盾、磐石之矛...）
│   ├── 光/神圣（圣剑、光明之刃、圣裁之剑、天使之翼、破邪之矛...）
│   ├── 暗/邪恶（暗影刃、黑暗收割者、噬魂、恶魔之爪、堕落之镰...）
│   ├── 毒属性（毒刃、蛇牙、碧血、剧毒匕首、蝎尾鞭...）
│   ├── 自然/木属性（生命之杖、荆棘之鞭、橡树之矛、藤蔓战锤...）
│   ├── 时空属性（时间之刃、虚空之剑、次元斩、空间裂隙...）
│   ├── 死亡/亡灵（死神镰刀、亡灵收割者、骷髅之杖、诅咒之剑...）
│   ├── 混沌/混合（混沌之刃、双元素剑、阴阳双剑、五行神兵...）
│   └── 特殊元素（音波之刃、血之魔剑、精神之杖、幻象之刃、星辰之矛...）
│
├── 按品质等级
│   ├── 神器级（开天辟地、斩神灭魔的终极武器）
│   ├── 传说级（英雄史诗、改变历史的名器）
│   ├── 史诗级（名震一方、流传千古的宝物）
│   └── 稀有级（工艺精湛、非凡之作）
│
└── 按使用者
    ├── 神明之器（众神使用的兵器）
    ├── 英雄之刃（传奇英雄的武器）
    ├── 君王之剑（帝王将相的象征）
    └── 刺客之器（隐秘致命的兵器）
```

#### 2.3.2 列表页
- 瀑布流/网格布局展示神兵缩略图
- 显示兵器名称、类型、属性图标、品质
- 支持多维度筛选和排序
- 品质用不同颜色边框标识（神器-金色、传说-紫色、史诗-蓝色、稀有-绿色）

#### 2.3.3 详情页
- AI 生成高清神兵大图（支持缩放手势）
- 基本信息卡片：
  - 名称（原文 + 中文 + 英文）
  - 所属文化体系
  - 兵器类型（剑/刀/锤/斧等）
  - 属性类型（火/冰/雷等）
  - 品质等级（神器/传说/史诗/稀有）
  - 著名持有者
  - 铸造者
- 铸造传说：完整的锻造故事
- 战斗传说：使用该兵器的著名战役
- 武器属性：
  - 攻击力、防御力、速度、重量
  - 特殊能力（如"斩龙"、"破魔"、"吸血"）
  - 属性加成
- 象征意义：文化象征、精神寓意
- 铭文刻字：兵器上的铭文或符文
- 相关兵器推荐（同文化/同类型/同主人）

---

### 2.4 兵器百科

#### 2.4.1 属性元素图鉴
每个属性元素单独成页，展示：
- 属性名称（中英文）
- 属性图标及配色（火-红、冰-蓝、雷-紫、光-金、暗-黑）
- 象征含义
- 代表兵器列表
- 属性相克关系图

#### 2.4.2 文化体系介绍
每个兵器文化单独成页：
- 文化背景介绍
- 兵器铸造史
- 代表性神兵
- 铸造特色与技艺

#### 2.4.3 技能词典
神兵常见技能中英对照 + 说明：
- 元素技能（火焰斩、冰封、雷击、圣光裁决...）
- 物理技能（破甲、连击、旋风斩、盾击...）
- 特殊能力（吸血、回血、灵魂绑定、诅咒...）
- 被动天赋（自动修复、嗜血、破魔、龙裔克制...）

---

### 2.5 挑战答题系统

#### 2.5.1 答题模式

**经典模式**：
- 固定20题，难度混合
- 每题15秒倒计时
- 答对得分，连击加成
- 完成后显示成绩和排名

**速度模式**：
- 固定30题，时间压力大
- 每题10秒倒计时
- 强调快速反应
- 连击倍率更高

**无尽模式**：
- 无题目数量限制
- 3条生命值
- 答错扣生命，全失败结束
- 挑战最高分数和连击

**专题模式**：
- 选择专题（神兵/铸造师/文化/属性/技能）
- 15题，难度渐进
- 专题知识深度测试
- 完成后解锁专题成就

#### 2.5.2 游戏机制

**倒计时系统**：
- 环形进度条显示剩余时间
- 时间不同颜色提示（绿→橙→红）
- 超时自动判定为错误

**连击系统**：
- 连续答对触发连击
- 连击倍率：1x → 1.5x → 2x → 3x
- 答错打断连击
- 连击数实时显示

**积分系统**：
- 基础分：简单10分、中等20分、困难30分
- 连击加成：分数 × 连击倍率
- 时间加成：剩余时间越多加成越高
- 分数弹窗动画提示

**生命值系统**（无尽模式）：
- 初始3条生命
- 答错或超时扣1条
- 生命值图标实时显示
- 生命耗尽游戏结束

#### 2.5.3 成就系统

**成就分类**：
- 里程碑成就：首次答题、累计答题、连胜记录
- 精准成就：满分答题、完美连击、极速答题
- 知识成就：专题大师、文化学者、属性专家
- 收集成就：成就收集者、全能选手、兵器博士

**成就徽章**：
- 普通（绿色）：基础成就
- 稀有（蓝色）：进阶成就
- 史诗（紫色）：高难度成就
- 传说（金色）：终极成就

**奖励机制**：
- 解锁成就获得积分奖励
- 成就进度实时追踪
- 成就展示与分享

#### 2.5.4 排行榜系统

**排行榜分类**：
- 按模式分组：经典、速度、无尽、专题
- 按难度分组：简单、中等、困难、混合
- 个人最佳记录
- 全局排行榜（本地）

**排名展示**：
- 前10名排行榜
- 个人排名标记
- 分数、连击、用时显示
- 段位图标展示

**段位系统**：
- 青铜：0-500分
- 白银：500-1000分
- 黄金：1000-2000分
- 铂金：2000-3500分
- 钻石：3500分以上

#### 2.5.5 题库设计

**题目分类**：
- 神兵知识：兵器名称、属性、文化、持有者
- 铸造师知识：铸造师、铸造传说、代表作
- 文化知识：文化背景、铸造史、特色
- 属性知识：属性相克、象征、代表兵器
- 技能知识：技能分类、效果、使用条件

**难度分级**：
- 简单：基础知识，直接记忆
- 中等：需要理解和推理
- 困难：深度知识，需要综合判断

**题目格式**：
- 单选题为主
- 4个选项（A/B/C/D）
- 配有题目解释
- 标注难度和分类

**题库规模**：
- 初期：100+ 道题目
- 目标：300+ 道题目
- 持续更新扩展

---

### 2.6 专题故事

#### 2.6.1 图文专题
静态图文内容，预置在 App 内：
- 《中国十大名剑传奇》
- 《日本刀的锻造艺术》
- 《欧洲圣剑传说》
- 《北欧神器谱系》
- 《历史上真实存在的名刀名剑》
- 《东西方兵器文化对比》

#### 2.6.2 铸造技艺解析
- 中国古代铸剑术
- 日本折返锻打法
- 大马士革钢纹理
- 淬火与回火工艺
- 配合图示和动画展示

---

### 2.7 互动娱乐

#### 2.7.1 每日神兵占卜
- 随机抽取一把神兵
- 显示该神兵象征的今日运势
- 分享功能

#### 2.7.2 属性测试
- 问答测试，判断用户的武器属性
- 推荐对应属性的守护神兵

#### 2.7.3 兵器对战模拟
- 选择两把神兵进行属性对比
- 显示属性相克关系
- 模拟战斗结果（基于属性、品质、技能计算）
- 娱乐向战力分析

#### 2.7.4 铸造师测试
- 测试你是哪位传奇铸造师
- 基于性格和喜好推荐

---

### 2.8 我的（本地功能）

- **我的兵器库**：收藏的神兵列表（本地存储）
- **浏览历史**：最近浏览记录（本地存储）
- **我的成就**：解锁的成就徽章
- **答题统计**：答题记录、排名、段位
- **设置**：主题切换（深色/浅色）、清除缓存
- **关于**：版本信息、内容来源说明

---

## 三、数据结构设计

### 3.1 神兵数据（weapons.json）

```typescript
interface LegendaryWeapon {
  id: string;
  name: {
    original: string;      // 原文名称
    cn: string;            // 中文名称
    en: string;            // 英文名称
  };
  culture: 'chinese' | 'japanese' | 'greek' | 'norse' | 'celtic' | 'medieval_europe' | 'indian' | 'arabian' | 'egyptian' | 'persian' | 'mesoamerican' | 'african' | 'mixed';
  type: 'sword' | 'katana' | 'hammer' | 'axe' | 'spear' | 'bow' | 'staff' | 'dagger' | 'polearm' | 'trident' | 'chain_weapon' | 'scythe' | 'club' | 'soft_weapon' | 'shield' | 'claw' | 'throwing' | 'other';
  attributes: {
    primary: 'fire' | 'water' | 'ice' | 'thunder' | 'wind' | 'earth' | 'light' | 'dark' | 'poison' | 'nature' | 'time_space' | 'death' | 'chaos' | 'special';
    secondary?: 'fire' | 'water' | 'ice' | 'thunder' | 'wind' | 'earth' | 'light' | 'dark' | 'poison' | 'nature' | 'time_space' | 'death' | 'chaos' | 'special';
  };
  rarity: 'artifact' | 'legendary' | 'epic' | 'rare';
  stats: {
    attack: number;        // 攻击力 1-100
    defense: number;       // 防御力 1-100
    speed: number;         // 速度 1-100
    weight: number;        // 重量（kg）
  };
  description: string;     // 中文通俗描述
  forging_legend: string;  // 铸造传说完整故事
  battle_legend: string;   // 战斗传说
  abilities: string[];     // 能力 ID 列表
  symbolism: string;       // 象征意义
  inscription: string;     // 铭文刻字
  famous_owners: {
    name: string;
    title: string;         // 称号（如"亚瑟王"、"项羽"）
    story: string;
  }[];
  blacksmith_id?: string;  // 铸造者 ID
  appearance: {
    blade_type: string;    // 剑身类型
    guard_type: string;    // 护手类型
    handle_type: string;   // 剑柄类型
    colors: string[];      // 主要颜色
    features: string[];    // 关键特征
  };
  image: string;           // 图片文件名
  related: string[];       // 相关神兵 ID
  tags: string[];          // 标签，用于搜索
}
```

### 3.2 铸造师数据（blacksmiths.json）

```typescript
interface Blacksmith {
  id: string;
  name: {
    original: string;
    cn: string;
    en: string;
  };
  culture: 'chinese' | 'japanese' | 'greek' | 'norse' | 'celtic' | 'medieval_europe' | 'indian' | 'arabian' | 'egyptian' | 'persian' | 'mesoamerican' | 'african';
  era: string;             // 时代（如"春秋时期"、"平安时代"）
  title: string;           // 称号（如"铸剑鼻祖"、"刀圣"）
  description: string;     // 简介
  legend: string;          // 完整传说故事
  forging_technique: string; // 独特锻造技艺
  masterworks: string[];   // 代表作品（神兵 ID 列表）
  specialty: string;       // 专长（如"引天火淬炼"、"以血祭剑"）
  image: string;           // 图片文件名
}
```

### 3.3 技能数据（abilities.json）

```typescript
interface Ability {
  id: string;
  name_cn: string;
  name_en: string;
  category: 'elemental' | 'physical' | 'special' | 'passive';
  description: string;
  attribute?: 'fire' | 'water' | 'ice' | 'thunder' | 'wind' | 'earth' | 'light' | 'dark' | 'poison' | 'nature' | 'time_space' | 'death' | 'chaos' | 'special';
  famous_usage: {
    weapon_id: string;
    description: string;
  }[];
}
```

### 3.4 属性数据（attributes.json）

```typescript
interface Attribute {
  id: 'fire' | 'water' | 'ice' | 'thunder' | 'wind' | 'earth' | 'light' | 'dark' | 'poison' | 'nature' | 'time_space' | 'death' | 'chaos' | 'special';
  name_cn: string;
  name_en: string;
  color: string;          // 代表色
  symbol: string;         // 符号/图标
  meaning: string;        // 象征含义
  category: 'natural' | 'mystical' | 'special';  // 元素分类（自然系/神秘系/特殊系）
  strengths: string[];    // 克制的属性
  weaknesses: string[];   // 被克制的属性
  representative_weapons: string[]; // 代表兵器 ID
}
```

### 3.5 文化体系数据（cultures.json）

```typescript
interface CultureSystem {
  id: 'chinese' | 'japanese' | 'greek' | 'norse' | 'celtic' | 'medieval_europe' | 'indian' | 'arabian' | 'egyptian' | 'persian' | 'mesoamerican' | 'african';
  name_cn: string;
  name_en: string;
  region: string;         // 地理区域
  period: string;         // 时代背景
  background: string;     // 文化背景介绍
  forging_history: string; // 兵器铸造史
  features: string[];     // 文化特色
  weapon_characteristics: string[];  // 兵器特点
  representative_weapons: string[]; // 代表兵器 ID
  representative_blacksmiths: string[]; // 代表铸造师 ID
}
```

### 3.6 答题数据（questions.json）

```typescript
interface Question {
  id: string;
  category: 'weapon' | 'blacksmith' | 'culture' | 'attribute' | 'ability';
  difficulty: 'easy' | 'medium' | 'hard';
  question: string;
  options: string[];      // 4个选项
  correct_answer: number; // 正确答案索引（0-3）
  explanation: string;    // 答案解释
  related_id?: string;    // 关联的神兵/铸造师ID
}
```

### 3.7 本地存储数据

```typescript
// 收藏列表
interface Favorites {
  weapon_ids: string[];
}

// 浏览历史
interface History {
  items: {
    weapon_id: string;
    timestamp: number;
  }[];
}

// 答题记录
interface QuizRecord {
  mode: 'classic' | 'speed' | 'endless' | 'topic';
  score: number;
  correct: number;
  total: number;
  combo: number;
  time: number;
  rank: string;           // 段位
  timestamp: number;
}

// 成就数据
interface Achievement {
  id: string;
  name: string;
  description: string;
  rarity: 'common' | 'rare' | 'epic' | 'legendary';
  unlocked: boolean;
  unlock_time?: number;
  progress?: number;      // 进度（0-100）
  total?: number;         // 总目标
}
```

---

## 四、页面设计要求

### 4.1 整体风格
- **主色调**：深蓝黑渐变 #0a0a1a → #1a1a2e（金属质感、史诗感）
- **强调色**：金色 #ffd700（神器品质）、紫色 #9d4edd（传说品质）、蓝色 #4cc9f0（史诗品质）、绿色 #3cb371（稀有品质）
- **背景**：深色金属纹理主题，突出兵器金属光泽
- **详情页背景**：AI 生成的深色金属纹理、铸造间、战场等沉浸式背景（4K 超高清），确保文字高对比度清晰可读，无人物干扰
- **装饰**：金属光泽、火花特效、符文纹样、铸造元素
- **字体**：标题使用刚硬有力的字体（如思源黑体 Bold），正文清晰易读

### 4.2 AI 生成背景图片规范

所有详情页背景图片均采用 AI 生成，确保视觉统一性和沉浸式体验：

**背景设计要求**：
- 深蓝黑色调为主，营造史诗金属质感
- 4K 超高清分辨率，适配手机 App 展示
- 无人物、无完整兵器（避免干扰页面内容）
- 确保文字高对比度，保证可读性
- 包含铸造元素（铁砧、火炉、火花、金属纹理等）

**详情页背景类型**：
- 文化体系详情背景（bg_culture_detail）：古代兵器架、铸造间、历史纹理
- 元素属性详情背景（bg_attribute_detail）：元素能量流、抽象符号、能量粒子
- 神兵详情背景（bg_weapon_detail）：金属纹理、符文光效、史诗氛围
- 铸造师详情背景（bg_blacksmith_detail）：铸造间、铁砧、火炉、工具
- 挑战详情背景（bg_challenge_detail）：竞技场、武器对决、战斗氛围
- 收藏页背景（bg_favorites）：兵器库、展示架、珍藏气息
- 历史记录背景（bg_history）：古代卷轴、历史记载、年代感
- 成就页背景（bg_achievements）：勋章纹理、荣誉徽章、成就光环
- 专题详情背景（bg_topic_detail）：书页纹理、知识图腾、文化符号

### 4.3 兵器配色方案

| 属性 | 主色 | 辅色 | 特效色 |
|------|------|------|--------|
| 火 | #ff4500 | #ff8c00 | #ffff00（火焰） |
| 冰 | #00bfff | #87ceeb | #ffffff（寒气） |
| 雷 | #9370db | #8a2be2 | #ffffff（闪电） |
| 光 | #ffd700 | #ffffe0 | #fffacd（圣光） |
| 暗 | #2f4f4f | #191970 | #8b008b（暗影） |
| 风 | #7fffd4 | #98fb98 | #f0ffff（气流） |
| 毒 | #228b22 | #32cd32 | #7fff00（毒雾） |

### 4.4 品质配色方案

| 品质 | 颜色 | 边框特效 |
|------|------|----------|
| 神器 | #ffd700（金色） | 金色发光边框 + 粒子特效 |
| 传说 | #9d4edd（紫色） | 紫色发光边框 + 光晕 |
| 史诗 | #4cc9f0（蓝色） | 蓝色发光边框 |
| 稀有 | #3cb371（绿色） | 绿色边框 |

### 4.5 关键页面

#### 首页
```
┌─────────────────────────┐
│  ⚔ 神兵图录 ⚔    [搜索] │
├─────────────────────────┤
│  ┌───────────────────┐  │
│  │   AI 生成神兵大图  │  │
│  │  今日精选: 轩辕剑  │  │
│  └───────────────────┘  │
├─────────────────────────┤
│  [中国⚔][日本🗡][欧洲⚒][北欧🔨]│
│  [火🔥][冰❄][雷⚡][光✨]│
├─────────────────────────┤
│  传说神兵               │
│  ┌───┐ ┌───┐ ┌───┐     │
│  │轩辕│ │草薙│ │圣剑│    │
│  └───┘ └───┘ └───┘     │
├─────────────────────────┤
│  专题推荐               │
│  ┌─────────────────┐    │
│  │ 中国十大名剑      │    │
│  └─────────────────┘    │
├─────────────────────────┤
│  [首页] [图鉴] [锻造] [我的]│
└─────────────────────────┘
```

#### 详情页
```
┌─────────────────────────┐
│  [返回]          [收藏❤]│
├─────────────────────────┤
│      ┌─────────┐        │
│      │         │        │
│      │ AI神兵  │        │
│      │  大图   │        │
│      │         │        │
│      └─────────┘        │
├─────────────────────────┤
│  轩辕剑 Xuanyuan Sword  │
│  ⚔ 中国 · 🔥火/⚡雷     │
│  ⭐ 神器级 · 帝王之剑    │
│  持有者: 黄帝           │
├─────────────────────────┤
│  [传说] [属性] [技能] [铭文]│
├─────────────────────────┤
│  黄帝铸此剑以诛蚩尤，     │
│  剑身刻有日月星辰...     │
├─────────────────────────┤
│  🔥 攻击: 95 | 防御: 80 │
│  ⚡ 速度: 85 | 重量: 3kg│
│  相关神兵               │
│  ┌───┐ ┌───┐ ┌───┐     │
└─────────────────────────┘
```

#### AI 锻造器页
```
┌─────────────────────────┐
│  [返回]   神兵锻造器     │
├─────────────────────────┤
│      ┌─────────┐        │
│      │         │        │
│      │ AI预览  │        │
│      │         │        │
│      └─────────┘        │
├─────────────────────────┤
│  文化体系: 中国 ▼        │
│  兵器类型: 剑 ▼          │
│  主属性:   🔥火 ▼        │
│  品质:     传说 ▼        │
├─────────────────────────┤
│  配色方案:              │
│  ● 烈焰红金             │
│  ○ 寒冰蓝银             │
│  ○ 雷霆紫金             │
├─────────────────────────┤
│  关键特征:              │
│  ☑ 龙纹 ☑ 火焰 □ 宝石  │
├─────────────────────────┤
│  剑身铭文:              │
│  [输入框: 天下无双]      │
├─────────────────────────┤
│       [AI 锻造神兵]      │
│       [保存到兵器库]     │
└─────────────────────────┘
```

---

## 五、目录结构建议（HarmonyOS ArkTS）

```
entry/src/main/
├── ets/
│   ├── pages/
│   │   ├── Index.ets              // 首页
│   │   ├── WeaponList.ets         // 神兵列表
│   │   ├── WeaponDetail.ets       // 神兵详情
│   │   ├── BlacksmithList.ets     // 铸造师列表
│   │   ├── BlacksmithDetail.ets   // 铸造师详情
│   │   ├── AbilityList.ets        // 技能百科
│   │   ├── CultureList.ets        // 文化体系列表
│   │   ├── Topic.ets              // 专题文章
│   │   ├── Search.ets             // 搜索页
│   │   ├── Quiz.ets               // 挑战答题
│   │   ├── DailyDivination.ets    // 每日占卜
│   │   ├── BattleSimulator.ets    // 对战模拟
│   │   └── Mine.ets               // 我的页面
│   │
│   ├── components/
│   │   ├── WeaponCard.ets         // 神兵卡片组件
│   │   ├── Banner.ets             // 轮播组件
│   │   ├── AttributeTag.ets       // 属性标签
│   │   ├── SearchBar.ets          // 搜索栏
│   │   ├── AttributeCircle.ets    // 属性相克关系图
│   │   └── RarityBorder.ets       // 品质边框组件
│   │
│   ├── model/
│   │   ├── LegendaryWeapon.ets    // 神兵数据模型
│   │   ├── Blacksmith.ets         // 铸造师数据模型
│   │   ├── Ability.ets            // 技能数据模型
│   │   ├── Attribute.ets          // 属性数据模型
│   │   ├── Question.ets           // 题目数据模型
│   │   └── UserData.ets           // 用户数据模型
│   │
│   ├── utils/
│   │   ├── DataLoader.ets         // JSON 数据加载
│   │   ├── Storage.ets            // 本地存储封装
│   │   ├── Search.ets             // 搜索工具
│   │   └── BattleCalculator.ets   // 战斗计算器
│   │
│   └── common/
│       ├── Constants.ets          // 常量定义
│       ├── Theme.ets              // 主题配置
│       └── AttributeColors.ets    // 属性配色方案
│
└── resources/
    └── rawfile/
        ├── data/
        │   ├── weapons.json       // 神兵数据
        │   ├── blacksmiths.json   // 铸造师数据
        │   ├── abilities.json     // 技能数据
        │   ├── attributes.json    // 属性数据
        │   ├── cultures.json      // 文化体系数据
        │   ├── questions.json     // 题目数据
        │   └── topics.json        // 专题数据
        │
        └── images/
            ├── weapons/           // AI 生成的神兵图片
            ├── blacksmiths/       // AI 生成的铸造师图片
            ├── backgrounds/       // AI 生成的背景图片
            ├── attributes/        // 属性图标
            └── cultures/          // 文化体系图标
```

---

## 六、开发计划

### Phase 1 - MVP（2-3 周）
- [ ] 项目初始化 & 基础架构
- [ ] 首页布局 + 轮播
- [ ] 神兵列表页（按文化分类）
- [ ] 神兵详情页
- [ ] 本地搜索功能
- [ ] 收藏功能（本地存储）
- [ ] 准备初始数据（50+ 神兵）
- [ ] AI 生成图片（预置）

### Phase 2 - 完善（2 周）
- [ ] 兵器百科模块（属性/文化/技能）
- [ ] 铸造师图鉴模块
- [ ] 更多分类维度（类型/属性/品质/持有者）
- [ ] 浏览历史
- [ ] 专题文章页面
- [ ] 每日占卜功能
- [ ] 属性测试
- [ ] 深色/浅色主题切换

### Phase 3 - 挑战答题（1-2 周）
- [ ] 答题系统 UI
- [ ] 4种答题模式
- [ ] 倒计时与连击系统
- [ ] 成就系统
- [ ] 排行榜系统
- [ ] 题库准备（100+ 题目）

### Phase 4 - 互动娱乐（1 周）
- [ ] 兵器对战模拟器
- [ ] 战力计算系统
- [ ] 铸造师测试

---

## 七、数据准备清单

### 7.1 首批内容（100+ 件神兵）

**中国神兵（20+）**：
- 十大名剑：轩辕剑、湛卢剑、赤霄剑、泰阿剑、龙渊剑、干将剑、莫邪剑、鱼肠剑、纯钧剑、巨阙剑
- 春秋三剑：承影剑、含光剑、宵练剑
- 神话兵器：方天画戟、青龙偃月刀、丈八蛇矛、青釭剑
- 武侠名器：倚天剑、屠龙刀、七星龙渊
- 其他：工布剑、胜邪剑、鸣鸿刀、虎翼刀

**日本神兵（18+）**：
- 三大神器：草薙剑（天丛云剑）、八尺琼勾玉之剑
- 天下五剑：三日月宗近、童子切安纲、大典太光世、数珠丸恒次、鬼丸国纲
- 名刀：村正、正宗、菊一文字、长船、备前长船
- 妖刀传说：妖刀村正、鬼切、蜘蛛切
- 神话之刃：天羽羽斩、雷切、布都御魂

**希腊神兵（12+）**：
- 众神之器：宙斯雷霆、波塞冬三叉戟、哈迪斯双叉戟、阿瑞斯之剑、阿波罗之弓
- 英雄之器：阿喀琉斯之盾、阿喀琉斯之矛、珀尔修斯之剑、赫拉克勒斯之棍
- 神匠之作：赫淮斯托斯铁锤、阿尔忒弥斯之弓、雅典娜之矛

**北欧神兵（10+）**：
- 神器：雷神之锤（Mjolnir）、永恒之枪（Gungnir）、提尔锋（Tyrfing）
- 英雄之剑：格拉墨（Gram）、米木龙（Mimung）、达因斯莱夫（Dainsleif）
- 其他神器：列瓦汀（Lævateinn火焰剑）、弗雷之剑、霜巨人之斧、耶梦加得之剑

**凯尔特神兵（10+）**：
- 四大神器：光明之剑（Claíomh Solais）、应答者（Fragarach）、倒刺之矛（Gáe Bolg）、布里欧纳克（Brionac）
- 英雄之器：卡拉德博尔格（Caladbolg）、卡恩温南匕首（Carnwennan）、库丘林之枪
- 王者之剑：努阿达之剑、费格斯之剑、康纳之刃

**欧洲中世纪神兵（12+）**：
- 圣剑传说：王者之剑（Excalibur）、卡利伯恩（Caliburn）、克拉伦特（Clarent）
- 查理曼圣剑：杜兰达尔（Durandal）、欢喜剑（Joyeuse）、寇尔坦纳（Curtana）
- 圣物：朗基努斯之枪、圣乔治之剑、圣米迦勒之剑
- 骑士之刃：阿斯卡隆之枪、格拉摩根之剑

**印度神兵（12+）**：
- 三大神器：苏达尔善神轮、湿婆三叉戟（Trishula）、因陀罗雷杵（Vajra）
- 神箭：梵天神箭（Brahmastra）、帕舒帕塔（Pashupatastra）、纳拉亚那神箭
- 神器：伽刚特尔棒（Kaumodaki）、毗湿奴之弓、阿格尼之矛
- 其他：阎摩之杖、迦梨之剑、伐楼拿之索

**阿拉伯神兵（8+）**：
- 圣剑：佐勒菲卡尔（Zulfiqar双刃剑）、阿里之剑、萨拉丁之剑
- 传说之刃：大马士革弯刀、伊斯兰圣剑
- 阿拉伯弯刀（Saif）系列：战士之刃、沙漠之牙、月光弯刀

**埃及神兵（10+）**：
- 神器权杖：沃斯权杖（Was）、阿努比斯之杖、塞特之权杖、拉神权杖
- 法老之器：科佩什弯刀（Khopesh）、荷鲁斯之矛、奥西里斯之杖
- 其他：图特之权杖、艾西斯之杖、巴斯特之爪

**波斯神兵（8+）**：
- 传说神剑：绿宝石神剑（Shamshir-e Zomorrodnegar）、波斯弯刀（Shamshir）
- 英雄之器：扎尔之弓、鲁斯塔姆之矛、不朽军弓
- 其他：波斯战斧、雅利安之剑、大流士之剑

**中美洲神兵（8+）**：
- 阿兹特克：玛雅黑曜石刀剑（Macuahuitl）、投矛器（Atlatl）、黑曜石长矛（Tepoztopilli）
- 玛雅：祭祀刀（Tecpatl）、玛雅战棒、羽蛇神之矛
- 其他：阿兹特克战斧、托尔特克神剑

**非洲神兵（8+）**：
- 祖鲁：祖鲁短矛（Assegai）、祖鲁战矛（Iklwa）、投掷棒（Rungu）
- 东非：埃塞俄比亚弯刀（Shotel）、马赛短剑（Simi）、马赛长矛
- 其他：努比亚战斧、贝宁青铜剑

### 7.2 铸造师数据（20位）

详见第2.2节铸造大师图鉴。

### 7.3 图片准备方案

**方案：AI 批量生成（豆包 Doubao-Seedream-4.5）**
- 使用豆包 AI 批量生成
- 提示词模板：
  ```
  {神兵名}，{文化}传说神兵，{兵器类型}，{属性}元素特效，{配色方案}，
  剑身铭刻{铭文特征}，{护手描述}，史诗级武器设计，电影级光影，
  4K超高清，oc渲染，光线追踪，景深，金属质感，暗黑风背景
  ```
- 图片规格：2K（2048x2048）或 4K（4096x4096）PNG
- 后期精修和风格统一

**示例提示词**：
```
中国传说神剑轩辕剑，金龙缠绕剑身，火焰雷电双属性特效，红金配色，
剑身铭刻日月星辰，龙首护手，黄金剑柄，神器级武器设计，
电影级光影，4K超高清，oc渲染，光线追踪，景深，超现实主义，
金属质感真实，暗黑风背景的光影效果营造出氛围，史诗感
```

### 7.4 AI 提示词模板库

```json
{
  "templates": {
    "chinese_sword": "{name}，中国传说神剑，{attribute}元素特效，{color_scheme}配色，剑身铭刻{inscription}，{guard_type}护手，{handle_type}剑柄，{rarity}级武器设计，电影级光影，4K超高清，oc渲染，光线追踪，金属质感，暗黑风背景，史诗感",
    "japanese_katana": "{name}，日本传说名刀，{attribute}元素特效，{color_scheme}配色，刀身{blade_pattern}，{guard_type}鍔，{handle_type}柄卷，{rarity}级武器设计，电影级光影，4K超高清，oc渲染，光线追踪，金属质感，武士道美学",
    "european_sword": "{name}，欧洲传说圣剑，{attribute}元素特效，{color_scheme}配色，剑身铭刻{inscription}，{guard_type}护手，{handle_type}剑柄，{rarity}级武器设计，电影级光影，4K超高清，oc渲染，光线追踪，金属质感，中世纪骑士风格",
    "norse_weapon": "{name}，北欧传说神器，{attribute}元素特效，{color_scheme}配色，雕刻{rune_pattern}，{guard_type}护手，{handle_type}握柄，{rarity}级武器设计，电影级光影，4K超高清，oc渲染，光线追踪，金属质感，维京史诗风格",
    "hammer": "{name}，传说战锤，{attribute}元素特效，{color_scheme}配色，锤头雕刻{pattern}，{handle_type}握柄，{rarity}级武器设计，电影级光影，4K超高清，oc渲染，光线追踪，金属质感，力量感爆棚",
    "spear": "{name}，传说长矛，{attribute}元素特效，{color_scheme}配色，矛头{spearhead_design}，{shaft_type}矛杆，{rarity}级武器设计，电影级光影，4K超高清，oc渲染，光线追踪，金属质感，锋锐感"
  }
}
```

### 7.5 内容来源
- Wikipedia 传说兵器条目
- 古代典籍（《越绝书》、《吴越春秋》、北欧萨迦、亚瑟王传奇等）
- AI 生成图片（豆包 Doubao-Seedream-4.5）
- 公共领域兵器插画

---

## 八、AI 图片生成方案

### 8.1 采用方案

**预生成打包方案**：
- 使用豆包 Doubao-Seedream-4.5 批量生成所有图片素材
- 所有图片在开发阶段预生成，打包到 App 内
- 无需联网、加载快、质量可控
- 纯离线应用，无运行时 API 调用

### 8.2 生成工具

使用项目自带的批量生成脚本：

```bash
# 批量生成神兵图片
python3 scripts/batch_image_gen.py --culture chinese --max-concurrent 3

# 生成所有文化的图片（断点续传）
python3 scripts/batch_image_gen.py
```

**技术参数**：
- API: 豆包 Doubao-Seedream-4.5 (doubao-seedream-4-5-251128)
- 分辨率: 2K (2048x2048) 或 4K
- 格式: PNG (base64)
- 无水印
- 提示词模板驱动

### 8.3 图片类别

需要生成的图片类型：
- **神兵图片**: 60-80 张（各文化体系）
- **铸造师图片**: 20 张（铸造场景）
- **背景图片**: 9 张（详情页沉浸式背景）
- **图标**: SVG 格式（属性、文化、品质等）

---

## 九、项目检查清单

- [ ] 确定 UI 设计稿（史诗金属风格）
- [ ] 准备 JSON 数据文件（神兵/铸造师/技能/属性/文化）
- [ ] AI 生成神兵图片素材（60-80 个）
- [ ] AI 生成铸造师图片素材（20 个）
- [ ] AI 生成背景图片素材（9 个）
- [ ] 开发首页
- [ ] 开发列表页（多维度分类）
- [ ] 开发详情页
- [ ] 开发搜索功能
- [ ] 开发收藏/历史功能
- [ ] 开发兵器百科
- [ ] 开发铸造师图鉴
- [ ] 开发挑战答题系统
- [ ] 开发互动功能（占卜/测试/对战）
- [ ] 测试 & 优化性能
- [ ] 提交华为商店审核

---

## 十、未来扩展方向

### 10.1 社交功能
- 神兵图鉴完成度排行榜
- 评论和点赞系统
- 兵器对战联机模式

### 10.2 游戏化
- 神兵收集成就系统
- 属性克制对战系统（PvP）
- 兵器升级/强化系统

### 10.3 AR 功能
- AR 观看神兵 3D 模型
- AR 拍照合影
- AR 对战模拟

### 10.4 内容扩展
- 更多文化体系（玛雅、阿兹特克、非洲部落兵器）
- 现代兵器（科幻武器、魔法科技融合）
- 用户投稿神兵
- 动漫游戏联名兵器（如《Fate》系列、《刀剑神域》等）

### 10.5 教育功能
- 真实历史兵器介绍
- 冶金学知识科普
- 兵器使用技法动画展示
- 兵器发展史时间线

---

**文档版本:** v1.1
**技术方案:** 纯前端 + AI 生成图片（预置 + 豆包 API）
**目标平台:** 鸿蒙 HarmonyOS
**最后更新:** 2025年12月27日
